// Generated by CoffeeScript
// ==UserScript==
// @name         appchan x
// @version      2.9.38
// @minGMVer     1.14
// @minFFVer     26
// @namespace    zixaphir
// @description  The most comprehensive 4chan userscript.
// @license      MIT; https://github.com/zixaphir/appchan-x/blob/master/LICENSE 
// @match        *://*.4chan.org/*
// @match        *://boards.4chan.org/*
// @match        *://sys.4chan.org/*
// @match        *://a.4cdn.org/*
// @match        *://i.4cdn.org/*
// @exclude      *://blog.4chan.org/*
// @exclude      *://dis.4chan.org/*
// @exclude      *://a.4cdn.org/*
// @grant        GM_getValue
// @grant        GM_setValue
// @grant        GM_deleteValue
// @grant        GM_listValues
// @grant        GM_openInTab
// @grant        GM_xmlhttpRequest
// @run-at       document-start
// @updateURL 	 appchan-x.meta.js
// @downloadURL  appchan-x.user.js
// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAAElBMVEX///8EZgR8ulSk0oT///8EAgQ1A88mAAAAAXRSTlMAQObYZgAAAIpJREFUeF6t0sENwjAMhWF84N4H6gAYMUBkdQMYwfuvwmstEeD4kl892P0OaaWcpga2/K0SGII1HNBXARgu7veoY3ANd+esgMHZIz85u0EABrbms3pl/bkC1Tn5ihGOfQwqHeZ/FdYdirEMgCG2ZAQWDTL0m9FvjAhcvoGNAK2gZhGYYX9+ZgFm9gaiNmNkMENY4QAAAABJRU5ErkJggg==
// ==/UserScript==

/*
* appchan x - Version 2.9.38 - 2014-10-27
*
* Licensed under the MIT license.
* https://github.com/zixaphir/appchan-x/blob/master/LICENSE
*
* Appchan X Copyright © 2013-2013 Zixaphir <zixaphirmoxphar@gmail.com>
* http://zixaphir.github.io/appchan-x/ 
* 4chan x Copyright © 2009-2011 James Campos <james.r.campos@gmail.com>
* https://github.com/aeosynth/4chan-x
* 4chan x Copyright © 2012-2014 Nicolas Stepien <stepien.nicolas@gmail.com>
* https://4chan-x.just-believe.in/
* 4chan x Copyright © 2013-2014 Jordan Bates <saudrapsmann@gmail.com>
* http://seaweedchan.github.io/4chan-x/
* 4chan x Copyright © 2012-2014 ihavenoface
* http://ihavenoface.github.io/4chan-x/
* 4chan SS Copyright © 2011-2013 Ahodesuka
* https://github.com/ahodesuka/4chan-Style-Script/ 
*
* Permission is hereby granted, free of charge, to any person
* obtaining a copy of this software and associated documentation
* files (the "Software"), to deal in the Software without
* restriction, including without limitation the rights to use,
* copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the
* Software is furnished to do so, subject to the following
* conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
* OTHER DEALINGS IN THE SOFTWARE.
*
* Contributors:
* aeosynth
* mayhemydg
* noface
* !K.WeEabo0o
* blaise
* that4chanwolf
* desuwa
* seaweed
* e000
* ahodesuka
* Shou
* ferongr
* xat
* Ongpot
* thisisanon
* Anonymous
* Seiba
* herpaderpderp
* WakiMiko
* btmcsweeney
* AppleBloom
* detharonil
*
* All the people who've taken the time to write bug reports.
*
* Thank you.
*/

/*
* Contains data from external sources:
*
* audio/beep.wav from http://freesound.org/people/pierrecartoons1979/sounds/90112/
*   cc-by-nc-3.0
*
* 4chan/4chan-JS (https://github.com/4chan/4chan-JS)
*   Copyright (c) 2012-2013, 4chan LLC
*   All rights reserved.
*
*   license: https://github.com/4chan/4chan-JS/blob/master/LICENSE
*
* jsColor: (http://jscolor.com/)
*   Copyright (c) Jan Odvarko, http://odvarko.cz
*
*   license: http://www.gnu.org/copyleft/lesser.html
*
*/
'use strict';

(function() {
  var $, $$, Anonymize, ArchiveLink, Banner, Board, Build, Callbacks, CatalogLinks, CatalogThread, Clone, Color, Conf, Config, CustomCSS, DataBoard, DeleteLink, Dice, DownloadLink, ExpandComment, ExpandThread, FappeTyme, Favicon, FileInfo, Filter, Flash, Fourchan, Gallery, Get, GlobalMessage, Header, IDColor, ImageExpand, ImageHover, ImageLoader, Index, JSColor, Keybinds, Labels, Linkify, Main, MascotTools, Mascots, Menu, Nav, Navigate, Notice, PSAHiding, Polyfill, Post, PostHiding, QR, QuoteBacklink, QuoteInline, QuoteMarkers, QuotePreview, QuoteStrikeThrough, QuoteThreading, Quotify, RandomAccessList, Recursive, Redirect, RelativeDates, RemoveSpoilers, Report, ReportLink, RevealSpoilers, Rice, Sauce, Settings, SimpleDict, Style, ThemeTools, Themes, Thread, ThreadExcerpt, ThreadStats, ThreadUpdater, ThreadWatcher, Time, TrashQueue, UI, Unread, Video, c, d, doc, editMascot, editTheme, g, userNavigation,
    __slice = [].slice,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  Array.prototype.indexOf = function(val, i) {
    var len;
    i || (i = 0);
    len = this.length;
    while (i < len) {
      if (this[i] === val) {
        return i;
      }
      i++;
    }
    return -1;
  };

  __indexOf = [].indexOf;

  Config = {
    main: {
      'Miscellaneous': {
        'JSON Navigation': [true, 'Use JSON for loading the Board Index and Threads. Also allows searching and sorting the board index and infinite scolling.'],
        'Update Stale Index': [true, 'Updates the board index if it hasn\'t been updated in ten or more minutes when 4chan gains browser focus (like switching tabs or windows).'],
        'Catalog Links': [true, 'Add toggle link in header menu to turn Navigation links into links to each board\'s catalog.'],
        'External Catalog': [false, 'Link to external catalog instead of the internal one.'],
        'Desktop Notifications': [false, 'Enables desktop notifications across various appchan x features.'],
        '404 Redirect': [true, 'Redirect dead threads and images.'],
        'Keybinds': [true, 'Bind actions to keyboard shortcuts.'],
        'Time Formatting': [true, 'Localize and format timestamps.'],
        'Relative Post Dates': [true, 'Display dates like "3 minutes ago". Tooltip shows the timestamp.'],
        'File Info Formatting': [true, 'Reformat the file information.'],
        'Thread Expansion': [true, 'Add buttons to expand threads.'],
        'Comment Expansion': [false, 'Expand Comments that are too long to display on the index. Does not work with JSON Navigation.'],
        'Index Navigation': [false, 'Add buttons to navigate between threads.'],
        'Reply Navigation': [false, 'Add buttons to navigate to top / bottom of thread.'],
        'Show Dice Roll': [true, 'Show dice that were entered into the email field.'],
        'Color User IDs': [false, 'Assign unique colors to user IDs on boards that use them'],
        'Remove Spoilers': [false, 'Remove all spoilers in text.'],
        'Reveal Spoilers': [false, 'Indicate spoilers if Remove Spoilers is enabled, or make the text appear hovered if Remove Spoiler is disabled.'],
        'Show Support Message': [true, 'Warn if your browser is unsupported. 4chan X may not operate correctly on unsupported browser versions.'],
        'Announcement Hiding': [true, 'Enable announcements to be hidden.']
      },
      'Linkification': {
        'Linkify': [true, 'Convert text into links where applicable.'],
        'Embedding': [true, 'Embed supported services.'],
        'Auto-embed': [false, 'Auto-embed Linkify Embeds.'],
        'Link Title': [true, 'Replace the link of a supported site with its actual title. Currently Supported: YouTube, Vimeo, SoundCloud, and Github gists']
      },
      'Filtering': {
        'Anonymize': [false, 'Make everyone Anonymous.'],
        'Filter': [true, 'Self-moderation placebo.'],
        'Recursive Hiding': [true, 'Hide replies of hidden posts, recursively.'],
        'Post Hiding': [false, 'Add buttons to hide posts.'],
        'Filtered Backlinks': [true, 'When enabled, shows backlinks to filtered posts with a line-through decoration. Otherwise, hides the backlinks.'],
        'Stubs': [true, 'Show stubs of hidden threads / replies.']
      },
      'Images and Videos': {
        'Image Expansion': [true, 'Expand images / videos.'],
        'Image Hover': [true, 'Show full image / video on mouseover.'],
        'Image Hover in Catalog': [false, 'Show a floating expanded image on hover in the catalog.'],
        'Gallery': [true, 'Adds a simple and cute image gallery.'],
        'PDF in Gallery': [false, 'Show PDF files in gallery.'],
        'Sauce': [true, 'Add sauce links to images.'],
        'Reveal Spoiler Thumbnails': [false, 'Replace spoiler thumbnails with the original image.'],
        'Replace GIF': [false, 'Replace gif thumbnails with the actual image.'],
        'Replace JPG': [false, 'Replace jpg thumbnails with the actual image.'],
        'Replace PNG': [false, 'Replace png thumbnails with the actual image.'],
        'Replace WEBM': [false, 'Replace webm thumbnails with the actual webm video. Probably will degrade browser performance ;)'],
        'Image Prefetching': [false, 'Preload images'],
        'Fappe Tyme': [false, 'Hide posts without images when toggled. *hint* *hint*'],
        'Werk Tyme': [false, 'Hide all post images when toggled.'],
        'Autoplay': [true, 'Videos begin playing immediately when opened.'],
        'Show Controls': [true, 'Show controls on videos expanded inline. Turn this off if you want to contract videos by clicking on them.'],
        'Allow Sound': [true, 'Allow sound in videos.'],
        'Loop in New Tab': [true, 'Loop videos opened in their own tabs, and apply settings for inline expanded videos to them.']
      },
      'Menu': {
        'Menu': [true, 'Add a drop-down menu to posts.'],
        'Report Link': [true, 'Add a report link to the menu.'],
        'Post Hiding Link': [true, 'Add a link to hide posts.'],
        'Delete Link': [true, 'Add post and image deletion links to the menu.'],
        'Archive Link': [true, 'Add an archive link to the menu.']
      },
      'Monitoring': {
        'Thread Updater': [true, 'Fetch and insert new replies. Has more options in its own dialog.'],
        'Unread Count': [true, 'Show the unread posts count in the tab title.'],
        'Hide Unread Count at (0)': [false, 'Hide the unread posts count in the tab title when it reaches 0.'],
        'Unread Favicon': [true, 'Show a different favicon when there are unread posts.'],
        'Unread Line': [true, 'Show a line to distinguish read posts from unread ones.'],
        'Scroll to Last Read Post': [true, 'Scroll back to the last read post when reopening a thread.'],
        'Thread Excerpt': [true, 'Show an excerpt of the thread in the tab title.'],
        'Thread Stats': [true, 'Display reply and image count.'],
        'Page Count in Stats': [false, 'Display the page count in the thread stats as well.'],
        'Updater and Stats in Header': [true, 'Places the thread updater and thread stats in the header instead of floating them.'],
        'Thread Watcher': [true, 'Bookmark threads.']
      },
      'Posting': {
        'Header Shortcut': [true, 'Add a shortcut to the header to toggle the QR.'],
        'Page Shortcut': [false, 'Add a shortcut to the top of the page to toggle the QR.'],
        'Persistent QR': [true, 'The Quick reply won\'t disappear after posting.'],
        'Auto Hide QR': [true, 'Automatically hide the quick reply when posting.'],
        'Open Post in New Tab': [true, 'Open new threads or replies to a thread from the index in a new tab.'],
        'Remember Spoiler': [false, 'Remember the spoiler state, instead of resetting after posting.'],
        'Remember QR Size': [false, 'Remember the size of the quick reply\'s comment field.'],
        'Cooldown': [true, 'Indicate the remaining time before posting again.'],
        'Posting Success Notifications': [true, 'Show notifications on successful post creation or file uploading.'],
        'Captcha Warning Notifications': [true, 'When disabled, shows a red border on the CAPTCHA input until a key is pressed instead of a notification.'],
        'Dump List Before Comment': [false, 'Position of the QR\'s Dump List.'],
        'Auto-load captcha': [false, 'Automatically load the captcha when you open a thread, and reload it after you post.']
      },
      'Quote Links': {
        'Quote Backlinks': [true, 'Add quote backlinks.'],
        'OP Backlinks': [true, 'Add backlinks to the OP.'],
        'Quote Inlining': [true, 'Inline quoted post on click.'],
        'Quote Hash Navigation': [false, 'Include an extra link after quotes for autoscrolling to quoted posts.'],
        'Forward Hiding': [true, 'Hide original posts of inlined backlinks.'],
        'Quote Previewing': [true, 'Show quoted post on hover.'],
        'Quote Highlighting': [true, 'Highlight the previewed post.'],
        'Resurrect Quotes': [true, 'Link dead quotes to the archives.'],
        'Quoted Title': [false, 'Change the page title to reflect you\'ve been quoted.'],
        'Highlight Posts Quoting You': [false, 'Highlights any posts that contain a quote to your post.'],
        'Highlight Own Posts': [false, 'Highlights own posts if Quote Markers are enabled.'],
        'Quote Threading': [false, 'Thread conversations'],
        'Mark Quotes of You': [true, 'Add \'(You)\' to quotes linking to your posts.'],
        'Mark OP Quotes': [true, 'Add \'(OP)\' to OP quotes.'],
        'Mark Cross-thread Quotes': [true, 'Add \'(Cross-thread)\' to cross-threads quotes.', 'Highlights own posts if Quote Markers are enabled.']
      }
    },
    imageExpansion: {
      'Fit width': [false, ''],
      'Fit height': [false, ''],
      'Expand spoilers': [true, 'Expand all images along with spoilers.'],
      'Expand videos': [false, 'Expand all images also expands videos (no autoplay).'],
      'Expand from here': [false, 'Expand all images only from current position to thread end.'],
      'Advance on contract': [false, 'Advance to next post when contracting an expanded image.']
    },
    gallery: {
      'Hide Thumbnails': [false],
      'Fit Width': [true],
      'Fit Height': [true],
      'Scroll to Post': [true]
    },
    style: {
      Interface: {
        'Single Column Mode': [true, 'Presents options in a single column, rather than in blocks.'],
        'Sidebar': ['normal', 'Alter the sidebar size. Completely hiding it can cause content to overlap, but with the correct option combinations can create a minimal 4chan layout that has more efficient screen real-estate than vanilla 4chan.', ['large', 'normal', 'minimal', 'hide']],
        'Sidebar Location': ['right', 'The side of the page the sidebar content is on. It is highly recommended that you do not hide the sidebar if you change this option.', ['left', 'right']],
        'Top Thread Padding': ['0', 'Add some spacing between the top edge of document and the threads.', 'text'],
        'Bottom Thread Padding': ['0', 'Add some spacing between the bottom edge of document and the threads.', 'text'],
        'Left Thread Padding': ['0', 'Add some spacing between the left edge of document and the threads.', 'text'],
        'Right Thread Padding': ['0', 'Add some spacing between the right edge of document and the threads.', 'text'],
        'Announcements': ['slideout', 'The style of announcements and the ability to hide them.', ['4chan default', 'slideout', 'hide']],
        'Board Title': ['at sidebar top', 'The positioning of the board\'s logo and subtitle.', ['at sidebar top', 'at sidebar bottom', 'at top', 'under post form', 'hide']],
        'Custom Board Titles': [false, 'Customize Board Titles by shift-clicking the board title or subtitle.'],
        'Persistent Custom Board Titles': [false, 'Forces custom board titles to be persistent, even if moot updates the board titles.'],
        'Board Subtitle': [true, 'Show the board subtitle.'],
        '4chan Banner': ['at sidebar top', 'The positioning of 4chan\'s image banner.', ['at sidebar top', 'at sidebar bottom', 'under post form', 'at top', 'hide']],
        'Icon Orientation': ['horizontal', 'Change the orientation of the appchan x icons.', ['horizontal', 'vertical']],
        'Slideout Watcher': [true, 'Adds an icon you can hover over to show the watcher, as opposed to having the watcher always visible.'],
        'Hide Navlinks': [false, 'Hides the UI at the top of the page that allows you to navigate between pages, like "Return", "Catalog", "Bottom".']
      },
      Posts: {
        'Alternate Post Colors': [false, 'Make post background colors alternate every other post.'],
        'Color Reply Headings': [false, 'Give the post info a background.'],
        'Color File Info': [false, 'Give the file info a background.'],
        'OP Background': [false, 'Adds a border and background color to the OP Post, as if it were a reply.'],
        'Backlinks Position': ['default', 'The position of backlinks in relation to the post.', ['default', 'lower left', 'lower right']],
        'Filtered Backlinks': [true, 'Hide backlinks to filtered posts.'],
        'Force Reply Break': [false, 'Force replies to occupy their own line and not be adjacent to the OP image.'],
        'Fit Width Replies': [false, 'Replies fit the entire width of the page.'],
        'Indent Replies': [true, 'Indent posts under the OP.'],
        'Hide Delete UI': [false, 'Hides vanilla report and delete functionality and UI. This does not affect Appchan\'s Menu functionality.'],
        'Post Spacing': ['3', 'The amount of space between replies.', 'text'],
        'Vertical Post Padding': ['5', 'The vertical padding around post content of replies.', 'text'],
        'Horizontal Post Padding': ['20', 'The horizontal padding around post content of replies.', 'text'],
        'Hide Horizontal Rules': [false, 'Hides lines between threads.'],
        'Backlink Icons': [false, 'Replaces backlink text with a small, compact icon.'],
        'Compact File Text': [false, 'Shrink the font of the file text to be less obtrusive.']
      },
      Aesthetics: {
        '4chan SS Navigation': [false, 'Try to emulate the appearance of 4chan SS\'s Navigation.'],
        '4chan SS Sidebar': [false, 'Try to emulate the appearance of 4chan SS\'s Sidebar.'],
        '4chan Banner Reflection': [false, 'Adds reflection effects to 4chan\'s image banner.'],
        'Faded 4chan Banner': [true, 'Make 4chan\'s image banner translucent.'],
        'Hide Ads': [false, 'Block advertisements. It\'s probably better to use AdBlock for this.'],
        'Shrink Ads': [false, 'Make 4chan advertisements smaller.'],
        'Fade Ads': [true, 'Make 4chan\'s ads translucent.'],
        'Bolds': [true, 'Bold text for names and such.'],
        'Italics': [false, 'Give tripcodes italics.'],
        'Sidebar Glow': [false, 'Adds a glow to the sidebar\'s text.'],
        'Circle Checkboxes': [false, 'Make checkboxes circular.'],
        'Font': ['sans-serif', 'The font used by all elements of 4chan.', 'text'],
        'Font Size': ['13', 'The font size of posts and various UI. This changes most, but not all, font sizes.', 'text'],
        'Icons': ['oneechan', 'Icon theme which Appchan will use.', ['oneechan', '4chan SS']],
        'Invisible Icons': [false, 'Makes icons invisible unless hovered. Invisible really is "invisible", so don\'t use it if you don\'t have your icons memorized or don\'t use keybinds.'],
        'Quote Shadows': [true, 'Add shadows to the quote previews and inline quotes.'],
        'Rounded Edges': [false, 'Round the edges of various 4chan elements.'],
        'Underline Links': [false, 'Put lines under hyperlinks.'],
        'NSFW/SFW Themes': [false, 'Choose your theme based on the SFW status of the board you are viewing.']
      },
      Mascots: {
        'Mascots': [true, 'Add a pretty picture of your waifu to Appchan.'],
        'Click to Toggle': [true, 'Click your current mascot to switch between your enabled mascots.'],
        'Mascot Location': ['sidebar', 'Change where your mascot is located.', ['sidebar', 'opposite']],
        'Mascot Position': ['default', 'Change where your mascot is placed in relation to the post form.', ['above post form', 'default', 'bottom', 'middle']],
        'Mascots Overlap Posts': [true, 'Mascots overlap threads and posts.'],
        'NSFW/SFW Mascots': [false, 'Enable or disable mascots based on the SFW status of the board you are viewing.'],
        'Grayscale Mascots': [false, 'Force mascots to be monochrome.'],
        'Mascot Opacity': ['1.00', 'Make Mascots transparent.', 'text'],
        'Hide Mascots on Catalog': [false, 'Do not show mascots on the official catalog pages.'],
        'Silhouettize Mascots': [false, 'Apply a filter to mascots to try to turn them into silhouettes.'],
        'Silhouette Contrast': ['0', 'A number to increase the contrast of silhouettes. Suggested values: 0, 8, 16 ...', 'text']
      },
      Navigation: {
        'Navigation Alignment': ['left', 'Change the text alignment of the navigation.', ['left', 'center', 'right']],
        'Slideout Navigation': ['compact', 'How the slideout navigation will be displayed.', ['compact', 'list', 'hide']],
        'Pagination': ['sticky bottom', 'The position of 4chan page navigation', ['sticky top', 'sticky bottom', 'top', 'bottom', 'on side', 'hide']],
        'Pagination Alignment': ['center', 'Change the text alignment of the pagination.', ['left', 'center', 'right']],
        'Hide Navigation Decorations': [false, 'Hide non-link text in the board navigation and pagination. This also disables the delimiters in <code>Custom Navigation</code>']
      },
      'Post Form': {
        'Compact Post Form Inputs': [true, 'Use compact inputs on the post form.'],
        'Show Post Form Header': [false, 'Force the Post Form to have a header.'],
        'Post Form Style': ['tabbed slideout', 'How the post form will sit on the page.', ['fixed', 'slideout', 'tabbed slideout', 'slideup', 'tabbed slideup', 'float']],
        'Post Form Slideout Transitions': [true, 'Animate slideouts for the post form.'],
        'Transparent Post Form': [false, 'Make the post form almost invisible.'],
        'Post Form Decorations': [false, 'Add a border and background to the post form (does not apply to the "float" post form style.'],
        'Textarea Resize': ['vertical', 'Options to resize the post form\'s comment box.', ['both', 'horizontal', 'vertical', 'none']],
        'Tripcode Hider': [true, 'Intelligent name field hiding.'],
        'Images Overlap Post Form': [true, 'Images expand over the post form and sidebar content, usually used with "Expand images" set to "full".'],
        'Captcha Filter': [true, 'Apply an SVG filter to the captcha to make it match your theme. WARNING: May cause invisible captchas.']
      }
    },
    threadWatcher: {
      'Current Board': [false, 'Only show watched threads from the current board.'],
      'Auto Watch': [true, 'Automatically watch threads you start.'],
      'Auto Watch Reply': [false, 'Automatically watch threads you reply to.'],
      'Auto Prune': [false, 'Automatically prune 404\'d threads.']
    },
    filter: {
      name: "# Filter any namefags:\n#/^(?!Anonymous$)/",
      uniqueID: "# Filter a specific ID:\n#/Txhvk1Tl/",
      tripcode: "# Filter any tripfag\n#/^!/",
      capcode: "# Set a custom class for mods:\n#/Mod$/;highlight:mod;op:yes\n# Set a custom class for moot:\n#/Admin$/;highlight:moot;op:yes",
      email: "",
      subject: "# Filter Generals on /v/:\n#/general/i;boards:v;op:only",
      comment: "# Filter Stallman copypasta on /g/:\n#/what you\'re refer+ing to as linux/i;boards:g",
      flag: '',
      filename: '',
      dimensions: "# Highlight potential wallpapers:\n#/1920x1080/;op:yes;highlight;top:no;boards:w,wg",
      filesize: '',
      MD5: ''
    },
    sauces: "https://www.google.com/searchbyimage?image_url=%TURL\nhttp://iqdb.org/?url=%TURL\n#//tineye.com/search?url=%TURL\n#http://saucenao.com/search.php?url=%TURL\n#http://3d.iqdb.org/?url=%TURL\n#http://regex.info/exif.cgi?imgurl=%URL\n# uploaders:\n#http://imgur.com/upload?url=%URL;text:Upload to imgur\n#http://ompldr.org/upload?url1=%URL;text:Upload to ompldr\n# \"View Same\" in archives:\n#//archive.foolz.us/_/search/image/%MD5/;text:View same on foolz\n#//archive.foolz.us/%board/search/image/%MD5/;text:View same on foolz /%board/\n#//archive.installgentoo.net/%board/image/%MD5;text:View same on installgentoo /%board/",
    FappeT: {
      fappe: false,
      werk: false
    },
    'Custom CSS': false,
    Index: {
      'Index Mode': 'paged',
      'Previous Index Mode': 'paged',
      'Index Sort': 'bump',
      'Index Size': 'small',
      'Threads per Page': 0,
      'Open threads in a new tab': false,
      'Show Replies': true,
      'Refreshed Navigation': false
    },
    Header: {
      'Fixed Header': true,
      'Header auto-hide': false,
      'Header auto-hide on scroll': false,
      'Bottom Header': false,
      'Header catalog links': false,
      'Bottom Board List': true,
      'Custom Board Navigation': true
    },
    boardnav: "[ toggle-all ]\n[current-title]\n[external-text:\"FAQ\",\"https://github.com/ccd0/4chan-x/wiki/Frequently-Asked-Questions\"]",
    QR: {
      'QR.personas': "#options:\"sage\";boards:jp;always"
    },
    time: '%m/%d/%y(%a)%H:%M:%S',
    backlink: '>>%id',
    fileInfo: '%l (%p%s, %r)',
    favicon: 'ferongr',
    usercss: "/* Tripcode Italics: */\n/*\nspan.postertrip {\nfont-style: italic;\n}\n*/\n\n/* Add a rounded border to thumbnails (but not expanded images): */\n/*\n.fileThumb > img:first-child {\nborder: solid 2px rgba(0,0,100,0.5);\nborder-radius: 10px;\n}\n*/\n\n/* Make highlighted posts look inset on the page: */\n/*\ndiv.post:target,\ndiv.post.highlight {\nbox-shadow: inset 2px 2px 2px rgba(0,0,0,0.2);\n}\n*/",
    hotkeys: {
      'Toggle board list': ['Ctrl+b', 'Toggle the full board list.'],
      'Toggle header': ['Shift+h', 'Toggle the auto-hide option of the header.'],
      'Open empty QR': ['i', 'Open QR without post number inserted.'],
      'Open QR': ['Shift+i', 'Open QR with post number inserted.'],
      'Open settings': ['Alt+o', 'Open Settings.'],
      'Close': ['Esc', 'Close Settings, Notifications or QR.'],
      'Spoiler tags': ['Ctrl+s', 'Insert spoiler tags.'],
      'Code tags': ['Alt+c', 'Insert code tags.'],
      'Eqn tags': ['Alt+e', 'Insert eqn tags.'],
      'Math tags': ['Alt+m', 'Insert math tags.'],
      'Toggle sage': ['Alt+s', 'Toggle sage in email field.'],
      'Submit QR': ['Ctrl+Enter', 'Submit post.'],
      'Post Without Name': ['Alt+n', 'Clear name field and then submits post.'],
      'Watch': ['w', 'Watch thread.'],
      'Update': ['r', 'Update the thread now.'],
      'Expand image': ['Shift+e', 'Expand selected image.'],
      'Expand images': ['e', 'Expand all images.'],
      'Open Gallery': ['g', 'Opens the gallery.'],
      'fappeTyme': ['f', 'Fappe Tyme.'],
      'werkTyme': ['Shift+w', 'Werk Tyme'],
      'Front page': ['1', 'Jump to front page.'],
      'Open front page': ['Shift+1', 'Open front page in a new tab.'],
      'Next page': ['Ctrl+Right', 'Jump to the next page.'],
      'Previous page': ['Ctrl+Left', 'Jump to the previous page.'],
      'Search form': ['Ctrl+Alt+s', 'Focus the search field on the board index.'],
      'Paged mode': ['Alt+1', 'Sets the index mode to paged.'],
      'All pages mode': ['Alt+2', 'Sets the index mode to all threads.'],
      'Catalog mode': ['Alt+3', 'Sets the index mode to catalog.'],
      'Cycle sort type': ['Alt+x', 'Cycle through index sort types.'],
      'Next thread': ['Ctrl+Down', 'See next thread.'],
      'Previous thread': ['Ctrl+Up', 'See previous thread.'],
      'Expand thread': ['Ctrl+e', 'Expand thread.'],
      'Open thread': ['o', 'Open thread in current tab.'],
      'Open thread tab': ['Shift+o', 'Open thread in new tab.'],
      'Next reply': ['j', 'Select next reply.'],
      'Previous reply': ['k', 'Select previous reply.'],
      'Deselect reply': ['Shift+d', 'Deselect reply.'],
      'Hide': ['x', 'Hide thread.'],
      'Previous Post Quoting You': ['Alt+Up', 'Scroll to the previous post that quotes you.'],
      'Next Post Quoting You': ['Alt+Down', 'Scroll to the next post that quotes you.']
    },
    updater: {
      checkbox: {
        'Beep': [false, 'Beep on new post to completely read thread.'],
        'Auto Scroll': [false, 'Scroll updated posts into view. Only enabled at bottom of page.'],
        'Bottom Scroll': [false, 'Always scroll to the bottom, not the first new post. Useful for event threads.'],
        'Scroll BG': [false, 'Auto-scroll background tabs.'],
        'Auto Update': [true, 'Automatically fetch new posts.'],
        'Optional Increase': [false, 'Increase the intervals between updates on threads without new posts.']
      },
      'Interval': 30
    },
    embedWidth: 640,
    embedHeight: 390,
    theme: 'Yotsuba B',
    'theme_sfw': 'Yotsuba B',
    'theme_nsfw': 'Yotsuba',
    mascot: ''
  };

  editTheme = {};

  editMascot = {};

  userNavigation = {};

  Conf = {};

  c = console;

  d = document;

  doc = d.documentElement;

  g = {
    VERSION: '2.9.38',
    NAMESPACE: 'appchan_x.',
    boards: {}
  };

  Mascots = {
    'Akiyama_Mio': {
      category: 'Anime',
      image: '//i.minus.com/ibrWLbKvjRnHZS.png'
    },
    'Akiyama_Mio_2': {
      category: 'Anime',
      image: '//i.minus.com/ibmZgHvl3ZSxYk.png'
    },
    'Akiyama_Mio_3': {
      category: 'Anime',
      image: '//i.minus.com/irFbpefCFt1cT.png',
      center: true
    },
    'Applejack': {
      category: 'Ponies',
      image: '//i.minus.com/inZ8jSVsEhfnC.png',
      center: true
    },
    'Asuka_Langley_Soryu': {
      category: 'Anime',
      image: '//i.minus.com/ib2z9ME9QKEBaS.png',
      center: true
    },
    'Asuka_Langley_Soryu_2': {
      category: 'Anime',
      image: '//i.minus.com/iI3QR5SywNfg9.png',
      center: true
    },
    'Asuka_Langley_Soryu_3': {
      category: 'Anime',
      image: '//i4.minus.com/jbq2hFrE4q75KT.png',
      center: true
    },
    'Asuka_Langley_Soryu_4': {
      category: 'Anime',
      image: '//i.minus.com/ibiiInQGLGnYNj.png',
      center: true
    },
    'Asuka_Langley_Soryu_6': {
      category: 'Anime',
      image: '//i.minus.com/ibzbnBcaEtoqck.png',
      position: 'bottom'
    },
    'Ayanami_Rei': {
      category: 'Anime',
      image: '//i.minus.com/ib0ft5OmqRZx2r.png',
      center: true
    },
    'Ayase': {
      category: 'Anime',
      image: '//i.minus.com/ibmArq5Wb4Po4v.png',
      center: true
    },
    'BLACK_ROCK_SHOOTER': {
      category: 'Anime',
      image: '//i.minus.com/ibMe9MrTMdvAT.png',
      center: true
    },
    'Brioche_d_Arquien': {
      category: 'Anime',
      image: '//i.minus.com/ibobXYJ2k3JXK.png',
      center: true
    },
    'CC': {
      category: 'Anime',
      image: '//i.minus.com/iwndO4Pn6SO0X.png',
      center: true
    },
    'Chie': {
      category: 'Anime',
      image: '//i.minus.com/ib0HI16h9FSjSp.png',
      center: true
    },
    'Cirno_2': {
      category: 'Anime',
      image: '//i.minus.com/iSZ06ZxrcqAKq.png',
      center: true
    },
    'Dawn_Hikari': {
      category: 'Anime',
      image: '//i.minus.com/iL3J1EmcDkFzE.png',
      center: true
    },
    'Doppleganger': {
      category: 'Anime',
      image: '//i.minus.com/iPvv86W9r3Rxm.png'
    },
    'Dragonkid': {
      category: 'Anime',
      image: '//i.minus.com/iq9fuyWSjIDWf.png',
      center: true
    },
    'Dragonkid_2': {
      category: 'Anime',
      image: '//i.minus.com/i7sdxK3G12RB6.png',
      center: true
    },
    'Eclair': {
      category: 'Anime',
      image: '//i.minus.com/ibsk5mMYVR5zuA.png',
      center: true
    },
    'Evangeline_AK_McDowell': {
      category: 'Anime',
      image: '//i.minus.com/ibuq7a8zWKi2gl.png',
      center: true
    },
    'Fluttershy': {
      category: 'Ponies',
      image: '//i.minus.com/ibwEFEGlRm0Uxy.png'
    },
    'Fluttershy_2': {
      category: 'Ponies',
      image: '//i.minus.com/ibjtz6EU2OFPgh.png',
      center: true
    },
    'Fluttershy_Cutiemark': {
      category: 'Ponies',
      image: '//i.minus.com/i5WVpIAlHQdhs.png',
      center: true
    },
    'Fujiwara_no_Mokou': {
      category: 'Anime',
      image: '//i.minus.com/ibpwDyMGodvni6.png'
    },
    'Furudo_Erika': {
      category: 'Anime',
      image: '//i.minus.com/iCrRzQ8WvHiSM.png',
      center: true
    },
    'Gally': {
      category: 'Anime',
      image: '//i.minus.com/iblWZGuSlWtDI6.png',
      center: true
    },
    'Gasai_Yuno': {
      category: 'Anime',
      image: '//i.minus.com/iEQsK6K85jX2n.png'
    },
    'George_Costanza': {
      category: 'Western',
      image: '//i.minus.com/iFWdpFGfzLs6v.png'
    },
    'Hanako': {
      category: 'Anime',
      image: '//i.minus.com/iRLF8gCIZbGjo.png',
      center: true
    },
    'Hasekura_Youko': {
      category: 'Anime',
      image: '//i.minus.com/iqBTFZf5UhLpR.png',
      center: true
    },
    'Hatsune_Miku_3': {
      category: 'Anime',
      image: '//i.minus.com/iLJ4uDTcg1T8r.png',
      center: true
    },
    'Hatsune_Miku_4': {
      category: 'Anime',
      image: '//i.minus.com/ibjkPMLT8Uxitp.png',
      center: true
    },
    'Hatsune_Miku_5': {
      category: 'Anime',
      image: '//i.minus.com/i9Evu9dyvok4G.png',
      center: true
    },
    'Hirasawa_Yui': {
      category: 'Anime',
      image: '//i.minus.com/iuGe5uDaTNmhR.png',
      center: true
    },
    'Homura_Akemi': {
      category: 'Anime',
      image: '//i.minus.com/iPtrwFEEtPLhn.png'
    },
    'Horo': {
      category: 'Silhouette',
      image: '//i.minus.com/ibbMKiznORGJ00.png',
      silhouette: true
    },
    'Horo_2': {
      category: 'Silhouette',
      image: '//i.minus.com/ibyT9dlTe1HN5P.png',
      silhouette: true,
      width: 205
    },
    'Ika_Musume': {
      category: 'Anime',
      image: '//i.minus.com/ibqVu5GNfKx5bC.png',
      center: true
    },
    'Ika_Musume_2': {
      category: 'Anime',
      image: '//i.minus.com/ibhnEiE8HabEqC.png',
      center: true
    },
    'Iwakura_Lain': {
      category: 'Anime',
      image: '//i.minus.com/iBXRRT19scoHf.png',
      center: true
    },
    'Iwakura_Lain_2': {
      category: 'Anime',
      image: '//i.minus.com/ioMltWNYUWeJ3.png',
      center: true
    },
    'KOn_Girls': {
      category: 'Anime',
      image: '//i.minus.com/ibndVLiH09uINs.png',
      center: true
    },
    'Kagamine_Rin_2': {
      category: 'Anime',
      image: '//i.minus.com/jbkL01TIeJwEN6.png'
    },
    'Kagari_Izuriha': {
      category: 'Anime',
      image: '//i.minus.com/ihaFHsvFfL0vH.png'
    },
    'Kaname_Madoka': {
      category: 'Anime',
      image: '//i.minus.com/iRuEFK8cdAHxB.png',
      center: true
    },
    'Karina': {
      category: 'Anime',
      image: '//i.minus.com/iUADBOpQYPfeP.png',
      center: true
    },
    'Kigurumi_Harokitei': {
      category: 'Anime',
      image: '//i.minus.com/ibb17W5i3rQvut.png',
      center: true
    },
    'Kinomoto_Sakura': {
      category: 'Anime',
      image: '//i.minus.com/iVmsLKa4zLwZR.png',
      center: true
    },
    'Kirisame_Marisa': {
      category: 'Anime',
      image: '//i.minus.com/ibikDZH5CZ0V30.png'
    },
    'Koiwai_Yotsuba': {
      category: 'Anime',
      image: '//i.minus.com/iKFKyVVBato2N.png',
      center: true
    },
    'Koko': {
      category: 'Anime',
      image: '//i.minus.com/ieVyNMSjXpBs2.png',
      center: true
    },
    'Kotobuki_Tsumugi': {
      category: 'Anime',
      image: '//i.minus.com/i6doAUnM6jMAY.png',
      center: true
    },
    'Kurisu_Makise': {
      category: 'Anime',
      image: '//i.minus.com/ib1eMtRHdvc9ix.png'
    },
    'Kuroko_Shirai': {
      category: 'Anime',
      image: '//i.minus.com/i3K8F7lu2SHfn.png'
    },
    'Kyouko_Sakura': {
      category: 'Anime',
      image: '//i.minus.com/iMrFOS1mfzIJP.png',
      center: true
    },
    'Kyubee': {
      category: 'Anime',
      image: '//i.minus.com/iD0SEJPeZa0Dw.png'
    },
    'Kyubee_2': {
      category: 'Anime',
      image: '//i.minus.com/iGlKiDZvM3xi8.png',
      center: true
    },
    'Li_Syaoran': {
      category: 'Anime',
      image: '//i.minus.com/ib0IWPBRSHyiDe.png'
    },
    'Link': {
      category: 'Anime',
      image: '//i.minus.com/ibd1JShAMTdJBH.png',
      center: true
    },
    'Lizardgirl': {
      category: 'Anime',
      image: '//i.minus.com/is7h27Q6lsmyx.png'
    },
    'Luka': {
      category: 'Anime',
      image: '//i.minus.com/inds5h2BOmVBy.png'
    },
    'Madotsuki': {
      category: 'Anime',
      image: '//i.minus.com/ik6QYfTfgx9Za.png'
    },
    'Makoto': {
      category: 'Anime',
      image: '//i.minus.com/i7q6aOuUqqA9F.png',
      center: true
    },
    'Mantis': {
      category: 'Anime',
      image: '//i.minus.com/iBmluUJOZivY2.png'
    },
    'Megurine_Luka': {
      category: 'Anime',
      image: '//i.minus.com/ibxe63yidpz9Gz.png',
      center: true
    },
    'Mei_Sunohara': {
      category: 'Anime',
      image: '//i.minus.com/i7ElzNY4xQHHz.png',
      center: true
    },
    'Millefiori': {
      category: 'Anime',
      image: '//i.minus.com/ifVzPtH8JHXjl.png',
      center: true
    },
    'Millefiori_2': {
      category: 'Anime',
      image: '//i.minus.com/iMSUiQxRBylQG.png',
      center: true
    },
    'Millefiori_3': {
      category: 'Anime',
      image: '//i.minus.com/iDOe3ltSvOYXZ.png',
      center: true
    },
    'Misaki_Mei': {
      category: 'Anime',
      image: '//i.minus.com/icmYGJ9vIOFjr.png',
      center: true
    },
    'Mizunashi_Akari': {
      category: 'Anime',
      image: '//i.minus.com/iNy9kHlNsUoVK.png',
      center: true
    },
    'Motoko': {
      category: 'Anime',
      image: '//i.minus.com/irFtkWWyMChSA.png',
      center: true
    },
    'Nagato_Yuki': {
      category: 'Anime',
      image: '//i.minus.com/it3pEawWIxY84.png',
      center: true
    },
    'Nagato_Yuki_2': {
      category: 'Anime',
      image: '//i.minus.com/iuspcZbLvmqpb.png',
      center: true
    },
    'Nagato_Yuki_3': {
      category: 'Anime',
      image: '//i.minus.com/ibndIkldw4njbD.png',
      center: true
    },
    'Nagato_Yuki_5': {
      category: 'Silhouette',
      width: 202,
      image: '//i.minus.com/iFQQPEaC3aEV7.png',
      silhouette: true,
      center: true
    },
    'Nakano_Azusa': {
      category: 'Anime',
      image: '//i.minus.com/iiptfoMlr4v1k.png'
    },
    'Nichijou': {
      category: 'Anime',
      image: '//i.minus.com/iE8lbZ5f3OT2B.png'
    },
    'Noir_VinoCacao': {
      category: 'Anime',
      image: '//i.minus.com/ibo8aCWF0OwNwP.png',
      center: true
    },
    'Pinkie_Pie': {
      category: 'Ponies',
      image: '//i.minus.com/ib1kcpqxvsyZWG.png',
      center: true
    },
    'Pinkie_Pie_2': {
      category: 'Ponies',
      image: '//i.minus.com/i8QRRgE7iKpw7.png',
      center: true
    },
    'Oshino_Shinobu': {
      category: 'Anime',
      image: '//i.minus.com/ibwhAyR6D7OBAB.png'
    },
    'Oshino_Shinobu_2': {
      category: 'Anime',
      image: '//i.minus.com/ibqoNiWzynsVvg.png',
      position: 'bottom'
    },
    'Patchouli_Knowledge': {
      category: 'Anime',
      image: '//i.minus.com/ibnOEAxXaKlctB.png',
      center: true
    },
    'Patchouli_Knowledge_2': {
      category: 'Anime',
      image: '//i.minus.com/i1MOPTmohOsMD.png'
    },
    'Pink_Doggy': {
      category: 'Anime',
      image: '//i.minus.com/i1SpWAzfcIEQc.png',
      center: true
    },
    'Pink_Hair': {
      category: 'Anime',
      image: '//i.minus.com/ibdwMaIPwdscao.png',
      center: true
    },
    'Railgun_2': {
      category: 'Anime',
      image: '//i.minus.com/iNhpDDO0GSTeM.png',
      center: true
    },
    'Railgun_3': {
      category: 'Anime',
      image: '//i.minus.com/iiW02dmqUwRcy.png'
    },
    'Railgun_4': {
      category: 'Anime',
      image: '//i.minus.com/iR3j0mGgd1927.png',
      center: true
    },
    'Rainbow_Dash': {
      category: 'Ponies',
      image: '//i.minus.com/ibthr5EDMZHV9j.png',
      center: true
    },
    'Rarity': {
      category: 'Ponies',
      image: '//i.minus.com/ibkraGhhUh25CU.png',
      center: true
    },
    'Revi': {
      category: 'Anime',
      image: '//i.minus.com/ivUMKcy5ow6Ab.png',
      position: 'bottom',
      center: true
    },
    'Ruri_Gokou': {
      category: 'Anime',
      image: '//i.minus.com/ibtZo1fdOk8NCB.png',
      position: 'bottom',
      center: true
    },
    'Ryuu': {
      category: 'Anime',
      image: '//i.minus.com/iecVz4p2SuqK4.png',
      position: 'bottom'
    },
    'Samus_Aran': {
      category: 'Anime',
      image: '//i.minus.com/iWG1GFJ89A05p.png',
      center: true
    },
    'Samus_Aran_2': {
      category: 'Anime',
      image: '//i.minus.com/ibl4efsNtHpkXg.png'
    },
    'Shana': {
      category: 'Anime',
      image: '//i.minus.com/ib2cTJMF0cYIde.png',
      center: true
    },
    'Shana_2': {
      category: 'Anime',
      image: '//i.minus.com/ioRICGu0Ipzj9.png',
      center: true
    },
    'Shiki': {
      category: 'Anime',
      image: '//i.minus.com/iIZm1JxxDIDQ1.png'
    },
    'Shinji_and_Girls': {
      category: 'Anime',
      image: '//i.minus.com/itMrEn56GzvzE.png',
      center: true
    },
    'Shinonome_Hakase': {
      category: 'Anime',
      image: '//i.minus.com/iocCwDCnNgI19.png',
      center: true
    },
    'Shirakiin_Ririchiyo': {
      category: 'Anime',
      image: '//i.minus.com/i1m0rdzmVLYLa.png',
      position: 'bottom',
      center: true
    },
    'Shirohibe': {
      category: 'Anime',
      image: '//i.minus.com/iGu91k3KZeg00.png',
      position: 'bottom'
    },
    'Suruga_Kanbaru': {
      category: 'Anime',
      image: '//i.minus.com/irEL7AgC80qKD.png',
      center: true
    },
    'Suzumiya_Haruhi': {
      category: 'Anime',
      image: '//i.minus.com/iM9qMfUNh9Qi9.png',
      center: true
    },
    'Suzumiya_Haruhi_2': {
      category: 'Anime',
      image: '//i.minus.com/ibnomd5iasjceY.png',
      center: true
    },
    'Tardis': {
      category: 'Western',
      image: '//i.minus.com/iQL2bwpDfOgk.png',
      center: true
    },
    'Tewi_Inaba': {
      category: 'Anime',
      image: '//i.minus.com/ib2k9lwQIkmb66.png'
    },
    'Tomozo_Kaoru': {
      category: 'Anime',
      image: '//i.minus.com/islUcBaPRYAgv.png',
      center: true
    },
    'Twilight_Sparkle': {
      category: 'Ponies',
      image: '//i.minus.com/ibnMYVTZEykrKU.png',
      center: true
    },
    'Vivian_James_1': {
      category: 'Anime',
      image: '//i.minus.com/iYZ05HyI7aPUA.png'
    },
    'Vivian_James_2': {
      category: 'Anime',
      image: '//i.minus.com/ibtKEioz8jN37k.png'
    },
    'White_Curious': {
      category: 'Anime',
      image: '//i.minus.com/ibfkj5osu99axe.png',
      center: true
    },
    'Yakumo_Ran': {
      category: 'Anime',
      image: '//i.minus.com/ivKqn8vL9A8cQ.png'
    },
    'Yin': {
      category: 'Anime',
      image: '//i.minus.com/iL9DlVtaAGFdq.png'
    },
    'Yin_2': {
      category: 'Anime',
      image: '//i.minus.com/izkTpyjr1XlLR.png',
      center: true
    },
    'Yoko_Littner_2': {
      category: 'Anime',
      image: '//i.minus.com/i7aUDY4h9uB1T.png',
      center: true
    },
    'Yoko_Littner_3': {
      category: 'Anime',
      image: '//i.minus.com/iYVd5DhCmB7VJ.png',
      center: true
    },
    'Yozora_Mikazuki': {
      category: 'Anime',
      image: '//i.minus.com/iIFEsDzoDALQd.png'
    },
    'Yuzuki_Yukari': {
      category: 'Anime',
      image: '//i.minus.com/iYQOz0iGM9ygq.png',
      center: true
    },
    'Yukkikaze': {
      category: 'Anime',
      image: '//i.minus.com/ioQJAnyXebHDJ.png',
      center: true
    },
    'Yukkihaze_2': {
      category: 'Anime',
      image: '//i.minus.com/inpgaDlJtZ9Sc.png',
      center: true
    }
  };

  Themes = {
    'AppChan': {
      'Author': 'Zixaphir',
      'Author Tripcode': '!..NoTrip..',
      'Background Color': 'rgba(44,44,44,1)',
      'Thread Wrapper Background': 'rgba(0,0,0,0)',
      'Thread Wrapper Border': 'rgba(0,0,0,0)',
      'Dialog Background': 'rgba(44,44,44,1)',
      'Dialog Border': 'rgba(44,44,44,1)',
      'Reply Background': 'rgba(51,51,51,1)',
      'Reply Border': 'rgba(51,51,51,1)',
      'Highlighted Reply Background': 'rgba(57,57,57,1)',
      'Highlighted Reply Border': 'rgba(57,57,57,1)',
      'Backlinked Reply Outline': 'rgba(98,124,141,1)',
      'Input Background': 'rgba(51,51,51,1)',
      'Input Border': 'rgba(51,51,51,1)',
      'Checkbox Background': 'rgba(68,68,68,1)',
      'Checkbox Border': 'rgba(68,68,68,1)',
      'Buttons Background': 'rgba(48,48,48,1)',
      'Buttons Border': 'rgba(48,48,48,1)',
      'Focused Input Background': 'rgba(63,63,63,1)',
      'Focused Input Border': 'rgba(63,63,63,1)',
      'Hovered Input Background': 'rgba(57,57,57,1)',
      'Hovered Input Border': 'rgba(57,57,57,1)',
      'Navigation Background': 'rgba(44,44,44,0.9)',
      'Navigation Border': 'rgba(44,44,44,0.9)',
      'Quotelinks': 'rgb(79,95,143)',
      'Backlinks': 'rgb(79,95,143)',
      'Links': 'rgb(102,136,170)',
      'Hovered Links': 'rgb(78,110,142)',
      'Navigation Links': 'rgb(170,170,170)',
      'Hovered Navigation Links': 'rgb(78,110,142)',
      'Names': 'rgb(170,170,170)',
      'Tripcodes': 'rgb(170,170,170)',
      'Emails': 'rgb(102,136,170)',
      'Subjects': 'rgb(144,144,144)',
      'Text': 'rgb(170,170,170)',
      'Inputs': 'rgb(170,170,170)',
      'Post Numbers': 'rgb(102,136,170)',
      'Greentext': 'rgb(120,153,34)',
      'Sage': 'rgb(150,150,150)',
      'Board Title': 'rgb(170,170,170)',
      'Timestamps': 'rgb(170,170,170)',
      'Warnings': 'rgb(102,136,170)',
      'Shadow Color': 'rgba(0,0,0,.1)',
      'Custom CSS': ''
    },
    'BakaBT': {
      'Author': 'seaweed',
      'Author Tripcode': '!POMF.9waa',
      'Background Image': 'url("http://i.imgur.com/rTkxi.jpg")',
      'Background Attachment': 'fixed',
      'Background Position': '20px 20px',
      'Background Repeat': 'repeat',
      'Background Color': 'rgba(238,238,238,1)',
      'Thread Wrapper Background': 'rgba(255,255,255,1)',
      'Thread Wrapper Border': 'rgba(204,204,204,1)',
      'Dialog Background': 'rgba(238,221,255,1)',
      'Dialog Border': 'rgba(238,221,255,1)',
      'Reply Background': 'rgba(238,221,255,1)',
      'Reply Border': 'rgba(209,162,255,1)',
      'Highlighted Reply Background': 'rgba(238,221,255,1)',
      'Highlighted Reply Border': 'rgba(209,162,255,1)',
      'Backlinked Reply Outline': 'rgba(204,101,99,1)',
      'Input Background': 'rgba(255,255,255,1)',
      'Input Border': 'rgba(204,204,204,1)',
      'Checkbox Background': 'rgba(255,255,238,1)',
      'Checkbox Border': 'rgba(204,204,204,1)',
      'Buttons Background': 'rgba(255,255,255,1)',
      'Buttons Border': 'rgba(204,204,204,1)',
      'Focused Input Background': 'rgba(255,255,255,1)',
      'Focused Input Border': 'rgba(209,162,255,1)',
      'Hovered Input Background': 'rgba(238,221,255,1)',
      'Hovered Input Border': 'rgba(204,204,204,1)',
      'Navigation Background': 'rgba(255,255,255,0.8)',
      'Navigation Border': 'rgba(255,255,255,0.8)',
      'Quotelinks': 'rgb(146,92,141)',
      'Backlinks': 'rgb(146,92,141)',
      'Links': 'rgb(133,76,158)',
      'Hovered Links': 'rgb(198,23,230)',
      'Navigation Links': 'rgb(17,17,17)',
      'Hovered Navigation Links': 'rgb(198,23,230)',
      'Names': 'rgb(133,76,158)',
      'Tripcodes': 'rgb(146,92,141)',
      'Emails': 'rgb(133,76,158)',
      'Subjects': 'rgb(17,17,17)',
      'Text': 'rgb(0,0,0)',
      'Inputs': 'rgb(0,0,0)',
      'Post Numbers': 'rgb(146,92,141)',
      'Greentext': 'rgb(129,153,65)',
      'Sage': 'rgb(146,92,141)',
      'Board Title': 'rgb(133,76,158)',
      'Timestamps': 'rgb(0,0,0)',
      'Warnings': 'rgb(133,76,158)',
      'Shadow Color': 'rgba(0,0,0,.05)',
      'Custom CSS': ".board {\n  box-shadow: 0px 10px 10px 2px rgba(128,128,128,0.5);\n  border-radius: 3px;\n}\n.board .thread {\n  padding:10px;\n}\n#appchanx-settings.reply.dialog,\n#appchanx-settings .dialog {\n  background-color:#FFF;\n  color:#000;\n  border:2px solid #CCC;\n}\n#appchanx-settings ul {\n  border-bottom:1px solid #DBD8D2;\n}\n#appchanx-settings ul:last-of-type{\n  border:none;\n}\n#qp div.post{\n  background-color:rgba(255,255,255,0.9);\n  border:1px solid #D1A2FF;\n  color:#000;\n}"
    },
    'Blackberry Jam': {
      'Author': 'seaweed',
      'Author Tripcode': '!POMF.9waa',
      'Dialog Background': 'rgba(27,27,27,1)',
      'Dialog Border': 'rgba(27,27,27,1)',
      'Background Color': 'rgba(45,45,45,1)',
      'Thread Wrapper Background': 'rgba(0,0,0,0)',
      'Thread Wrapper Border': 'rgba(0,0,0,0)',
      'Reply Background': 'rgba(27,27,27,1)',
      'Reply Border': 'rgba(38,38,38,1)',
      'Highlighted Reply Background': 'rgba(17,17,17,1)',
      'Highlighted Reply Border': 'rgba(17,17,17,1)',
      'Backlinked Reply Outline': 'rgba(103,204,232,1)',
      'Checkbox Background': 'rgba(51,51,51,1)',
      'Checkbox Border': 'rgba(51,51,51,1)',
      'Input Background': 'rgba(27,27,27,1)',
      'Input Border': 'rgba(27,27,27,1)',
      'Focused Input Background': 'rgba(27,27,27,1)',
      'Focused Input Border': 'rgba(27,27,27,1)',
      'Hovered Input Background': 'rgba(17,17,17,1)',
      'Hovered Input Border': 'rgba(17,17,17,1)',
      'Buttons Background': 'rgba(27,27,27,1)',
      'Buttons Border': 'rgba(27,27,27,1)',
      'Navigation Background': 'rgba(45,45,45,0.9)',
      'Navigation Border': 'rgba(45,45,45,0.9)',
      'Links': 'rgb(218,105,224)',
      'Hovered Links': 'rgb(255,0,255)',
      'Navigation Links': 'rgb(241,241,241)',
      'Hovered Navigation Links': 'rgb(255,0,255)',
      'Subjects': 'rgb(241,241,241)',
      'Names': 'rgb(103,204,232)',
      'Sage': 'rgb(103,204,232)',
      'Tripcodes': 'rgb(103,204,232)',
      'Emails': 'rgb(218,105,224)',
      'Post Numbers': 'rgb(218,105,224)',
      'Text': 'rgb(241,241,241)',
      'Quotelinks': 'rgb(223,153,247)',
      'Backlinks': 'rgb(223,153,247)',
      'Greentext': 'rgb(108,204,102)',
      'Board Title': 'rgb(103,204,232)',
      'Timestamps': 'rgb(218,105,224)',
      'Inputs': 'rgb(218,105,224)',
      'Warnings': 'rgb(103,204,232)',
      'Shadow Color': 'rgba(0,0,0,.1)',
      'Custom CSS': ".reply.post {\n  box-shadow: inset 0px 1px 2px 1px #111;\n}\n#qr {\n  box-shadow: none;\n}\n#qr textarea,\n#qr input[name=\"name\"],\n#qr input[name=\"email\"],\n#qr input[name=\"sub\"],\n#qr input[title=\"Verification\"] {\n  box-shadow: inset 0px 1px 2px 0px #111;\n}\n#qp .post {\n  background-color: rgba(29,29,33,1);\n  border: 1px solid rgba(95,137,172,0.4);\n}"
    },
    'Midnight Caek': {
      'Author': 'Zixaphir',
      'Author Tripcode': '!M.........',
      'Background Color': 'rgba(16,16,16,1)',
      'Thread Wrapper Background': 'rgba(0,0,0,0)',
      'Thread Wrapper Border': 'rgba(0,0,0,0)',
      'Dialog Background': 'rgba(28,28,28,1)',
      'Dialog Border': 'rgba(28,28,28,1)',
      'Reply Background': 'rgba(28,28,28,1)',
      'Reply Border': 'rgba(28,28,28,1)',
      'Highlighted Reply Background': 'rgba(24,24,24,1)',
      'Highlighted Reply Border': 'rgba(24,24,24,1)',
      'Backlinked Reply Outline': 'rgba(98,124,141,1)',
      'Input Background': 'rgba(28,28,28,1)',
      'Input Border': 'rgba(28,28,28,1)',
      'Hovered Input Background': 'rgba(24,24,24,1)',
      'Hovered Input Border': 'rgba(24,24,24,1)',
      'Focused Input Background': 'rgba(16,16,16,1)',
      'Focused Input Border': 'rgba(28,28,28,1)',
      'Checkbox Background': 'rgba(0,0,0,1)',
      'Checkbox Border': 'rgba(60,60,60,1)',
      'Buttons Background': 'rgba(24,24,24,1)',
      'Buttons Border': 'rgba(24,24,24,1)',
      'Navigation Background': 'rgba(16,16,16,0.9)',
      'Navigation Border': 'rgba(16,16,16,0.9)',
      'Quotelinks': 'rgb(71,71,91)',
      'Backlinks': 'rgb(66,66,71)',
      'Links': 'rgb(87,87,123)',
      'Hovered Links': 'rgb(71,71,91)',
      'Navigation Links': 'rgb(144,144,144)',
      'Hovered Navigation Links': 'rgb(71,71,91)',
      'Names': 'rgb(124,45,45)',
      'Tripcodes': 'rgb(62,113,87)',
      'Emails': 'rgb(68,68,68)',
      'Subjects': 'rgb(170,170,170)',
      'Text': 'rgb(144,144,144)',
      'Inputs': 'rgb(144,144,144)',
      'Post Numbers': 'rgb(144,144,144)',
      'Greentext': 'rgb(113,121,62)',
      'Sage': 'rgb(68,68,68)',
      'Board Title': 'rgb(144,144,144)',
      'Timestamps': 'rgb(144,144,144)',
      'Warnings': 'rgb(87,87,123)',
      'Shadow Color': 'rgba(0,0,0,.1)',
      'Custom CSS': ''
    },
    'Minimalistic Mayhem': {
      'Author': 'Mayhem',
      'Author Tripcode': '!MayhemYDG.',
      'Background Image': 'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAIAAAACDbGyAAAAAXNSR0IArs4c6QAAACdJREFUCNdNxzEBADAMwzCnOMwfWYDs2JNPCgCoH9m0zQa4jXob4AGJFwxchPNwQAAAAABJRU5ErkJggg==")',
      'Background Color': 'rgba(25,25,25,1)',
      'Dialog Background': 'rgba(34,34,34,1)',
      'Dialog Border': 'rgba(41,41,41,1)',
      'Thread Wrapper Background': 'rgba(34,34,34,1)',
      'Thread Wrapper Border': 'rgba(0,0,0,1)',
      'Reply Background': 'rgba(51,51,51,1)',
      'Reply Border': 'rgba(17,17,17,1)',
      'Highlighted Reply Background': 'rgba(37,38,42,1)',
      'Highlighted Reply Border': 'rgba(85,85,85,1)',
      'Backlinked Reply Outline': 'rgba(98,124,141,1)',
      'Checkbox Background': 'rgba(57,57,57,1)',
      'Checkbox Border': 'rgba(25,25,25,1)',
      'Input Background': 'rgba(34,34,34,1)',
      'Input Border': 'rgba(21,21,21,1)',
      'Focused Input Background': 'rgba(32,32,32,1)',
      'Focused Input Border': 'rgba(102,102,102,1)',
      'Hovered Input Background': 'rgba(24,24,24,1)',
      'Hovered Input Border': 'rgba(21,21,21,1)',
      'Buttons Background': 'rgba(32,32,32,1)',
      'Buttons Border': 'rgba(16,16,16,1)',
      'Navigation Background': 'rgba(26,26,26,0.9)',
      'Navigation Border': 'rgba(26,26,26,0.9)',
      'Links': 'rgb(85,156,122)',
      'Hovered Links': 'rgb(199,222,26)',
      'Navigation Links': 'rgb(144,144,144)',
      'Hovered Navigation Links': 'rgb(198,23,230)',
      'Subjects': 'rgb(72,98,115)',
      'Names': 'rgb(46,136,166)',
      'Sage': 'rgb(124,45,45)',
      'Tripcodes': 'rgb(140,93,42)',
      'Emails': 'rgb(174,43,41)',
      'Post Numbers': 'rgb(137,115,153)',
      'Text': 'rgb(221,221,221)',
      'Quotelinks': 'rgb(139,164,70)',
      'Backlinks': 'rgb(139,164,70)',
      'Greentext': 'rgb(139,164,70)',
      'Board Title': 'rgb(187,187,187)',
      'Timestamps': 'rgb(221,221,221)',
      'Inputs': 'rgb(187,187,187)',
      'Warnings': 'rgb(87,87,123)',
      'Shadow Color': 'rgba(0,0,0,.1)',
      'Custom CSS': ".nameBlock > .useremail > postertrip {\n  color: rgb(137,115,153);\n}\na.backlink:hover {\n  color: rgb(198,23,230);\n}\n.reply:target,\n.reply.highlight:target {\n  background:rgb(37,38,42);\n}\n[alt=\"sticky\"] + a {\n  color: rgb(242,141,0);\n}\n[alt=\"closed\"] + a {\n  color: rgb(178,171,130);\n}\ninput:checked .rice {\n  border-color:rgb(21,21,21);\n}\ninput[type=\"submit\"],\ninput[type=\"button\"],\nbutton {\n  background: linear-gradient(#393939, #292929);\n  border: 1px solid #191919;\n  color: #AAA;\n  text-shadow: 0 1px 1px #191919;\n}\ninput[type=\"checkbox\"],\ninput[type=\"radio\"] {\nbackground-color: #393939;\n  border: 1px solid #191919;\n}\ninput[type=\"checkbox\"]:checked,\ninput[type=\"radio\"]:checked {\n  background: linear-gradient(#595959, #393939);\n  border: 1px solid #151515;\n}\n.board .thread {\n  padding: 7px;\n}\n.subject:hover,\ndiv.post:hover .subject {\n  color: #3F8DBF !important;\n}\n.postertrip:hover,\ndiv.post:hover .postertrip {\n  color:#CC7212 !important;\n}\n.name:hover,\ndiv.post:hover .name {\n  color: #0AAEE7 !important;\n}\n.name,\n.subject,\n.postertrip {\n  -webkit-transition:color .3s ease-in-out;\n  -moz-transition:color .3s ease-in-out;\n  -o-transition:color .3s ease-in-out;\n}"
    },
    'ObsidianChan': {
      'Author': 'seaweed',
      'Author Tripcode': '!POMF.9waa',
      'Background Image': 'url("http://i.imgur.com/sbi8u.png")',
      'Background Attachment': 'fixed',
      'Dialog Background': 'rgba(0,0,0,0.7)',
      'Dialog Border': 'rgba(0,0,0,0.7)',
      'Background Color': 'rgba(0,0,0,1)',
      'Thread Wrapper Background': 'rgba(0,0,0,0.3)',
      'Thread Wrapper Border': 'rgba(51,51,51,1)',
      'Reply Background': 'rgba(0,0,0,0.6)',
      'Reply Border': 'rgba(0,0,0,0.6)',
      'Highlighted Reply Background': 'rgba(0,0,0,0.4)',
      'Highlighted Reply Border': 'rgba(0,0,0,0.4)',
      'Backlinked Reply Outline': 'rgba(98,124,141,1)',
      'Checkbox Background': 'rgba(68,68,68,1)',
      'Checkbox Border': 'rgba(68,68,68,1)',
      'Input Background': 'rgba(0,0,0,0.6)',
      'Input Border': 'rgba(0,0,0,0.6)',
      'Hovered Input Background': 'rgba(0,0,0,0.4)',
      'Hovered Input Border': 'rgba(0,0,0,0.4)',
      'Focused Input Background': 'rgba(0,0,0,0.4)',
      'Focused Input Border': 'rgba(0,0,0,0.4)',
      'Buttons Background': 'rgba(0,0,0,0.4)',
      'Buttons Border': 'rgba(0,0,0,0.4)',
      'Navigation Background': 'rgba(0,0,0,0.7)',
      'Navigation Border': 'rgba(0,0,0,0.7)',
      'Links': 'rgb(0,255,255)',
      'Hovered Links': 'rgb(0,255,255)',
      'Navigation Links': 'rgb(253,254,255)',
      'Hovered Navigation Links': 'rgb(253,254,255)',
      'Subjects': 'rgb(144,144,144)',
      'Names': 'rgb(253,254,255)',
      'Sage': 'rgb(253,254,255)',
      'Tripcodes': 'rgb(255,82,203)',
      'Emails': 'rgb(0,255,255)',
      'Post Numbers': 'rgb(0,255,255)',
      'Text': 'rgb(253,254,255)',
      'Quotelinks': 'rgb(0,255,255)',
      'Backlinks': 'rgb(0,255,255)',
      'Greentext': 'rgb(67,204,103)',
      'Board Title': 'rgb(253,254,255)',
      'Timestamps': 'rgb(253,254,255)',
      'Inputs': 'rgb(253,254,255)',
      'Warnings': 'rgb(0,255,255)',
      'Shadow Color': 'rgba(0,0,0,.1)',
      'Custom CSS': "#qp div.post{\n  background-color:rgba(0,0,0,0.8);\n  border: 1px solid #333;\n}\n#qr {\n  background-color: rgba(0,0,0,0.7);\n  border: 1px solid #333;\n}"
    },
    'PaisleyChan': {
      'Author': 'Ubuntufriend',
      'Author Tripcode': '!TRip.C0d3',
      'Background Image': 'url(http://i.imgur.com/DRaZf.jpg)',
      'Background Attachment': 'fixed',
      'Background Repeat': 'repeat',
      'Background Color': 'rgba(19,19,19,1)',
      'Dialog Background': 'rgba(16,16,16,1)',
      'Dialog Border': 'rgba(16,16,16,1)',
      'Thread Wrapper Background': 'rgba(52,56,56,0.3)',
      'Thread Wrapper Border': 'rgba(52,56,56,0.3)',
      'Reply Background': 'rgba(52,56,56,1)',
      'Reply Border': 'rgba(0,0,0,0)',
      'Highlighted Reply Background': 'rgba(0,0,0,0)',
      'Highlighted Reply Border': 'rgba(0,0,0,0)',
      'Backlinked Reply Outline': 'rgba(98,124,141,1)',
      'Checkbox Background': 'rgba(34,34,34,1)',
      'Checkbox Border': 'rgba(60,60,60,1)',
      'Input Background': 'rgba(28,28,28,1)',
      'Input Border': 'rgba(28,28,28,1)',
      'Hovered Input Background': 'rgba(24,24,24,1)',
      'Hovered Input Border': 'rgba(24,24,24,1)',
      'Focused Input Background': 'rgba(32,32,32,1)',
      'Focused Input Border': 'rgba(32,32,32,1)',
      'Buttons Background': 'rgba(32,32,32,1)',
      'Buttons Border': 'rgba(32,32,32,1)',
      'Navigation Background': 'rgba(16,16,16,0.9)',
      'Navigation Border': 'rgba(16,16,16,0.9)',
      'Links': 'rgb(187,187,187)',
      'Hovered Links': 'rgb(0,223,252)',
      'Navigation Links': 'rgb(153,153,153)',
      'Hovered Navigation Links': 'rgb(0,223,252)',
      'Subjects': 'rgb(170,170,170)',
      'Names': 'rgb(128,172,206)',
      'Sage': 'rgb(153,153,153)',
      'Tripcodes': 'rgb(128,172,206)',
      'Emails': 'rgb(187,187,187)',
      'Post Numbers': 'rgb(153,153,153)',
      'Text': 'rgb(153,153,153)',
      'Quotelinks': 'rgb(212,212,212)',
      'Backlinks': 'rgb(212,212,212)',
      'Greentext': 'rgb(152,185,98)',
      'Board Title': 'rgb(153,153,153)',
      'Timestamps': 'rgb(153,153,153)',
      'Inputs': 'rgb(153,153,153)',
      'Warnings': 'rgb(187,187,187)',
      'Shadow Color': 'rgba(0,0,0,.1)',
      'Custom CSS': "#appchanx-settings {\n  background-color: rgba(16,16,16,1) !important;\n}\n#delform blockquote {\n  border-radius:3px;\n  color:#bbb;\n  background:#343838;\n  padding:8px;\n  box-shadow:0px 0px 20px rgba(25,25,25,0.6);\n  border:1px solid #343838;\n  border-bottom:2px solid #444848;\n  border-radius:0px 6px 6px 6px;\n  padding-top:15px;\n}\n.name {\n  font-weight:800;\n}\n.nameBlock > .useremail > .name:hover,\n.nameBlock> .useremail> .postertrip:hover {\n  color:#00dffc;\n}\na.forwardlink {\n  color:#608cae;\n  font-weight:800;\n}\ndiv.reply,\n.reply.highlight {\n  padding:0;\n}\n#qp div.post {\n  border:1px solid rgba(128,172,206,0.5) !important;\n  background-color: rgba(24,24,24,0.9) !important;\n}\n.name,\n.postertrip {\n  text-shadow:0px 0px 6px rgba(20,20,20,0.9);\n  font-weight:bold;\n  background:#343838;\n  border:1px solid #343838;\n  border-radius:5px 5px 0px 0px;\n  padding:4px 6px;\n  padding-top:2px;\n}\n.board,\n.board blockquote {\n  margin:0 10px 15px 0 !important;\n  padding:0px;\n}\na {\n  -moz-transition:all 0.5s ease;\n  -webkit-transition:all 0.5s ease;\n  -o-transition:all 0.5s ease;\n}\na.pointer{\n  font-weight:bold;\n  font-weight:normal;\n  color:#777;\n  padding-right:5px;\n}\n.board .opContainer,\n.board .replyContainer {\n  opacity:0.45;\n  transition:all 0.5s ease;\n}\n.board .opContainer:hover,\n.board .replyContainer:hover {\n  opacity:1;\n}\n.reply.post,\n.reply.highlight {\n  background:transparent;\n  border:0px;\n  padding:0px;\n  padding-bottom:0px;\n  border-radius:6px;\n}\n#delform blockquote {\n  padding:5px;\n  background:#343838;\n  margin-top:0px;\n  min-height:20px;\n  padding-top:10px;\n  clear:none;\n}\n#delform blockquote::after {\n  content: ' ';\n  clear: both;\n}\n#delform .file + blockquote {\n  margin-top: -1.4em !important;\n  padding-top: 1.4em !important;\n  padding-left:165px !important;\n}\n.file {\n  margin-top: 2px;\n}\na.backlink{\nborder:1px solid #343838;\nborder-radius:5px 5px 0px 0px;\nbackground:#343838;\npadding:2px 4px 2px;\n  text-decoration:none;\n}\na.forwardlink{\n  color:#608CAE;\n  text-shadow:0 0 6px rgba(96,140,174,0.8);\n}\n.subject{\n  font-weight: bold;\n  letter-spacing: 3px;\n  background: transparent;\n}\n.reply.post {\n  background-color: rgba(0,0,0,0) !important;\n  border: none !important;\n}\n#qp div.post .name,\n#qp div.post a.backlink,\n#qp div.post blockquote {\n  background:none !important;\n  border:none !important;\n  box-shadow:none !important;\n  border-radius:0px !important;\n}"
    },
    'Photon': {
      'Author': 'seaweed',
      'Author Tripcode': '!POMF.9waa',
      'Background Color': 'rgba(238,238,238,1)',
      'Dialog Background': 'rgba(238,238,238,1)',
      'Dialog Border': 'rgba(204,204,204,1)',
      'Thread Wrapper Background': 'rgba(0,0,0,0)',
      'Thread Wrapper Border': 'rgba(0,0,0,0)',
      'Reply Background': 'rgba(221,221,221,1)',
      'Reply Border': 'rgba(204,204,204,1)',
      'Highlighted Reply Background': 'rgba(204,204,204,1)',
      'Highlighted Reply Border': 'rgba(204,204,204,1)',
      'Backlinked Reply Outline': 'rgba(98,124,141,1)',
      'Checkbox Background': 'rgba(255,255,238)',
      'Checkbox Border': 'rgba(255,255,238)',
      'Input Background': 'rgba(255,255,255,1)',
      'Input Border': 'rgba(204,204,204,1)',
      'Hovered Input Background': 'rgba(204,204,204,1)',
      'Hovered Input Border': 'rgba(204,204,204,1)',
      'Focused Input Background': 'rgba(255,255,255,1)',
      'Focused Input Border': 'rgba(0,74,153,1)',
      'Buttons Background': 'rgba(255,255,238,1)',
      'Buttons Border': 'rgba(204,204,204,1)',
      'Navigation Background': 'rgba(238,238,238,0.9)',
      'Navigation Border': 'rgba(238,238,238,0.9)',
      'Links': 'rgb(255,102,0)',
      'Hovered Links': 'rgb(255,51,0)',
      'Navigation Links': 'rgb(17,17,17)',
      'Hovered Navigation Links': 'rgb(255,51,0)',
      'Subjects': 'rgb(17,17,17)',
      'Names': 'rgb(0,74,153)',
      'Sage': 'rgb(51,51,51)',
      'Tripcodes': 'rgb(255,51,0)',
      'Emails': 'rgb(255,102,0)',
      'Post Numbers': 'rgb(51,51,51)',
      'Text': 'rgb(51,51,51)',
      'Quotelinks': 'rgb(17,17,17)',
      'Backlinks': 'rgb(17,17,17)',
      'Greentext': 'rgb(120,153,34)',
      'Board Title': 'rgb(0,74,153)',
      'Timestamps': 'rgb(51,51,51)',
      'Inputs': 'rgb(0,0,0)',
      'Warnings': 'rgb(51,51,51)',
      'Shadow Color': 'rgba(0,0,0,.05)',
      'Custom CSS': ".fileText{\n  color: rgb(102,102,102);\n}\n.boardTitle {\n  color: #004a99 !important;\n  text-shadow: 1px 1px 1px #222 !important;\n}\n.boardSubtitle,\n.boardBanner .boardSubtitle > a  {\n  text-shadow: none !important;\n}"
    },
    'RedUX': {
      'Author': 'Zixaphir',
      'Author Tripcode': '!VGsTHECURE',
      'Background Image': 'linear-gradient(rgba(210,210,210,0.7), rgba(240,240,240,0.4) 400px, rgba(240,240,240,0.3)), url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIQAAACEAQMAAABrihHkAAAABlBMVEX///8AAABVwtN+AAAAAnRSTlMASuCaZbYAAAA+SURBVHhe7c2xCQAgDAXRKywsHcFRdDNxchtBkhHk4Lp88ui7hhaztBCkyYZ7fFHzI/Jk/GRpaWlpaWlpaR3scHNQSY3kigAAAABJRU5ErkJggg==")',
      'Background Attachment': 'fixed, scroll',
      'Background Position': 'top, center',
      'Background Repeat': 'no-repeat, repeat',
      'Background Color': 'rgba(238,242,255,1)',
      'Thread Wrapper Background': 'rgb(230,230,230)',
      'Thread Wrapper Border': 'rgba(204,204,204,1)',
      'Dialog Background': 'linear-gradient(rgb(222,222,222), rgb(240,240,240) 200px, rgb(240,240,240))',
      'Dialog Border': 'rgb(220,210,210)',
      'Reply Background': 'rgba(230,230,230,1)',
      'Reply Border': 'rgba(204,204,204,1)',
      'Highlighted Reply Background': 'rgba(219,219,219,1)',
      'Highlighted Reply Border': 'rgba(219,219,219,1)',
      'Backlinked Reply Outline': 'rgba(98,124,141,1)',
      'Input Background': 'linear-gradient(rgb(222,222,222), rgb(240,240,240)), rgb(240,240,240)',
      'Input Border': 'rgb(220,210,210)',
      'Hovered Input Background': 'linear-gradient(rgba(214,186,208,0.7), rgb(240,240,240)), rgb(240,240,240)',
      'Hovered Input Border': 'rgba(214,186,208,1)',
      'Focused Input Background': 'rgb(240,240,240)',
      'Focused Input Border': 'rgb(220,210,210)',
      'Checkbox Background': 'rgba(238,242,255,1)',
      'Checkbox Border': 'rgba(180,180,180,1)',
      'Buttons Background': 'linear-gradient(rgb(222,222,222), rgb(240,240,240)), rgb(240,240,240)',
      'Buttons Border': 'rgb(220,210,210)',
      'Navigation Background': 'rgba(230,230,230,0.8)',
      'Navigation Border': 'rgba(204,204,204,1)',
      'Quotelinks': 'rgb(153,51,51)',
      'Backlinks': 'rgb(153,51,51)',
      'Links': 'rgb(87,87,123)',
      'Hovered Links': 'rgb(221,0,0)',
      'Navigation Links': 'rgb(0,0,0)',
      'Hovered Navigation Links': 'rgb(87,87,123)',
      'Names': 'rgb(119,51,51)',
      'Tripcodes': 'rgb(119,51,51)',
      'Emails': 'rgb(87,87,123)',
      'Subjects': 'rgb(15,12,93)',
      'Text': 'rgb(0,0,0)',
      'Inputs': 'rgb(0,0,0)',
      'Post Numbers': 'rgb(0,0,0)',
      'Greentext': 'rgb(34,133,34)',
      'Sage': 'rgb(87,87,123)',
      'Board Title': 'rgb(119,51,51)',
      'Timestamps': 'rgb(0,0,0)',
      'Warnings': 'rgb(87,87,123)',
      'Shadow Color': 'rgba(0,0,0,.07)',
      'Custom CSS': ".board .reply {\n  background-color: transparent;\n  border-color: #ccc transparent transparent transparent;\n  border-style: solid;\n  border-radius: 0 !important;\n  margin-bottom: 0;\n}\n#themes {\n  text-shadow: none;\n}\n#qp {\n  text-shadow: 1px 0 0 rgb(0,0,0),\n    1px 1px 0 rgb(0,0,0),\n    0 1px 0 rgb(0,0,0),\n    1px 1px 2px rgb(0,0,0);\n}\n#qp .op.post,\n#qp .reply.post {\n  border: 1px rgba(0,0,0,0.7) solid;\n  background: linear-gradient(to right, rgba(0,0,0,0.7), rgba(0,0,0,0.5)), transparent;\n}\n#qp div.post,\n#qp .pln,\n#qp .postNum a {\n  color: #fcd;\n}\n#qp .dateTime {\n  color: #fcd !important;\n}\n#qp .subject,\n#qp .nameBlock > .useremail > .name,\n#qp .nameBlock > .useremail > .postertrip,\n#qp .name,\n#qp .postertrip,\n#qp .trip {\n  color: #ffaac0 !important;\n}\n#qp a {\n  color: #aaaac8;\n}\n.boardBanner a,\n#qp a.backlink,\n#qp span.quote > a.quotelink {\n  color: rgb(255,255,255);\n}\n#qp span.quote {\n  color: rgb(130,163,100);\n}\n.board {\n  box-shadow: 0 20px 40px 10px rgba(0,0,0,0.1);\n  border-radius: 4px;\n}\n:not(#themes) .rice {\n  box-shadow:rgba(170, 170, 170,0.3) 0 1px;\n}\n#qp .prettyprint {\n  background-color: rgba(0,0,0,0.3);\n  border: 1px solid rgba(0,0,0,0.5);\n}\n#qp span.tag {\n  color: #96562c;\n}\n#qp span.pun {\n  color: #5b6f2a;\n}\n#qp span.com {\n  color: #a34443;\n}\n#qp span.str,\n#qp span.atv {\n  color: #8ba446;\n}\n#qp span.kwd {\n  color: #987d3e;\n}\n#qp span.typ,\n#qp span.atn {\n  color: #897399;\n}\n#qp span.lit {\n  color: #558773;\n}"
    },
    'Solarized': {
      'Author': 'ubuntufriend',
      'Author Tripcode': '!TRip.C0d',
      'Background Color': 'rgba(7,54,66,1)',
      'Dialog Background': 'rgba(0,43,54,1)',
      'Dialog Border': 'rgba(0,43,54,1)',
      'Thread Wrapper Background': 'rgba(0,0,0,0)',
      'Thread Wrapper Border': 'rgba(0,0,0,0)',
      'Reply Background': 'rgba(0,43,54,1)',
      'Reply Border': 'rgba(0,43,54,1)',
      'Highlighted Reply Background': 'rgba(7,54,66,1)',
      'Highlighted Reply Border': 'rgba(7,54,66,1)',
      'Backlinked Reply Outline': 'rgba(98,124,141,1)',
      'Checkbox Background': 'rgba(88,110,117,1)',
      'Checkbox Border': 'rgba(88,110,117,1)',
      'Input Background': 'rgba(0,43,54,1)',
      'Input Border': 'rgba(0,43,54,1)',
      'Hovered Input Background': 'rgba(7,54,66,1)',
      'Hovered Input Border': 'rgba(7,54,66,1)',
      'Focused Input Background': 'rgba(7,54,66,1)',
      'Focused Input Border': 'rgba(7,54,66,1)',
      'Buttons Background': 'rgba(0,43,54,1)',
      'Buttons Border': 'rgba(0,43,54,1)',
      'Navigation Background': 'rgba(7,54,66,1)',
      'Navigation Border': 'rgba(7,54,66,1)',
      'Links': 'rgb(108,113,196)',
      'Hovered Links': 'rgb(211,54,130)',
      'Navigation Links': 'rgb(147,161,161)',
      'Hovered Navigation Links': 'rgb(211,54,130)',
      'Subjects': 'rgb(203,75,22)',
      'Names': 'rgb(88,110,117)',
      'Sage': 'rgb(108,113,196)',
      'Tripcodes': 'rgb(42,161,152)',
      'Emails': 'rgb(108,113,196)',
      'Post Numbers': 'rgb(147,161,161)',
      'Text': 'rgb(147,161,161)',
      'Quotelinks': 'rgb(79,95,143)',
      'Backlinks': 'rgb(79,95,143)',
      'Greentext': 'rgb(133,153,0)',
      'Board Title': 'rgb(147,161,161)',
      'Timestamps': 'rgb(147,161,161)',
      'Inputs': 'rgb(147,161,161)',
      'Warnings': 'rgb(108,113,196)',
      'Shadow Color': 'rgba(0,0,0,.1)',
      'Custom CSS': "#qp div.post {\n  background-color:rgba(7,54,66,0.9);\n  border:1px solid rgba(79,95,143,0.9);\n}"
    },
    'Yotsuba': {
      'Author': 'moot',
      'Author Tripcode': '!Ep8pui8Vw2',
      'Background Image': 'linear-gradient(rgb(254,214,175), rgb(255,255,238) 200px, rgb(255,255,238))',
      'Background Color': 'rgba(255,255,238,1)',
      'Dialog Background': 'rgba(240,224,214,1)',
      'Dialog Border': 'rgba(217,191,183,1)',
      'Thread Wrapper Background': 'rgba(0,0,0,0)',
      'Thread Wrapper Border': 'rgba(0,0,0,0)',
      'Reply Background': 'rgba(240,224,214,1)',
      'Reply Border': 'rgba(217,191,183,1)',
      'Highlighted Reply Background': 'rgba(240,192,176,1)',
      'Highlighted Reply Border': 'rgba(217,191,183,1)',
      'Backlinked Reply Outline': 'rgba(98,124,141,1)',
      'Checkbox Background': 'rgba(255,255,238,1)',
      'Checkbox Border': 'rgba(217,191,183,1)',
      'Input Background': 'rgba(240,224,214,1)',
      'Input Border': 'rgba(217,191,183,1)',
      'Hovered Input Background': 'rgba(240,224,214,1)',
      'Hovered Input Border': 'rgba(217,191,183,1)',
      'Focused Input Background': 'rgba(255,255,255,1)',
      'Focused Input Border': 'rgba(128,0,0,1)',
      'Buttons Background': 'rgba(240,192,176,1)',
      'Buttons Border': 'rgba(217,191,183,1)',
      'Navigation Background': 'rgba(240,192,176,0.7)',
      'Navigation Border': 'rgba(217,191,183,1)',
      'Links': 'rgb(186,0,0)',
      'Hovered Links': 'rgb(221,0,0)',
      'Navigation Links': 'rgb(128,0,0)',
      'Hovered Navigation Links': 'rgb(221,0,0)',
      'Subjects': 'rgb(204,17,5)',
      'Names': 'rgb(17,119,67)',
      'Sage': 'rgb(204,17,17)',
      'Tripcodes': 'rgb(34,136,84)',
      'Emails': 'rgb(186,0,0)',
      'Post Numbers': 'rgb(128,0,0)',
      'Text': 'rgb(128,0,0)',
      'Quotelinks': 'rgb(221,0,0)',
      'Backlinks': 'rgb(220,0,0)',
      'Greentext': 'rgb(120,153,34)',
      'Board Title': 'rgb(204,17,5)',
      'Timestamps': 'rgb(186,0,0)',
      'Inputs': 'rgb(0,0,0)',
      'Warnings': 'rgb(128,0,0)',
      'Shadow Color': 'rgba(0,0,0,.05)',
      'Custom CSS': "#qp div.post {\n  background-color:rgba(240,192,176,1);\n  box-shadow:5px 5px 5px rgba(128,128,128,0.5);\n}\n.reply.post {\n  border-color: transparent rgba(240,224,214,1) rgba(240,224,214,1) transparent;\n}"
    },
    'Yotsuba B': {
      'Author': 'moot',
      'Author Tripcode': '!Ep8pui8Vw2',
      'Background Image': 'linear-gradient(rgb(209,213,238), rgb(238,242,255) 200px, rgb(238,242,255))',
      'Background Color': 'rgba(238,242,255,1)',
      'Dialog Background': 'rgba(214,218,240,1)',
      'Dialog Border': 'rgba(183,197,217,1)',
      'Thread Wrapper Background': 'rgba(0,0,0,0)',
      'Thread Wrapper Border': 'rgba(0,0,0,0)',
      'Reply Background': 'rgba(214,218,240,1)',
      'Reply Border': 'rgba(183,197,217,1)',
      'Highlighted Reply Background': 'rgba(214,186,208,1)',
      'Highlighted Reply Border': 'rgba(183,197,217,1)',
      'Backlinked Reply Outline': 'rgba(98,124,141,1)',
      'Checkbox Background': 'rgba(238,242,255,1)',
      'Checkbox Border': 'rgba(183,197,217,1)',
      'Input Background': 'rgba(238,242,255,1)',
      'Input Border': 'rgba(183,197,217,1)',
      'Hovered Input Background': 'rgba(214,186,208,1)',
      'Hovered Input Border': 'rgba(183,197,217,1)',
      'Focused Input Background': 'rgba(214,218,240,1)',
      'Focused Input Border': 'rgba(153,136,238,1)',
      'Buttons Background': 'rgba(214,218,240,1)',
      'Buttons Border': 'rgba(183,197,217,1)',
      'Navigation Background': 'rgba(211,215,238,0.7)',
      'Navigation Border': 'rgba(183,197,217,1)',
      'Links': 'rgb(52,52,92)',
      'Hovered Links': 'rgb(221,0,0)',
      'Navigation Links': 'rgb(0,0,0)',
      'Hovered Navigation Links': 'rgb(221,0,0)',
      'Subjects': 'rgb(15,12,93)',
      'Names': 'rgb(17,119,67)',
      'Sage': 'rgb(153,0,0)',
      'Tripcodes': 'rgb(34,136,84)',
      'Emails': 'rgb(87,87,123)',
      'Post Numbers': 'rgb(0,0,0)',
      'Text': 'rgb(0,0,0)',
      'Quotelinks': 'rgb(221,0,0)',
      'Backlinks': 'rgb(52,52,92)',
      'Greentext': 'rgb(120,153,34)',
      'Board Title': 'rgb(175,10,15)',
      'Timestamps': 'rgb(0,0,0)',
      'Inputs': 'rgb(0,0,0)',
      'Warnings': 'rgb(87,87,123)',
      'Shadow Color': 'rgba(0,0,0,.05)',
      'Custom CSS': "#qp div.post {\n  background-color:rgba(214,186,208,1);\n  box-shadow:5px 5px 5px rgba(128,128,128,0.5);\n}\n.reply.post {\n  border-color: transparent rgba(183,197,217,1) rgba(183,197,217,1) transparent;\n}"
    },
    'Zenburned': {
      'Author': 'lazy',
      'Author Tripcode': '!HONKYn7h1.',
      'Background Color': 'rgba(63,63,63,1)',
      'Dialog Background': 'rgba(87,87,87,1)',
      'Dialog Border': 'rgba(87,87,87,1)',
      'Thread Wrapper Background': 'rgba(0,0,0,0)',
      'Thread Wrapper Border': 'rgba(0,0,0,0)',
      'Reply Background': 'rgba(87,87,87,1)',
      'Reply Border': 'rgba(87,87,87,1)',
      'Highlighted Reply Background': 'rgba(38,38,38,1)',
      'Highlighted Reply Border': 'rgba(38,38,38,1)',
      'Backlinked Reply Outline': 'rgba(98,124,141,1)',
      'Checkbox Background': 'rgba(63,63,63,1)',
      'Checkbox Border': 'rgba(136,136,136,1)',
      'Input Background': 'rgba(87,87,87,1)',
      'Input Border': 'rgba(136,136,136,1)',
      'Hovered Input Background': 'rgba(38,38,38,1)',
      'Hovered Input Border': 'rgba(38,38,38,1)',
      'Focused Input Background': 'rgba(38,38,38,1)',
      'Focused Input Border': 'rgba(153,136,238,1)',
      'Buttons Background': 'rgba(49,60,54,1)',
      'Buttons Border': 'rgba(136,136,136,1)',
      'Navigation Background': 'rgba(63,63,63,0.9)',
      'Navigation Border': 'rgba(63,63,63,0.9)',
      'Links': 'rgb(239,220,188)',
      'Hovered Links': 'rgb(248,248,147)',
      'Navigation Links': 'rgb(220,220,204)',
      'Hovered Navigation Links': 'rgb(248,248,147)',
      'Subjects': 'rgb(170,170,170)',
      'Names': 'rgb(192,190,209)',
      'Sage': 'rgb(220,220,204)',
      'Tripcodes': 'rgb(140,208,211)',
      'Emails': 'rgb(239,220,188)',
      'Post Numbers': 'rgb(220,220,204)',
      'Text': 'rgb(220,220,204)',
      'Quotelinks': 'rgb(220,163,163)',
      'Backlinks': 'rgb(220,163,163)',
      'Greentext': 'rgb(127,159,127)',
      'Board Title': 'rgb(220,220,204)',
      'Timestamps': 'rgb(220,220,204)',
      'Inputs': 'rgb(220,220,204)',
      'Warnings': 'rgb(239,220,188)',
      'Shadow Color': 'rgba(0,0,0,.1)',
      'Custom CSS': ''
    },
    "ピンク": {
      "Author": "DrooidKun",
      "Author Tripcode": "!/Apk/MRkGM",
      "Background Color": "rgb(255,255,255)",
      "Dialog Background": "rgba(242,242,242,.98)",
      "Dialog Border": "rgb(240,240,240)",
      "Thread Wrapper Background": "rgba(0,0,0,0)",
      "Thread Wrapper Border": "rgba(0,0,0,0)",
      "Reply Background": "rgba(242,242,242,1.0)",
      "Reply Border": "rgb(240,240,240)",
      "Highlighted Reply Background": "rgba(238,238,238,1.0)",
      "Highlighted Reply Border": "rgb(191,122,180)",
      "Backlinked Reply Outline": "rgb(191,122,180)",
      "Checkbox Background": "rgba(240,240,240,1.0)",
      "Checkbox Border": "rgb(222,222,222)",
      "Input Background": "rgba(240,240,240,1.0)",
      "Input Border": "rgb(222,222,222)",
      "Hovered Input Background": "rgba(224,224,224,1.0)",
      "Hovered Input Border": "rgb(222,222,222)",
      "Focused Input Background": "rgba(224,224,224,1.0)",
      "Focused Input Border": "rgb(222,222,222)",
      "Buttons Background": "rgba(240,240,240,1.0)",
      "Buttons Border": "rgb(222,222,222)",
      "Navigation Background": "rgba(255,255,255,0.8)",
      "Navigation Border": "rgb(242,242,242)",
      "Quotelinks": "rgb(191,122,180)",
      "Links": "rgb(191,122,180)",
      "Hovered Links": "rgb(198,105,201)",
      "Navigation Links": "rgb(77,77,76)",
      "Hovered Navigation Links": "rgb(198,105,201)",
      "Subjects": "rgb(77,77,77)",
      "Names": "rgb(204,94,193)",
      "Sage": "rgb(200,40,41)",
      "Tripcodes": "rgb(198,105,201)",
      "Emails": "rgb(191,122,180)",
      "Post Numbers": "rgb(191,122,180)",
      "Text": "rgb(77,77,76)",
      "Backlinks": "rgb(191,122,180)",
      "Greentext": "rgb(113,140,0)",
      "Board Title": "rgb(77,77,76)",
      "Timestamps": "rgb(77,77,76)",
      "Inputs": "rgb(77,77,76)",
      "Warnings": "rgb(200,40,41)",
      "Shadow Color": "rgba(0,0,0,0.05)",
      "Custom CSS": ".rice {\n  box-shadow:rgba(255,255,255,.3) 0 1px;\n}\nnput[type=password]:hover,\ninput[type=text]:not([disabled]):hover,\ninput#fs_search:hover,\ninput.field:hover,\n.webkit select:hover,\ntextarea:hover,\n#appchanx-settings input:not([type=checkbox]):hover {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\ninput[type=password]:focus,\ninput[type=text]:focus,\ninput#fs_search:focus,\ninput.field:focus,\n.webkit select:focus,\ntextarea:focus,\n#appchanx-settings input:focus {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\nbutton,\ninput,\ntextarea,\n.rice {\n  transition:background .2s,box-shadow .2s;\n}\n.boardTitle {\n  color: #cc5ec1 !important;\n  text-shadow: 1px 1px 1px #772E28 !important;\n}\n.boardSubtitle,\n.boardBanner .boardSubtitle > a {\n  text-shadow: none !important;\n}"
    },
    "Yotsuba Purple": {
      "Author": "seaweed",
      "Author Tripcode": "!POMF.9waa",
      "Background Image": "linear-gradient(rgba(238,221,255,1.0), rgba(248,243,254,1) 200px, rgba(248,243,254,1))",
      "Background Color": "rgb(248,243,254)",
      "Dialog Background": "rgba(238,221,255,.98)",
      "Dialog Border": "rgb(202,183,217)",
      "Thread Wrapper Background": "rgba(0,0,0,0)",
      "Thread Wrapper Border": "rgba(0,0,0,0)",
      "Reply Background": "rgba(238,221,255,1.0)",
      "Reply Border": "rgb(202,183,217)",
      "Highlighted Reply Background": "rgba(234,217,251,1.0)",
      "Highlighted Reply Border": "rgb(150,37,148)",
      "Backlinked Reply Outline": "rgb(150,37,148)",
      "Checkbox Background": "rgba(255,255,255,1.0)",
      "Checkbox Border": "rgb(202,183,217)",
      "Input Background": "rgba(255,255,255,1.0)",
      "Input Border": "rgb(202,183,217)",
      "Hovered Input Background": "rgba(239,239,239,1.0)",
      "Hovered Input Border": "rgb(202,183,217)",
      "Focused Input Background": "rgba(239,239,239,1.0)",
      "Focused Input Border": "rgb(202,183,217)",
      "Buttons Background": "rgba(255,255,255,1.0)",
      "Buttons Border": "rgb(202,183,217)",
      "Navigation Background": "rgba(229, 219, 240,.9)",
      "Navigation Border": "rgb(238,221,255)",
      "Quotelinks": "rgb(150,37,148)",
      "Links": "rgb(150,37,148)",
      "Hovered Links": "rgb(178,44,170)",
      "Navigation Links": "rgb(0,0,0)",
      "Hovered Navigation Links": "rgb(178,44,170)",
      "Subjects": "rgb(15,12,93)",
      "Names": "rgb(89,17,119)",
      "Sage": "rgb(153,0,0)",
      "Tripcodes": "rgb(178,44,170)",
      "Emails": "rgb(150,37,148)",
      "Post Numbers": "rgb(150,37,148)",
      "Text": "rgb(0,0,0)",
      "Backlinks": "rgb(150,37,148)",
      "Greentext": "rgb(120,153,34)",
      "Board Title": "rgb(0,0,0)",
      "Timestamps": "rgb(0,0,0)",
      "Inputs": "rgb(0,0,0)",
      "Warnings": "rgb(153,0,0)",
      "Shadow Color": "rgba(0,0,0,.05)",
      "Custom CSS": ".rice {\n  box-shadow:rgba(255,253,255,.3) 0 1px;\n}\ninput[type=password]:hover,\ninput[type=text]:not([disabled]):hover,\ninput#fs_search:hover,\ninput.field:hover,\ntextarea:hover,\n#appchanx-settings input:not([type=checkbox]):hover {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\ninput[type=password]:focus,\ninput[type=text]:focus,\ninput#fs_search:focus,\ninput.field:focus,\ntextarea:focus,\n#appchanx-settings input:focus {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\nbutton,\ninput,\ntextarea,\n.rice {\n  transition:background .2s,box-shadow .2s;\n}\n.boardTitle {\n  color: #591177 !important;\n  text-shadow: 1px 1px 1px #222 !important;\n}\n.boardSubtitle,\n.boardBanner .boardSubtitle > a {\n  text-shadow: none !important;\n}\n.postNum a {\n  color: #000000 !important;\n}\n.reply.post {\n  border-color: transparent rgb(202,183,217) rgb(202,183,217) transparent;\n}"
    },
    "Vimyanized Dark": {
      "Author": "seaweed",
      "Author Tripcode": "!POMF.9waa",
      "Background Color": "rgb(9,13,15)",
      "Dialog Background": "rgba(13,17,20,.98)",
      "Dialog Border": "rgb(11,19,22)",
      "Thread Wrapper Background": "rgba(13,17,20,.5)",
      "Thread Wrapper Border": "rgba(11,19,22,.9)",
      "Reply Background": "rgba(13,17,20,.9)",
      "Reply Border": "rgb(11,19,22)",
      "Highlighted Reply Background": "rgba(9,13,16,.9)",
      "Highlighted Reply Border": "rgb(83,189,177)",
      "Backlinked Reply Outline": "rgb(83,189,177)",
      "Checkbox Background": "rgba(9,13,15,.9)",
      "Checkbox Border": "rgb(11,19,22)",
      "Input Background": "rgba(9,13,15,.9)",
      "Input Border": "rgb(11,19,22)",
      "Hovered Input Background": "rgba(0,0,0,.9)",
      "Hovered Input Border": "rgb(11,19,22)",
      "Focused Input Background": "rgba(0,0,0,.9)",
      "Focused Input Border": "rgb(11,19,22)",
      "Buttons Background": "rgba(9,13,15,.9)",
      "Buttons Border": "rgb(11,19,22)",
      "Navigation Background": "rgba(9,13,15,0.8)",
      "Navigation Border": "rgb(13,17,20)",
      "Quotelinks": "rgb(83,189,177)",
      "Links": "rgb(83,189,177)",
      "Hovered Links": "rgb(48,144,181)",
      "Navigation Links": "rgb(248,248,248)",
      "Hovered Navigation Links": "rgb(48,144,181)",
      "Subjects": "rgb(184,140,209)",
      "Names": "rgb(214,62,52)",
      "Sage": "rgb(79,79,79)",
      "Tripcodes": "rgb(212,182,60)",
      "Emails": "rgb(83,189,177)",
      "Post Numbers": "rgb(83,189,177)",
      "Text": "rgb(248,248,248)",
      "Backlinks": "rgb(83,189,177)",
      "Greentext": "rgb(150,200,59)",
      "Board Title": "rgb(248,248,248)",
      "Timestamps": "rgb(221,221,221)",
      "Inputs": "rgb(248,248,248)",
      "Warnings": "rgb(79,79,79)",
      "Shadow Color": "rgba(0,0,0,.1)",
      "Custom CSS": ".board .thread {\n  padding: 1px;\n}\n.rice {\n  box-shadow:rgba(45,49,52,.3) 0 1px;\n}\ninput[type=password]:hover,\ninput[type=text]:not([disabled]):hover,\ninput#fs_search:hover,\ninput.field:hover,\n.webkit select:hover,\ntextarea:hover,\n#appchanx-settings input:not([type=checkbox]):hover {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\ninput[type=password]:focus,\ninput[type=text]:focus,\ninput#fs_search:focus,\ninput.field:focus,\n.webkit select:focus,\ntextarea:focus,\n#appchanx-settings input:focus {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\nbutton,\ninput,\ntextarea,\n.rice {\n  transition:background .2s,box-shadow .2s;\n}"
    },
    "Tomorrow Night": {
      "Author": "Chris Kempson",
      "Author Tripcode": "!.pC/AHOKAg",
      "Background Color": "rgb(29,31,33)",
      "Dialog Background": "rgba(40,42,46,.98)",
      "Dialog Border": "rgb(55,59,65)",
      "Thread Wrapper Background": "rgba(40,42,46,.5)",
      "Thread Wrapper Border": "rgba(55,59,65,.9)",
      "Reply Background": "rgba(40,42,46,.9)",
      "Reply Border": "rgb(55,59,65)",
      "Highlighted Reply Background": "rgba(36,38,42,.9)",
      "Highlighted Reply Border": "rgb(129,162,190)",
      "Backlinked Reply Outline": "rgb(129,162,190)",
      "Checkbox Background": "rgba(40,42,46,.9)",
      "Checkbox Border": "rgb(29,31,33)",
      "Input Background": "rgba(40,42,46,.9)",
      "Input Border": "rgb(29,31,33)",
      "Hovered Input Background": "rgba(24,26,30,.9)",
      "Hovered Input Border": "rgb(29,31,33)",
      "Focused Input Background": "rgba(24,26,30,.9)",
      "Focused Input Border": "rgb(29,31,33)",
      "Buttons Background": "rgba(40,42,46,.9)",
      "Buttons Border": "rgb(29,31,33)",
      "Navigation Background": "rgba(29,31,33,0.8)",
      "Navigation Border": "rgb(40,42,46)",
      "Quotelinks": "rgb(129,162,190)",
      "Links": "rgb(129,162,190)",
      "Hovered Links": "rgb(204,102,102)",
      "Navigation Links": "rgb(197,200,198)",
      "Hovered Navigation Links": "rgb(204,102,102)",
      "Subjects": "rgb(178,148,187)",
      "Names": "rgb(129,162,190)",
      "Sage": "rgb(204,102,102)",
      "Tripcodes": "rgb(138,190,183)",
      "Emails": "rgb(129,162,190)",
      "Post Numbers": "rgb(129,162,190)",
      "Text": "rgb(197,200,198)",
      "Backlinks": "rgb(129,162,190)",
      "Greentext": "rgb(181,189,104)",
      "Board Title": "rgb(197,200,198)",
      "Timestamps": "rgb(197,200,198)",
      "Inputs": "rgb(197,200,198)",
      "Warnings": "rgb(204,102,102)",
      "Shadow Color": "rgba(0,0,0,.1)",
      "Custom CSS": ".board .thread {\n  padding: 1px;\n}\n.rice {\n  box-shadow:rgba(72,74,78,.3) 0 1px;\n}\ninput[type=password]:hover,\ninput[type=text]:not([disabled]):hover,\ninput#fs_search:hover,\ninput.field:hover,\n.webkit select:hover,\ntextarea:hover,\n#appchanx-settings input:not([type=checkbox]):hover {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\ninput[type=password]:focus,\ninput[type=text]:focus,\ninput#fs_search:focus,\ninput.field:focus,\n.webkit select:focus,\ntextarea:focus,\n#appchanx-settings input:focus {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\nbutton,\ninput,\ntextarea,\n.rice {\n  transition:background .2s,box-shadow .2s;\n}"
    },
    "Solarized Light": {
      "Author": "seaweed",
      "Author Tripcode": "!POMF.9waa",
      "Background Color": "rgb(240,240,240)",
      "Dialog Background": "rgba(253,246,227,.98)",
      "Dialog Border": "rgb(230,223,206)",
      "Thread Wrapper Background": "rgba(0,0,0,0)",
      "Thread Wrapper Border": "rgba(0,0,0,0)",
      "Reply Background": "rgba(253,246,227,1.0)",
      "Reply Border": "rgb(230,223,206)",
      "Highlighted Reply Background": "rgba(249,242,223,1.0)",
      "Highlighted Reply Border": "rgb(108,113,196)",
      "Backlinked Reply Outline": "rgb(108,113,196)",
      "Checkbox Background": "rgba(255,255,255,1.0)",
      "Checkbox Border": "rgb(204,204,204)",
      "Input Background": "rgba(255,255,255,1.0)",
      "Input Border": "rgb(204,204,204)",
      "Hovered Input Background": "rgba(239,239,239,1.0)",
      "Hovered Input Border": "rgb(204,204,204)",
      "Focused Input Background": "rgba(239,239,239,1.0)",
      "Focused Input Border": "rgb(204,204,204)",
      "Buttons Background": "rgba(255,255,255,1.0)",
      "Buttons Border": "rgb(204,204,204)",
      "Navigation Background": "rgba(240,240,240,0.8)",
      "Navigation Border": "rgb(253,246,227)",
      "Quotelinks": "rgb(108,113,196)",
      "Links": "rgb(108,113,196)",
      "Hovered Links": "rgb(211,54,130)",
      "Navigation Links": "rgb(101,123,131)",
      "Hovered Navigation Links": "rgb(211,54,130)",
      "Subjects": "rgb(181,137,0)",
      "Names": "rgb(101,123,131)",
      "Sage": "rgb(153,0,0)",
      "Tripcodes": "rgb(42,161,152)",
      "Emails": "rgb(108,113,196)",
      "Post Numbers": "rgb(108,113,196)",
      "Text": "rgb(101,123,131)",
      "Backlinks": "rgb(108,113,196)",
      "Greentext": "rgb(133,153,0)",
      "Board Title": "rgb(101,123,131)",
      "Timestamps": "rgb(101,123,131)",
      "Inputs": "rgb(101,123,131)",
      "Warnings": "rgb(153,0,0)",
      "Shadow Color": "rgba(0,0,0,.05)",
      "Custom CSS": ".rice {\n  box-shadow:rgba(255,255,255,.3) 0 1px;\n}\ninput[type=password]:hover,\ninput[type=text]:not([disabled]):hover,\ninput#fs_search:hover,\ninput.field:hover,\n.webkit select:hover,\ntextarea:hover,\n#appchanx-settings input:not([type=checkbox]):hover {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\ninput[type=password]:focus,\ninput[type=text]:focus,\ninput#fs_search:focus,\ninput.field:focus,\n.webkit select:focus,\ntextarea:focus,\n#appchanx-settings input:focus {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\nbutton,\ninput,\ntextarea,\n.rice {\n  transition:background .2s,box-shadow .2s;\n}\n.boardTitle {\n  color: #b58900 !important;\n  text-shadow: 1px 1px 1px #999 !important;\n}\n.boardSubtitle,\n.boardBanner .boardSubtitle > a {\n  text-shadow: none !important;\n}\n.postNum a {\n  color: #657b83 !important;\n}"
    },
    "Muted": {
      "Author": "seaweed",
      "Author Tripcode": "!POMF.9waa",
      "Background Color": "rgb(255,255,255)",
      "Dialog Background": "rgba(245,242,233,.98)",
      "Dialog Border": "rgb(204,204,204)",
      "Thread Wrapper Background": "rgba(245,242,233,.5)",
      "Thread Wrapper Border": "rgba(204,204,204,.9)",
      "Reply Background": "rgba(245,242,233,.9)",
      "Reply Border": "rgb(204,204,204)",
      "Highlighted Reply Background": "rgba(241,238,229,.9)",
      "Highlighted Reply Border": "rgb(188,49,42)",
      "Backlinked Reply Outline": "rgb(188,49,42)",
      "Checkbox Background": "rgba(255,255,255,.9)",
      "Checkbox Border": "rgb(204,204,204)",
      "Input Background": "rgba(255,255,255,.9)",
      "Input Border": "rgb(204,204,204)",
      "Hovered Input Background": "rgba(239,239,239,.9)",
      "Hovered Input Border": "rgb(204,204,204)",
      "Focused Input Background": "rgba(239,239,239,.9)",
      "Focused Input Border": "rgb(204,204,204)",
      "Buttons Background": "rgba(255,255,255,.9)",
      "Buttons Border": "rgb(204,204,204)",
      "Navigation Background": "rgba(255,255,255,0.8)",
      "Navigation Border": "rgb(245,242,233)",
      "Quotelinks": "rgb(188,49,42)",
      "Links": "rgb(188,49,42)",
      "Hovered Links": "rgb(142,34,32)",
      "Navigation Links": "rgb(57,55,53)",
      "Hovered Navigation Links": "rgb(142,34,32)",
      "Subjects": "rgb(17,17,17)",
      "Names": "rgb(44,100,160)",
      "Sage": "rgb(153,0,0)",
      "Tripcodes": "rgb(204,101,99)",
      "Emails": "rgb(188,49,42)",
      "Post Numbers": "rgb(188,49,42)",
      "Text": "rgb(57,55,53)",
      "Backlinks": "rgb(188,49,42)",
      "Greentext": "rgb(120,153,34)",
      "Board Title": "rgb(57,55,53)",
      "Timestamps": "rgb(51,51,51)",
      "Inputs": "rgb(57,55,53)",
      "Warnings": "rgb(153,0,0)",
      "Shadow Color": "rgba(0,0,0,.05)",
      "Custom CSS": ".board .thread {\n  padding: 1px;\n}\n.rice {\n  box-shadow:rgba(255,255,255,.3) 0 1px;\n}\ninput[type=password]:hover,\ninput[type=text]:not([disabled]):hover,\ninput#fs_search:hover,\ninput.field:hover,\n.webkit select:hover,\ntextarea:hover,\n#appchanx-settings input:not([type=checkbox]):hover {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\ninput[type=password]:focus,\ninput[type=text]:focus,\ninput#fs_search:focus,\ninput.field:focus,\n.webkit select:focus,\ntextarea:focus,\n#appchanx-settings input:focus {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\nbutton,\ninput,\ntextarea,\n.rice {\n  transition:background .2s,box-shadow .2s;\n}\n.boardTitle{\ncolor:#bc312a!important;\n  text-shadow:1px 1px 1px #772e28 !important;\n}\n.boardSubtitle,\n.boardBanner .boardSubtitle > a {\n  text-shadow:none!important;\n}\n.postNum a {\n  color:#111111!important;\n}\ndiv.reply a.quotelink{\n  color:#bc312a!important;\n}"
    },
    "Monokai": {
      "Author": "seaweed",
      "Author Tripcode": "!POMF.9waa",
      "Background Color": "rgb(32,33,28)",
      "Dialog Background": "rgba(39,40,34,.98)",
      "Dialog Border": "rgb(45,46,39)",
      "Thread Wrapper Background": "rgba(0,0,0,0)",
      "Thread Wrapper Border": "rgba(0,0,0,0)",
      "Reply Background": "rgba(39,40,34,1.0)",
      "Reply Border": "rgb(45,46,39)",
      "Highlighted Reply Background": "rgba(35,36,30,1.0)",
      "Highlighted Reply Border": "rgb(226,219,116)",
      "Backlinked Reply Outline": "rgb(226,219,116)",
      "Checkbox Background": "rgba(32,33,28,1.0)",
      "Checkbox Border": "rgb(23,23,19)",
      "Input Background": "rgba(32,33,28,1.0)",
      "Input Border": "rgb(23,23,19)",
      "Hovered Input Background": "rgba(16,17,12,1.0)",
      "Hovered Input Border": "rgb(23,23,19)",
      "Focused Input Background": "rgba(16,17,12,1.0)",
      "Focused Input Border": "rgb(23,23,19)",
      "Buttons Background": "rgba(32,33,28,1.0)",
      "Buttons Border": "rgb(23,23,19)",
      "Navigation Background": "rgba(32,33,28,0.8)",
      "Navigation Border": "rgb(39,40,34)",
      "Quotelinks": "rgb(226,219,116)",
      "Links": "rgb(226,219,116)",
      "Hovered Links": "rgb(174,129,255)",
      "Navigation Links": "rgb(248,248,242)",
      "Hovered Navigation Links": "rgb(174,129,255)",
      "Subjects": "rgb(174,129,255)",
      "Names": "rgb(90,192,204)",
      "Sage": "rgb(79,79,79)",
      "Tripcodes": "rgb(250,130,32)",
      "Emails": "rgb(226,219,116)",
      "Post Numbers": "rgb(226,219,116)",
      "Text": "rgb(248,248,242)",
      "Backlinks": "rgb(226,219,116)",
      "Greentext": "rgb(162,204,40)",
      "Board Title": "rgb(248,248,242)",
      "Timestamps": "rgb(248,248,242)",
      "Inputs": "rgb(248,248,242)",
      "Warnings": "rgb(79,79,79)",
      "Shadow Color": "rgba(0,0,0,.12)",
      "Custom CSS": ".rice {\n  box-shadow:rgba(71,72,66,.3) 0 1px;\n}\ninput[type=password]:hover,\ninput[type=text]:not([disabled]):hover,\ninput#fs_search:hover,\ninput.field:hover,\n.webkit select:hover,\ntextarea:hover,\n#appchanx-settings input:not([type=checkbox]):hover {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\ninput[type=password]:focus,\ninput[type=text]:focus,\ninput#fs_search:focus,\ninput.field:focus,\n.webkit select:focus,\ntextarea:focus,\n#appchanx-settings input:focus {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\nbutton,\ninput,\ntextarea,\n.rice {\n  transition:background .2s,box-shadow .2s;\n}"
    },
    "Dark Flat": {
      "Author": "Ahoka",
      "Author Tripcode": "!.pC/AHOKAg",
      "Background Image": "url(\"data:image/gif;base64,R0lGODlhAwADAIAAAB0dHRkZGSH5BADoAwAALAAAAAADAAMAAAIDDG5YADs=\")",
      "Background Attachment": "fixed",
      "Background Position": "top left",
      "Background Repeat": "repeat",
      "Background Color": "rgb(32,32,32)",
      "Dialog Background": "rgba(35,36,37,.98)",
      "Dialog Border": "rgb(41,42,43)",
      "Thread Wrapper Background": "rgba(35,36,37,.5)",
      "Thread Wrapper Border": "rgba(41,42,43,.9)",
      "Reply Background": "rgba(35,36,37,.9)",
      "Reply Border": "rgba(35,36,37,.9)",
      "Highlighted Reply Background": "rgba(31,32,33,.9)",
      "Highlighted Reply Border": "rgb(172,155,176)",
      "Backlinked Reply Outline": "rgb(172,155,176)",
      "Checkbox Background": "rgba(24,25,26,.9)",
      "Checkbox Border": "rgb(18,19,20)",
      "Input Background": "rgba(24,25,26,.9)",
      "Input Border": "rgb(18,19,20)",
      "Hovered Input Background": "rgba(8,9,10,.9)",
      "Hovered Input Border": "rgb(18,19,20)",
      "Focused Input Background": "rgba(8,9,10,.9)",
      "Focused Input Border": "rgb(18,19,20)",
      "Buttons Background": "rgba(24,25,26,.9)",
      "Buttons Border": "rgb(18,19,20)",
      "Navigation Background": "rgba(32,32,32,0.8)",
      "Navigation Border": "rgb(35,36,37)",
      "Quotelinks": "rgb(172,155,176)",
      "Links": "rgb(172,155,176)",
      "Hovered Links": "rgb(111,153,180)",
      "Navigation Links": "rgb(221,221,221)",
      "Hovered Navigation Links": "rgb(111,153,180)",
      "Subjects": "rgb(147,144,201)",
      "Names": "rgb(168,198,217)",
      "Sage": "rgb(201,144,144)",
      "Tripcodes": "rgb(212,192,149)",
      "Emails": "rgb(172,155,176)",
      "Post Numbers": "rgb(172,155,176)",
      "Text": "rgb(221,221,221)",
      "Backlinks": "rgb(172,155,176)",
      "Greentext": "rgb(179,196,94)",
      "Board Title": "rgb(221,221,221)",
      "Timestamps": "rgb(221,221,221)",
      "Inputs": "rgb(221,221,221)",
      "Warnings": "rgb(201,144,144)",
      "Shadow Color": "rgba(0,0,0,.1)",
      "Custom CSS": ".board .thread {\n  padding: 1px;\n}\n.rice {\n  box-shadow:rgba(67,68,69,.3) 0 1px;\n}\ninput[type=password]:hover,\ninput[type=text]:not([disabled]):hover,\ninput#fs_search:hover,\ninput.field:hover,\n.webkit select:hover,\ntextarea:hover,\n#appchanx-settings input:not([type=checkbox]):hover {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\ninput[type=password]:focus,\ninput[type=text]:focus,\ninput#fs_search:focus,\ninput.field:focus,\n.webkit select:focus,\ntextarea:focus,\n#appchanx-settings input:focus {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\nbutton,\ninput,\ntextarea,\n.rice {\n  transition:background .2s,box-shadow .2s;\n}"
    },
    "Blackboard": {
      "Author": "seaweed",
      "Author Tripcode": "!POMF.9waa",
      "Background Color": "rgb(10,13,28)",
      "Dialog Background": "rgba(12,16,33,.98)",
      "Dialog Border": "rgb(14,18,40)",
      "Thread Wrapper Background": "rgba(0,0,0,0)",
      "Thread Wrapper Border": "rgba(0,0,0,0)",
      "Reply Background": "rgba(12,16,33,1.0)",
      "Reply Border": "rgb(14,18,40)",
      "Highlighted Reply Background": "rgba(8,12,29,1.0)",
      "Highlighted Reply Border": "rgb(251,222,45)",
      "Backlinked Reply Outline": "rgb(251,222,45)",
      "Checkbox Background": "rgba(12,16,33,1.0)",
      "Checkbox Border": "rgb(8,11,22)",
      "Input Background": "rgba(12,16,33,1.0)",
      "Input Border": "rgb(8,11,22)",
      "Hovered Input Background": "rgba(0,0,17,1.0)",
      "Hovered Input Border": "rgb(8,11,22)",
      "Focused Input Background": "rgba(0,0,17,1.0)",
      "Focused Input Border": "rgb(8,11,22)",
      "Buttons Background": "rgba(12,16,33,1.0)",
      "Buttons Border": "rgb(8,11,22)",
      "Navigation Background": "rgba(10,13,28,0.8)",
      "Navigation Border": "rgb(12,16,33)",
      "Quotelinks": "rgb(251,222,45)",
      "Links": "rgb(251,222,45)",
      "Hovered Links": "rgb(75,101,204)",
      "Navigation Links": "rgb(248,248,248)",
      "Hovered Navigation Links": "rgb(75,101,204)",
      "Subjects": "rgb(255,100,0)",
      "Names": "rgb(141,166,206)",
      "Sage": "rgb(79,79,79)",
      "Tripcodes": "rgb(255,100,0)",
      "Emails": "rgb(251,222,45)",
      "Post Numbers": "rgb(251,222,45)",
      "Text": "rgb(248,248,248)",
      "Backlinks": "rgb(251,222,45)",
      "Greentext": "rgb(154,207,8)",
      "Board Title": "rgb(248,248,248)",
      "Timestamps": "rgb(221,221,221)",
      "Inputs": "rgb(248,248,248)",
      "Warnings": "rgb(79,79,79)",
      "Shadow Color": "rgba(0,0,0,.1)",
      "Custom CSS": ".rice {\n  box-shadow:rgba(44,48,65,.3) 0 1px;\n}\ninput[type=password]:hover,\ninput[type=text]:not([disabled]):hover,\ninput#fs_search:hover,\ninput.field:hover,\n.webkit select:hover,\ntextarea:hover,\n#appchanx-settings input:not([type=checkbox]):hover {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\ninput[type=password]:focus,\ninput[type=text]:focus,\ninput#fs_search:focus,\ninput.field:focus,\n.webkit select:focus,\ntextarea:focus,\n#appchanx-settings input:focus {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\nbutton,\ninput,\ntextarea,\n.rice {\n  transition:background .2s,box-shadow .2s;\n}\n.postInfo {\n  box-shadow: 0px 2px 3px #0A0A0A;\n}\n#qp .postInfo,\n.inline .postInfo {\n  box-shadow: none;\n}"
    },
    "4chan Rewired": {
      "Author": "",
      "Author Tripcode": "!K.WeEabo0o",
      "Background Color": "rgb(244,244,244)",
      "Dialog Background": "rgba(239,239,239,.98)",
      "Dialog Border": "rgb(212,212,212)",
      "Thread Wrapper Background": "rgba(0,0,0,0)",
      "Thread Wrapper Border": "rgba(0,0,0,0)",
      "Reply Background": "linear-gradient(rgba(244,244,244,0.9), rgba(239,239,239,0.9)), rgba(239,239,239,1)",
      "Reply Border": "rgb(212,212,212)",
      "Highlighted Reply Background": "linear-gradient(rgba(250,250,250,.9), rgba(230,230,230,0.9))",
      "Highlighted Reply Border": "rgb(191,127,63)",
      "Backlinked Reply Outline": "rgba(191,127,63,0.5)",
      "Checkbox Background": "rgba(228,228,228,.9)",
      "Checkbox Border": "rgb(204,204,204)",
      "Input Background": "rgba(244,244,244,0.9)",
      "Input Border": "rgb(204,204,204)",
      "Hovered Input Background": "rgba(212,212,212,.9)",
      "Hovered Input Border": "rgb(204,204,204)",
      "Focused Input Background": "rgba(212,212,212,.9)",
      "Focused Input Border": "rgb(204,204,204)",
      "Buttons Background": "rgba(244,244,244,0.9)",
      "Buttons Border": "rgb(204,204,204)",
      "Navigation Background": "rgba(244,244,244,0.8)",
      "Navigation Border": "rgb(239,239,239)",
      "Quotelinks": "rgb(191,127,63)",
      "Links": "rgb(191,127,63)",
      "Hovered Links": "rgb(191,127,63)",
      "Navigation Links": "rgba(0,0,0,.7)",
      "Hovered Navigation Links": "rgb(211,54,130)",
      "Subjects": "rgba(0,0,0,.7)",
      "Names": "rgba(0,0,0,.7)",
      "Sage": "rgb(204,102,102)",
      "Tripcodes": "rgb(191,127,63)",
      "Emails": "rgb(191,127,63)",
      "Post Numbers": "rgb(191,127,63)",
      "Text": "rgba(0,0,0,.7)",
      "Backlinks": "rgb(191,127,63)",
      "Greentext": "rgb(107,122,30)",
      "Board Title": "rgba(0,0,0,.7)",
      "Timestamps": "rgba(0,0,0,.7)",
      "Inputs": "rgba(0,0,0,.7)",
      "Warnings": "rgb(204,102,102)",
      "Shadow Color": "rgba(0,0,0,.07)",
      "Custom CSS": ".rice {\n  box-shadow:rgba(255,255,255,.3) 0 1px;\n}\ninput[type=password]:hover,\ninput[type=text]:not([disabled]):hover,\ninput#fs_search:hover,\ninput.field:hover,\n.webkit select:hover,\ntextarea:hover,\n#appchanx-settings input:not([type=checkbox]):hover {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\n.reply.post,\n.op.post {\n  background-color: transparent !important;\n}\ninput[type=password]:focus,\ninput[type=text]:focus,\ninput#fs_search:focus,\ninput.field:focus,\n.webkit select:focus,\ntextarea:focus,\n#appchanx-settings input:focus {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\na {\n  -moz-transition: text-shadow .2s;\n  -o-transition: text-shadow .2s;\n  -webkit-transition: text-shadow .2s;\n}\na:hover {\n  text-shadow: 0 0 3px rgba(232,118,0,.7);\n}\nbutton,\ninput,\ntextarea,\n.rice {\n  transition:\n    background .2s,\n    box-shadow .2s;\n}\n.subject:not(:empty)::after {\n  content: \" by\";\n  font-weight: normal;\n}"
    },
    "4chan Dark Upgrade": {
      "Author": "Ahoka",
      "Author Tripcode": "!.pC/AHOKAg",
      "Background Image": "url(\"http://i.minus.com/iNkJoDJkLU0co.png\")",
      "Background Attachment": "fixed",
      "Background Position": "top left",
      "Background Repeat": "repeat",
      "Background Color": "rgb(36,36,36)",
      "Dialog Background": "rgba(51,51,51,.98)",
      "Dialog Border": "rgb(58,58,58)",
      "Thread Wrapper Background": "rgba(51,51,51,.5)",
      "Thread Wrapper Border": "rgba(58,58,58,.9)",
      "Reply Background": "rgba(51,51,51,.9)",
      "Reply Border": "rgb(58,58,58)",
      "Highlighted Reply Background": "rgba(47,47,47,.9)",
      "Highlighted Reply Border": "rgb(221,221,221)",
      "Backlinked Reply Outline": "rgb(221,221,221)",
      "Checkbox Background": "rgba(47,47,47,.9)",
      "Checkbox Border": "rgb(15,15,15)",
      "Input Background": "rgba(47,47,47,.9)",
      "Input Border": "rgb(15,15,15)",
      "Hovered Input Background": "rgba(31,31,31,.9)",
      "Hovered Input Border": "rgb(15,15,15)",
      "Focused Input Background": "rgba(31,31,31,.9)",
      "Focused Input Border": "rgb(15,15,15)",
      "Buttons Background": "rgba(47,47,47,.9)",
      "Buttons Border": "rgb(15,15,15)",
      "Navigation Background": "rgba(36,36,36,0.8)",
      "Navigation Border": "rgb(51,51,51)",
      "Quotelinks": "rgb(221,221,221)",
      "Links": "rgb(221,221,221)",
      "Hovered Links": "rgb(238,238,238)",
      "Navigation Links": "rgb(255,255,255)",
      "Hovered Navigation Links": "rgb(238,238,238)",
      "Subjects": "rgb(153,153,153)",
      "Names": "rgb(255,255,255)",
      "Sage": "rgb(177,115,133)",
      "Tripcodes": "rgb(167,220,231)",
      "Emails": "rgb(221,221,221)",
      "Post Numbers": "rgb(221,221,221)",
      "Text": "rgb(255,255,255)",
      "Backlinks": "rgb(221,221,221)",
      "Greentext": "rgb(99,153,91)",
      "Board Title": "rgb(255,255,255)",
      "Timestamps": "rgb(170,170,170)",
      "Inputs": "rgb(255,255,255)",
      "Warnings": "rgb(177,115,133)",
      "Shadow Color": "rgba(0,0,0,0.2)",
      "Custom CSS": ".board .thread {\n  padding: 3px 4px;\n}\n.rice {\n  box-shadow:rgba(83,83,83,.3) 0 1px;\n}\ninput[type=password]:hover,\ninput[type=text]:not([disabled]):hover,\ninput#fs_search:hover,\ninput.field:hover,\n.webkit select:hover,\ntextarea:hover,\n#appchanx-settings input:not([type=checkbox]):hover {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\ninput[type=password]:focus,\ninput[type=text]:focus,\ninput#fs_search:focus,\ninput.field:focus,\n.webkit select:focus,\ntextarea:focus,\n#appchanx-settings input:focus {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\nbutton,\ninput,\ntextarea,\n.rice {\n  transition:background .2s,box-shadow .2s;\n}\n#delform {\n  background: rgba(22,22,22,.8) !important;\n  border: 0 !important;\n  padding: 1px !important;\n  box-shadow: rgba(0,0,0,.8) 0 0 10px;\n}\ndiv.reply.post {\n  background-image: url('data:image/gif;base64,R0lGODdhCQAJAIgAADMzMysrKywAAAAACQAJAAACDwxgeMrZF5Jckz1UXaYQFgA7');\n  border-bottom: #1f1f1f !important;\n}\n.board .thread:not(.stub) {\n  background: 0 !important\n}\na:not([href='javascript:;']){\n  text-shadow: #0f0f0f 0 1px;\n}"
    },
    "安心院なじみ ": {
      "Author": "Ahoka",
      "Author Tripcode": "!.pC/AHOKAg",
      "Background Image": "url(\"http://i.imgur.com/RewHm.png\")",
      "Background Attachment": "fixed",
      "Background Position": "bottom right",
      "Background Repeat": "no-repeat",
      "Background Color": "rgb(255,255,255)",
      "Dialog Background": "rgba(239,239,239,.98)",
      "Dialog Border": "rgb(214,214,214)",
      "Thread Wrapper Background": "rgba(239,239,239,.4)",
      "Thread Wrapper Border": "rgba(214,214,214,.9)",
      "Reply Background": "rgba(239,239,239,.9)",
      "Reply Border": "rgb(214,214,214)",
      "Highlighted Reply Background": "rgba(235,235,235,.9)",
      "Highlighted Reply Border": "rgb(191,128,64)",
      "Backlinked Reply Outline": "rgb(191,128,64)",
      "Checkbox Background": "rgba(204,204,204,.9)",
      "Checkbox Border": "rgb(187,187,187)",
      "Input Background": "rgba(204,204,204,.9)",
      "Input Border": "rgb(187,187,187)",
      "Hovered Input Background": "rgba(188,188,188,.9)",
      "Hovered Input Border": "rgb(187,187,187)",
      "Focused Input Background": "rgba(188,188,188,.9)",
      "Focused Input Border": "rgb(187,187,187)",
      "Buttons Background": "rgba(204,204,204,.9)",
      "Buttons Border": "rgb(187,187,187)",
      "Navigation Background": "rgba(255,255,255,0.8)",
      "Navigation Border": "rgb(239,239,239)",
      "Quotelinks": "rgb(191,128,64)",
      "Links": "rgb(191,128,64)",
      "Hovered Links": "rgb(191,128,64)",
      "Navigation Links": "rgb(77,77,76)",
      "Hovered Navigation Links": "rgb(191,128,64)",
      "Subjects": "rgb(77,77,77)",
      "Names": "rgb(43,128,194)",
      "Sage": "rgb(200,40,41)",
      "Tripcodes": "rgb(62,153,159)",
      "Emails": "rgb(191,128,64)",
      "Post Numbers": "rgb(191,128,64)",
      "Text": "rgb(77,77,76)",
      "Backlinks": "rgb(191,128,64)",
      "Greentext": "rgb(113,140,0)",
      "Board Title": "rgb(77,77,76)",
      "Timestamps": "rgb(77,77,76)",
      "Inputs": "rgb(77,77,76)",
      "Warnings": "rgb(200,40,41)",
      "Shadow Color": "rgba(0,0,0,.05)",
      "Custom CSS": ".board .thread {\n  padding: 1px;\n}\n.rice {\n  box-shadow:rgba(255,255,255,.3) 0 1px;\n}\ninput[type=password]:hover,\ninput[type=text]:not([disabled]):hover,\ninput#fs_search:hover,\ninput.field:hover,\n.webkit select:hover,\ntextarea:hover,\n#appchanx-settings input:not([type=checkbox]):hover {\n  box-shadow: inset rgba(0,0,0,.2) 0 1px 2px;\n}\ninput[type=password]:focus,\ninput[type=text]:focus,\ninput#fs_search:focus,\ninput.field:focus,\n.webkit select:focus,\ntextarea:focus,\n#appchanx-settings input:focus {\n  box-shadow: inset rgba(0,0,0,.2) 0 1px 2px;\n}\nbutton,\ninput,\ntextarea,\n.rice {\n  transition: background .2s,box-shadow .2s;\n}"
    },
    "violaceous": {
      "Author": "Anonymous",
      "Author Tripcode": "!MaSoOdDwDw",
      "Background Color": "rgb(18,19,20)",
      "Dialog Background": "rgba(27,27,27,.98)",
      "Dialog Border": "rgb(41,42,43)",
      "Thread Wrapper Background": "rgba(27,27,27,.5)",
      "Thread Wrapper Border": "rgba(41,42,43,.9)",
      "Reply Background": "rgba(27,27,27,.9)",
      "Reply Border": "rgba(27,27,27,.9)",
      "Highlighted Reply Background": "rgba(31,31,31,.9)",
      "Highlighted Reply Border": "rgb(42,127,160)",
      "Backlinked Reply Outline": "rgb(42,127,160)",
      "Checkbox Background": "rgba(24,25,26,.9)",
      "Checkbox Border": "rgb(18,19,20)",
      "Input Background": "rgba(24,25,26,.9)",
      "Input Border": "rgb(18,19,20)",
      "Hovered Input Background": "rgba(40,41,42,.9)",
      "Hovered Input Border": "rgb(18,19,20)",
      "Focused Input Background": "rgba(40,41,42,.9)",
      "Focused Input Border": "rgb(18,19,20)",
      "Buttons Background": "rgba(24,25,26,.9)",
      "Buttons Border": "rgb(18,19,20)",
      "Navigation Background": "rgba(18,19,20,0.8)",
      "Navigation Border": "rgb(27,27,27)",
      "Quotelinks": "rgb(42,127,160)",
      "Links": "rgb(42,127,160)",
      "Hovered Links": "rgb(48,144,181)",
      "Navigation Links": "rgb(221,221,221)",
      "Hovered Navigation Links": "rgb(48,144,181)",
      "Subjects": "rgb(6,152,154)",
      "Names": "rgb(164,151,176)",
      "Sage": "rgb(79,79,79)",
      "Tripcodes": "rgb(189,43,131)",
      "Emails": "rgb(42,127,160)",
      "Post Numbers": "rgb(42,127,160)",
      "Text": "rgb(221,221,221)",
      "Backlinks": "rgb(42,127,160)",
      "Greentext": "rgb(0,171,63)",
      "Board Title": "rgb(221,221,221)",
      "Timestamps": "rgb(221,221,221)",
      "Inputs": "rgb(221,221,221)",
      "Warnings": "rgb(79,79,79)",
      "Shadow Color": "rgba(0,0,0,.1)",
      "Custom CSS": ".board .thread {\n  padding: 1px;\n}\n.rice {\n  box-shadow:rgba(59,59,59,.3) 0 1px;\n}\ninput[type=password]:hover,\ninput[type=text]:not([disabled]):hover,\ninput#fs_search:hover,\ninput.field:hover,\n.webkit select:hover,\ntextarea:hover,\n#appchanx-settings input:not([type=checkbox]):hover {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\ninput[type=password]:focus,\ninput[type=text]:focus,\ninput#fs_search:focus,\ninput.field:focus,\n.webkit select:focus,\ntextarea:focus,\n#appchanx-settings input:focus {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\nbutton,\ninput,\ntextarea,\n.rice {\n  transition:background .2s,box-shadow .2s;\n}"
    },
    "Mesa": {
      "Author": "Tristan",
      "Author Tripcode": "!..NoTrip..",
      "Background Color": "#3c212a",
      "Thread Wrapper Background": "rgba(0,0,0,0)",
      "Thread Wrapper Border": "rgba(0,0,0,0)",
      "Dialog Background": "#3c212a",
      "Dialog Border": "#171717",
      "Reply Background": "#3c212a",
      "Reply Border": "#171717",
      "Highlighted Reply Background": "#3c212a",
      "Highlighted Reply Border": "#bfa977",
      "Backlinked Reply Outline": "#bfa977",
      "Input Background": "#3c212a",
      "Input Border": "#171717",
      "Checkbox Background": "#3c212a",
      "Checkbox Border": "#171717",
      "Buttons Background": "#3c212a",
      "Buttons Border": "#171717",
      "Focused Input Background": "#3c212a",
      "Focused Input Border": "#171717",
      "Hovered Input Background": "#3c212a",
      "Hovered Input Border": "#171717",
      "Navigation Background": "#3c212a",
      "Navigation Border": "#171717",
      "Quotelinks": "#bfa977",
      "Backlinks": "#bfa977",
      "Links": "#bfa977",
      "Hovered Links": "#aa4775",
      "Navigation Links": "#bfa977",
      "Hovered Navigation Links": "#aa4775",
      "Names": "#bfa977",
      "Tripcodes": "#aa6d89",
      "Emails": "#9c8aaa",
      "Subjects": "#bfa977",
      "Text": "#BFA977",
      "Inputs": "#bfa977",
      "Post Numbers": "#bfa977",
      "Greentext": "#99848b",
      "Sage": "rgb(150,150,150)",
      "Board Title": "#aa9d8d",
      "Timestamps": "#aa9d8d",
      "Warnings": "#aa8575",
      "Shadow Color": "rgba(0,0,0,.1)",
      "Custom CSS": "",
      "Background Image": "",
      "Background Attachment": "",
      "Background Position": "",
      "Background Repeat": ""
    },
    "White Rainbow": {
      "Author": "Shiro",
      "Author Tripcode": "!i.Neko0OEM",
      "Background Image": "url('http://subtlepatterns.com/patterns/paper_fibers.png')",
      "Background Attachment": "fixed",
      "Background Position": "top left",
      "Background Repeat": "repeat",
      "Background Color": "rgb(255,255,255)",
      "Dialog Background": "rgba(239,239,239,.98)",
      "Dialog Border": "rgb(214,214,214)",
      "Thread Wrapper Background": "rgba(239,239,239,.98)",
      "Thread Wrapper Border": "rgba(214,214,214,.4)",
      "Reply Background": "rgba(255,255,255,.90)",
      "Reply Border": "rgb(214,214,214)",
      "Highlighted Reply Background": "rgba(239,239,239,.90)",
      "Highlighted Reply Border": "#b84818",
      "Backlinked Reply Outline": "#b84818",
      "Checkbox Background": "rgba(239,239,239,.98)",
      "Checkbox Border": "rgb(187,187,187)",
      "Input Background": "#fffffff",
      "Input Border": "rgb(187,187,187)",
      "Hovered Input Background": "#f0f0f0",
      "Hovered Input Border": "rgb(187,187,187)",
      "Focused Input Background": "#f0f0f0",
      "Focused Input Border": "rgb(187,187,187)",
      "Buttons Background": "rgba(239,239,239,.98)",
      "Buttons Border": "rgb(187,187,187)",
      "Navigation Background": "rgba(255,255,255,0.8)",
      "Navigation Border": "rgb(239,239,239)",
      "Quotelinks": "#7a2634",
      "Links": "#7a2634",
      "Hovered Links": "#c24646",
      "Navigation Links": "#404d41",
      "Hovered Navigation Links": "#527054",
      "Subjects": "#5533ff",
      "Names": "#242ca3",
      "Sage": "#6910ad",
      "Tripcodes": "#0c76ab",
      "Emails": "#0c76ab",
      "Post Numbers": "#b86e2e",
      "Text": "#242423",
      "Backlinks": "#7a2634",
      "Greentext": "#10610a",
      "Board Title": "#000000",
      "Timestamps": "#00913f",
      "Inputs": "#242423",
      "Warnings": "rgb(200,40,41)",
      "Shadow Color": "#b0b0b0",
      "Custom CSS": ".board .thread {\n  padding: 1px;\n}\n.rice {\n  box-shadow:rgba(255,255,255,.3) 0 1px;\n}\ninput[type=password]:hover,\ninput[type=text]:not([disabled]):hover,\ninput#fs_search:hover,\ninput.field:hover,\n.webkit select:hover,\ntextarea:hover,\n#options input:not([type=checkbox]):hover {\n  box-shadow: inset rgba(0,0,0,.2) 0 1px 2px;\n}\ninput[type=password]:focus,\ninput[type=text]:focus,\ninput#fs_search:focus,\ninput.field:focus,\n.webkit select:focus,\ntextarea:focus,\n#options input:focus {\n  box-shadow: inset rgba(200,200,200,.2) 0 1px 2px;\n}\nbutton,\ninput,\ntextarea,\n.rice {\n  transition: background .2s,box-shadow .2s;\n}"
    },
    "Genergray": {
      "Author": "Zixaphir",
      "Author Tripcode": "!M.........",
      "Background Image": "",
      "Background Attachment": "",
      "Background Position": "",
      "Background Repeat": "",
      "Background Color": "rgba(32,32,32,1)",
      "Thread Wrapper Background": "rgba(24,24,24,1)",
      "Thread Wrapper Border": "rgba(30,30,30,1)",
      "Dialog Background": "rgba(32,32,32,1)",
      "Dialog Border": "rgba(20,20,20,1)",
      "Reply Background": "rgba(32,32,32,1)",
      "Reply Border": "rgba(20,20,20,1)",
      "Highlighted Reply Background": "rgba(24,24,24,1)",
      "Highlighted Reply Border": "rgba(24,24,24,1)",
      "Backlinked Reply Outline": "rgba(98,124,141,1)",
      "Input Background": "rgba(32,32,32,1)",
      "Input Border": "rgba(28,28,28,1)",
      "Hovered Input Background": "rgba(24,24,24,1)",
      "Hovered Input Border": "rgba(24,24,24,1)",
      "Focused Input Background": "rgba(16,16,16,1)",
      "Focused Input Border": "rgba(28,28,28,1)",
      "Checkbox Background": "rgb(25,25,25)",
      "Checkbox Border": "rgb(20,20,20)",
      "Buttons Background": "rgba(20,20,20,1)",
      "Buttons Border": "rgb(16,16,16)",
      "Navigation Background": "rgba(16,16,16,0.9)",
      "Navigation Border": "rgba(16,16,16,0.9)",
      "Quotelinks": "rgb(71,140,161)",
      "Backlinks": "rgba(71,140,161, 0.8)",
      "Links": "rgb(141,141,160)",
      "Hovered Links": "rgb(141,190,255)",
      "Navigation Links": "rgb(51,145,175)",
      "Hovered Navigation Links": "rgb(141,190,255)",
      "Names": "rgb(150,150,150)",
      "Tripcodes": "rgb(255,255,255)",
      "Emails": "rgb(68,68,68)",
      "Subjects": "rgb(255,100,100)",
      "Text": "rgb(235,255,235)",
      "Inputs": "rgb(144,144,144)",
      "Post Numbers": "rgb(150,150,150)",
      "Greentext": "rgb(113,121,62)",
      "Sage": "rgb(68,68,68)",
      "Board Title": "rgb(194,194,194)",
      "Timestamps": "rgb(100,100,100)",
      "Warnings": "rgb(215,0,0)",
      "Shadow Color": "rgba(0,0,0,.1)",
      "Custom CSS": ".board .thread {\n  padding: 2px;\n  box-shadow: 0px 0px 6px rgba(0, 0, 0, 0.3) inset, rgba(70,70,70,.5) 1px 1px;\n}\n#header-bar,\ninput,\ntextarea,\n.field,\n.inline .op,\n.pagelist,\n.prettyprint,\n.post.reply,\n.rice,\n.selectrice {\n  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.2) inset, rgba(70,70,70,.3) 1px 1px;\n}\n#qr .selectrice {\n  box-shadow: none;\n}\n#header-bar {\n  padding: 1px 3px;\n}\n.dialog {\n  box-shadow: 0px 0px 4px rgba(0, 0, 0, .3) inset, 1px 1px 5px rgba(0,0,0,0.2);\n}\n.threadContainer {\n  border: none;\n  box-shadow: 0px 0px 3px rgba(0, 0, 0, .3) inset, rgba(70,70,70,.3) 1px 1px;\n  padding: 2px 0;\n  margin-left: 20px;\n}\ninput[type=password]:hover,\ninput[type=text]:not([disabled]):hover,\ninput#fs_search:hover,\ninput.field:hover,\n.webkit select:hover,\ntextarea:hover,\n#appchanx-settings input:not([type=checkbox]):hover {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\ninput[type=password]:focus,\ninput[type=text]:focus,\ninput#fs_search:focus,\ninput.field:focus,\n.webkit select:focus,\ntextarea:focus,\n#appchanx-settings input:focus {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\nbutton,\ninput,\ntextarea,\n.rice {\n  transition:background .2s,box-shadow .2s;\n}"
    },
    "Frost": {
      "Author": "Zixaphir",
      "Author Tripcode": "!M.........",
      "Background Image": "",
      "Background Attachment": "",
      "Background Position": "",
      "Background Repeat": "",
      "Background Color": "rgba(230,230,230,1)",
      "Thread Wrapper Background": "rgba(235,235,235,1)",
      "Thread Wrapper Border": "rgba(215,215,215,1)",
      "Dialog Background": "rgba(230,230,230,1)",
      "Dialog Border": "rgba(255,255,255,1)",
      "Reply Background": "rgba(230,230,230,1)",
      "Reply Border": "rgba(220,220,220,1)",
      "Highlighted Reply Background": "rgba(244,244,244,1)",
      "Highlighted Reply Border": "rgba(220,220,220,1)",
      "Backlinked Reply Outline": "rgba(98,124,141,1)",
      "Input Background": "rgba(244,244,244,1)",
      "Input Border": "rgba(220,220,220,1)",
      "Hovered Input Background": "rgba(220,220,220,1)",
      "Hovered Input Border": "rgba(200,200,200,1)",
      "Focused Input Background": "rgba(255,255,255,1)",
      "Focused Input Border": "rgba(200,200,200,1)",
      "Checkbox Background": "rgba(200,200,200,1)",
      "Checkbox Border": "rgba(190,190,190,1)",
      "Buttons Background": "rgba(255,255,255,1)",
      "Buttons Border": "rgba(220,220,220,1)",
      "Navigation Background": "rgba(244,244,244,1)",
      "Navigation Border": "rgba(230,230,230,0.9)",
      "Quotelinks": "rgb(61,110,121)",
      "Backlinks": "rgba(51,145,175, 0.9)",
      "Links": "rgb(62,62,160)",
      "Hovered Links": "rgb(101,0,150)",
      "Navigation Links": "rgb(51,145,175)",
      "Hovered Navigation Links": "rgb(141,190,255)",
      "Names": "rgb(100,100,100)",
      "Tripcodes": "rgb(0,125,0)",
      "Emails": "rgb(68,68,68)",
      "Subjects": "rgb(95,0,0)",
      "Text": "rgb(0,0,0)",
      "Inputs": "rgb(0,0,0)",
      "Post Numbers": "rgb(80,80,80)",
      "Greentext": "rgb(113,121,62)",
      "Sage": "rgb(68,68,68)",
      "Board Title": "rgb(0,0,0)",
      "Timestamps": "rgb(100,100,100)",
      "Warnings": "rgb(215,0,0)",
      "Shadow Color": "rgba(0,0,0,.1)",
      "Custom CSS": ".board .thread {\n  padding: 2px;\n  box-shadow: 1px 1px 4px rgba(0, 0, 0, 0.1) inset, rgba(255,255,255,.5) 1px 1px;\n}\n#header-bar,\ninput,\ntextarea,\n.field,\n.inline .op,\n.pagelist,\n.prettyprint,\n.post.reply,\n.rice,\n.selectrice {\n  box-shadow: 0px 0px 6px rgba(0, 0, 0, 0.1) inset, rgba(255,255,255,.8) 1px 1px;\n}\n#qr .selectrice {\n  box-shadow: none;\n}\n#header-bar {\n  padding: 1px 3px;\n}\n.dialog {\n  box-shadow: 0px 0px 6px rgba(0, 0, 0, 0.1) inset, rgba(255,255,255,.5) 1px 1px;\n}\n.threadContainer {\n  border: none;\n  box-shadow: 0px 0px 6px rgba(0, 0, 0, 0.1) inset, rgba(255,255,255,.5) 1px 1px;\n  padding: 2px 0;\n  margin-left: 20px;\n}\ninput[type=password]:hover,\ninput[type=text]:not([disabled]):hover,\ninput#fs_search:hover,\ninput.field:hover,\n.webkit select:hover,\ntextarea:hover,\n#appchanx-settings input:not([type=checkbox]):hover {\n  box-shadow: inset rgba(0,0,0,.1) 0 1px 2px;\n}\ninput[type=password]:focus,\ninput[type=text]:focus,\ninput#fs_search:focus,\ninput.field:focus,\n.webkit select:focus,\ntextarea:focus,\n#appchanx-settings input:focus {\n  box-shadow: inset rgba(0,0,0,.1) 0 1px 2px;\n}\nbutton,\ninput,\ntextarea,\n.rice {\n  transition: background .2s,box-shadow .2s;\n}"
    },
    "Clone": {
      "Author": "Zixaphir",
      "Author Tripcode": "!M.........",
      "Background Image": "",
      "Background Attachment": "",
      "Background Position": "",
      "Background Repeat": "",
      "Background Color": "#1e1e1e",
      "Thread Wrapper Background": "rgba(0,0,0,0)",
      "Thread Wrapper Border": "#111111",
      "Dialog Background": "#222222",
      "Dialog Border": "#111111",
      "Reply Background": "#222222",
      "Reply Border": "#111111",
      "Highlighted Reply Background": "#141414",
      "Highlighted Reply Border": "#111111",
      "Backlinked Reply Outline": "#6d6d8c",
      "Input Background": "#222222",
      "Input Border": "#111111",
      "Hovered Input Background": "#111111",
      "Hovered Input Border": "#171717",
      "Focused Input Background": "#1e1e1e",
      "Focused Input Border": "#111111",
      "Checkbox Background": "#242424",
      "Checkbox Border": "#0f0f0f",
      "Buttons Background": "#171717",
      "Buttons Border": "#111111",
      "Navigation Background": "rgba(30,30,30,0.9)",
      "Navigation Border": "#111111",
      "Quotelinks": "#6d6d8c",
      "Backlinks": "#55555c",
      "Links": "#57577a",
      "Hovered Links": "#8787ad",
      "Navigation Links": "#bababa",
      "Hovered Navigation Links": "#676785",
      "Names": "#6e753c",
      "Tripcodes": "#94531c",
      "Emails": "#5e5e5e",
      "Subjects": "#ababab",
      "Text": "#8c8c8c",
      "Inputs": "#8c8c8c",
      "Post Numbers": "#6b6b6b",
      "Greentext": "#6e753c",
      "Sage": "#592110",
      "Board Title": "#8c8c8c",
      "Timestamps": "#7d7d7d",
      "Warnings": "#7b1126",
      "Shadow Color": "rgba(0,0,0,.1)",
      "Custom CSS": ".rice {\n  box-shadow: 1px 1px rgba(50,50,50,0.4), inset 1px 1px 2px rgba(0,0,0,0.3);\n}\n.reply.post {\n  margin: 0 !important;\n  border-radius: 0;\n}\n.board .replyContainer,\n#unread-line {\n  margin: -1px;\n}\n#qp {\n  border: none !important;\n}\n#unread-line {\n  padding: 1px;\n  border: 1px solid #111 !important;\n  background-color: #933;\n}"
    }
  };

  $ = function(selector, root) {
    if (root == null) {
      root = d.body;
    }
    return root.querySelector(selector);
  };

  $.extend = function(obj, prop) {
    var key, val;
    for (key in prop) {
      val = prop[key];
      if (prop.hasOwnProperty(key)) {
        obj[key] = val;
      }
    }
  };

  $.DAY = 24 * ($.HOUR = 60 * ($.MINUTE = 60 * ($.SECOND = 1000)));

  $.id = function(id) {
    return d.getElementById(id);
  };

  $.ready = function(fc) {
    var cb;
    if (d.readyState !== 'loading') {
      $.queueTask(fc);
      return;
    }
    cb = function() {
      $.off(d, 'DOMContentLoaded', cb);
      return fc();
    };
    return $.on(d, 'DOMContentLoaded', cb);
  };

  $.formData = function(form) {
    var fd, key, val;
    if (form instanceof HTMLFormElement) {
      return new FormData(form);
    }
    fd = new FormData();
    for (key in form) {
      val = form[key];
      if (val) {
        if (typeof val === 'object' && 'newName' in val) {
          fd.append(key, val, val.newName);
        } else {
          fd.append(key, val);
        }
      }
    }
    return fd;
  };

  $.extend = function(object, properties) {
    var key, val;
    for (key in properties) {
      val = properties[key];
      object[key] = val;
    }
  };

  $.ajax = (function() {
    var lastModified;
    lastModified = {};
    return function(url, options, extra) {
      var form, r, sync, type, upCallbacks, whenModified;
      if (extra == null) {
        extra = {};
      }
      type = extra.type, whenModified = extra.whenModified, upCallbacks = extra.upCallbacks, form = extra.form, sync = extra.sync;
      r = new XMLHttpRequest();
      type || (type = form && 'post' || 'get');
      r.open(type, url, !sync);
      if (whenModified) {
        if (url in lastModified) {
          r.setRequestHeader('If-Modified-Since', lastModified[url]);
        }
        $.on(r, 'load', function() {
          return lastModified[url] = r.getResponseHeader('Last-Modified');
        });
      }
      if (/\.json$/.test(url)) {
        r.responseType = 'json';
      }
      $.extend(r, options);
      $.extend(r.upload, upCallbacks);
      r.send(form);
      return r;
    };
  })();

  $.cache = (function() {
    var reqs;
    reqs = {};
    return function(url, cb, options) {
      var err, req, rm;
      if (req = reqs[url]) {
        if (req.readyState === 4) {
          cb.call(req, req.evt);
        } else {
          req.callbacks.push(cb);
        }
        return;
      }
      rm = function() {
        return delete reqs[url];
      };
      try {
        req = $.ajax(url, options);
      } catch (_error) {
        err = _error;
        return;
      }
      $.on(req, 'load', function(e) {
        var _i, _len, _ref;
        _ref = this.callbacks;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          cb = _ref[_i];
          cb.call(this, e);
        }
        this.evt = e;
        return delete this.callbacks;
      });
      $.on(req, 'abort error', rm);
      req.callbacks = [cb];
      return reqs[url] = req;
    };
  })();

  $.cb = {
    checked: function() {
      $.set(this.name, this.checked);
      return Conf[this.name] = this.checked;
    },
    value: function() {
      $.set(this.name, this.value.trim());
      return Conf[this.name] = this.value;
    }
  };

  $.asap = function(test, cb) {
    if (test()) {
      return cb();
    } else {
      return setTimeout($.asap, 25, test, cb);
    }
  };

  $.addStyle = function(css, id) {
    var style;
    style = $.el('style', {
      id: id,
      textContent: css
    });
    $.asap((function() {
      return d.head;
    }), function() {
      return $.add(d.head, style);
    });
    return style;
  };

  $.x = function(path, root) {
    root || (root = d.body);
    return d.evaluate(path, root, null, 8, null).singleNodeValue;
  };

  $.X = function(path, root) {
    root || (root = d.body);
    return d.evaluate(path, root, null, 7, null);
  };

  $.addClass = function() {
    var className, el, _ref;
    el = arguments[0], className = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    return (_ref = el.classList).add.apply(_ref, className);
  };

  $.rmClass = function() {
    var className, el, _ref;
    el = arguments[0], className = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    return (_ref = el.classList).remove.apply(_ref, className);
  };

  $.toggleClass = function(el, className) {
    return el.classList.toggle(className);
  };

  $.hasClass = function(el, className) {
    return __indexOf.call(el.classList, className) >= 0;
  };

  $.rm = function(el) {
    return el.remove();
  };

  $.rmAll = function(root) {
    return root.textContent = null;
  };

  $.tn = function(s) {
    return d.createTextNode(s);
  };

  $.frag = function() {
    return d.createDocumentFragment();
  };

  $.nodes = function(nodes) {
    var frag, node, _i, _len;
    if (!(nodes instanceof Array)) {
      return nodes;
    }
    frag = $.frag();
    for (_i = 0, _len = nodes.length; _i < _len; _i++) {
      node = nodes[_i];
      frag.appendChild(node);
    }
    return frag;
  };

  $.add = function(parent, el) {
    return parent.appendChild($.nodes(el));
  };

  $.prepend = function(parent, el) {
    return parent.insertBefore($.nodes(el), parent.firstChild);
  };

  $.after = function(root, el) {
    return root.parentNode.insertBefore($.nodes(el), root.nextSibling);
  };

  $.before = function(root, el) {
    return root.parentNode.insertBefore($.nodes(el), root);
  };

  $.replace = function(root, el) {
    return root.parentNode.replaceChild($.nodes(el), root);
  };

  $.el = function(tag, properties) {
    var el;
    el = d.createElement(tag);
    if (properties) {
      $.extend(el, properties);
    }
    return el;
  };

  $.on = function(el, events, handler) {
    var event, _i, _len, _ref;
    _ref = events.split(' ');
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      event = _ref[_i];
      el.addEventListener(event, handler, false);
    }
  };

  $.off = function(el, events, handler) {
    var event, _i, _len, _ref;
    _ref = events.split(' ');
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      event = _ref[_i];
      el.removeEventListener(event, handler, false);
    }
  };

  $.event = function(event, detail, root) {
    if (root == null) {
      root = d;
    }
    if ((detail != null) && typeof cloneInto === 'function') {
      detail = cloneInto(detail, d.defaultView);
    }
    return root.dispatchEvent(new CustomEvent(event, {
      bubbles: true,
      detail: detail
    }));
  };

  $.open = GM_openInTab;

  $.debounce = function(wait, fn) {
    var args, exec, lastCall, that, timeout;
    lastCall = 0;
    timeout = null;
    that = null;
    args = null;
    exec = function() {
      lastCall = Date.now();
      return fn.apply(that, args);
    };
    return function() {
      args = arguments;
      that = this;
      if (lastCall < Date.now() - wait) {
        return exec();
      }
      clearTimeout(timeout);
      return timeout = setTimeout(exec, wait);
    };
  };

  $.queueTask = (function() {
    var execTask, taskChannel, taskQueue;
    taskQueue = [];
    execTask = function() {
      var args, func, task;
      task = taskQueue.shift();
      func = task[0];
      args = Array.prototype.slice.call(task, 1);
      return func.apply(func, args);
    };
    if (window.MessageChannel) {
      taskChannel = new MessageChannel();
      taskChannel.port1.onmessage = execTask;
      return function() {
        taskQueue.push(arguments);
        return taskChannel.port2.postMessage(null);
      };
    } else {
      return function() {
        taskQueue.push(arguments);
        return setTimeout(execTask, 0);
      };
    }
  })();

  $.globalEval = function(code) {
    var script;
    script = $.el('script', {
      textContent: code
    });
    $.add(d.head || doc, script);
    return $.rm(script);
  };

  $.bytesToString = function(size) {
    var unit;
    unit = 0;
    while (size >= 1024) {
      size /= 1024;
      unit++;
    }
    size = unit > 1 ? Math.round(size * 100) / 100 : Math.round(size);
    return "" + size + " " + ['B', 'KB', 'MB', 'GB'][unit];
  };

  $.minmax = function(value, min, max) {
    return (value < min ? min : value > max ? max : value);
  };

  $.item = function(key, val) {
    var item;
    item = {};
    item[key] = val;
    return item;
  };

  $.syncing = {};

  $.sync = (function() {
    $.on(window, 'storage', function(_arg) {
      var cb, key, newValue;
      key = _arg.key, newValue = _arg.newValue;
      if (cb = $.syncing[key]) {
        return cb(JSON.parse(newValue), key);
      }
    });
    return function(key, cb) {
      return $.syncing[g.NAMESPACE + key] = cb;
    };
  })();

  $.desync = function(key) {
    return delete $.syncing[g.NAMESPACE + key];
  };

  $["delete"] = function(keys) {
    var key, _i, _len;
    if (!(keys instanceof Array)) {
      keys = [keys];
    }
    for (_i = 0, _len = keys.length; _i < _len; _i++) {
      key = keys[_i];
      key = g.NAMESPACE + key;
      localStorage.removeItem(key);
      GM_deleteValue(key);
    }
  };

  $.get = function(key, val, cb) {
    var items;
    if (typeof cb === 'function') {
      items = $.item(key, val);
    } else {
      items = key;
      cb = val;
    }
    return $.queueTask(function() {
      for (key in items) {
        if (val = GM_getValue(g.NAMESPACE + key)) {
          items[key] = JSON.parse(val);
        }
      }
      return cb(items);
    });
  };

  $.set = (function() {
    var set;
    set = function(key, val) {
      key = g.NAMESPACE + key;
      val = JSON.stringify(val);
      if (key in $.syncing) {
        localStorage.setItem(key, val);
      }
      return GM_setValue(key, val);
    };
    return function(keys, val) {
      var key;
      if (typeof keys === 'string') {
        set(keys, val);
        return;
      }
      for (key in keys) {
        val = keys[key];
        set(key, val);
      }
    };
  })();

  $.clear = function(cb) {
    $["delete"](GM_listValues().map(function(key) {
      return key.replace(g.NAMESPACE, '');
    }));
    return typeof cb === "function" ? cb() : void 0;
  };

  $.remove = function(arr, value) {
    var i;
    i = arr.indexOf(value);
    if (i === -1) {
      return false;
    }
    arr.splice(i, 1);
    return true;
  };

  $$ = function(selector, root) {
    if (root == null) {
      root = d.body;
    }
    return __slice.call(root.querySelectorAll(selector));
  };

  Callbacks = (function() {
    function Callbacks(type) {
      this.type = type;
      this.keys = [];
    }

    Callbacks.prototype.push = function(_arg) {
      var cb, name;
      name = _arg.name, cb = _arg.cb;
      if (this[name]) {
        this.connect(name);
      }
      if (!this[name]) {
        this.keys.push(name);
      }
      return this[name] = cb;
    };

    Callbacks.prototype.connect = function(name) {
      if (this[name].disconnected) {
        return delete this[name].disconnected;
      }
    };

    Callbacks.prototype.disconnect = function(name) {
      if (this[name]) {
        return this[name].disconnected = true;
      }
    };

    Callbacks.prototype.execute = function(nodes) {
      var cb, err, errors, i, j, name, node;
      i = 0;
      while (name = this.keys[i++]) {
        j = 0;
        cb = this[name];
        while (node = nodes[j++]) {
          try {
            if (!cb.disconnected) {
              cb.call(node);
            }
          } catch (_error) {
            err = _error;
            if (!errors) {
              errors = [];
            }
            errors.push({
              message: ['"', name, '" crashed on node ', this.type, ' No.', node.ID, ' (', node.board, ').'].join(''),
              error: err
            });
          }
        }
      }
      if (errors) {
        return Main.handleErrors(errors);
      }
    };

    return Callbacks;

  })();

  Board = (function() {
    Board.prototype.toString = function() {
      return this.ID;
    };

    function Board(ID) {
      this.ID = ID;
      this.threads = new SimpleDict;
      this.posts = new SimpleDict;
      g.boards[this] = this;
    }

    return Board;

  })();

  Thread = (function() {
    Thread.callbacks = new Callbacks('Thread');

    Thread.prototype.toString = function() {
      return this.ID;
    };

    function Thread(ID, board) {
      this.ID = ID;
      this.board = board;
      this.fullID = "" + this.board + "." + this.ID;
      this.posts = new SimpleDict;
      this.isDead = false;
      this.isHidden = false;
      this.isOnTop = false;
      this.isPinned = false;
      this.isSticky = false;
      this.isClosed = false;
      this.postLimit = false;
      this.fileLimit = false;
      this.OP = null;
      this.catalogView = null;
      g.threads.push(this.fullID, board.threads.push(this, this));
    }

    Thread.prototype.setPage = function(pageNum) {
      var icon, key, _i, _len, _ref;
      icon = $('.page-num', this.OP.nodes.info);
      _ref = ['title', 'textContent'];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        key = _ref[_i];
        icon[key] = icon[key].replace(/\d+/, pageNum);
      }
      if (this.catalogView) {
        return this.catalogView.nodes.pageCount.textContent = pageNum;
      }
    };

    Thread.prototype.setCount = function(type, count, reachedLimit) {
      var el;
      if (!this.catalogView) {
        return;
      }
      el = this.catalogView.nodes["" + type + "Count"];
      el.textContent = count;
      return (reachedLimit ? $.addClass : $.rmClass)(el, 'warning');
    };

    Thread.prototype.setStatus = function(type, status) {
      var icon, name, root, typeLC;
      name = "is" + type;
      if (this[name] === status) {
        return;
      }
      this[name] = status;
      if (!this.OP) {
        return;
      }
      typeLC = type.toLowerCase();
      if (!status) {
        $.rm($("." + typeLC + "Icon", this.OP.nodes.info));
        if (this.catalogView) {
          $.rm($("." + typeLC + "Icon", this.catalogView.nodes.icons));
        }
        return;
      }
      icon = $.el('img', {
        src: "" + Build.staticPath + typeLC + Build.gifIcon,
        title: type,
        className: "" + typeLC + "Icon"
      });
      root = type === 'Closed' && this.isSticky ? $('.stickyIcon', this.OP.nodes.info) : g.VIEW === 'index' ? $('.page-num', this.OP.nodes.info) : $('[title="Reply to this post"]', this.OP.nodes.info);
      $.after(root, [$.tn(' '), icon]);
      if (!this.catalogView) {
        return;
      }
      return (type === 'Sticky' && this.isClosed ? $.prepend : $.add)(this.catalogView.nodes.icons, icon.cloneNode());
    };

    Thread.prototype.pin = function() {
      this.isPinned = true;
      if (this.catalogView) {
        return $.addClass(this.catalogView.nodes.root, 'pinned');
      }
    };

    Thread.prototype.unpin = function() {
      this.isPinned = false;
      if (this.catalogView) {
        return $.rmClass(this.catalogView.nodes.root, 'pinned');
      }
    };

    Thread.prototype.hide = function() {
      var button;
      if (this.isHidden) {
        return;
      }
      this.isHidden = true;
      this.OP.nodes.root.parentElement.hidden = true;
      if (button = $('.hide-post-button', this.OP.nodes.root)) {
        return $.replace(button, PostHiding.makeButton(false));
      }
    };

    Thread.prototype.show = function() {
      var button;
      if (!this.isHidden) {
        return;
      }
      this.isHidden = false;
      if (button = $('.show-post-button', this.OP.nodes.root)) {
        return $.replace(button, PostHiding.makeButton(true));
      }
    };

    Thread.prototype.kill = function() {
      return this.isDead = true;
    };

    Thread.prototype.collect = function() {
      this.posts.forEach(function(post) {
        return post.collect();
      });
      g.threads.rm(this.fullID);
      return this.board.threads.rm(this);
    };

    return Thread;

  })();

  CatalogThread = (function() {
    CatalogThread.callbacks = new Callbacks('Catalog Thread');

    CatalogThread.prototype.toString = function() {
      return this.ID;
    };

    function CatalogThread(root, thread) {
      this.thread = thread;
      this.ID = this.thread.ID;
      this.board = this.thread.board;
      this.nodes = {
        root: root,
        thumb: $('.thumb', root),
        icons: $('.thread-icons', root),
        postCount: $('.post-count', root),
        fileCount: $('.file-count', root),
        pageCount: $('.page-count', root)
      };
      this.thread.catalogView = this;
    }

    return CatalogThread;

  })();

  Post = (function() {
    Post.callbacks = new Callbacks('Post');

    Post.prototype.toString = function() {
      return this.ID;
    };

    function Post(root, thread, board, that) {
      var capcode, date, email, flag, info, name, post, subject, tripcode, uniqueID;
      this.thread = thread;
      this.board = board;
      if (that == null) {
        that = {};
      }
      this.ID = +root.id.slice(2);
      this.fullID = "" + this.board + "." + this.ID;
      post = $('.post', root);
      info = $('.postInfo', post);
      if (that.isOriginalMarkup) {
        this.cleanup(root, post);
      }
      root.dataset.fullID = this.fullID;
      this.nodes = {
        root: root,
        post: post,
        info: info,
        comment: $('.postMessage', post),
        links: [],
        quotelinks: [],
        backlinks: info.getElementsByClassName('backlink')
      };
      if (!(this.isReply = $.hasClass(post, 'reply'))) {
        this.thread.OP = this;
        this.thread.isSticky = !!$('.stickyIcon', info);
        this.thread.isClosed = !!$('.closedIcon', info);
      }
      this.info = {};
      if (subject = $('.subject', info)) {
        this.nodes.subject = subject;
        this.info.subject = subject.textContent;
      }
      if (name = $('.name', info)) {
        this.nodes.name = name;
        this.info.name = name.textContent;
      }
      if (email = $('.useremail', info)) {
        this.nodes.email = email;
        this.info.email = decodeURIComponent(email.href.slice(7));
      }
      if (tripcode = $('.postertrip', info)) {
        this.nodes.tripcode = tripcode;
        this.info.tripcode = tripcode.textContent;
      }
      if (uniqueID = $('.posteruid', info)) {
        this.nodes.uniqueID = uniqueID;
        this.info.uniqueID = uniqueID.firstElementChild.textContent;
      }
      if (capcode = $('.capcode.hand', info)) {
        this.nodes.capcode = capcode;
        this.info.capcode = capcode.textContent.replace('## ', '');
      }
      if (flag = $('.flag, .countryFlag', info)) {
        this.nodes.flag = flag;
        this.info.flag = flag.title;
      }
      if (date = $('.dateTime', info)) {
        this.nodes.date = date;
        this.info.date = new Date(date.dataset.utc * 1000);
      }
      this.parseComment();
      this.parseQuotes();
      this.parseFile(that);
      this.labels = [];
      this.highlights = [];
      this.isDead = false;
      this.isHidden = false;
      this.clones = [];
      g.posts.push(this.fullID, thread.posts.push(this, board.posts.push(this, this)));
      if (that.isArchived) {
        this.kill();
      }
    }

    Post.prototype.parseComment = function() {
      var bq, i, node, nodes, text;
      this.nodes.comment.normalize();
      bq = this.nodes.comment.cloneNode(true);
      nodes = $$('.abbr, .exif, b', bq);
      i = 0;
      while (node = nodes[i++]) {
        $.rm(node);
      }
      text = "";
      nodes = $.X('.//br|.//text()', bq);
      i = 0;
      while (node = nodes.snapshotItem(i++)) {
        text += node.data || '\n';
      }
      return this.info.comment = text.trim().replace(/\s+$/gm, '');
    };

    Post.prototype.parseQuotes = function() {
      var quotelink, _i, _len, _ref;
      this.quotes = [];
      _ref = $$('.quotelink', this.nodes.comment);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        quotelink = _ref[_i];
        this.parseQuote(quotelink);
      }
    };

    Post.prototype.parseQuote = function(quotelink) {
      var fullID, match;
      if (!(match = quotelink.href.match(/boards\.4chan\.org\/([^\/]+)\/thread\/\d+.*\#p(\d+)$/))) {
        return;
      }
      this.nodes.quotelinks.push(quotelink);
      if (this.isClone) {
        return;
      }
      fullID = "" + match[1] + "." + match[2];
      if (__indexOf.call(this.quotes, fullID) < 0) {
        return this.quotes.push(fullID);
      }
    };

    Post.prototype.parseFile = function(that) {
      var anchor, fileEl, fileText, nameNode, size, thumb, unit;
      if (!((fileEl = $('.file', this.nodes.post)) && (thumb = $('img[data-md5]', fileEl)))) {
        return;
      }
      anchor = thumb.parentNode;
      fileText = fileEl.firstElementChild;
      this.file = {
        text: fileText,
        thumb: thumb,
        URL: anchor.href,
        size: thumb.alt.match(/[\d.]+\s\w+/)[0],
        MD5: thumb.dataset.md5,
        isSpoiler: $.hasClass(anchor, 'imgspoiler')
      };
      size = +this.file.size.match(/[\d.]+/)[0];
      unit = ['B', 'KB', 'MB', 'GB'].indexOf(this.file.size.match(/\w+$/)[0]);
      while (unit-- > 0) {
        size *= 1024;
      }
      this.file.sizeInBytes = size;
      this.file.thumbURL = that.isArchived ? thumb.src : "" + location.protocol + "//t.4cdn.org/" + this.board + "/" + (this.file.URL.match(/(\d+)\./)[1]) + "s.jpg";
      this.file.isImage = /(jpg|png|gif)$/i.test(this.file.URL);
      this.file.isVideo = /webm$/i.test(this.file.URL);
      if (this.file.isImage || this.file.isVideo) {
        this.file.dimensions = fileText.childNodes[2].data.match(/\d+x\d+/)[0];
      }
      return this.file.name = !this.file.isSpoiler && (nameNode = $('a', fileText)) ? nameNode.title || nameNode.textContent : fileText.title;
    };

    Post.prototype.cleanup = function(root, post) {
      var node, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2;
      _ref = $$('.mobile', root);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        node = _ref[_i];
        $.rm(node);
      }
      _ref1 = $$('[id]:not(.exif)', post);
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        node = _ref1[_j];
        node.removeAttribute('id');
      }
      _ref2 = $$('.desktop', root);
      for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {
        node = _ref2[_k];
        $.rmClass(node, 'desktop');
      }
    };

    Post.prototype.getNameBlock = function() {
      if (Conf['Anonymize']) {
        return 'Anonymous';
      } else {
        return $('.nameBlock', this.nodes.info).textContent.trim();
      }
    };

    Post.prototype.hide = function(label, makeStub, hideRecursively) {
      var quotelink, _i, _len, _ref;
      if (makeStub == null) {
        makeStub = Conf['Stubs'];
      }
      if (hideRecursively == null) {
        hideRecursively = Conf['Recursive Hiding'];
      }
      if (__indexOf.call(this.labels, label) < 0) {
        this.labels.push(label);
      }
      if (this.isHidden) {
        return;
      }
      this.isHidden = true;
      _ref = Get.allQuotelinksLinkingTo(this);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        quotelink = _ref[_i];
        $.addClass(quotelink, 'filtered');
      }
      if (hideRecursively) {
        label = "Recursively hidden for quoting No." + this;
        Recursive.apply('hide', this, label, makeStub, true);
        Recursive.add('hide', this, label, makeStub, true);
      }
      PostHiding.saveHiddenState(this, {
        thisPost: true,
        hideRecursively: hideRecursively,
        makeStub: makeStub
      });
      if (!this.isReply) {
        this.thread.hide();
        return;
      }
      if (!makeStub) {
        this.nodes.root.hidden = true;
        return;
      }
      this.nodes.post.hidden = true;
      this.nodes.post.previousElementSibling.hidden = true;
      this.nodes.stub = $.el('div', {
        className: 'stub'
      });
      $.add(this.nodes.stub, [PostHiding.makeButton(false), $.tn(" " + (this.getNameBlock()))]);
      if (Conf['Menu']) {
        $.add(this.nodes.stub, Menu.makeButton());
      }
      return $.prepend(this.nodes.root, this.nodes.stub);
    };

    Post.prototype.show = function(showRecursively) {
      var quotelink, _i, _len, _ref;
      if (showRecursively == null) {
        showRecursively = Conf['Recursive Hiding'];
      }
      if (!this.isHidden) {
        return;
      }
      this.isHidden = false;
      this.labels = this.labels.filter(function(label) {
        return !/^(Manually hidden|Recursively hidden|Hidden by)/.test(label);
      });
      _ref = Get.allQuotelinksLinkingTo(this);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        quotelink = _ref[_i];
        $.rmClass(quotelink, 'filtered');
      }
      if (showRecursively) {
        Recursive.apply('show', this, true);
        Recursive.rm('hide', this);
      }
      PostHiding.saveHiddenState(this, {
        thisPost: true,
        hideRecursively: showRecursively,
        makeStub: !!this.nodes.stub
      });
      if (!this.isReply) {
        this.thread.show();
        return;
      }
      if (!this.nodes.stub) {
        this.nodes.root.hidden = false;
        return;
      }
      this.nodes.post.hidden = false;
      this.nodes.post.previousElementSibling.hidden = false;
      $.rm(this.nodes.stub);
      return delete this.nodes.stub;
    };

    Post.prototype.highlight = function(label, highlight, top) {
      this.labels.push(label);
      if (__indexOf.call(this.highlights, highlight) < 0) {
        this.highlights.push(highlight);
        $.addClass(this.nodes.root, highlight);
      }
      if (!this.isReply && top) {
        return this.thread.isOnTop = true;
      }
    };

    Post.prototype.kill = function(file) {
      var clone, quotelink, strong, _i, _j, _len, _len1, _ref, _ref1;
      if (file) {
        if (this.file.isDead) {
          return;
        }
        this.file.isDead = true;
        $.addClass(this.nodes.root, 'deleted-file');
      } else {
        if (this.isDead) {
          return;
        }
        this.isDead = true;
        $.addClass(this.nodes.root, 'deleted-post');
      }
      if (!(strong = $('strong.warning', this.nodes.info))) {
        strong = $.el('strong', {
          className: 'warning fa'
        });
        $.after($('input', this.nodes.info), strong);
      }
      strong.textContent = file ? '\uf070' : '\uf014';
      strong.title = "" + (file ? 'File' : 'Post') + " Deleted";
      if (this.isClone) {
        return;
      }
      _ref = this.clones;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        clone = _ref[_i];
        clone.kill(file);
      }
      if (file) {
        return;
      }
      _ref1 = Get.allQuotelinksLinkingTo(this);
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        quotelink = _ref1[_j];
        if (!(!$.hasClass(quotelink, 'deadlink'))) {
          continue;
        }
        $.addClass(quotelink, 'deadlink');
        QuoteMarkers.parseQuotelink(Get.postFromNode(quotelink), quotelink, true);
      }
    };

    Post.prototype.resurrect = function() {
      var clone, quotelink, strong, _i, _j, _len, _len1, _ref, _ref1;
      delete this.isDead;
      $.rmClass(this.nodes.root, 'deleted-post');
      strong = $('strong.warning', this.nodes.info);
      if (this.file && this.file.isDead) {
        strong.textContent = '[File deleted]';
      } else {
        $.rm(strong);
      }
      if (this.isClone) {
        return;
      }
      _ref = this.clones;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        clone = _ref[_i];
        clone.resurrect();
      }
      _ref1 = Get.allQuotelinksLinkingTo(this);
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        quotelink = _ref1[_j];
        if (!($.hasClass(quotelink, 'deadlink'))) {
          continue;
        }
        $.rmClass(quotelink, 'deadlink');
        QuoteMarkers.parseQuotelink(Get.postFromNode(quotelink), quotelink, true);
      }
    };

    Post.prototype.collect = function() {
      this.kill();
      g.posts.rm(this.fullID);
      this.thread.posts.rm(this);
      return this.board.posts.rm(this);
    };

    Post.prototype.addClone = function(context, contractThumb) {
      return new Clone(this, context, contractThumb);
    };

    Post.prototype.rmClone = function(index) {
      var clone, _i, _len, _ref;
      this.clones.splice(index, 1);
      _ref = this.clones.slice(index);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        clone = _ref[_i];
        clone.nodes.root.dataset.clone = index++;
      }
    };

    return Post;

  })();

  Clone = (function(_super) {
    __extends(Clone, _super);

    function Clone(origin, context, contractThumb) {
      var file, info, inline, inlined, key, nodes, post, root, val, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2, _ref3, _ref4, _ref5;
      this.origin = origin;
      this.context = context;
      _ref = ['ID', 'fullID', 'board', 'thread', 'info', 'quotes', 'isReply'];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        key = _ref[_i];
        this[key] = origin[key];
      }
      nodes = origin.nodes;
      root = nodes.root.cloneNode(true);
      post = $('.post', root);
      info = $('.postInfo', post);
      this.nodes = {
        root: root,
        post: post,
        info: info,
        comment: $('.postMessage', post),
        quotelinks: [],
        backlinks: info.getElementsByClassName('backlink')
      };
      _ref1 = $$('.inline', post);
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        inline = _ref1[_j];
        $.rm(inline);
      }
      _ref2 = $$('.inlined', post);
      for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {
        inlined = _ref2[_k];
        $.rmClass(inlined, 'inlined');
      }
      root.hidden = post.hidden = false;
      $.rmClass(root, 'forwarded');
      $.rmClass(post, 'highlight');
      if (nodes.subject) {
        this.nodes.subject = $('.subject', info);
      }
      if (nodes.name) {
        this.nodes.name = $('.name', info);
      }
      if (nodes.email) {
        this.nodes.email = $('.useremail', info);
      }
      if (nodes.tripcode) {
        this.nodes.tripcode = $('.postertrip', info);
      }
      if (nodes.uniqueID) {
        this.nodes.uniqueID = $('.posteruid', info);
      }
      if (nodes.capcode) {
        this.nodes.capcode = $('.capcode', info);
      }
      if (nodes.flag) {
        this.nodes.flag = $('.countryFlag', info);
      }
      if (nodes.date) {
        this.nodes.date = $('.dateTime', info);
      }
      this.parseQuotes();
      if (origin.file) {
        this.file = {};
        _ref3 = origin.file;
        for (key in _ref3) {
          val = _ref3[key];
          this.file[key] = val;
        }
        file = $('.file', post);
        this.file.text = file.firstElementChild;
        this.file.thumb = $('img[data-md5], video[data-md5]', file);
        this.file.fullImage = $('.full-image', file);
        if (contractThumb) {
          $.rmClass(root, 'expanded-image');
          $.rmClass(this.file.thumb, 'expanding');
        }
        this.file.isExpanded = $.hasClass(root, 'expanded-image');
        if ((_ref4 = this.file.fullImage) != null) {
          _ref4.removeAttribute('id');
        }
        if ((_ref5 = $('.video-controls', this.file.text)) != null) {
          _ref5.remove();
        }
      }
      if (origin.isDead) {
        this.isDead = true;
      }
      this.isClone = true;
      root.dataset.clone = origin.clones.push(this) - 1;
    }

    return Clone;

  })(Post);

  DataBoard = (function() {
    DataBoard.keys = ['pinnedThreads', 'hiddenPosts', 'lastReadPosts', 'yourPosts', 'watchedThreads'];

    function DataBoard(key, sync, dontClean) {
      var init;
      this.key = key;
      this.onSync = __bind(this.onSync, this);
      this.data = Conf[key];
      $.sync(key, this.onSync);
      if (!dontClean) {
        this.clean();
      }
      if (!sync) {
        return;
      }
      init = (function(_this) {
        return function() {
          $.off(d, '4chanXInitFinished', init);
          return _this.sync = sync;
        };
      })(this);
      $.on(d, '4chanXInitFinished', init);
    }

    DataBoard.prototype.save = function() {
      return $.set(this.key, this.data);
    };

    DataBoard.prototype["delete"] = function(_arg) {
      var boardID, postID, threadID;
      boardID = _arg.boardID, threadID = _arg.threadID, postID = _arg.postID;
      if (postID) {
        delete this.data.boards[boardID][threadID][postID];
        this.deleteIfEmpty({
          boardID: boardID,
          threadID: threadID
        });
      } else if (threadID) {
        delete this.data.boards[boardID][threadID];
        this.deleteIfEmpty({
          boardID: boardID
        });
      } else {
        delete this.data.boards[boardID];
      }
      return this.save();
    };

    DataBoard.prototype.deleteIfEmpty = function(_arg) {
      var boardID, threadID;
      boardID = _arg.boardID, threadID = _arg.threadID;
      if (threadID) {
        if (!Object.keys(this.data.boards[boardID][threadID]).length) {
          delete this.data.boards[boardID][threadID];
          return this.deleteIfEmpty({
            boardID: boardID
          });
        }
      } else if (!Object.keys(this.data.boards[boardID]).length) {
        return delete this.data.boards[boardID];
      }
    };

    DataBoard.prototype.set = function(_arg) {
      var boardID, postID, threadID, val, _base, _base1, _base2;
      boardID = _arg.boardID, threadID = _arg.threadID, postID = _arg.postID, val = _arg.val;
      if (postID !== void 0) {
        ((_base = ((_base1 = this.data.boards)[boardID] || (_base1[boardID] = {})))[threadID] || (_base[threadID] = {}))[postID] = val;
      } else if (threadID !== void 0) {
        ((_base2 = this.data.boards)[boardID] || (_base2[boardID] = {}))[threadID] = val;
      } else {
        this.data.boards[boardID] = val;
      }
      return this.save();
    };

    DataBoard.prototype.get = function(_arg) {
      var ID, board, boardID, defaultValue, postID, thread, threadID, val, _i, _len;
      boardID = _arg.boardID, threadID = _arg.threadID, postID = _arg.postID, defaultValue = _arg.defaultValue;
      if (board = this.data.boards[boardID]) {
        if (!threadID) {
          if (postID) {
            for (thread = _i = 0, _len = board.length; _i < _len; thread = ++_i) {
              ID = board[thread];
              if (postID in thread) {
                val = thread[postID];
                break;
              }
            }
          } else {
            val = board;
          }
        } else if (thread = board[threadID]) {
          val = postID ? thread[postID] : thread;
        }
      }
      return val || defaultValue;
    };

    DataBoard.prototype.clean = function() {
      var boardID, keys, now, _i, _len;
      now = Date.now();
      if ((this.data.lastChecked || 0) > now - 2 * $.HOUR) {
        return;
      }
      keys = Object.keys(this.data.boards);
      if (!keys.length) {
        return;
      }
      for (_i = 0, _len = keys.length; _i < _len; _i++) {
        boardID = keys[_i];
        this.deleteIfEmpty({
          boardID: boardID
        });
        if (boardID in this.data.boards) {
          this.ajaxClean(boardID);
        }
      }
      this.data.lastChecked = now;
      return this.save();
    };

    DataBoard.prototype.ajaxClean = function(boardID) {
      return $.cache("//a.4cdn.org/" + boardID + "/threads.json", (function(_this) {
        return function(e) {
          var board, count, page, thread, threads, _i, _j, _len, _len1, _ref, _ref1;
          if (e.target.status !== 200) {
            if (e.target.status === 404) {
              _this["delete"]({
                boardID: boardID
              });
            }
            return;
          }
          board = _this.data.boards[boardID];
          threads = {};
          _ref = e.target.response;
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            page = _ref[_i];
            _ref1 = page.threads;
            for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
              thread = _ref1[_j];
              if (thread.no in board) {
                threads[thread.no] = board[thread.no];
              }
            }
          }
          count = Object.keys(threads).length;
          if (count === Object.keys(board).length) {
            return;
          }
          if (count) {
            return _this.set({
              boardID: boardID,
              val: threads
            });
          } else {
            return _this["delete"]({
              boardID: boardID
            });
          }
        };
      })(this));
    };

    DataBoard.prototype.onSync = function(data) {
      this.data = data || {
        boards: {}
      };
      return typeof this.sync === "function" ? this.sync() : void 0;
    };

    DataBoard.prototype.disconnect = function() {
      $.desync(this.key);
      delete this.sync;
      return delete this.data;
    };

    return DataBoard;

  })();

  Notice = (function() {
    function Notice(type, content, timeout) {
      this.timeout = timeout;
      this.close = __bind(this.close, this);
      this.add = __bind(this.add, this);
      this.el = $.el('div', {
        innerHTML: '<a href=javascript:; class="close fa" title=Close>\uf00d</a><div class=message></div>'
      });
      this.el.style.opacity = 0;
      this.setType(type);
      $.on(this.el.firstElementChild, 'click', this.close);
      if (typeof content === 'string') {
        content = $.tn(content);
      }
      $.add(this.el.lastElementChild, content);
      $.ready(this.add);
    }

    Notice.prototype.setType = function(type) {
      return this.el.className = "notification " + type;
    };

    Notice.prototype.add = function() {
      if (d.hidden) {
        $.on(d, 'visibilitychange', this.add);
        return;
      }
      $.off(d, 'visibilitychange', this.add);
      $.add(Header.noticesRoot, this.el);
      this.el.clientHeight;
      this.el.style.opacity = 1;
      if (this.timeout) {
        return setTimeout(this.close, this.timeout * $.SECOND);
      }
    };

    Notice.prototype.close = function() {
      $.off(d, 'visibilitychange', this.add);
      return $.rm(this.el);
    };

    return Notice;

  })();

  RandomAccessList = (function() {
    function RandomAccessList(items) {
      var item, _i, _len;
      this.length = 0;
      if (items) {
        for (_i = 0, _len = items.length; _i < _len; _i++) {
          item = items[_i];
          this.push(item);
        }
      }
    }

    RandomAccessList.prototype.push = function(data) {
      var ID, item, last;
      ID = data.ID;
      ID || (ID = data.id);
      if (this[ID]) {
        return;
      }
      last = this.last;
      this[ID] = item = {
        prev: last,
        next: null,
        data: data,
        ID: ID
      };
      item.prev = last;
      this.last = last ? last.next = item : this.first = item;
      return this.length++;
    };

    RandomAccessList.prototype.before = function(root, item) {
      var prev;
      if (item.next === root) {
        return;
      }
      this.rmi(item);
      prev = root.prev;
      root.prev = item;
      item.next = root;
      item.prev = prev;
      if (prev) {
        return prev.next = item;
      }
    };

    RandomAccessList.prototype.after = function(root, item) {
      var next;
      if (item.prev === root) {
        return;
      }
      this.rmi(item);
      next = root.next;
      root.next = item;
      item.prev = root;
      item.next = next;
      if (next) {
        return next.prev = item;
      }
    };

    RandomAccessList.prototype.prepend = function(item) {
      var first;
      first = this.first;
      if (item === first || !this[item.ID]) {
        return;
      }
      this.rmi(item);
      item.next = first;
      first.prev = item;
      this.first = item;
      return delete item.prev;
    };

    RandomAccessList.prototype.shift = function() {
      return this.rm(this.first.ID);
    };

    RandomAccessList.prototype.order = function() {
      var item, order;
      order = [item = this.first];
      while (item = item.next) {
        order.push(item);
      }
      return order;
    };

    RandomAccessList.prototype.rm = function(ID) {
      var item;
      item = this[ID];
      if (!item) {
        return;
      }
      delete this[ID];
      this.length--;
      this.rmi(item);
      delete item.next;
      return delete item.prev;
    };

    RandomAccessList.prototype.rmi = function(item) {
      var next, prev;
      prev = item.prev, next = item.next;
      if (prev) {
        prev.next = next;
      } else {
        this.first = next;
      }
      if (next) {
        return next.prev = prev;
      } else {
        return this.last = prev;
      }
    };

    return RandomAccessList;

  })();

  SimpleDict = (function() {
    function SimpleDict() {
      this.keys = [];
    }

    SimpleDict.prototype.push = function(key, data) {
      key = "" + key;
      if (!this[key]) {
        this.keys.push(key);
      }
      return this[key] = data;
    };

    SimpleDict.prototype.rm = function(key) {
      var i;
      key = "" + key;
      if ((i = this.keys.indexOf(key)) !== -1) {
        this.keys.splice(i, 1);
        return delete this[key];
      }
    };

    SimpleDict.prototype.first = function() {
      return this[this.keys[0]];
    };

    SimpleDict.prototype.forEach = function(fn) {
      var key, _i, _len, _ref;
      _ref = __slice.call(this.keys);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        key = _ref[_i];
        fn(this[key]);
      }
    };

    return SimpleDict;

  })();

  Polyfill = {
    init: function() {},
    toBlob: function() {
      var _base;
      return (_base = HTMLCanvasElement.prototype).toBlob || (_base.toBlob = function(cb) {
        var data, i, l, ui8a, _i;
        data = atob(this.toDataURL().slice(22));
        l = data.length;
        ui8a = new Uint8Array(l);
        for (i = _i = 0; _i < l; i = _i += 1) {
          ui8a[i] = data.charCodeAt(i);
        }
        return cb(new Blob([ui8a], {
          type: 'image/png'
        }));
      });
    }
  };

  Header = {
    init: function() {
      var barFixedToggler, barPositionToggler, customNavToggler, editCustomNav, headerToggler, menuButton, scrollHeaderToggler;
      this.menu = new UI.Menu();
      menuButton = $.el('a', {
        className: 'menu-button a-icon',
        id: 'main-menu'
      });
      barFixedToggler = $.el('label', {
        innerHTML: '<input type=checkbox name="Fixed Header"> Fixed Header'
      });
      headerToggler = $.el('label', {
        innerHTML: '<input type=checkbox name="Header auto-hide"> Auto-hide header'
      });
      scrollHeaderToggler = $.el('label', {
        innerHTML: '<input type=checkbox name="Header auto-hide on scroll"> Auto-hide header on scroll'
      });
      barPositionToggler = $.el('label', {
        innerHTML: '<input type=checkbox name="Bottom Header"> Bottom header'
      });
      customNavToggler = $.el('label', {
        innerHTML: '<input type=checkbox name="Custom Board Navigation"> Custom board navigation'
      });
      editCustomNav = $.el('a', {
        textContent: 'Edit custom board navigation',
        href: 'javascript:;'
      });
      this.barFixedToggler = barFixedToggler.firstElementChild;
      this.scrollHeaderToggler = scrollHeaderToggler.firstElementChild;
      this.barPositionToggler = barPositionToggler.firstElementChild;
      this.headerToggler = headerToggler.firstElementChild;
      this.customNavToggler = customNavToggler.firstElementChild;
      $.on(menuButton, 'click', this.menuToggle);
      $.on(this.headerToggler, 'change', this.toggleBarVisibility);
      $.on(this.barFixedToggler, 'change', this.toggleBarFixed);
      $.on(this.scrollHeaderToggler, 'change', this.setHideBarOnScroll);
      $.on(this.barPositionToggler, 'change', this.toggleBarPosition);
      $.on(this.headerToggler, 'change', this.toggleBarVisibility);
      $.on(this.customNavToggler, 'change', this.toggleCustomNav);
      $.on(editCustomNav, 'click', this.editCustomNav);
      this.setBarFixed(Conf['Fixed Header']);
      this.setHideBarOnScroll(Conf['Header auto-hide on scroll']);
      this.setBarVisibility(Conf['Header auto-hide']);
      $.sync('Fixed Header', this.setBarFixed);
      $.sync('Header auto-hide on scroll', this.setHideBarOnScroll);
      $.sync('Bottom Header', this.setBarPosition);
      $.sync('Header auto-hide', this.setBarVisibility);
      this.addShortcut(menuButton);
      this.menu.addEntry({
        el: $.el('span', {
          textContent: 'Header'
        }),
        order: 107,
        subEntries: [
          {
            el: barFixedToggler
          }, {
            el: headerToggler
          }, {
            el: scrollHeaderToggler
          }, {
            el: barPositionToggler
          }, {
            el: customNavToggler
          }, {
            el: editCustomNav
          }
        ]
      });
      $.on(window, 'load hashchange', Header.hashScroll);
      $.on(d, 'CreateNotification', this.createNotification);
      this.enableDesktopNotifications();
      this.addShortcut(menuButton, true);
      $.asap((function() {
        return d.body;
      }), (function(_this) {
        return function() {
          if (!Main.isThisPageLegit()) {
            return;
          }
          $.asap((function() {
            return $.id('boardNavMobile') || d.readyState !== 'loading';
          }), Header.setBoardList);
          $.prepend(d.body, _this.bar);
          $.add(d.body, Header.hover);
          return _this.setBarPosition(Conf['Bottom Header']);
        };
      })(this));
      return $.ready((function(_this) {
        return function() {
          var a, footer, _i, _len, _ref, _results;
          if (a = $("a[href*='/" + g.BOARD + "/']", footer = $.id('boardNavDesktopFoot'))) {
            a.className = 'current';
          }
          if (Conf['JSON Navigation']) {
            _ref = $$('a', footer);
            _results = [];
            for (_i = 0, _len = _ref.length; _i < _len; _i++) {
              a = _ref[_i];
              _results.push($.on(a, 'click', Navigate.navigate));
            }
            return _results;
          }
        };
      })(this));
    },
    bar: $.el('div', {
      id: 'header-bar'
    }),
    noticesRoot: $.el('div', {
      id: 'notifications'
    }),
    stats: $.el('span', {
      id: 'a-stats'
    }),
    icons: $.el('span', {
      id: 'a-icons'
    }),
    hover: $.el('div', {
      id: 'hoverUI'
    }),
    toggle: $.el('div', {
      id: 'scroll-marker'
    }),
    initReady: function() {
      Header.setBoardList();
      return Header.addNav();
    },
    setBoardList: function() {
      var a, boardList, btn, fourchannav, fullBoardList, shortcuts, _i, _len, _ref;
      fourchannav = $.id('boardNavDesktop');
      Header.boardList = boardList = $.el('span', {
        id: 'board-list',
        innerHTML: "<span id=custom-board-list></span><span id=full-board-list hidden><span class='hide-board-list-container brackets-wrap'><a href=javascript:; class='hide-board-list-button'>&nbsp;-&nbsp;</a></span> " + fourchannav.innerHTML + "</span>"
      });
      _ref = $$('a', boardList);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        a = _ref[_i];
        if (Conf['JSON Navigation']) {
          $.on(a, 'click', Navigate.navigate);
        }
        if (a.pathname.split('/')[1] === g.BOARD.ID) {
          a.className = 'current';
        }
      }
      fullBoardList = $('#full-board-list', boardList);
      btn = $('.hide-board-list-button', fullBoardList);
      $.on(btn, 'click', Header.toggleBoardList);
      $.rm($('#navtopright', fullBoardList));
      shortcuts = $.el('span', {
        id: 'shortcuts'
      });
      $.add(shortcuts, [Header.stats, Header.icons]);
      $.prepend(d.body, shortcuts);
      $.add(boardList, fullBoardList);
      $.add(Header.bar, [Header.boardList, Header.toggle]);
      Header.setCustomNav(Conf['Custom Board Navigation']);
      Header.generateBoardList(Conf['boardnav'].replace(/(\r\n|\n|\r)/g, ' '));
      $.sync('Custom Board Navigation', Header.setCustomNav);
      return $.sync('boardnav', Header.generateBoardList);
    },
    generateBoardList: function(text) {
      var as, list, nodes, re;
      list = $('#custom-board-list', Header.boardList);
      $.rmAll(list);
      if (!text) {
        return;
      }
      as = $$('#full-board-list a[title]', Header.boardList);
      re = /[\w@]+(-(all|title|replace|full|archive|(mode|sort|text|url):"[^"]+"(\,"[^"]+[^"]")?))*|[^\w@]+/g;
      nodes = text.match(re).map(function(t) {
        var a, board, boardID, href, m, match, type, url, _i, _len;
        if (/^[^\w@]/.test(t)) {
          return $.tn(t);
        }
        if (/^toggle-all/.test(t)) {
          a = $.el('a', {
            className: 'show-board-list-button',
            textContent: (match = t.match(/-text:"(.+)"/)) ? match[1] : '+',
            href: 'javascript:;'
          });
          $.on(a, 'click', Header.toggleBoardList);
          return a;
        }
        if (/^external/.test(t)) {
          if (url = t.match(/\,"(.+)"/)) {
            a = $.el('a', {
              textContent: (match = t.match(/-text:"(.+)"\,/)) ? match[1] : '+',
              className: 'external',
              href: url[1]
            });
            if (a.hostname === 'boards.4chan.org' && a.pathname.split('/')[1] === g.BOARD.ID) {
              a.className += ' current';
            }
            return a;
          }
        }
        board = /^current/.test(t) ? g.BOARD.ID : t.match(/^[^-]+/)[0];
        boardID = t.split('-')[0];
        if (boardID === 'current') {
          boardID = g.BOARD.ID;
        }
        for (_i = 0, _len = as.length; _i < _len; _i++) {
          a = as[_i];
          if (!(a.textContent === boardID)) {
            continue;
          }
          a = a.cloneNode();
          break;
        }
        if (a.parentNode) {
          return $.tn(boardID);
        }
        if (Conf['JSON Navigation']) {
          $.on(a, 'click', Navigate.navigate);
        }
        a.textContent = /-title/.test(t) || /-replace/.test(t) && boardID === g.BOARD.ID ? a.title : /-full/.test(t) ? "/" + boardID + "/ - " + a.title : (m = t.match(/-text:"([^"]+)"/)) ? m[1] : boardID;
        if (/-archive/.test(t)) {
          if (href = Redirect.to('board', {
            boardID: boardID
          })) {
            a.href = href;
          } else {
            return a.firstChild;
          }
        }
        if (m = t.match(/-mode:"([^"]+)"/)) {
          type = m[1].toLowerCase();
          a.dataset.indexMode = (function() {
            switch (type) {
              case 'all threads':
                return 'all pages';
              case 'paged':
              case 'catalog':
                return type;
              default:
                return 'paged';
            }
          })();
        }
        if (m = t.match(/-sort:"([^"]+)"/)) {
          type = m[1].toLowerCase();
          a.dataset.indexSort = (function() {
            switch (type) {
              case 'bump order':
                return 'bump';
              case 'last reply':
                return 'lastreply';
              case 'creation date':
                return 'birth';
              case 'reply count':
                return 'replycount';
              case 'file count':
                return 'filecount';
              default:
                return 'bump';
            }
          })();
        }
        if (boardID === '@') {
          $.addClass(a, 'navSmall');
        }
        return a;
      });
      return $.add(list, nodes);
    },
    toggleBoardList: function() {
      var bar, custom, full, showBoardList;
      bar = Header.bar;
      custom = $('#custom-board-list', bar);
      full = $('#full-board-list', bar);
      showBoardList = !full.hidden;
      custom.hidden = !showBoardList;
      return full.hidden = showBoardList;
    },
    setBarFixed: function(fixed) {
      Header.barFixedToggler.checked = fixed;
      if (fixed) {
        $.addClass(doc, 'fixed');
        return $.addClass(Header.bar, 'dialog');
      } else {
        $.rmClass(doc, 'fixed');
        return $.rmClass(Header.bar, 'dialog');
      }
    },
    toggleBarFixed: function() {
      $.event('CloseMenu');
      Header.setBarFixed(this.checked);
      Conf['Fixed Header'] = this.checked;
      return $.set('Fixed Header', this.checked);
    },
    setBarVisibility: function(hide) {
      Header.headerToggler.checked = hide;
      return (hide ? $.addClass : $.rmClass)(Header.bar, 'autohide');
    },
    toggleBarVisibility: function(e) {
      var hide;
      hide = this.checked;
      Conf['Header auto-hide'] = hide;
      $.set('Header auto-hide', hide);
      return Header.setBarVisibility(hide);
    },
    setHideBarOnScroll: function(hide) {
      Header.scrollHeaderToggler.checked = hide;
      if (hide) {
        $.on(window, 'scroll', Header.hideBarOnScroll);
        return;
      }
      $.off(window, 'scroll', Header.hideBarOnScroll);
      $.rmClass(Header.bar, 'scroll');
      if (!Conf['Header auto-hide']) {
        return $.rmClass(Header.bar, 'autohide');
      }
    },
    toggleHideBarOnScroll: function(e) {
      var hide;
      hide = this.checked;
      $.cb.checked.call(this);
      return Header.setHideBarOnScroll(hide);
    },
    hideBarOnScroll: function() {
      var offsetY;
      offsetY = window.pageYOffset;
      if (offsetY > (Header.previousOffset || 0)) {
        $.addClass(Header.bar, 'autohide', 'scroll');
      } else {
        $.rmClass(Header.bar, 'autohide', 'scroll');
      }
      return Header.previousOffset = offsetY;
    },
    setBarPosition: function(bottom) {
      var args;
      Header.barPositionToggler.checked = bottom;
      $.event('CloseMenu');
      args = bottom ? ['bottom-header', 'top-header', 'bottom', 'after'] : ['top-header', 'bottom-header', 'top', 'add'];
      $.addClass(doc, args[0]);
      $.rmClass(doc, args[1]);
      Header.bar.parentNode.className = args[2];
      return $[args[3]](Header.bar, Header.noticesRoot);
    },
    toggleBarPosition: function() {
      $.cb.checked.call(this);
      return Header.setBarPosition(this.checked);
    },
    setCustomNav: function(show) {
      var btn, cust, full, _ref;
      Header.customNavToggler.checked = show;
      cust = $('#custom-board-list', Header.bar);
      full = $('#full-board-list', Header.bar);
      btn = $('.hide-board-list-button', full);
      return _ref = show ? [false, true] : [true, false], cust.hidden = _ref[0], full.hidden = _ref[1], _ref;
    },
    toggleCustomNav: function() {
      $.cb.checked.call(this);
      return Header.setCustomNav(this.checked);
    },
    editCustomNav: function() {
      var settings;
      Settings.open('Advanced');
      settings = $.id('fourchanx-settings');
      return $('input[name=boardnav]', settings).focus();
    },
    hashScroll: function() {
      var hash, post;
      hash = this.location.hash.slice(1);
      if (!(/^p\d+$/.test(hash) && (post = $.id(hash)))) {
        return;
      }
      if ((Get.postFromNode(post)).isHidden) {
        return;
      }
      return Header.scrollTo(post);
    },
    scrollTo: function(root, down, needed) {
      var height, x;
      if (down) {
        x = Header.getBottomOf(root);
        if (Conf['Header auto-hide on scroll'] && Conf['Bottom header']) {
          height = Header.bar.getBoundingClientRect().height;
          if (x <= 0) {
            if (!Header.isHidden()) {
              x += height;
            }
          } else {
            if (Header.isHidden()) {
              x -= height;
            }
          }
        }
        if (!(needed && x >= 0)) {
          return window.scrollBy(0, -x);
        }
      } else {
        x = Header.getTopOf(root);
        if (Conf['Header auto-hide on scroll'] && !Conf['Bottom header']) {
          height = Header.bar.getBoundingClientRect().height;
          if (x >= 0) {
            if (!Header.isHidden()) {
              x += height;
            }
          } else {
            if (Header.isHidden()) {
              x -= height;
            }
          }
        }
        if (!(needed && x >= 0)) {
          return window.scrollBy(0, x);
        }
      }
    },
    scrollToIfNeeded: function(root, down) {
      return Header.scrollTo(root, down, true);
    },
    getTopOf: function(root) {
      var headRect, top;
      top = root.getBoundingClientRect().top;
      if (Conf['Fixed Header'] && !Conf['Bottom Header']) {
        headRect = Header.toggle.getBoundingClientRect();
        top -= headRect.top + headRect.height - 10;
      }
      return top;
    },
    getBottomOf: function(root) {
      var bottom, clientHeight, headRect;
      clientHeight = doc.clientHeight;
      bottom = clientHeight - root.getBoundingClientRect().bottom;
      if (Conf['Bottom Header']) {
        headRect = Header.toggle.getBoundingClientRect();
        bottom -= clientHeight - headRect.bottom + headRect.height - 10;
      }
      return bottom;
    },
    isNodeVisible: function(node) {
      var height;
      height = node.getBoundingClientRect().height;
      return Header.getTopOf(node) + height >= 0 && Header.getBottomOf(node) + height >= 0;
    },
    isHidden: function() {
      var top;
      top = Header.bar.getBoundingClientRect().top;
      if (Conf['Bottom header']) {
        return top === doc.clientHeight;
      } else {
        return top < 0;
      }
    },
    addShortcut: function(el, icon) {
      $.addClass(el, 'shortcut');
      return $.add(Header[icon ? 'icons' : 'stats'], el);
    },
    rmShortcut: function(el, icon) {
      return $.rm(icon ? el.parentElement : el);
    },
    menuToggle: function(e) {
      return Header.menu.toggle(e, this, g);
    },
    createNotification: function(e) {
      var content, lifetime, notice, type, _ref;
      _ref = e.detail, type = _ref.type, content = _ref.content, lifetime = _ref.lifetime;
      return notice = new Notice(type, content, lifetime);
    },
    areNotificationsEnabled: false,
    enableDesktopNotifications: function() {
      var authorize, disable, el, notice, _ref;
      if (!(window.Notification && Conf['Desktop Notifications'])) {
        return;
      }
      switch (Notification.permission) {
        case 'granted':
          Header.areNotificationsEnabled = true;
          return;
        case 'denied':
          return;
      }
      el = $.el('span', {
        innerHTML: "Desktop notification permissions are not granted.\n[<a href='https://github.com/MayhemYDG/4chan-x/wiki/FAQ#desktop-notifications' target=_blank>FAQ</a>]<br>\n<button>Authorize</button> or <button>Disable</button>"
      });
      _ref = $$('button', el), authorize = _ref[0], disable = _ref[1];
      $.on(authorize, 'click', function() {
        return Notification.requestPermission(function(status) {
          Header.areNotificationsEnabled = status === 'granted';
          if (status === 'default') {
            return;
          }
          return notice.close();
        });
      });
      $.on(disable, 'click', function() {
        $.set('Desktop Notifications', false);
        return notice.close();
      });
      return notice = new Notice('info', el);
    }
  };

  Index = {
    showHiddenThreads: false,
    init: function() {
      var input, label, modeEntry, name, refNavEntry, repliesEntry, returnLink, select, sortEntry, targetEntry, threadNumEntry, threadsNumInput, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2;
      if (g.BOARD.ID === 'f' || !Conf['JSON Navigation']) {
        return;
      }
      this.board = "" + g.BOARD;
      this.button = $.el('a', {
        className: 'index-refresh-shortcut fa',
        title: 'Refresh Index',
        href: 'javascript:;',
        textContent: "\uf021"
      });
      $.on(this.button, 'click', this.update);
      Header.addShortcut(this.button, 1);
      this.db = new DataBoard('pinnedThreads');
      Thread.callbacks.push({
        name: 'Thread Pinning',
        cb: this.threadNode
      });
      CatalogThread.callbacks.push({
        name: 'Catalog Features',
        cb: this.catalogNode
      });
      modeEntry = {
        el: $.el('span', {
          textContent: 'Index mode'
        }),
        subEntries: [
          {
            el: $.el('label', {
              innerHTML: '<input type=radio name="Index Mode" value="paged"> Paged'
            })
          }, {
            el: $.el('label', {
              innerHTML: '<input type=radio name="Index Mode" value="infinite"> Infinite scrolling'
            })
          }, {
            el: $.el('label', {
              innerHTML: '<input type=radio name="Index Mode" value="all pages"> All threads'
            })
          }
        ]
      };
      _ref = modeEntry.subEntries;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        label = _ref[_i];
        input = label.el.firstChild;
        input.checked = Conf['Index Mode'] === input.value;
        $.on(input, 'change', $.cb.value);
        $.on(input, 'change', this.cb.mode);
      }
      sortEntry = {
        el: $.el('span', {
          textContent: 'Sort by'
        })
      };
      threadNumEntry = {
        el: $.el('span', {
          textContent: 'Threads per page'
        }),
        subEntries: [
          {
            el: $.el('label', {
              innerHTML: '<input type=number min=0 name="Threads per Page">',
              title: 'Use 0 for default value'
            })
          }
        ]
      };
      threadsNumInput = threadNumEntry.subEntries[0].el.firstChild;
      threadsNumInput.value = Conf['Threads per Page'];
      $.on(threadsNumInput, 'change', $.cb.value);
      $.on(threadsNumInput, 'change', this.cb.threadsNum);
      targetEntry = {
        el: $.el('label', {
          innerHTML: '<input type=checkbox name="Open threads in a new tab"> Open threads in a new tab',
          title: 'Catalog-only setting.'
        })
      };
      repliesEntry = {
        el: $.el('label', {
          innerHTML: '<input type=checkbox name="Show Replies"> Show replies'
        })
      };
      refNavEntry = {
        el: $.el('label', {
          innerHTML: '<input type=checkbox name="Refreshed Navigation"> Refreshed navigation',
          title: 'Refresh index when navigating through pages.'
        })
      };
      _ref1 = [targetEntry, repliesEntry, refNavEntry];
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        label = _ref1[_j];
        input = label.el.firstChild;
        name = input.name;
        input.checked = Conf[name];
        $.on(input, 'change', $.cb.checked);
        switch (name) {
          case 'Open threads in a new tab':
            $.on(input, 'change', this.cb.target);
            break;
          case 'Show Replies':
            $.on(input, 'change', this.cb.replies);
        }
      }
      Header.menu.addEntry({
        el: $.el('span', {
          textContent: 'Index Navigation'
        }),
        order: 98,
        subEntries: [threadNumEntry, targetEntry, repliesEntry, refNavEntry]
      });
      $.addClass(doc, 'index-loading');
      this.root = $.el('div', {
        className: 'board'
      });
      this.pagelist = $.el('div', {
        className: 'pagelist',
        hidden: true,
        innerHTML: "<div class=\"prev\"><a>&lt;</a></div><div class=\"pages\"></div><div class=\"next\"><a>&gt;</a></div>"
      });
      this.navLinks = $.el('div', {
        className: 'navLinks',
        innerHTML: "<span id=\"index-menu\"><input type=\"search\" id=\"index-search\" class=\"field\" placeholder=\"Search\"><a id=\"index-search-clear\" class=\"fa\" href=\"javascript:;\">\uf05c</a>&nbsp;<time id=\"index-last-refresh\" title=\"Last index refresh\">...</time><span id=\"hidden-label\" hidden>&nbsp;&mdash; <span id=\"hidden-count\"></span> <span id=\"hidden-toggle\">[<a href=\"javascript:;\">Show</a>]</span></span><span style='flex: 1'></span><select id=\"index-mode\" name=\"Index Mode\"><option disabled>Index Mode</option><option value=\"paged\">Paged</option><option value=\"infinite\">Infinite Scrolling</option><option value=\"all pages\">All threads</option><option value=\"catalog\">Catalog</option></select><select id=\"index-sort\" name=\"Index Sort\"><option disabled>Index Sort</option><option value=\"bump\">Bump order</option><option value=\"lastreply\">Last reply</option><option value=\"birth\">Creation date</option><option value=\"replycount\">Reply count</option><option value=\"filecount\">File count</option></select><select id=\"index-size\" name=\"Index Size\"><option disabled>Image Size</option><option value=\"small\">Small</option><option value=\"large\">Large</option></select></span>"
      });
      this.timeEl = $('time#index-last-refresh', this.navLinks);
      this.searchInput = $('#index-search', this.navLinks);
      this.searchTest(true);
      this.hideLabel = $('#hidden-label', this.navLinks);
      this.selectMode = $('#index-mode', this.navLinks);
      this.selectSort = $('#index-sort', this.navLinks);
      this.selectSize = $('#index-size', this.navLinks);
      $.on(this.searchInput, 'input', this.onSearchInput);
      $.on($('#index-search-clear', this.navLinks), 'click', this.clearSearch);
      $.on($('#hidden-toggle a', this.navLinks), 'click', this.cb.toggleHiddenThreads);
      _ref2 = [this.selectMode, this.selectSort, this.selectSize];
      for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {
        select = _ref2[_k];
        select.value = Conf[select.name];
        $.on(select, 'change', $.cb.value);
      }
      $.on(this.selectMode, 'change', this.cb.mode);
      $.on(this.selectSort, 'change', this.cb.sort);
      $.on(this.selectSize, 'change', this.cb.size);
      Rice.nodes(this.navLinks);
      this.currentPage = this.getCurrentPage();
      $.on(d, 'scroll', this.scroll);
      if (Conf['Update Stale Index']) {
        $.on(window, 'focus', this.updateIfNeeded);
      }
      $.on(this.pagelist, 'click', this.cb.pageNav);
      returnLink = $.el('a', {
        id: 'returnIcon',
        className: 'a-icon',
        href: '.././'
      });
      this.catalogLink = $.el('a', {
        id: 'catalogIcon',
        className: 'a-icon',
        href: "//boards.4chan.org/" + g.BOARD.ID + "/"
      });
      this.catalogLink.dataset.indexMode = 'catalog';
      $.on(returnLink, 'click', function(e) {
        if (g.VIEW === 'index') {
          Index.setIndexMode(Conf['Previous Index Mode']);
          e.preventDefault();
          return;
        }
        return Navigate.navigate.call(this, e);
      });
      $.on(this.catalogLink, 'click', Navigate.navigate);
      Header.addShortcut(this.catalogLink, true);
      Header.addShortcut(returnLink, true);
      if (g.VIEW === 'index') {
        this.update();
        this.cb.toggleCatalogMode();
      }
      $.asap((function() {
        return $('.board', doc) || d.readyState !== 'loading';
      }), function() {
        var board, navLink, _l, _len3, _ref3, _ref4;
        _ref3 = $$('.navLinks');
        for (_l = 0, _len3 = _ref3.length; _l < _len3; _l++) {
          navLink = _ref3[_l];
          $.rm(navLink);
        }
        if ((_ref4 = $.id('search-box')) != null) {
          _ref4.parentNode.remove();
        }
        $.after($.x('child::form/preceding-sibling::hr[1]'), Index.navLinks);
        if (g.VIEW !== 'index') {
          return;
        }
        board = $('.board');
        $.replace(board, Index.root);
        return d.implementation.createDocument(null, null, null).appendChild(board);
      });
      return $.asap((function() {
        return $('.pagelist', doc) || d.readyState !== 'loading';
      }), function() {
        var pagelist;
        if (pagelist = $('.pagelist')) {
          $.replace(pagelist, Index.pagelist);
        } else {
          $.after($.id('delform'), Index.pagelist);
        }
        return $.rmClass(doc, 'index-loading');
      });
    },
    scroll: function() {
      if (Index.req || Conf['Index Mode'] !== 'infinite' || (window.scrollY <= doc.scrollHeight - (300 + window.innerHeight)) || g.VIEW === 'thread') {
        return;
      }
      Index.currentPage = (Index.currentPage || Index.getCurrentPage()) + 1;
      if (Index.currentPage >= Index.pagesNum) {
        return Index.endNotice();
      }
      return Index.buildIndex(true);
    },
    endNotice: (function() {
      var notify, reset;
      notify = false;
      reset = function() {
        return notify = false;
      };
      return function() {
        if (notify) {
          return;
        }
        notify = true;
        new Notice('info', "Last page reached.", 2);
        return setTimeout(reset, 3 * $.SECOND);
      };
    })(),
    menu: {
      init: function() {
        if (g.VIEW !== 'index' || !Conf['Menu'] || g.BOARD.ID === 'f') {
          return;
        }
        return Menu.menu.addEntry({
          el: $.el('a', {
            href: 'javascript:;'
          }),
          order: 19,
          open: function(_arg) {
            var thread;
            thread = _arg.thread;
            if (Conf['Index Mode'] !== 'catalog') {
              return false;
            }
            this.el.textContent = thread.isPinned ? 'Unpin thread' : 'Pin thread';
            if (this.cb) {
              $.off(this.el, 'click', this.cb);
            }
            this.cb = function() {
              $.event('CloseMenu');
              return Index.togglePin(thread);
            };
            $.on(this.el, 'click', this.cb);
            return true;
          }
        });
      }
    },
    threadNode: function() {
      if (g.VIEW !== 'index') {
        return;
      }
      if (!Index.db.get({
        boardID: this.board.ID,
        threadID: this.ID
      })) {
        return;
      }
      return this.pin();
    },
    catalogNode: function() {
      $.on(this.nodes.thumb, 'click', Index.onClick);
      if (Conf['Image Hover in Catalog']) {
        return;
      }
      return $.on(this.nodes.thumb, 'mouseover', Index.onOver);
    },
    onClick: function(e) {
      var thread;
      if (e.button !== 0) {
        return;
      }
      thread = g.threads[this.parentNode.dataset.fullID];
      if (e.shiftKey) {
        PostHiding.toggle(thread.OP);
        return e.preventDefault();
      } else if (e.altKey) {
        Index.togglePin(thread);
        return e.preventDefault();
      } else {
        return Navigate.navigate.call(this, e);
      }
    },
    onOver: function(e) {
      var el, nodes;
      nodes = g.threads[this.parentNode.dataset.fullID].OP.nodes;
      el = $.el('div', {
        innerHTML: '<div class=post><div class=postInfo></div></div>',
        className: 'thread-info dialog',
        hidden: true
      });
      $.add(el.firstElementChild.firstElementChild, [$('.nameBlock', nodes.info).cloneNode(true), $.tn(' '), nodes.date.cloneNode(true)]);
      $.add(Header.hover, el);
      UI.hover({
        root: this,
        el: el,
        latestEvent: e,
        endEvents: 'mouseout',
        offsetX: 15,
        offsetY: -20
      });
      return setTimeout((function() {
        if (el.parentNode) {
          return el.hidden = false;
        }
      }), .25 * $.SECOND);
    },
    togglePin: function(thread) {
      var data;
      data = {
        boardID: thread.board.ID,
        threadID: thread.ID
      };
      if (thread.isPinned) {
        thread.unpin();
        Index.db["delete"](data);
      } else {
        thread.pin();
        data.val = true;
        Index.db.set(data);
      }
      Index.sort();
      return Index.buildIndex();
    },
    setIndexMode: function(mode) {
      Index.selectMode.value = mode;
      return $.event('change', null, Index.selectMode);
    },
    cycleSortType: function() {
      var i, option, type, types, _i, _len;
      types = [];
      i = 0;
      while (option = Index.selectSort.options[i++]) {
        if (!option.disabled) {
          types.push(option);
        }
      }
      for (i = _i = 0, _len = types.length; _i < _len; i = ++_i) {
        type = types[i];
        if (type.selected) {
          break;
        }
      }
      types[(i + 1) % types.length].selected = true;
      return $.event('change', null, Index.selectSort);
    },
    catalogSwitch: function() {
      return $.get('JSON Navigation', true, function(items) {
        var hash;
        if (!items['JSON Navigation']) {
          return;
        }
        $.set('Index Mode', 'catalog');
        hash = window.location.hash;
        return window.location = './' + hash;
      });
    },
    searchTest: function(init) {
      var hash, match;
      if (!(hash = window.location.hash)) {
        return false;
      }
      if (!(match = hash.match(/s=([\w\s\n]+)/))) {
        return false;
      }
      this.searchInput.value = match[1];
      if (init) {
        $.on(d, '4chanXInitFinished', Index.onSearchInput);
      } else {
        Index.onSearchInput();
      }
      return true;
    },
    setupNavLinks: function() {
      var el, _i, _len, _ref;
      _ref = $$('.navLinks.desktop > a');
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        el = _ref[_i];
        if (/\/catalog$/.test(el.pathname)) {
          el.href = '.././';
        }
        $.on(el, 'click', function() {
          switch (this.textContent) {
            case 'Return':
              return $.set('Index Mode', Conf['Previous Index Mode']);
            case 'Catalog':
              return $.set('Index Mode', 'catalog');
          }
        });
      }
    },
    cb: {
      toggleCatalogMode: function() {
        if (Conf['Index Mode'] === 'catalog') {
          $.addClass(doc, 'catalog-mode');
        } else {
          $.rmClass(doc, 'catalog-mode');
        }
        return Index.cb.size();
      },
      toggleHiddenThreads: function() {
        $('#hidden-toggle a', Index.navLinks).textContent = (Index.showHiddenThreads = !Index.showHiddenThreads) ? 'Hide' : 'Show';
        Index.sort();
        if (Conf['Index Mode'] === 'paged' && Index.getCurrentPage() > 1) {
          return Index.pageNav(1);
        } else {
          return Index.buildIndex();
        }
      },
      mode: function(e) {
        var mode;
        Index.cb.toggleCatalogMode();
        Index.togglePagelist();
        if (e) {
          Index.buildIndex();
        }
        mode = Conf['Index Mode'];
        if (mode !== 'catalog' && mode !== Conf['Previous Index Mode']) {
          Conf['Previous Index Mode'] = mode;
          return $.set('Previous Index Mode', mode);
        }
      },
      sort: function(e) {
        Index.sort();
        if (e) {
          return Index.buildIndex();
        }
      },
      size: function(e) {
        if (Conf['Index Mode'] !== 'catalog') {
          $.rmClass(Index.root, 'catalog-small');
          $.rmClass(Index.root, 'catalog-large');
        } else if (Conf['Index Size'] === 'small') {
          $.addClass(Index.root, 'catalog-small');
          $.rmClass(Index.root, 'catalog-large');
        } else {
          $.addClass(Index.root, 'catalog-large');
          $.rmClass(Index.root, 'catalog-small');
        }
        if (e) {
          return Index.buildIndex();
        }
      },
      threadsNum: function() {
        if (Conf['Index Mode'] !== 'paged') {
          return;
        }
        return Index.buildIndex();
      },
      target: function() {
        return g.BOARD.threads.forEach(function(thread) {
          var thumb;
          if (!thread.catalogView) {
            return;
          }
          thumb = thread.catalogView.nodes.thumb;
          if (Conf['Open threads in a new tab']) {
            return thumb.target = '_blank';
          } else {
            return thumb.removeAttribute('target');
          }
        });
      },
      replies: function() {
        Index.buildThreads();
        Index.sort();
        return Index.buildIndex();
      },
      pageNav: function(e) {
        var a;
        if (e.shiftKey || e.altKey || e.ctrlKey || e.metaKey || e.button !== 0) {
          return;
        }
        switch (e.target.nodeName) {
          case 'BUTTON':
            a = e.target.parentNode;
            break;
          case 'A':
            a = e.target;
            break;
          default:
            return;
        }
        e.preventDefault();
        if (Index.cb.indexNav(a, true)) {
          return;
        }
        return Index.userPageNav(+a.pathname.split('/')[2] || 1);
      },
      headerNav: function(e) {
        var a, needChange, onSameIndex;
        a = e.target;
        if (e.button !== 0 || a.nodeName !== 'A' || a.hostname !== 'boards.4chan.org') {
          return;
        }
        onSameIndex = g.VIEW === 'index' && a.pathname.split('/')[1] === g.BOARD.ID;
        needChange = Index.cb.indexNav(a, onSameIndex);
        if (e.shiftKey || e.altKey || e.ctrlKey || e.metaKey || !onSameIndex || g.BOARD.ID === 'f') {
          return;
        }
        e.preventDefault();
        if (!needChange) {
          return Index.update();
        }
      },
      indexNav: function(a, onSameIndex) {
        var indexMode, indexSort, needChange, _ref;
        _ref = a.dataset, indexMode = _ref.indexMode, indexSort = _ref.indexSort;
        if (indexMode && Conf['Index Mode'] !== indexMode) {
          $.set('Index Mode', indexMode);
          Conf['Index Mode'] = indexMode;
          if (onSameIndex) {
            Index.selectMode.value = indexMode;
            Index.cb.mode();
            needChange = true;
          }
        }
        if (indexSort && Conf['Index Sort'] !== indexSort) {
          $.set('Index Sort', indexSort);
          Conf['Index Sort'] = indexSort;
          if (onSameIndex) {
            Index.selectSort.value = indexSort;
            Index.cb.sort();
            needChange = true;
          }
        }
        if (needChange) {
          Index.buildIndex();
          Index.scrollToIndex();
        }
        return needChange;
      }
    },
    scrollToIndex: function() {
      return Header.scrollToIfNeeded(Index.navLinks);
    },
    getCurrentPage: function() {
      if (Conf['Index Mode'] === 'infinite' && Index.currentPage) {
        return Index.currentPage;
      }
      return +window.location.pathname.split('/')[2] || 1;
    },
    userPageNav: function(pageNum) {
      Navigate.pushState(pageNum === 1 ? './' : pageNum);
      if (Conf['Refreshed Navigation'] && Conf['Index Mode'] !== 'all pages') {
        return Index.update(pageNum);
      } else {
        return Index.pageNav(pageNum);
      }
    },
    pageNav: function(pageNum) {
      if (Index.currentPage === pageNum && !Index.root.parentElement) {
        return;
      }
      Navigate.pushState(pageNum === 1 ? './' : pageNum);
      return Index.pageLoad(pageNum);
    },
    pageLoad: function(pageNum) {
      Index.currentPage = pageNum;
      if (Conf['Index Mode'] === 'all pages') {
        return;
      }
      Index.buildIndex();
      return Index.scrollToIndex();
    },
    getThreadsNumPerPage: function() {
      if (Conf['Threads per Page'] > 0) {
        return +Conf['Threads per Page'];
      } else {
        return Index.threadsNumPerPage;
      }
    },
    getPagesNum: function() {
      return Math.ceil(Index.sortedThreads.length / Index.getThreadsNumPerPage());
    },
    getMaxPageNum: function() {
      var max, min;
      min = 1;
      max = +Index.getPagesNum();
      if (min < max) {
        return max;
      } else {
        return min;
      }
    },
    togglePagelist: function() {
      return Index.pagelist.hidden = Conf['Index Mode'] !== 'paged';
    },
    buildPagelist: function() {
      var a, i, maxPageNum, nodes, pagesRoot, _i;
      pagesRoot = $('.pages', Index.pagelist);
      maxPageNum = Index.getMaxPageNum();
      if (pagesRoot.childElementCount !== maxPageNum) {
        nodes = [];
        for (i = _i = 1; _i <= maxPageNum; i = _i += 1) {
          a = $.el('a', {
            textContent: i,
            href: i === 1 ? './' : i
          });
          nodes.push($.tn('['), a, $.tn('] '));
        }
        $.rmAll(pagesRoot);
        $.add(pagesRoot, nodes);
      }
      return Index.togglePagelist();
    },
    setPage: function(pageNum) {
      var a, href, maxPageNum, next, pagesRoot, prev, strong;
      if (pageNum == null) {
        pageNum = Index.getCurrentPage();
      }
      Index.currentPage = pageNum;
      maxPageNum = Index.getMaxPageNum();
      pagesRoot = $('.pages', Index.pagelist);
      prev = pagesRoot.previousSibling.firstChild;
      next = pagesRoot.nextSibling.firstChild;
      href = Math.max(pageNum - 1, 1);
      prev.href = href === 1 ? './' : href;
      prev.firstChild.disabled = href === pageNum;
      href = Math.min(pageNum + 1, maxPageNum);
      next.href = href === 1 ? './' : href;
      next.firstChild.disabled = href === pageNum;
      if (strong = $('strong', pagesRoot)) {
        if (+strong.textContent === pageNum) {
          return;
        }
        $.replace(strong, strong.firstChild);
      } else {
        strong = $.el('strong');
      }
      if (!(a = pagesRoot.children[pageNum - 1])) {
        return;
      }
      $.before(a, strong);
      return $.add(strong, a);
    },
    updateHideLabel: function() {
      var hiddenCount, thread, threadID, _i, _len, _ref;
      hiddenCount = 0;
      _ref = g.BOARD.threads.keys;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        threadID = _ref[_i];
        thread = g.BOARD.threads[threadID];
        if (thread.isHidden && __indexOf.call(Index.liveThreadData.keys, threadID) >= 0) {
          hiddenCount++;
        }
      }
      if (!hiddenCount) {
        Index.hideLabel.hidden = true;
        if (Index.showHiddenThreads) {
          Index.cb.toggleHiddenThreads();
        }
        return;
      }
      Index.hideLabel.hidden = false;
      return $('#hidden-count', Index.hideLabel).textContent = hiddenCount === 1 ? '1 hidden thread' : "" + hiddenCount + " hidden threads";
    },
    updateIfNeeded: function() {
      var needed, timeEl;
      timeEl = Index.timeEl;
      needed = g.VIEW === 'index' && !Index.req && timeEl.dataset.utc && timeEl.dataset.utc < Date.now() - (10 * $.MINUTE);
      if (needed) {
        return Index.update();
      }
    },
    update: function(pageNum) {
      var board, now, onload, sortedThreads, _ref, _ref1;
      if (!navigator.onLine) {
        return;
      }
      if (g.VIEW === 'thread') {
        if (Conf['Thread Updater']) {
          ThreadUpdater.update();
        }
        return;
      }
      if (!(d.readyState === 'loading' || Index.root.parentElement)) {
        $.replace($('.board'), Index.root);
      }
      Index.currentPage = 1;
      if ((_ref = Index.req) != null) {
        _ref.abort();
      }
      if ((_ref1 = Index.notice) != null) {
        _ref1.close();
      }
      sortedThreads = Index.sortedThreads;
      if (sortedThreads) {
        board = sortedThreads[0].board.ID;
      }
      now = Date.now();
      $.ready(function() {
        return Index.nTimeout = setTimeout((function() {
          if (Index.req && !Index.notice) {
            return Index.notice = new Notice('info', 'Refreshing index...', 2);
          }
        }), 3 * $.SECOND - (Date.now() - now));
      });
      if (typeof pageNum !== 'number') {
        pageNum = null;
      }
      onload = function(e) {
        return Index.load(e, pageNum);
      };
      Index.req = $.ajax("//a.4cdn.org/" + g.BOARD.ID + "/catalog.json", {
        onabort: onload,
        onloadend: onload,
        onerror: onload
      }, {
        whenModified: board === g.BOARD.ID
      });
      return $.addClass(Index.button, 'fa-spin');
    },
    load: function(e, pageNum) {
      var err, nTimeout, notice, req, timeEl, _ref;
      $.rmClass(Index.button, 'fa-spin');
      req = Index.req, notice = Index.notice, nTimeout = Index.nTimeout;
      if (nTimeout) {
        clearTimeout(nTimeout);
      }
      delete Index.nTimeout;
      delete Index.req;
      delete Index.notice;
      if (e.type === 'abort') {
        req.onloadend = null;
        notice.close();
        return;
      }
      if ((_ref = req.status) !== 200 && _ref !== 304) {
        err = "Index refresh failed. Error " + req.statusText + " (" + req.status + ")";
        if (notice) {
          notice.setType('warning');
          notice.el.lastElementChild.textContent = err;
          setTimeout(notice.close, $.SECOND);
        } else {
          new Notice('warning', err, 1);
        }
        return;
      }
      Navigate.title();
      try {
        pageNum || (pageNum = 1);
        if (req.status === 200) {
          Index.parse(req.response, pageNum);
        } else if (req.status === 304) {
          if (Index.currentPage === pageNum) {
            Index.buildIndex();
          } else {
            Index.pageNav(pageNum);
          }
        }
      } catch (_error) {
        err = _error;
        c.error("Index failure: " + err.message, err.stack);
        if (notice) {
          notice.setType('error');
          notice.el.lastElementChild.textContent = 'Index refresh failed.';
          setTimeout(notice.close, $.SECOND);
        } else {
          new Notice('error', 'Index refresh failed.', 1);
        }
        return;
      }
      timeEl = Index.timeEl;
      timeEl.dataset.utc = Date.parse(req.getResponseHeader('Last-Modified'));
      RelativeDates.update(timeEl);
      return Index.scrollToIndex();
    },
    parse: function(pages, pageNum) {
      Index.parseThreadList(pages);
      Index.buildThreads();
      Index.sort();
      if ((pageNum != null) && Index.currentPage !== pageNum) {
        Index.pageNav(pageNum);
        return;
      }
      return Index.buildIndex();
    },
    parseThreadList: function(pages) {
      var i, j, live, page, thread, threads;
      Index.threadsNumPerPage = pages[0].threads.length;
      live = new SimpleDict();
      i = 0;
      while (page = pages[i++]) {
        j = 0;
        threads = page.threads;
        while (thread = threads[j++]) {
          live.push(thread.no, thread);
        }
      }
      Index.liveThreadData = live;
      return g.BOARD.threads.forEach(function(thread) {
        var _ref;
        if (_ref = thread.ID, __indexOf.call(Index.liveThreadData.keys, _ref) < 0) {
          return thread.collect();
        }
      });
    },
    buildThreads: function() {
      var errors, posts, threads;
      threads = [];
      posts = [];
      errors = null;
      Index.liveThreadData.forEach(function(threadData) {
        var err, thread, threadRoot;
        threadRoot = Build.thread(g.BOARD, threadData);
        if (thread = g.BOARD.threads[threadData.no]) {
          thread.setPage(Math.floor(i / Index.threadsNumPerPage) + 1);
          thread.setCount('post', threadData.replies + 1, threadData.bumplimit);
          thread.setCount('file', threadData.images + !!threadData.ext, threadData.imagelimit);
          thread.setStatus('Sticky', !!threadData.sticky);
          thread.setStatus('Closed', !!threadData.closed);
        } else {
          thread = new Thread(threadData.no, g.BOARD);
          threads.push(thread);
        }
        if (thread.ID in thread.posts) {
          return;
        }
        try {
          return posts.push(new Post($('.opContainer', threadRoot), thread, g.BOARD));
        } catch (_error) {
          err = _error;
          if (!errors) {
            errors = [];
          }
          return errors.push({
            message: "Parsing of Thread No." + thread + " failed. Thread will be skipped.",
            error: err
          });
        }
      });
      if (errors) {
        Main.handleErrors(errors);
      }
      Thread.callbacks.execute(threads);
      Post.callbacks.execute(posts);
      Index.updateHideLabel();
      return $.event('IndexRefresh');
    },
    buildReplies: function(thread) {
      var data, err, errors, lastReplies, node, nodes, post, posts, _i, _len;
      if (!Conf['Show Replies']) {
        return;
      }
      posts = [];
      if (!(lastReplies = Index.liveThreadData[thread.ID].last_replies)) {
        return;
      }
      nodes = [];
      for (_i = 0, _len = lastReplies.length; _i < _len; _i++) {
        data = lastReplies[_i];
        if (post = thread.posts[data.no]) {
          nodes.push(post.nodes.root);
          continue;
        }
        nodes.push(node = Build.postFromObject(data, thread.board.ID));
        try {
          posts.push(new Post(node, thread, thread.board));
        } catch (_error) {
          err = _error;
          if (!errors) {
            errors = [];
          }
          errors.push({
            message: "Parsing of Post No." + data.no + " failed. Post will be skipped.",
            error: err
          });
        }
        $.add(thread.OP.nodes.root.parentNode, nodes);
      }
      if (errors) {
        Main.handleErrors(errors);
      }
      return Post.callbacks.execute(posts);
    },
    buildCatalogViews: function() {
      var catalogThreads, i, nodes, root, size, thread;
      catalogThreads = [];
      nodes = [];
      i = 0;
      size = Conf['Index Size'] === 'small' ? 150 : 250;
      while (thread = Index.sortedThreads[i++]) {
        if (!thread.catalogView) {
          catalogThreads.push(new CatalogThread(Build.catalogThread(thread), thread));
        }
        root = thread.catalogView.nodes.root;
        Index.sizeSingleCatalogNode(root, size);
        nodes.push(root);
      }
      CatalogThread.callbacks.execute(catalogThreads);
      return nodes;
    },
    sizeSingleCatalogNode: function(node, size) {
      var height, ratio, thumb, width, _ref;
      thumb = node.firstElementChild;
      _ref = thumb.dataset, width = _ref.width, height = _ref.height;
      if (!width) {
        return;
      }
      ratio = size / Math.max(width, height);
      thumb.style.width = width * ratio + 'px';
      return thumb.style.height = height * ratio + 'px';
    },
    sort: function() {
      var i, liveData, sortedThreadIDs, sortedThreads, thread, threadID;
      sortedThreads = [];
      sortedThreadIDs = [];
      liveData = [];
      Index.liveThreadData.forEach(function(data) {
        return liveData.push(data);
      });
      ({
        'bump': function() {
          return sortedThreadIDs = Index.liveThreadData.keys;
        },
        'lastreply': function() {
          var data, i;
          liveData.sort(function(a, b) {
            var _ref, _ref1;
            if ('last_replies' in a) {
              _ref = a.last_replies, a = _ref[_ref.length - 1];
            }
            if ('last_replies' in b) {
              _ref1 = b.last_replies, b = _ref1[_ref1.length - 1];
            }
            return b.no - a.no;
          });
          i = 0;
          while (data = liveData[i++]) {
            sortedThreadIDs.push(data.no);
          }
        },
        'birth': function() {
          return sortedThreadIDs = __slice.call(Index.liveThreadData.keys).sort(function(a, b) {
            return b - a;
          });
        },
        'replycount': function() {
          var data, i;
          liveData.sort(function(a, b) {
            return b.replies - a.replies;
          });
          i = 0;
          while (data = liveData[i++]) {
            sortedThreadIDs.push(data.no);
          }
        },
        'filecount': function() {
          var data, i;
          liveData = [];
          Index.liveThreadData.forEach(function(data) {
            return liveData.push(data);
          });
          liveData.sort(function(a, b) {
            return b.images - a.images;
          });
          i = 0;
          while (data = liveData[i++]) {
            sortedThreadIDs.push(data.no);
          }
        }
      })[Conf['Index Sort']]();
      i = 0;
      while (threadID = sortedThreadIDs[i++]) {
        sortedThreads.push(g.BOARD.threads[threadID]);
      }
      Index.sortedThreads = [];
      i = 0;
      while (thread = sortedThreads[i++]) {
        if (thread.isHidden === Index.showHiddenThreads) {
          Index.sortedThreads.push(thread);
        }
      }
      if (Index.isSearching) {
        Index.sortedThreads = Index.querySearch(Index.searchInput.value) || Index.sortedThreads;
      }
      Index.sortOnTop(function(thread) {
        return thread.isSticky;
      });
      return Index.sortOnTop(function(thread) {
        return thread.isOnTop || thread.isPinned;
      });
    },
    sortOnTop: function(match) {
      var i, offset, thread, _i, _len, _ref;
      offset = 0;
      _ref = Index.sortedThreads;
      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
        thread = _ref[i];
        if (match(thread)) {
          Index.sortedThreads.splice(offset++, 0, Index.sortedThreads.splice(i, 1)[0]);
        }
      }
    },
    buildIndex: function(infinite) {
      var i, max, nodes, pageNum, sortedThreads, thread, threads, threadsPerPage;
      sortedThreads = Index.sortedThreads;
      nodes = [];
      switch (Conf['Index Mode']) {
        case 'paged':
        case 'infinite':
          pageNum = Index.getCurrentPage() - 1;
          threadsPerPage = Index.getThreadsNumPerPage();
          threads = [];
          i = threadsPerPage * pageNum;
          max = i + threadsPerPage;
          while (i < max && (thread = sortedThreads[i++])) {
            threads.push(thread);
            nodes.push(thread.OP.nodes.root.parentNode, $.el('hr'));
            Index.buildReplies(thread);
          }
          Index.buildPagelist();
          Index.setPage();
          break;
        case 'catalog':
          nodes = Index.buildCatalogViews();
          break;
        default:
          i = 0;
          while (thread = sortedThreads[i++]) {
            nodes.push(thread.OP.nodes.root.parentNode, $.el('hr'));
            Index.buildReplies(thread);
          }
      }
      if (!infinite) {
        $.rmAll(Index.root);
      }
      return $.add(Index.root, nodes);
    },
    isSearching: false,
    clearSearch: function() {
      Index.searchInput.value = null;
      Index.onSearchInput();
      return Index.searchInput.focus();
    },
    onSearchInput: function() {
      var pageNum, _ref, _ref1;
      if (Index.isSearching = !!Index.searchInput.value.trim()) {
        if (!Index.searchInput.dataset.searching) {
          Index.searchInput.dataset.searching = 1;
          Index.pageBeforeSearch = Index.getCurrentPage();
          Index.setPage(pageNum = 1);
        } else {
          if (Conf['Index Mode'] !== 'infinite') {
            pageNum = Index.getCurrentPage();
          }
        }
      } else {
        if (!Index.searchInput.dataset.searching) {
          return;
        }
        pageNum = Index.pageBeforeSearch;
        delete Index.pageBeforeSearch;
        Index.searchInput.removeAttribute('data-searching');
      }
      Index.sort();
      if (((_ref = Conf['Index Mode']) === 'paged' || _ref === 'infinite') && ((_ref1 = Index.currentPage) !== pageNum && _ref1 !== Index.getMaxPageNum())) {
        return Index.pageNav(pageNum);
      } else {
        Index.buildIndex();
        return Index.setPage();
      }
    },
    querySearch: function(query) {
      var keywords;
      if (!(keywords = query.toLowerCase().match(/\S+/g))) {
        return;
      }
      return Index.search(keywords);
    },
    search: function(keywords) {
      var filtered, i, sortedThreads, thread;
      filtered = [];
      i = 0;
      sortedThreads = Index.sortedThreads;
      while (thread = sortedThreads[i++]) {
        if (Index.searchMatch(thread, keywords)) {
          filtered.push(thread);
        }
      }
      return Index.sortedThreads = filtered;
    },
    searchMatch: function(thread, keywords) {
      var file, info, key, keyword, text, _i, _j, _len, _len1, _ref, _ref1;
      _ref = thread.OP, info = _ref.info, file = _ref.file;
      text = [];
      _ref1 = ['comment', 'subject', 'name', 'tripcode', 'email'];
      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
        key = _ref1[_i];
        if (key in info) {
          text.push(info[key]);
        }
      }
      if (file) {
        text.push(file.name);
      }
      text = text.join(' ').toLowerCase();
      for (_j = 0, _len1 = keywords.length; _j < _len1; _j++) {
        keyword = keywords[_j];
        if (-1 === text.indexOf(keyword)) {
          return false;
        }
      }
      return true;
    }
  };

  Build = {
    staticPath: '//s.4cdn.org/image/',
    gifIcon: window.devicePixelRatio >= 2 ? '@2x.gif' : '.gif',
    spoilerRange: {},
    shortFilename: function(filename, isReply) {
      var ext, threshold;
      threshold = isReply ? 30 : 40;
      ext = filename.match(/\.[^.]+$/)[0];
      if (filename.length - ext.length > threshold) {
        return "" + filename.slice(0, threshold - 5) + "(...)" + ext;
      } else {
        return filename;
      }
    },
    thumbRotate: (function() {
      var n;
      n = 0;
      return function() {
        return n = (n + 1) % 2;
      };
    })(),
    path: function(boardID, threadID, postID, fragment) {
      var path;
      path = "/" + boardID + "/thread/" + threadID;
      if ((g.SLUG != null) && threadID === g.THREADID) {
        path += "/" + g.SLUG;
      }
      if (postID) {
        path += "#" + (fragment || 'p') + postID;
      }
      return path;
    },
    postFromObject: function(data, boardID) {
      var o;
      o = {
        postID: data.no,
        threadID: data.resto || data.no,
        boardID: boardID,
        name: data.name,
        capcode: data.capcode,
        tripcode: data.trip,
        uniqueID: data.id,
        email: data.email ? encodeURI(data.email.replace(/&quot;/g, '"')) : '',
        subject: data.sub,
        flagCode: data.country,
        flagName: data.country_name,
        date: data.now,
        dateUTC: data.time,
        comment: data.com,
        isSticky: !!data.sticky,
        isClosed: !!data.closed
      };
      if (data.ext || data.filedeleted) {
        o.file = {
          name: data.filename + data.ext,
          timestamp: "" + data.tim + data.ext,
          url: boardID === 'f' ? "//i.4cdn.org/" + boardID + "/" + (encodeURIComponent(data.filename)) + data.ext : "//i.4cdn.org/" + boardID + "/" + data.tim + data.ext,
          height: data.h,
          width: data.w,
          MD5: data.md5,
          size: data.fsize,
          turl: "//" + (Build.thumbRotate()) + ".t.4cdn.org/" + boardID + "/" + data.tim + "s.jpg",
          theight: data.tn_h,
          twidth: data.tn_w,
          isSpoiler: !!data.spoiler,
          isDeleted: !!data.filedeleted
        };
      }
      return Build.post(o);
    },
    post: function(o, isArchived) {

      /*
      This function contains code from 4chan-JS (https://github.com/4chan/4chan-JS).
      @license: https://github.com/4chan/4chan-JS/blob/master/LICENSE
       */
      var a, boardID, capcode, capcodeClass, capcodeIcon, capcodeStart, closed, comment, container, date, dateUTC, email, emailEnd, emailStart, file, fileDims, fileHTML, fileInfo, fileSize, fileThumb, filename, flag, flagCode, flagName, gifIcon, href, imgSrc, isClosed, isOP, isSticky, name, pageIcon, pageNum, postID, quote, replyLink, shortFilename, spoilerRange, staticPath, sticky, subject, threadID, tripcode, uniqueID, userID, _i, _len, _ref;
      postID = o.postID, threadID = o.threadID, boardID = o.boardID, name = o.name, capcode = o.capcode, tripcode = o.tripcode, uniqueID = o.uniqueID, email = o.email, subject = o.subject, flagCode = o.flagCode, flagName = o.flagName, date = o.date, dateUTC = o.dateUTC, isSticky = o.isSticky, isClosed = o.isClosed, comment = o.comment, file = o.file;
      isOP = postID === threadID;
      staticPath = Build.staticPath, gifIcon = Build.gifIcon;
      tripcode = tripcode ? " <span class=postertrip>" + tripcode + "</span>" : '';
      if (email) {
        emailStart = '<a href="mailto:' + email + '" class="useremail">';
        emailEnd = '</a>';
      } else {
        emailStart = '';
        emailEnd = '';
      }
      switch (capcode) {
        case 'admin':
        case 'admin_highlight':
          capcodeClass = " capcodeAdmin";
          capcodeStart = " <strong class='capcode hand id_admin'" + "title='Highlight posts by the Administrator'>## Admin</strong>";
          capcodeIcon = (" <img src='" + staticPath + "adminicon" + gifIcon + "' ") + "title='This user is the 4chan Administrator.' class=identityIcon>";
          break;
        case 'mod':
          capcodeClass = " capcodeMod";
          capcodeStart = " <strong class='capcode hand id_mod' " + "title='Highlight posts by Moderators'>## Mod</strong>";
          capcodeIcon = (" <img src='" + staticPath + "modicon" + gifIcon + "' ") + "title='This user is a 4chan Moderator.' class=identityIcon>";
          break;
        case 'developer':
          capcodeClass = " capcodeDeveloper";
          capcodeStart = " <strong class='capcode hand id_developer' " + "title='Highlight posts by Developers'>## Developer</strong>";
          capcodeIcon = (" <img src='" + staticPath + "developericon" + gifIcon + "' ") + "title='This user is a 4chan Developer.' class=identityIcon>";
          break;
        default:
          capcodeClass = '';
          capcodeStart = '';
          capcodeIcon = '';
      }
      userID = !capcode && uniqueID ? (" <span class='posteruid id_" + uniqueID + "'>(ID: ") + ("<span class=hand title='Highlight posts by this ID'>" + uniqueID + "</span>)</span> ") : '';
      flag = !flagCode ? '' : boardID === 'pol' ? " <img src='" + staticPath + "country/troll/" + (flagCode.toLowerCase()) + ".gif' title='" + flagName + "' class=countryFlag>" : " <span title='" + flagName + "' class='flag flag-" + (flagCode.toLowerCase()) + "'></span>";
      if (file != null ? file.isDeleted : void 0) {
        fileHTML = isOP ? "<div class=file><span class=fileThumb>" + ("<img src='" + staticPath + "filedeleted" + gifIcon + "' class=fileDeleted>") + "</span></div>" : "<div class=file><span class=fileThumb>" + ("<img src='" + staticPath + "filedeleted-res" + gifIcon + "' class=fileDeletedRes>") + "</span></div>";
      } else if (file) {
        fileSize = $.bytesToString(file.size);
        fileThumb = file.turl;
        if (file.isSpoiler) {
          fileSize = "Spoiler Image, " + fileSize;
          if (!isArchived) {
            fileThumb = "" + staticPath + "spoiler";
            if (spoilerRange = Build.spoilerRange[boardID]) {
              fileThumb += ("-" + boardID) + Math.floor(1 + spoilerRange * Math.random());
            }
            fileThumb += '.png';
            file.twidth = file.theight = 100;
          }
        }
        imgSrc = boardID === 'f' ? '' : ("<a class='fileThumb" + (file.isSpoiler ? ' imgspoiler' : '') + "' href=\"" + file.url + "\" target=_blank>") + ("<img src='" + fileThumb + "' alt='" + fileSize + "' data-md5=" + file.MD5 + " style='height: " + file.theight + "px; width: " + file.twidth + "px;'>") + "</a>";
        a = $.el('a', {
          innerHTML: file.name
        });
        filename = a.textContent.replace(/%22/g, '"');
        a.textContent = Build.shortFilename(filename);
        shortFilename = a.innerHTML;
        a.textContent = filename;
        filename = a.innerHTML.replace(/'/g, '&apos;');
        fileDims = file.name.slice(-3) === 'pdf' ? 'PDF' : "" + file.width + "x" + file.height;
        fileInfo = ("<div class=fileText " + (file.isSpoiler ? "title='" + filename + "'" : '') + ">File: ") + ("<a href=\"" + file.url + "\" " + (filename !== shortFilename && !file.isSpoiler ? " title='" + filename + "'" : '') + " target=_blank>" + (file.isSpoiler ? 'Spoiler Image' : shortFilename) + "</a>") + (" (" + fileSize + ", " + fileDims + ")</div>");
        fileHTML = "<div class=file>" + fileInfo + imgSrc + "</div>";
      } else {
        fileHTML = '';
      }
      sticky = isSticky ? " <img src=" + staticPath + "sticky" + gifIcon + " title=Sticky class=stickyIcon>" : '';
      closed = isClosed ? " <img src=" + staticPath + "closed" + gifIcon + " title=Closed class=closedIcon>" : '';
      if (isOP && g.VIEW === 'index') {
        pageNum = Math.floor(Index.liveThreadData.keys.indexOf("" + postID) / Index.threadsNumPerPage) + 1;
        pageIcon = " <span class=page-num title='This thread is on page " + pageNum + " in the original index.'>Page " + pageNum + "</span>";
        replyLink = " &nbsp; <span>[<a href='" + (Build.path(boardID, threadID)) + "' class=replylink>Reply</a>]</span>";
      } else {
        pageIcon = '';
        replyLink = '';
      }
      container = $.el('div', {
        id: "pc" + postID,
        className: "postContainer " + (isOP ? 'op' : 'reply') + "Container",
        innerHTML: (isOP ? '' : "<div class=sideArrows>&gt;&gt;</div>") + ("<div id=p" + postID + " class='post " + (isOP ? 'op' : 'reply') + (capcode === 'admin_highlight' ? ' highlightPost' : '') + "'>") + (isOP ? fileHTML : '') + "<div class=postInfo>" + ("<input type=checkbox name=" + postID + " value=delete> ") + ("<span class=subject>" + (subject || '') + "</span> ") + ("<span class='nameBlock" + capcodeClass + "'>") + emailStart + ("<span class=name>" + (name || '') + "</span>") + tripcode + capcodeStart + emailEnd + capcodeIcon + userID + flag + ' </span> ' + ("<span class=dateTime data-utc=" + dateUTC + ">" + date + "</span> ") + "<span class='postNum'>" + ("<a href=" + (Build.path(boardID, threadID, postID)) + " title='Link to this post'>No.</a>") + ("<a href='" + (g.VIEW === 'thread' && g.THREADID === threadID ? "javascript:quote(" + postID + ")" : Build.path(boardID, threadID, postID, 'q')) + "' title='Reply to this post'>" + postID + "</a>") + pageIcon + sticky + closed + replyLink + '</span>' + '</div>' + (isOP ? '' : fileHTML) + ("<blockquote class=postMessage>" + (comment || '') + "</blockquote> ") + '</div>'
      });
      _ref = $$('.quotelink', container);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        quote = _ref[_i];
        href = quote.getAttribute('href');
        if (href[0] !== '#') {
          continue;
        }
        quote.href = Build.path(boardID, threadID, href.slice(2));
      }
      return container;
    },
    summary: function(boardID, threadID, posts, files) {
      var text;
      text = [];
      text.push("" + posts + " post" + (posts > 1 ? 's' : ''));
      if (files) {
        text.push("and " + files + " image repl" + (files > 1 ? 'ies' : 'y'));
      }
      text.push('omitted.');
      return $.el('a', {
        className: 'summary',
        textContent: text.join(' '),
        href: Build.path(boardID, threadID)
      });
    },
    thread: function(board, data, full) {
      var OP, root;
      Build.spoilerRange[board] = data.custom_spoiler;
      if ((OP = board.posts[data.no]) && (root = OP.nodes.root.parentNode)) {
        $.rmAll(root);
        $.add(root, OP.nodes.root);
      } else {
        root = $.el('div', {
          className: 'thread',
          id: "t" + data.no
        });
        $.add(root, Build[full ? 'fullThread' : 'excerptThread'](board, data, OP));
      }
      return root;
    },
    excerptThread: function(board, data, OP) {
      var files, nodes, posts, _ref;
      nodes = [OP ? OP.nodes.root : Build.postFromObject(data, board.ID)];
      if (data.omitted_posts || !Conf['Show Replies'] && data.replies) {
        _ref = Conf['Show Replies'] ? [data.omitted_posts, data.omitted_images] : [data.replies, data.images], posts = _ref[0], files = _ref[1];
        nodes.push(Build.summary(board.ID, data.no, posts, files));
      }
      return nodes;
    },
    fullThread: function(board, data) {
      return Build.postFromObject(data, board.ID);
    },
    catalogThread: function(thread) {
      var comment, data, fileCount, gifIcon, pageCount, postCount, pp, quotelink, root, spoilerRange, src, staticPath, subject, thumb, _i, _j, _len, _len1, _ref, _ref1;
      staticPath = Build.staticPath, gifIcon = Build.gifIcon;
      data = Index.liveThreadData[thread.ID];
      postCount = data.replies + 1;
      fileCount = data.images + !!data.ext;
      pageCount = Math.floor(Index.liveThreadData.keys.indexOf("" + thread.ID) / Index.threadsNumPerPage) + 1;
      subject = thread.OP.info.subject ? "<div class='subject'>" + thread.OP.nodes.subject.innerHTML + "</div>" : '';
      comment = thread.OP.nodes.comment.innerHTML.replace(/(<br>\s*){2,}/g, '<br>');
      root = $.el('div', {
        className: 'catalog-thread',
        innerHTML: "<a href=\"" + (Build.path(thread.board.ID, thread.ID)) + "\" class=\"thumb\"></a><div class=\"thread-stats\" title=\"Post count / File count / Page count\"><span class=\"post-count\">" + postCount + "</span> / <span class=\"file-count\">" + fileCount + "</span> / <span class=\"page-count\">" + pageCount + "</span><span class=\"thread-icons\"></span></div>" + subject + "<div class=\"comment\">" + comment + "</div>"
      });
      root.dataset.fullID = thread.fullID;
      if (thread.isPinned) {
        $.addClass(root, 'pinned');
      }
      if (thread.OP.highlights.length) {
        $.addClass.apply($, [root].concat(__slice.call(thread.OP.highlights)));
      }
      thumb = root.firstElementChild;
      if (data.spoiler && !Conf['Reveal Spoiler Thumbnails']) {
        src = "" + staticPath + "spoiler";
        if (spoilerRange = Build.spoilerRange[thread.board]) {
          src += ("-" + thread.board) + Math.floor(1 + spoilerRange * Math.random());
        }
        src += '.png';
        $.addClass(thumb, 'spoiler-file');
      } else if (data.filedeleted) {
        src = "" + staticPath + "filedeleted-res" + gifIcon;
        $.addClass(thumb, 'deleted-file');
      } else if (thread.OP.file) {
        src = thread.OP.file.thumbURL;
        thumb.dataset.width = data.tn_w;
        thumb.dataset.height = data.tn_h;
      } else {
        src = "" + staticPath + "nofile.png";
        $.addClass(thumb, 'no-file');
      }
      thumb.style.backgroundImage = "url(" + src + ")";
      if (Conf['Open threads in a new tab']) {
        thumb.target = '_blank';
      }
      _ref = $$('.quotelink', root.lastElementChild);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        quotelink = _ref[_i];
        $.replace(quotelink, __slice.call(quotelink.childNodes));
      }
      _ref1 = $$('.prettyprint', root.lastElementChild);
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        pp = _ref1[_j];
        $.replace(pp, $.tn(pp.textContent));
      }
      if (thread.isSticky) {
        $.add($('.thread-icons', root), $.el('img', {
          src: "" + staticPath + "sticky" + gifIcon,
          className: 'stickyIcon',
          title: 'Sticky'
        }));
      }
      if (thread.isClosed) {
        $.add($('.thread-icons', root), $.el('img', {
          src: "" + staticPath + "closed" + gifIcon,
          className: 'closedIcon',
          title: 'Closed'
        }));
      }
      if (data.bumplimit) {
        $.addClass($('.post-count', root), 'warning');
      }
      if (data.imagelimit) {
        $.addClass($('.file-count', root), 'warning');
      }
      return root;
    }
  };

  Get = {
    threadExcerpt: function(thread) {
      var OP, excerpt, _ref;
      OP = thread.OP;
      excerpt = ((_ref = OP.info.subject) != null ? _ref.trim() : void 0) || OP.info.comment.replace(/\n+/g, ' // ') || OP.getNameBlock();
      if (excerpt.length > 70) {
        excerpt = "" + excerpt.slice(0, 67) + "...";
      }
      return "/" + thread.board + "/ - " + excerpt;
    },
    threadFromRoot: function(root) {
      return g.threads[$('.opContainer', root).dataset.fullID];
    },
    threadFromNode: function(node) {
      return Get.threadFromRoot($.x('ancestor::div[@class="thread"]', node));
    },
    postFromRoot: function(root) {
      var index, post;
      post = g.posts[root.dataset.fullID];
      if (index = root.dataset.clone) {
        return post.clones[index];
      } else {
        return post;
      }
    },
    postFromNode: function(node) {
      return Get.postFromRoot($.x('ancestor::div[contains(@class,"postContainer")][1]', node));
    },
    contextFromNode: function(node) {
      return Get.postFromRoot($.x('ancestor::div[@class="thread"]/div', node));
    },
    postDataFromLink: function(link) {
      var boardID, path, postID, threadID, _ref;
      if (link.hostname === 'boards.4chan.org') {
        path = link.pathname.split('/');
        boardID = path[1];
        threadID = path[3];
        postID = link.hash.slice(2);
      } else {
        _ref = link.dataset, boardID = _ref.boardID, threadID = _ref.threadID, postID = _ref.postID;
        threadID || (threadID = 0);
      }
      return {
        boardID: boardID,
        threadID: +threadID,
        postID: +postID
      };
    },
    allQuotelinksLinkingTo: function(post) {
      var fullID, handleQuotes, posts, qPost, quote, quotelinks, _i, _len, _ref;
      quotelinks = [];
      posts = g.posts;
      fullID = {
        post: post
      };
      handleQuotes = function(qPost, type) {
        var clone, _i, _len, _ref;
        quotelinks.push.apply(quotelinks, qPost.nodes[type]);
        _ref = qPost.clones;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          clone = _ref[_i];
          quotelinks.push.apply(quotelinks, clone.nodes[type]);
        }
      };
      posts.forEach(function(qPost) {
        if (__indexOf.call(qPost.quotes, fullID) >= 0) {
          return handleQuotes(qPost, 'quotelinks');
        }
      });
      if (Conf['Quote Backlinks']) {
        _ref = post.quotes;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          quote = _ref[_i];
          if (qPost = posts[quote]) {
            handleQuotes(qPost, 'backlinks');
          }
        }
      }
      return quotelinks.filter(function(quotelink) {
        var boardID, postID, _ref1;
        _ref1 = Get.postDataFromLink(quotelink), boardID = _ref1.boardID, postID = _ref1.postID;
        return boardID === post.board.ID && postID === post.ID;
      });
    },
    postClone: function(boardID, threadID, postID, root, context) {
      var post, url;
      if (post = g.posts["" + boardID + "." + postID]) {
        Get.insert(post, root, context);
        return;
      }
      root.textContent = "Loading post No." + postID + "...";
      if (threadID) {
        return $.cache("//a.4cdn.org/" + boardID + "/thread/" + threadID + ".json", function() {
          return Get.fetchedPost(this, boardID, threadID, postID, root, context);
        });
      } else if (url = Redirect.to('post', {
        boardID: boardID,
        postID: postID
      })) {
        return $.cache(url, function() {
          return Get.archivedPost(this, boardID, postID, root, context);
        }, {
          responseType: 'json',
          withCredentials: url.archive.withCredentials
        });
      }
    },
    insert: function(post, root, context) {
      var clone, nodes;
      if (!root.parentNode) {
        return;
      }
      clone = post.addClone(context, $.hasClass(root, 'dialog'));
      Clone.callbacks.execute([clone]);
      nodes = clone.nodes;
      $.rmAll(nodes.root);
      $.add(nodes.root, nodes.post);
      $.rmAll(root);
      return $.add(root, nodes.root);
    },
    fetchedPost: function(req, boardID, threadID, postID, root, context) {
      var board, post, posts, status, thread, url, _i, _len;
      if (post = g.posts["" + boardID + "." + postID]) {
        Get.insert(post, root, context);
        return;
      }
      status = req.status;
      if (status !== 200 && status !== 304) {
        if (url = Redirect.to('post', {
          boardID: boardID,
          postID: postID
        })) {
          $.cache(url, function() {
            return Get.archivedPost(this, boardID, postID, root, context);
          }, {
            responseType: 'json',
            withCredentials: url.archive.withCredentials
          });
        } else {
          $.addClass(root, 'warning');
          root.textContent = status === 404 ? "Thread No." + threadID + " 404'd." : "Error " + req.statusText + " (" + req.status + ").";
        }
        return;
      }
      posts = req.response.posts;
      Build.spoilerRange[boardID] = posts[0].custom_spoiler;
      for (_i = 0, _len = posts.length; _i < _len; _i++) {
        post = posts[_i];
        if (post.no === postID) {
          break;
        }
      }
      if (post.no !== postID) {
        if (url = Redirect.to('post', {
          boardID: boardID,
          postID: postID
        })) {
          $.cache(url, function() {
            return Get.archivedPost(this, boardID, postID, root, context);
          }, {
            withCredentials: url.archive.withCredentials
          });
        } else {
          $.addClass(root, 'warning');
          root.textContent = "Post No." + postID + " was not found.";
        }
        return;
      }
      board = g.boards[boardID] || new Board(boardID);
      thread = g.threads["" + boardID + "." + threadID] || new Thread(threadID, board);
      post = new Post(Build.postFromObject(post, boardID), thread, board);
      Post.callbacks.execute([post]);
      return Get.insert(post, root, context);
    },
    archivedPost: function(req, boardID, postID, root, context) {
      var board, bq, comment, data, o, post, thread, threadID, _ref, _ref1;
      if (post = g.posts["" + boardID + "." + postID]) {
        Get.insert(post, root, context);
        return;
      }
      data = req.response;
      if (data.error) {
        $.addClass(root, 'warning');
        root.textContent = data.error;
        return;
      }
      bq = $.el('blockquote', {
        textContent: data.comment
      });
      bq.innerHTML = bq.innerHTML.replace(/\n|\[\/?[a-z]+(:lit)?\]/g, Get.parseMarkup);
      comment = bq.innerHTML.replace(/(^|>)(&gt;[^<$]*)(<|$)/g, '$1<span class=quote>$2</span>$3').replace(/((&gt;){2}(&gt;\/[a-z\d]+\/)?\d+)/g, '<span class=deadlink>$1</span>');
      threadID = +data.thread_num;
      o = {
        postID: postID,
        threadID: threadID,
        boardID: boardID,
        name: data.name_processed,
        capcode: (function() {
          switch (data.capcode) {
            case 'M':
              return 'mod';
            case 'A':
              return 'admin';
            case 'D':
              return 'developer';
          }
        })(),
        tripcode: data.trip,
        uniqueID: data.poster_hash,
        email: data.email ? encodeURI(data.email) : '',
        subject: data.title_processed,
        flagCode: data.poster_country,
        flagName: data.poster_country_name_processed,
        date: data.fourchan_date,
        dateUTC: data.timestamp,
        comment: comment
      };
      if ((_ref = data.media) != null ? _ref.media_filename : void 0) {
        o.file = {
          name: data.media.media_filename_processed,
          timestamp: data.media.media_orig,
          url: data.media.media_link || data.media.remote_media_link,
          height: data.media.media_h,
          width: data.media.media_w,
          MD5: data.media.media_hash,
          size: data.media.media_size,
          turl: data.media.thumb_link || ("//t.4cdn.org/" + boardID + "/" + data.media.preview_orig),
          theight: data.media.preview_h,
          twidth: data.media.preview_w,
          isSpoiler: data.media.spoiler === '1'
        };
      }
      board = g.boards[boardID] || new Board(boardID);
      thread = g.threads["" + boardID + "." + threadID] || new Thread(threadID, board);
      post = new Post(Build.post(o, true), thread, board, {
        isArchived: true
      });
      if ((_ref1 = $('.page-num', post.nodes.info)) != null) {
        _ref1.hidden = true;
      }
      Post.callbacks.execute([post]);
      return Get.insert(post, root, context);
    },
    parseMarkup: function(text) {
      return {
        '\n': '<br>',
        '[b]': '<b>',
        '[/b]': '</b>',
        '[spoiler]': '<s>',
        '[/spoiler]': '</s>',
        '[code]': '<pre class=prettyprint>',
        '[/code]': '</pre>',
        '[moot]': '<div style="padding:5px;margin-left:.5em;border-color:#faa;border:2px dashed rgba(255,0,0,.1);border-radius:2px">',
        '[/moot]': '</div>',
        '[banned]': '<strong style="color: red;">',
        '[/banned]': '</strong>'
      }[text] || text.replace(':lit', '');
    }
  };

  UI = (function() {
    var Menu, dialog, drag, dragend, dragstart, hover, hoverend, hoverstart, touchend, touchmove;
    dialog = function(id, position, html) {
      var el, move;
      el = $.el('div', {
        className: 'dialog',
        innerHTML: html,
        id: id
      });
      el.style.cssText = position;
      $.get("" + id + ".position", position, function(item) {
        return el.style.cssText = item["" + id + ".position"];
      });
      move = $('.move', el);
      $.on(move, 'touchstart mousedown', dragstart);
      return el;
    };
    Menu = (function() {
      var currentMenu, lastToggledButton;

      currentMenu = null;

      lastToggledButton = null;

      function Menu() {
        this.rmEntry = __bind(this.rmEntry, this);
        this.onFocus = __bind(this.onFocus, this);
        this.keybinds = __bind(this.keybinds, this);
        this.close = __bind(this.close, this);
        this.entries = [];
      }

      Menu.prototype.makeMenu = function() {
        var menu;
        menu = $.el('div', {
          className: 'dialog',
          id: 'menu',
          tabIndex: 0
        });
        $.on(menu, 'click', function(e) {
          return e.stopPropagation();
        });
        $.on(menu, 'keydown', this.keybinds);
        return menu;
      };

      Menu.prototype.toggle = function(e, button, data) {
        var previousButton;
        e.preventDefault();
        e.stopPropagation();
        if (currentMenu) {
          previousButton = lastToggledButton;
          this.close();
          if (previousButton === button) {
            return;
          }
        }
        if (!this.entries.length) {
          return;
        }
        return this.open(button, data);
      };

      Menu.prototype.open = function(button, data) {
        var bLeft, bRect, bTop, bottom, cHeight, cWidth, entry, left, mRect, menu, right, style, top, _i, _len, _ref, _ref1, _ref2;
        menu = this.makeMenu();
        currentMenu = menu;
        lastToggledButton = button;
        $.addClass(button, 'open');
        this.entries.sort(function(first, second) {
          return first.order - second.order;
        });
        _ref = this.entries;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          entry = _ref[_i];
          this.insertEntry(entry, menu, data);
        }
        $.addClass(lastToggledButton, 'active');
        $.on(d, 'click', this.close);
        $.on(d, 'CloseMenu', this.close);
        Rice.nodes(menu);
        $.add(Header.hover, menu);
        mRect = menu.getBoundingClientRect();
        bRect = button.getBoundingClientRect();
        bTop = window.scrollY + bRect.top;
        bLeft = window.scrollX + bRect.left;
        cHeight = doc.clientHeight;
        cWidth = doc.clientWidth;
        _ref1 = bRect.top + bRect.height + mRect.height < cHeight ? [bRect.bottom, null] : [null, cHeight - bRect.top], top = _ref1[0], bottom = _ref1[1];
        _ref2 = bRect.left + mRect.width < cWidth ? [bRect.left, null] : [null, cWidth - bRect.right], left = _ref2[0], right = _ref2[1];
        style = menu.style;
        style.top = "" + top + "px";
        style.right = "" + right + "px";
        style.bottom = "" + bottom + "px";
        style.left = "" + left + "px";
        if (right) {
          $.addClass(menu, 'left');
        }
        entry = $('.entry', menu);
        this.focus(entry);
        return menu.focus();
      };

      Menu.prototype.insertEntry = function(entry, parent, data) {
        var subEntry, submenu, _i, _len, _ref;
        if (typeof entry.open === 'function') {
          if (!entry.open(data, (function(_this) {
            return function(subEntry) {
              _this.parseEntry(subEntry);
              return entry.subEntries.push(subEntry);
            };
          })(this))) {
            return;
          }
        }
        $.add(parent, entry.el);
        if (!entry.subEntries) {
          return;
        }
        if (submenu = $('.submenu', entry.el)) {
          $.rm(submenu);
        }
        submenu = $.el('div', {
          className: 'dialog submenu'
        });
        _ref = entry.subEntries;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          subEntry = _ref[_i];
          this.insertEntry(subEntry, submenu, data);
        }
        $.add(entry.el, submenu);
      };

      Menu.prototype.close = function() {
        $.rm(currentMenu);
        $.rmClass(lastToggledButton, 'open');
        currentMenu = null;
        lastToggledButton = null;
        return $.off(d, 'click CloseMenu', this.close);
      };

      Menu.prototype.findNextEntry = function(entry, direction) {
        var entries;
        entries = __slice.call(entry.parentNode.children);
        entries.sort(function(first, second) {
          return first.style.order - second.style.order;
        });
        return entries[entries.indexOf(entry) + direction];
      };

      Menu.prototype.keybinds = function(e) {
        var entry, next, nextPrev, subEntry, submenu;
        entry = $('.focused', currentMenu);
        while (subEntry = $('.focused', entry)) {
          entry = subEntry;
        }
        switch (e.keyCode) {
          case 27:
            lastToggledButton.focus();
            this.close();
            break;
          case 13:
          case 32:
            entry.click();
            break;
          case 38:
            if (next = this.findNextEntry(entry, -1)) {
              this.focus(next);
            }
            break;
          case 40:
            if (next = this.findNextEntry(entry, +1)) {
              this.focus(next);
            }
            break;
          case 39:
            if ((submenu = $('.submenu', entry)) && (next = submenu.firstElementChild)) {
              while (nextPrev = this.findNextEntry(next, -1)) {
                next = nextPrev;
              }
              this.focus(next);
            }
            break;
          case 37:
            if (next = $.x('parent::*[contains(@class,"submenu")]/parent::*', entry)) {
              this.focus(next);
            }
            break;
          default:
            return;
        }
        e.preventDefault();
        return e.stopPropagation();
      };

      Menu.prototype.onFocus = function(e) {
        e.stopPropagation();
        return this.focus(e.target);
      };

      Menu.prototype.focus = function(entry) {
        var bottom, cHeight, cWidth, eRect, focused, left, right, sRect, style, submenu, top, _i, _len, _ref, _ref1, _ref2;
        while (focused = $.x('parent::*/child::*[contains(@class,"focused")]', entry)) {
          $.rmClass(focused, 'focused');
        }
        _ref = $$('.focused', entry);
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          focused = _ref[_i];
          $.rmClass(focused, 'focused');
        }
        $.addClass(entry, 'focused');
        if (!(submenu = $('.submenu', entry))) {
          return;
        }
        sRect = submenu.getBoundingClientRect();
        eRect = entry.getBoundingClientRect();
        cHeight = doc.clientHeight;
        cWidth = doc.clientWidth;
        _ref1 = eRect.top + sRect.height < cHeight ? ['0px', 'auto'] : ['auto', '0px'], top = _ref1[0], bottom = _ref1[1];
        _ref2 = eRect.right + sRect.width < cWidth - 150 ? ['100%', 'auto'] : ['auto', '100%'], left = _ref2[0], right = _ref2[1];
        style = submenu.style;
        style.top = top;
        style.bottom = bottom;
        style.left = left;
        return style.right = right;
      };

      Menu.prototype.addEntry = function(entry) {
        this.parseEntry(entry);
        return this.entries.push(entry);
      };

      Menu.prototype.rmEntry = function(entry) {
        var index;
        if (!((index = this.entries.indexOf(entry)) > -1)) {
          return;
        }
        return this.entries.splice(index, 1);
      };

      Menu.prototype.parseEntry = function(entry) {
        var el, subEntries, subEntry, _i, _len;
        el = entry.el, subEntries = entry.subEntries;
        $.addClass(el, 'entry');
        $.on(el, 'focus mouseover', this.onFocus);
        el.style.order = entry.order || 100;
        if (!subEntries) {
          return;
        }
        $.addClass(el, 'has-submenu');
        $.addClass(el, 'pfa');
        for (_i = 0, _len = subEntries.length; _i < _len; _i++) {
          subEntry = subEntries[_i];
          this.parseEntry(subEntry);
        }
      };

      return Menu;

    })();
    dragstart = function(e) {
      var el, isTouching, o, rect, screenHeight, screenWidth, _ref, _ref1;
      if (e.type === 'mousedown' && e.button !== 0) {
        return;
      }
      e.preventDefault();
      if (isTouching = e.type === 'touchstart') {
        _ref = e.changedTouches, e = _ref[_ref.length - 1];
      }
      el = $.x('ancestor::div[contains(@class,"dialog")][1]', this);
      rect = el.getBoundingClientRect();
      screenHeight = doc.clientHeight;
      screenWidth = doc.clientWidth;
      o = {
        id: el.id,
        style: el.style,
        dx: e.clientX - rect.left,
        dy: e.clientY - rect.top,
        height: screenHeight - rect.height,
        width: screenWidth - rect.width,
        screenHeight: screenHeight,
        screenWidth: screenWidth,
        isTouching: isTouching
      };
      _ref1 = Conf['Header auto-hide'] || !Conf['Fixed Header'] ? [0, 0] : Conf['Bottom Header'] ? [0, Header.bar.getBoundingClientRect().height] : [Header.bar.getBoundingClientRect().height, 0], o.topBorder = _ref1[0], o.bottomBorder = _ref1[1];
      if (isTouching) {
        o.identifier = e.identifier;
        o.move = touchmove.bind(o);
        o.up = touchend.bind(o);
        $.on(d, 'touchmove', o.move);
        return $.on(d, 'touchend touchcancel', o.up);
      } else {
        o.move = drag.bind(o);
        o.up = dragend.bind(o);
        $.on(d, 'mousemove', o.move);
        return $.on(d, 'mouseup', o.up);
      }
    };
    touchmove = function(e) {
      var touch, _i, _len, _ref;
      _ref = e.changedTouches;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        touch = _ref[_i];
        if (touch.identifier === this.identifier) {
          drag.call(this, touch);
          return;
        }
      }
    };
    drag = function(e) {
      var bottom, clientX, clientY, left, right, style, top;
      clientX = e.clientX, clientY = e.clientY;
      left = clientX - this.dx;
      left = left < 10 ? 0 : this.width - left < 10 ? null : left / this.screenWidth * 100 + '%';
      top = clientY - this.dy;
      top = top < (10 + this.topBorder) ? this.topBorder + 'px' : this.height - top < (10 + this.bottomBorder) ? null : top / this.screenHeight * 100 + '%';
      right = left === null ? 0 : null;
      bottom = top === null ? this.bottomBorder + 'px' : null;
      style = this.style;
      style.left = left;
      style.right = right;
      style.top = top;
      return style.bottom = bottom;
    };
    touchend = function(e) {
      var touch, _i, _len, _ref;
      _ref = e.changedTouches;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        touch = _ref[_i];
        if (touch.identifier === this.identifier) {
          dragend.call(this);
          return;
        }
      }
    };
    dragend = function() {
      if (this.isTouching) {
        $.off(d, 'touchmove', this.move);
        $.off(d, 'touchend touchcancel', this.up);
      } else {
        $.off(d, 'mousemove', this.move);
        $.off(d, 'mouseup', this.up);
      }
      return $.set("" + this.id + ".position", this.style.cssText);
    };
    hoverstart = function(_arg) {
      var asapTest, cb, el, endEvents, latestEvent, noRemove, o, offsetX, offsetY, root;
      root = _arg.root, el = _arg.el, latestEvent = _arg.latestEvent, endEvents = _arg.endEvents, asapTest = _arg.asapTest, cb = _arg.cb, offsetX = _arg.offsetX, offsetY = _arg.offsetY, noRemove = _arg.noRemove;
      o = {
        root: root,
        el: el,
        style: el.style,
        cb: cb,
        close: close,
        endEvents: endEvents,
        latestEvent: latestEvent,
        clientHeight: doc.clientHeight,
        clientWidth: doc.clientWidth,
        offsetX: offsetX || 45,
        offsetY: offsetY || -120,
        noRemove: noRemove
      };
      o.hover = hover.bind(o);
      o.hoverend = hoverend.bind(o);
      if (asapTest) {
        $.asap(function() {
          return !el.parentNode || asapTest();
        }, function() {
          if (el.parentNode) {
            return o.hover(o.latestEvent);
          }
        });
      }
      $.on(root, endEvents, o.hoverend);
      if ($.x('ancestor::div[contains(@class,"inline")][1]', root)) {
        $.on(d, 'keydown', o.hoverend);
      }
      $.on(root, 'mousemove', o.hover);
      o.workaround = function(e) {
        if (!root.contains(e.target)) {
          return o.hoverend(e);
        }
      };
      return $.on(doc, 'mousemove', o.workaround);
    };
    hover = function(e) {
      var clientX, clientY, height, left, right, top, _ref;
      this.latestEvent = e;
      height = this.el.offsetHeight + 25;
      clientX = e.clientX, clientY = e.clientY;
      top = clientY + this.offsetY;
      top = this.clientHeight <= height || top <= 0 ? 0 : top + height >= this.clientHeight ? this.clientHeight - height : top;
      _ref = clientX <= this.clientWidth / 2 ? [clientX + this.offsetX + 'px', null] : [null, this.clientWidth - clientX + this.offsetX + 'px'], left = _ref[0], right = _ref[1];
      this.style.top = top + 'px';
      this.style.left = left;
      return this.style.right = right;
    };
    hoverend = function(e) {
      if (e.type === 'keydown' && e.keyCode !== 13 || e.target.nodeName === "TEXTAREA") {
        return;
      }
      $.rm(this.el);
      $.off(this.root, this.endEvents, this.hoverend);
      $.off(d, 'keydown', this.hoverend);
      $.off(this.root, 'mousemove', this.hover);
      $.off(doc, 'mousemove', this.workaround);
      if (this.cb) {
        return this.cb.call(this);
      }
    };
    return {
      dialog: dialog,
      Menu: Menu,
      hover: hoverstart
    };
  })();

  Anonymize = {
    init: function() {
      if (!Conf['Anonymize']) {
        return;
      }
      return Post.callbacks.push({
        name: 'Anonymize',
        cb: this.node
      });
    },
    node: function() {
      var email, name, tripcode, _ref;
      if (this.info.capcode || this.isClone) {
        return;
      }
      _ref = this.nodes, name = _ref.name, tripcode = _ref.tripcode, email = _ref.email;
      if (this.info.name !== 'Anonymous') {
        name.textContent = 'Anonymous';
      }
      if (tripcode) {
        $.rm(tripcode);
        delete this.nodes.tripcode;
      }
      if (this.info.email) {
        $.replace(email, name);
        return delete this.nodes.email;
      }
    }
  };

  Filter = {
    filters: {},
    init: function() {
      var boards, err, filter, hl, key, op, regexp, stub, top, _i, _len, _ref, _ref1, _ref2, _ref3, _ref4, _ref5;
      if (!Conf['Filter']) {
        return;
      }
      if (!Conf['Filtered Backlinks']) {
        $.addClass(doc, 'hide-backlinks');
      }
      for (key in Config.filter) {
        this.filters[key] = [];
        _ref = Conf[key].split('\n');
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          filter = _ref[_i];
          if (filter[0] === '#') {
            continue;
          }
          if (!(regexp = filter.match(/\/(.+)\/(\w*)/))) {
            continue;
          }
          filter = filter.replace(regexp[0], '');
          boards = ((_ref1 = filter.match(/boards:([^;]+)/)) != null ? _ref1[1].toLowerCase() : void 0) || 'global';
          if (boards !== 'global' && (_ref2 = g.BOARD.ID, __indexOf.call(boards.split(','), _ref2) < 0)) {
            continue;
          }
          if (key === 'uniqueID' || key === 'MD5') {
            regexp = regexp[1];
          } else {
            try {
              regexp = RegExp(regexp[1], regexp[2]);
            } catch (_error) {
              err = _error;
              new Notice('warning', err.message, 60);
              continue;
            }
          }
          op = ((_ref3 = filter.match(/[^t]op:(yes|no|only)/)) != null ? _ref3[1] : void 0) || 'yes';
          stub = (function() {
            var _ref4;
            switch ((_ref4 = filter.match(/stub:(yes|no)/)) != null ? _ref4[1] : void 0) {
              case 'yes':
                return true;
              case 'no':
                return false;
              default:
                return Conf['Stubs'];
            }
          })();
          if (hl = /highlight/.test(filter)) {
            hl = ((_ref4 = filter.match(/highlight:(\w+)/)) != null ? _ref4[1] : void 0) || 'filter-highlight';
            top = ((_ref5 = filter.match(/top:(yes|no)/)) != null ? _ref5[1] : void 0) || 'yes';
            top = top === 'yes';
          }
          this.filters[key].push({
            hide: !hl,
            op: op,
            stub: stub,
            "class": hl,
            top: top,
            match: regexp,
            test: typeof regexp === 'string' ? Filter.stringTest : Filter.regexpTest
          });
        }
        if (!this.filters[key].length) {
          delete this.filters[key];
        }
      }
      if (!Object.keys(this.filters).length) {
        return;
      }
      return Post.callbacks.push({
        name: 'Filter',
        cb: this.node
      });
    },
    node: function() {
      var key, obj, value, _i, _len, _ref;
      if (this.isClone) {
        return;
      }
      for (key in Filter.filters) {
        value = Filter[key](this);
        if (value === false) {
          continue;
        }
        _ref = Filter.filters[key];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          obj = _ref[_i];
          if (!Filter.test(obj, value, this.isReply)) {
            continue;
          }
          if (obj.hide) {
            if (!(this.isReply || g.VIEW === 'index')) {
              continue;
            }
            this.hide("Hidden by filtering the " + key + ": " + obj.match, obj.stub);
            return;
          }
          this.highlight("Highlighted by filtering the " + key + ": " + obj.match, obj["class"], obj.top);
        }
      }
    },
    stringTest: function(string, value) {
      return string === value;
    },
    regexpTest: function(regexp, value) {
      return regexp.test(value);
    },
    test: function(_arg, value, isReply) {
      var match, op, test;
      test = _arg.test, match = _arg.match, op = _arg.op;
      if (isReply && op === 'only' || !isReply && op === 'no') {
        return false;
      }
      if (!test(match, value)) {
        return false;
      }
      return true;
    },
    name: function(post) {
      if ('name' in post.info) {
        return post.info.name;
      }
      return false;
    },
    uniqueID: function(post) {
      if ('uniqueID' in post.info) {
        return post.info.uniqueID;
      }
      return false;
    },
    tripcode: function(post) {
      if ('tripcode' in post.info) {
        return post.info.tripcode;
      }
      return false;
    },
    capcode: function(post) {
      if ('capcode' in post.info) {
        return post.info.capcode;
      }
      return false;
    },
    email: function(post) {
      if ('email' in post.info) {
        return post.info.email;
      }
      return false;
    },
    subject: function(post) {
      if ('subject' in post.info) {
        return post.info.subject || false;
      }
      return false;
    },
    comment: function(post) {
      if ('comment' in post.info) {
        return post.info.comment;
      }
      return false;
    },
    flag: function(post) {
      if ('flag' in post.info) {
        return post.info.flag;
      }
      return false;
    },
    filename: function(post) {
      if (post.file) {
        return post.file.name;
      }
      return false;
    },
    dimensions: function(post) {
      var file;
      file = post.file;
      if (file && (file.isImage || file.isVideo)) {
        return post.file.dimensions;
      }
      return false;
    },
    filesize: function(post) {
      if (post.file) {
        return post.file.size;
      }
      return false;
    },
    MD5: function(post) {
      if (post.file) {
        return post.file.MD5;
      }
      return false;
    },
    menu: {
      init: function() {
        var div, entry, type, _i, _len, _ref;
        if (!Conf['Menu'] || !Conf['Filter']) {
          return;
        }
        div = $.el('div', {
          textContent: 'Filter'
        });
        entry = {
          el: div,
          order: 50,
          open: function(post) {
            Filter.menu.post = post;
            return true;
          },
          subEntries: []
        };
        _ref = [['Name', 'name'], ['Unique ID', 'uniqueID'], ['Tripcode', 'tripcode'], ['Capcode', 'capcode'], ['E-mail', 'email'], ['Subject', 'subject'], ['Comment', 'comment'], ['Flag', 'flag'], ['Filename', 'filename'], ['Image dimensions', 'dimensions'], ['Filesize', 'filesize'], ['Image MD5', 'MD5']];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          type = _ref[_i];
          entry.subEntries.push(Filter.menu.createSubEntry(type[0], type[1]));
        }
        return Menu.menu.addEntry(entry);
      },
      createSubEntry: function(text, type) {
        var el;
        el = $.el('a', {
          href: 'javascript:;',
          textContent: text
        });
        el.dataset.type = type;
        $.on(el, 'click', Filter.menu.makeFilter);
        return {
          el: el,
          open: function(post) {
            var value;
            value = Filter[type](post);
            return value !== false;
          }
        };
      },
      makeFilter: function() {
        var re, type, value;
        type = this.dataset.type;
        value = Filter[type](Filter.menu.post);
        re = type === 'uniqueID' || type === 'MD5' ? value : value.replace(/\/|\\|\^|\$|\n|\.|\(|\)|\{|\}|\[|\]|\?|\*|\+|\|/g, function(c) {
          if (c === '\n') {
            return '\\n';
          } else if (c === '\\') {
            return '\\\\';
          } else {
            return "\\" + c;
          }
        });
        re = type === 'uniqueID' || type === 'MD5' ? "/" + re + "/" : "/^" + re + "$/";
        return $.get(type, Conf[type], function(item) {
          var save, section, select, ta, tl;
          save = item[type];
          save = save ? "" + save + "\n" + re : re;
          $.set(type, save);
          Settings.open('Filter');
          section = $('.section-container');
          select = $('select[name=filter]', section);
          select.value = type;
          Settings.selectFilter.call(select);
          ta = $('textarea', section);
          tl = ta.textLength;
          ta.setSelectionRange(tl, tl);
          return ta.focus();
        });
      }
    }
  };

  PostHiding = {
    init: function() {
      this.db = new DataBoard('hiddenPosts');
      this.hideButton = $.el('a', {
        className: 'hide-post-button fa',
        href: 'javascript:;',
        textContent: '\uf147'
      });
      this.showButton = $.el('a', {
        className: 'show-post-button fa',
        href: 'javascript:;',
        textContent: '\uf196'
      });
      return Post.callbacks.push({
        name: 'Post Hiding',
        cb: this.node
      });
    },
    node: function() {
      var a, data, label;
      if (!this.isReply && g.VIEW !== 'index' || this.isClone) {
        return;
      }
      if (data = PostHiding.db.get({
        boardID: this.board.ID,
        threadID: this.thread.ID,
        postID: this.ID
      })) {
        if (data.thisPost === false) {
          label = "Recursively hidden for quoting No." + this;
          Recursive.apply('hide', this, label, data.makeStub, true);
          Recursive.add('hide', this, label, data.makeStub, true);
        } else {
          this.hide('Manually hidden', data.makeStub, data.hideRecursively);
        }
      }
      if (!Conf['Post Hiding']) {
        return;
      }
      if (this.isReply) {
        a = PostHiding.makeButton(true);
        if (this.isHidden) {
          a.hidden = true;
        }
        return $.add($('.postInfo', this.nodes.post), a);
      } else {
        return $.add($('.postInfo', this.nodes.post), PostHiding.makeButton(!this.isHidden));
      }
    },
    makeButton: function(hide) {
      var a;
      a = (hide ? PostHiding.hideButton : PostHiding.showButton).cloneNode(true);
      $.on(a, 'click', PostHiding.onToggleClick);
      return a;
    },
    onToggleClick: function() {
      return PostHiding.toggle($.x('ancestor::div[contains(@class,"postContainer")][1]', this) ? Get.postFromNode(this) : Get.threadFromNode(this).OP);
    },
    toggle: function(post) {
      var root;
      if (post.isHidden) {
        post.show();
      } else {
        post.hide('Manually hidden');
      }
      if (post.isReply) {
        return;
      }
      Index.updateHideLabel();
      if (Conf['Index Mode'] === 'all pages' || !Conf['JSON Navigation']) {
        root = post.nodes.root.parentNode;
        $.rm(root.nextElementSibling);
        $.rm(root);
        return;
      }
      Index.sort();
      return Index.buildIndex();
    },
    saveHiddenState: function(post, val) {
      var data;
      data = {
        boardID: post.board.ID,
        threadID: post.thread.ID,
        postID: post.ID
      };
      if (post.isHidden || val && !val.thisPost) {
        data.val = val || {};
        return PostHiding.db.set(data);
      } else if (PostHiding.db.get(data)) {
        return PostHiding.db["delete"](data);
      }
    },
    menu: {
      init: function() {
        var apply, makeStub, replies, thisPost;
        if (!Conf['Menu'] || !Conf['Post Hiding Link']) {
          return;
        }
        apply = {
          el: $.el('a', {
            textContent: 'Apply',
            href: 'javascript:;'
          }),
          open: function(post) {
            if (this.cb) {
              $.off(this.el, 'click', this.cb);
            }
            this.cb = function() {
              return PostHiding.menu.hide(post);
            };
            $.on(this.el, 'click', this.cb);
            return true;
          }
        };
        thisPost = {
          el: $.el('label', {
            innerHTML: '<input type=checkbox name=thisPost checked> This post'
          })
        };
        replies = {
          el: $.el('label', {
            innerHTML: "<input type=checkbox name=replies  checked=" + Conf['Recursive Hiding'] + "> Hide replies"
          })
        };
        makeStub = {
          el: $.el('label', {
            innerHTML: "<input type=checkbox name=makeStub checked=" + Conf['Stubs'] + "> Make stub"
          })
        };
        Menu.menu.addEntry({
          el: $.el('div', {
            textContent: 'Hide post',
            className: 'hide-post-link'
          }),
          order: 20,
          open: function(post) {
            return !(post.isHidden || !post.isReply || post.isClone);
          },
          subEntries: [apply, thisPost, replies, makeStub]
        });
        apply = {
          el: $.el('a', {
            textContent: 'Apply',
            href: 'javascript:;'
          }),
          open: function(post) {
            if (this.cb) {
              $.off(this.el, 'click', this.cb);
            }
            this.cb = function() {
              return PostHiding.menu.show(post);
            };
            $.on(this.el, 'click', this.cb);
            return true;
          }
        };
        thisPost = {
          el: $.el('label', {
            innerHTML: '<input type=checkbox name=thisPost> This post'
          }),
          open: function(post) {
            this.el.firstChild.checked = post.isHidden;
            return true;
          }
        };
        replies = {
          el: $.el('label', {
            innerHTML: '<input type=checkbox name=replies> Unhide replies'
          }),
          open: function(post) {
            var data;
            data = PostHiding.db.get({
              boardID: post.board.ID,
              threadID: post.thread.ID,
              postID: post.ID
            });
            this.el.firstChild.checked = 'hideRecursively' in data ? data.hideRecursively : Conf['Recursive Hiding'];
            return true;
          }
        };
        Menu.menu.addEntry({
          el: $.el('div', {
            textContent: 'Unhide post',
            className: 'show-post-link'
          }),
          order: 20,
          open: function(post) {
            if (!post.isHidden || !post.isReply || post.isClone) {
              return false;
            }
            if (!PostHiding.db.get({
              boardID: post.board.ID,
              threadID: post.thread.ID,
              postID: post.ID
            })) {
              return false;
            }
            return true;
          },
          subEntries: [apply, thisPost, replies]
        });
        if (g.VIEW !== 'index') {
          return;
        }
        return Menu.menu.addEntry({
          el: $.el('a', {
            href: 'javascript:;'
          }),
          order: 20,
          open: function(post) {
            if (post.isReply) {
              return false;
            }
            this.el.textContent = post.isHidden ? 'Unhide thread' : 'Hide thread';
            if (this.cb) {
              $.off(this.el, 'click', this.cb);
            }
            this.cb = function() {
              $.event('CloseMenu');
              return PostHiding.toggle(post);
            };
            $.on(this.el, 'click', this.cb);
            return true;
          }
        });
      },
      hide: function(post) {
        var label, makeStub, parent, replies, thisPost;
        parent = this.parentNode;
        thisPost = $('input[name=thisPost]', parent).checked;
        replies = $('input[name=replies]', parent).checked;
        makeStub = $('input[name=makeStub]', parent).checked;
        label = 'Manually hidden';
        if (thisPost) {
          post.hide(label, makeStub, replies);
        } else if (replies) {
          Recursive.apply('hide', post, label, makeStub, true);
          Recursive.add('hide', post, label, makeStub, true);
        } else {
          return;
        }
        if (!thisPost) {
          PostHiding.saveHiddenState(post, {
            thisPost: false,
            hideRecursively: replies,
            makeStub: makeStub
          });
        }
        return $.event('CloseMenu');
      },
      show: function(post) {
        var parent, replies, thisPost;
        parent = this.parentNode;
        thisPost = $('input[name=thisPost]', parent).checked;
        replies = $('input[name=replies]', parent).checked;
        if (thisPost) {
          post.show(replies);
        } else if (replies) {
          Recursive.apply('show', post, true);
          Recursive.rm('hide', post, true);
        } else {
          return;
        }
        if (!thisPost) {
          PostHiding.saveHiddenState(post, {
            thisPost: false,
            hideRecursively: !replies,
            makeStub: !!post.nodes.stub
          });
        }
        return $.event('CloseMenu');
      }
    }
  };

  Recursive = {
    recursives: {},
    init: function() {
      return Post.callbacks.push({
        name: 'Recursive',
        cb: this.node
      });
    },
    node: function() {
      var i, obj, quote, recursive, _i, _j, _len, _len1, _ref, _ref1;
      if (this.isClone) {
        return;
      }
      _ref = this.quotes;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        quote = _ref[_i];
        if (obj = Recursive.recursives[quote]) {
          _ref1 = obj.recursives;
          for (i = _j = 0, _len1 = _ref1.length; _j < _len1; i = ++_j) {
            recursive = _ref1[i];
            this[recursive].apply(this, obj.args[i]);
          }
        }
      }
    },
    add: function() {
      var args, obj, post, recursive, _base, _name;
      recursive = arguments[0], post = arguments[1], args = 3 <= arguments.length ? __slice.call(arguments, 2) : [];
      obj = (_base = Recursive.recursives)[_name = post.fullID] || (_base[_name] = {
        recursives: [],
        args: []
      });
      obj.recursives.push(recursive);
      return obj.args.push(args);
    },
    rm: function(recursive, post) {
      var i, obj, rec, _i, _len, _ref;
      if (!(obj = Recursive.recursives[post.fullID])) {
        return;
      }
      _ref = obj.recursives;
      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
        rec = _ref[i];
        if (!(rec === recursive)) {
          continue;
        }
        obj.recursives.splice(i, 1);
        obj.args.splice(i, 1);
      }
    },
    apply: function() {
      var args, fullID, post, recursive;
      recursive = arguments[0], post = arguments[1], args = 3 <= arguments.length ? __slice.call(arguments, 2) : [];
      fullID = post.fullID;
      return g.posts.forEach(function(post) {
        if (__indexOf.call(post.quotes, fullID) >= 0) {
          return post[recursive].apply(post, args);
        }
      });
    }
  };

  QuoteBacklink = {
    init: function() {
      if (!Conf['Quote Backlinks']) {
        return;
      }
      this.frag = $.nodes([
        $.tn(' '), $.el('a', {
          className: 'backlink'
        })
      ]);
      this.map = {};
      Post.callbacks.push({
        name: 'Quote Backlinking Part 1',
        cb: this.firstNode
      });
      return Post.callbacks.push({
        name: 'Quote Backlinking Part 2',
        cb: this.secondNode
      });
    },
    firstNode: function() {
      var addNodes, container, post, quoteID, _base, _i, _j, _len, _len1, _ref, _ref1;
      if (this.isClone) {
        return;
      }
      addNodes = function(post, that) {
        return $.add(post.nodes.backlinkContainer, QuoteBacklink.buildBacklink(post, that));
      };
      _ref = this.quotes;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        quoteID = _ref[_i];
        ((_base = QuoteBacklink.map)[quoteID] || (_base[quoteID] = [])).push(this.fullID);
        if (!(((post = g.posts[quoteID]) != null) && (container = post.nodes.backlinkContainer))) {
          continue;
        }
        addNodes(post, this);
        _ref1 = post.clones;
        for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
          post = _ref1[_j];
          addNodes(post, this);
        }
      }
    },
    secondNode: function() {
      var backlink, container, map, post, quoteID, _i, _j, _len, _len1, _ref;
      if (!(this.isReply || Conf['OP Backlinks'])) {
        return;
      }
      if (this.isClone) {
        this.nodes.backlinkContainer = $('.backlink-container', this.nodes.info);
        _ref = this.nodes.backlinks;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          backlink = _ref[_i];
          QuoteMarkers.parseQuotelink(this, backlink, true, Conf['backlink'].replace(/%id/g, Get.postDataFromLink(backlink).postID));
        }
        return;
      }
      this.nodes.backlinkContainer = container = $.el('span', {
        className: 'backlink-container'
      });
      if (map = QuoteBacklink.map[this.fullID]) {
        for (_j = 0, _len1 = map.length; _j < _len1; _j++) {
          quoteID = map[_j];
          if (post = g.posts[quoteID]) {
            $.add(container, QuoteBacklink.buildBacklink(this, post));
          }
        }
      }
      return $.add(this.nodes.info, container);
    },
    buildBacklink: function(quoted, quoter) {
      var a, frag, hash, text;
      $.addClass(quoted.nodes.post, 'quoted');
      frag = QuoteBacklink.frag.cloneNode(true);
      a = frag.lastElementChild;
      a.href = Build.path(quoter.board.ID, quoter.thread.ID, quoter.ID);
      a.textContent = text = Conf['backlink'].replace(/%id/g, quoter.ID);
      if (quoter.isDead) {
        $.addClass(a, 'deadlink');
      }
      if (quoter.isHidden) {
        $.addClass(a, 'filtered');
      }
      QuoteMarkers.parseQuotelink(quoted, a, false, text);
      if (Conf['Quote Previewing']) {
        $.on(a, 'mouseover', QuotePreview.mouseover);
      }
      if (Conf['Quote Inlining']) {
        $.on(a, 'click', QuoteInline.toggle);
        if (Conf['Quote Hash Navigation']) {
          hash = QuoteInline.qiQuote(a, quoter.isHidden);
        }
      }
      if (Conf['JSON Navigation']) {
        if (hash) {
          Navigate.singleQuoteLink(hash);
        } else if (!Conf['Quote Inlining']) {
          Navigate.singleQuoteLink(a);
        }
      }
      return frag;
    }
  };

  QuoteInline = {
    init: function() {
      if (!Conf['Quote Inlining']) {
        return;
      }
      this.process = Conf['Quote Hash Navigation'] ? function(link, clone) {
        $.on(link, 'click', QuoteInline.toggle);
        if (clone) {
          return;
        }
        return QuoteInline.qiQuote(link, $.hasClass(link, 'filtered'));
      } : function(link) {
        return $.on(link, 'click', QuoteInline.toggle);
      };
      if (Conf['Comment Expansion']) {
        ExpandComment.callbacks.push(this.node);
      }
      return Post.callbacks.push({
        name: 'Quote Inlining',
        cb: this.node
      });
    },
    node: function() {
      var isClone, link, process, _i, _j, _len, _len1, _ref, _ref1;
      process = QuoteInline.process;
      isClone = this.isClone;
      _ref = this.nodes.quotelinks;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        link = _ref[_i];
        process(link, isClone);
      }
      _ref1 = this.nodes.backlinks;
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        link = _ref1[_j];
        process(link, isClone);
      }
    },
    qiQuote: function(link, hidden) {
      var name;
      name = "hashlink";
      if (hidden) {
        name += "filtered";
      }
      return $.after(link, $.el('a', {
        className: name,
        textContent: '#',
        href: link.href
      }));
    },
    toggle: function(e) {
      var boardID, context, postID, threadID, _ref;
      if (e.shiftKey || e.altKey || e.ctrlKey || e.metaKey || e.button !== 0) {
        return;
      }
      e.preventDefault();
      _ref = Get.postDataFromLink(this), boardID = _ref.boardID, threadID = _ref.threadID, postID = _ref.postID;
      context = Get.contextFromNode(this);
      if ($.hasClass(this, 'inlined')) {
        QuoteInline.rm(this, boardID, threadID, postID, context);
      } else {
        if ($.x("ancestor::div[@id='pc" + postID + "']", this)) {
          return;
        }
        QuoteInline.add(this, boardID, threadID, postID, context);
      }
      return this.classList.toggle('inlined');
    },
    findRoot: function(quotelink, isBacklink) {
      if (isBacklink) {
        return quotelink.parentNode.parentNode;
      } else {
        return $.x('ancestor-or-self::*[parent::blockquote][1]', quotelink);
      }
    },
    add: function(quotelink, boardID, threadID, postID, context) {
      var inline, isBacklink, post, qroot, root;
      isBacklink = $.hasClass(quotelink, 'backlink');
      inline = $.el('div', {
        id: "i" + postID,
        className: 'inline'
      });
      root = QuoteInline.findRoot(quotelink, isBacklink);
      $.after(root, inline);
      qroot = $.x('ancestor::*[contains(@class,"postContainer")][1]', root);
      $.addClass(qroot, 'hasInline');
      Get.postClone(boardID, threadID, postID, inline, context);
      if (!((post = g.posts["" + boardID + "." + postID]) && context.thread === post.thread)) {
        return;
      }
      if (isBacklink && Conf['Forward Hiding']) {
        $.addClass(post.nodes.root, 'forwarded');
        post.forwarded++ || (post.forwarded = 1);
      }
      if (!Unread.posts) {
        return;
      }
      return Unread.readSinglePost(post);
    },
    rm: function(quotelink, boardID, threadID, postID, context) {
      var el, inlined, isBacklink, post, qroot, root, _ref;
      isBacklink = $.hasClass(quotelink, 'backlink');
      root = QuoteInline.findRoot(quotelink, isBacklink);
      root = $.x("following-sibling::div[@id='i" + postID + "'][1]", root);
      qroot = $.x('ancestor::*[contains(@class,"postContainer")][1]', root);
      $.rm(root);
      if (!$('.inline', qroot)) {
        $.rmClass(qroot, 'hasInline');
      }
      if (!(el = root.firstElementChild)) {
        return;
      }
      post = g.posts["" + boardID + "." + postID];
      post.rmClone(el.dataset.clone);
      if (Conf['Forward Hiding'] && isBacklink && context.thread === g.threads["" + boardID + "." + threadID] && !--post.forwarded) {
        delete post.forwarded;
        $.rmClass(post.nodes.root, 'forwarded');
      }
      while (inlined = $('.inlined', el)) {
        _ref = Get.postDataFromLink(inlined), boardID = _ref.boardID, threadID = _ref.threadID, postID = _ref.postID;
        QuoteInline.rm(inlined, boardID, threadID, postID, context);
        $.rmClass(inlined, 'inlined');
      }
    }
  };

  QuoteMarkers = {
    init: function() {
      if (Conf['Highlight Own Posts']) {
        $.addClass(doc, 'highlight-own');
      }
      if (Conf['Highlight Posts Quoting You']) {
        $.addClass(doc, 'highlight-you');
      }
      return Post.callbacks.push({
        name: 'Quote Markers',
        cb: this.node
      });
    },
    node: function() {
      var parseQuotelink, quotelink, _i, _len, _ref;
      parseQuotelink = QuoteMarkers.parseQuotelink;
      _ref = this.nodes.quotelinks;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        quotelink = _ref[_i];
        parseQuotelink(this, quotelink, !!this.isClone);
      }
    },
    parseQuotelink: function(post, quotelink, mayReset, customText) {
      var board, boardID, markers, postID, text, thread, threadID, _ref, _ref1;
      _ref = post.isClone ? post.context : post, board = _ref.board, thread = _ref.thread;
      markers = [];
      _ref1 = Get.postDataFromLink(quotelink), boardID = _ref1.boardID, threadID = _ref1.threadID, postID = _ref1.postID;
      if (QR.db.get({
        boardID: boardID,
        threadID: threadID,
        postID: postID
      })) {
        if (Conf['Mark Quotes of You']) {
          markers.push('You');
        }
        $.addClass(post.nodes.root, 'quotesYou');
      }
      if (board.ID === boardID) {
        if (Conf['Mark OP Quotes'] && thread.ID === postID) {
          markers.push('OP');
        }
        if (Conf['Mark Cross-thread Quotes'] && (threadID && threadID !== thread.ID)) {
          markers.push('Cross-thread');
        }
      }
      if ($.hasClass(quotelink, 'deadlink')) {
        markers.push('Dead');
      }
      text = customText ? customText : boardID === post.board.ID ? ">>" + postID : ">>>/" + boardID + "/" + postID;
      if (markers.length) {
        return quotelink.textContent = "" + text + "\u00A0(" + (markers.join('|')) + ")";
      } else if (mayReset) {
        return quotelink.textContent = text;
      }
    },
    cb: {
      seek: function(type) {
        var post;
        if (Conf['Mark Quotes of You'] && (post = QuoteMarkers.cb.findPost(type))) {
          return QuoteMarkers.cb.scroll(post);
        }
      },
      findPost: function(type) {
        var i, index, len, post, posts;
        posts = $$('.quotesYou');
        if (!QuoteMarkers.lastRead) {
          if (!(post = QuoteMarkers.lastRead = posts[0])) {
            new Notice('warning', 'No posts are currently quoting you, loser.', 20);
            return;
          }
          if (!Get.postFromRoot(post).isHidden) {
            return post;
          }
        } else {
          post = QuoteMarkers.lastRead;
        }
        len = posts.length - 1;
        index = i = posts.indexOf(post);
        while (true) {
          if (index === (i = type === 'prev' ? i === 0 ? len : i - 1 : i === len ? 0 : i + 1)) {
            break;
          }
          post = posts[i];
          if (!Get.postFromRoot(post).isHidden) {
            return post;
          }
        }
      },
      scroll: function(post) {
        var highlight;
        if (highlight = $('.highlight')) {
          $.rmClass(highlight, 'highlight');
        }
        QuoteMarkers.lastRead = post;
        window.location.hash = "#" + post.id;
        Header.scrollTo(post);
        return $.addClass($('.post', post), 'highlight');
      }
    }
  };

  QuotePreview = {
    init: function() {
      if (!Conf['Quote Previewing']) {
        return;
      }
      if (Conf['Comment Expansion']) {
        ExpandComment.callbacks.push(this.node);
      }
      return Post.callbacks.push({
        name: 'Quote Previewing',
        cb: this.node
      });
    },
    node: function() {
      var link, _i, _len, _ref;
      _ref = this.nodes.quotelinks.concat(__slice.call(this.nodes.backlinks));
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        link = _ref[_i];
        $.on(link, 'mouseover', QuotePreview.mouseover);
      }
    },
    mouseover: function(e) {
      var boardID, clone, origin, post, postID, posts, qp, quote, quoterID, threadID, _i, _j, _len, _len1, _ref, _ref1;
      if ($.hasClass(this, 'inlined')) {
        return;
      }
      _ref = Get.postDataFromLink(this), boardID = _ref.boardID, threadID = _ref.threadID, postID = _ref.postID;
      qp = $.el('div', {
        id: 'qp',
        className: 'dialog'
      });
      $.add(Header.hover, qp);
      Get.postClone(boardID, threadID, postID, qp, Get.contextFromNode(this));
      UI.hover({
        root: this,
        el: qp,
        latestEvent: e,
        endEvents: 'mouseout click',
        cb: QuotePreview.mouseout,
        asapTest: function() {
          return qp.firstElementChild;
        }
      });
      if (!(origin = g.posts["" + boardID + "." + postID])) {
        return;
      }
      if (Conf['Quote Highlighting']) {
        posts = [origin].concat(origin.clones);
        posts.pop();
        for (_i = 0, _len = posts.length; _i < _len; _i++) {
          post = posts[_i];
          $.addClass(post.nodes.post, 'qphl');
        }
      }
      quoterID = $.x('ancestor::*[@id][1]', this).id.match(/\d+$/)[0];
      clone = Get.postFromRoot(qp.firstChild);
      _ref1 = clone.nodes.quotelinks.concat(__slice.call(clone.nodes.backlinks));
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        quote = _ref1[_j];
        if (quote.hash.slice(2) === quoterID) {
          $.addClass(quote, 'forwardlink');
        }
      }
    },
    mouseout: function() {
      var clone, post, root, _i, _len, _ref;
      if (!(root = this.el.firstElementChild)) {
        return;
      }
      clone = Get.postFromRoot(root);
      post = clone.origin;
      post.rmClone(root.dataset.clone);
      if (!Conf['Quote Highlighting']) {
        return;
      }
      _ref = [post].concat(post.clones);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        post = _ref[_i];
        $.rmClass(post.nodes.post, 'qphl');
      }
    }
  };

  QuoteStrikeThrough = {
    init: function() {
      if (!Conf['Post Hiding'] && !Conf['Post Hiding Link'] && !Conf['Filter']) {
        return;
      }
      return Post.callbacks.push({
        name: 'Strike-through Quotes',
        cb: this.node
      });
    },
    node: function() {
      var boardID, postID, quotelink, _i, _len, _ref, _ref1, _ref2;
      if (this.isClone) {
        return;
      }
      _ref = this.nodes.quotelinks;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        quotelink = _ref[_i];
        _ref1 = Get.postDataFromLink(quotelink), boardID = _ref1.boardID, postID = _ref1.postID;
        if ((_ref2 = g.posts["" + boardID + "." + postID]) != null ? _ref2.isHidden : void 0) {
          $.addClass(quotelink, 'filtered');
        }
      }
    }
  };


  /*
    <3 aeosynth
   */

  QuoteThreading = {
    init: function() {
      var input;
      if (!(Conf['Quote Threading'] && g.VIEW === 'thread')) {
        return;
      }
      this.enabled = true;
      this.controls = $.el('span', {
        innerHTML: '<label><input id=threadingControl type=checkbox checked> Threading</label>'
      });
      input = $('input', this.controls);
      $.on(input, 'change', this.toggle);
      Header.menu.addEntry(this.entry = {
        el: this.controls,
        order: 98
      });
      if (!Conf['Unread Count']) {
        $.on(d, '4chanXInitFinished', this.ready);
      }
      return Post.callbacks.push({
        name: 'Quote Threading',
        cb: this.node
      });
    },
    disconnect: function() {
      var input;
      if (!(Conf['Quote Threading'] && g.VIEW === 'thread')) {
        return;
      }
      input = $('input', this.controls);
      $.off(input, 'change', this.toggle);
      Header.menu.rmEntry(this.entry);
      delete this.enabled;
      delete this.controls;
      delete this.entry;
      return Post.callbacks.disconnect('Quote Threading');
    },
    ready: function() {
      $.off(d, '4chanXInitFinished', QuoteThreading.ready);
      return QuoteThreading.force();
    },
    force: function() {
      g.posts.forEach(function(post) {
        if (post.cb) {
          return post.cb(true);
        }
      });
      if (Conf['Unread Count'] && Unread.thread.OP.nodes.root.parentElement.parentElement) {
        Unread.read();
        return Unread.update();
      }
    },
    node: function() {
      var keys, len, posts, quote, _i, _len, _ref;
      posts = g.posts;
      if (this.isClone || !QuoteThreading.enabled) {
        return;
      }
      if (Conf['Unread Count']) {
        Unread.posts.push(this);
      }
      if (this.thread.OP === this || this.isHidden) {
        return;
      }
      keys = [];
      len = g.BOARD.ID.length + 1;
      _ref = this.quotes;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        quote = _ref[_i];
        if ((quote.slice(len) < this.ID) && quote in posts) {
          keys.push(quote);
        }
      }
      if (keys.length !== 1) {
        return;
      }
      this.threaded = keys[0];
      return this.cb = QuoteThreading.nodeinsert;
    },
    nodeinsert: function(force) {
      var bottom, height, post, posts, root, threadContainer, top, _ref;
      post = g.posts[this.threaded];
      if (this.thread.OP === post) {
        return false;
      }
      posts = Unread.posts;
      root = post.nodes.root;
      if (!force) {
        height = doc.clientHeight;
        _ref = root.getBoundingClientRect(), bottom = _ref.bottom, top = _ref.top;
        if (!((Conf['Unread Count'] && posts[post.ID]) || ((bottom < height) && (top > 0)))) {
          return false;
        }
      }
      if ($.hasClass(root, 'threadOP')) {
        threadContainer = root.nextElementSibling;
        post = Get.postFromRoot($.x('descendant::div[contains(@class,"postContainer")][last()]', threadContainer));
        $.add(threadContainer, this.nodes.root);
      } else {
        threadContainer = $.el('div', {
          className: 'threadContainer'
        });
        $.add(threadContainer, this.nodes.root);
        $.after(root, threadContainer);
        $.addClass(root, 'threadOP');
      }
      if (!Conf['Unread Count']) {
        return true;
      }
      if (post = posts[post.ID]) {
        posts.after(post, posts[this.ID]);
      } else if (posts[this.ID]) {
        posts.prepend(posts[this.ID]);
      }
      return true;
    },
    toggle: function() {
      var container, containers, nodes, post, posts, thread, _i, _j, _k, _len, _len1, _len2, _ref;
      if (QuoteThreading.enabled = this.checked) {
        QuoteThreading.force();
      } else {
        thread = $('.thread');
        posts = [];
        nodes = [];
        g.posts.forEach(function(post) {
          if (!(post === post.thread.OP || post.isClone)) {
            return posts.push(post);
          }
        });
        posts.sort(function(a, b) {
          return a.ID - b.ID;
        });
        for (_i = 0, _len = posts.length; _i < _len; _i++) {
          post = posts[_i];
          nodes.push(post.nodes.root);
        }
        $.add(thread, nodes);
        containers = $$('.threadContainer', thread);
        for (_j = 0, _len1 = containers.length; _j < _len1; _j++) {
          container = containers[_j];
          $.rm(container);
        }
        _ref = $$('.threadOP');
        for (_k = 0, _len2 = _ref.length; _k < _len2; _k++) {
          post = _ref[_k];
          $.rmClass(post, 'threadOP');
        }
      }
    },
    kb: function() {
      var control;
      control = $.id('threadingControl');
      control.checked = !control.checked;
      return QuoteThreading.toggle.call(control);
    }
  };

  Quotify = {
    init: function() {
      if (!Conf['Resurrect Quotes']) {
        return;
      }
      if (Conf['Comment Expansion']) {
        ExpandComment.callbacks.push(this.node);
      }
      return Post.callbacks.push({
        name: 'Resurrect Quotes',
        cb: this.node
      });
    },
    node: function() {
      var deadlink, _i, _len, _ref;
      _ref = $$('.deadlink', this.nodes.comment);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        deadlink = _ref[_i];
        if (this.isClone) {
          if ($.hasClass(deadlink, 'quotelink')) {
            this.nodes.quotelinks.push(deadlink);
          }
        } else {
          Quotify.parseDeadlink.call(this, deadlink);
        }
      }
    },
    parseDeadlink: function(deadlink) {
      var a, boardID, m, post, postID, quote, quoteID, redirect, _ref;
      if ($.hasClass(deadlink.parentNode, 'prettyprint')) {
        Quotify.fixDeadlink(deadlink);
        return;
      }
      quote = deadlink.textContent;
      if (!(postID = (_ref = quote.match(/\d+$/)) != null ? _ref[0] : void 0)) {
        return;
      }
      if (postID[0] === '0') {
        Quotify.fixDeadlink(deadlink);
        return;
      }
      boardID = (m = quote.match(/^>>>\/([a-z\d]+)/)) ? m[1] : this.board.ID;
      quoteID = "" + boardID + "." + postID;
      if (post = g.posts[quoteID]) {
        a = $.el('a', {
          href: Build.path(boardID, post.thread.ID, postID),
          className: post.isDead ? 'quotelink deadlink' : 'quotelink',
          textContent: quote
        });
        $.extend(a.dataset, {
          boardID: boardID,
          threadID: post.thread.ID,
          postID: postID
        });
      } else if (redirect = Redirect.to('thread', {
        boardID: boardID,
        postID: postID
      })) {
        a = $.el('a', {
          href: redirect,
          className: 'deadlink',
          textContent: quote,
          target: '_blank'
        });
        if (Redirect.to('post', {
          boardID: boardID,
          postID: postID
        })) {
          $.addClass(a, 'quotelink');
          $.extend(a.dataset, {
            boardID: boardID,
            postID: postID
          });
        }
      }
      if (__indexOf.call(this.quotes, quoteID) < 0) {
        this.quotes.push(quoteID);
      }
      if (!a) {
        deadlink.textContent = "" + quote + "\u00A0(Dead)";
        return;
      }
      $.replace(deadlink, a);
      if ($.hasClass(a, 'quotelink')) {
        return this.nodes.quotelinks.push(a);
      }
    },
    fixDeadlink: function(deadlink) {
      var el, green;
      if (!(el = deadlink.previousSibling) || el.nodeName === 'BR') {
        green = $.el('span', {
          className: 'quote'
        });
        $.before(deadlink, green);
        $.add(green, deadlink);
      }
      return $.replace(deadlink, __slice.call(deadlink.childNodes));
    }
  };

  Linkify = {
    init: function() {
      var type, _i, _len, _ref;
      if (!Conf['Linkify']) {
        return;
      }
      this.types = {};
      _ref = this.ordered_types;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        type = _ref[_i];
        this.types[type.key] = type;
      }
      if (Conf['Comment Expansion']) {
        ExpandComment.callbacks.push(this.node);
      }
      if (Conf['Embedding'] || Conf['Link Title']) {
        this.embedProcess = Function('link', 'post', "var data = this.services(link);\nif (data) {" + ((Conf['Embedding'] ? 'this.embed(data); ' : '') + (Conf['Link Title'] ? 'data.push(post); this.title(data);' : '')) + "}");
      }
      return Post.callbacks.push({
        name: 'Linkify',
        cb: this.node
      });
    },
    events: function(post) {
      var el, i, items;
      i = 0;
      items = $$('.embedder', post.nodes.comment);
      while (el = items[i++]) {
        $.on(el, 'click', Linkify.cb.toggle);
        if ($.hasClass(el, 'embedded')) {
          Linkify.cb.toggle.call(el);
        }
      }
    },
    node: function() {
      var data, end, endNode, i, index, length, link, links, node, result, saved, snapshot, space, test, word;
      if (this.isClone) {
        return (Conf['Embedding'] ? Linkify.events(this) : null);
      }
      if (!Linkify.regString.test(this.info.comment)) {
        return;
      }
      test = /[^\s'"]+/g;
      space = /[\s'"]/;
      snapshot = $.X('.//br|.//text()', this.nodes.comment);
      i = 0;
      links = [];
      while (node = snapshot.snapshotItem(i++)) {
        data = node.data;
        if (!data || node.parentElement.nodeName === "A") {
          continue;
        }
        while (result = test.exec(data)) {
          index = result.index;
          endNode = node;
          word = result[0];
          if ((length = index + word.length) === data.length) {
            test.lastIndex = 0;
            while ((saved = snapshot.snapshotItem(i++))) {
              if (saved.nodeName === 'BR') {
                break;
              }
              endNode = saved;
              data = saved.data;
              word += data;
              length = data.length;
              if (end = space.exec(data)) {
                test.lastIndex = length = end.index;
                i--;
                break;
              }
            }
          }
          if (Linkify.regString.exec(word)) {
            links.push(Linkify.makeRange(node, endNode, index, length));
          }
          if (!(test.lastIndex && node === endNode)) {
            break;
          }
        }
      }
      i = links.length;
      while (i--) {
        link = links[i];
        Linkify.embedProcess(Linkify.makeLink(link), this);
      }
    },
    embedProcess: function() {},
    regString: /((https?|mailto|git|magnet|ftp|irc):([a-z\d%\/])|[-a-z\d]+[.](aero|asia|biz|cat|com|coop|info|int|jobs|mobi|museum|name|net|org|post|pro|tel|travel|xxx|edu|gov|mil|[a-z]{2})([:\/]|(?!.))|[\d]{1,3}\.[\d]{1,3}\.[\d]{1,3}\.[\d]{1,3}|[-\w\d.@]+@[a-z\d.-]+\.[a-z\d])/i,
    makeRange: function(startNode, endNode, startOffset, endOffset) {
      var range;
      range = document.createRange();
      range.setStart(startNode, startOffset);
      range.setEnd(endNode, endOffset);
      return range;
    },
    makeLink: function(range) {
      var a, i, t, text;
      text = range.toString();
      i = 0;
      while (/[(\[{<>]/.test(text.charAt(i))) {
        i++;
      }
      if (i) {
        text = text.slice(i);
        while (range.startOffset + i >= range.startContainer.data.length) {
          i--;
        }
        if (i) {
          range.setStart(range.startContainer, range.startOffset + i);
        }
      }
      i = 0;
      while (/[)\]}>.,]/.test(t = text.charAt(text.length - (1 + i)))) {
        if (!(/[.,]/.test(t) || (text.match(/[()\[\]{}<>]/g)).length % 2)) {
          break;
        }
        i++;
      }
      if (i) {
        text = text.slice(0, -i);
        while (range.endOffset - i < 0) {
          i--;
        }
        if (i) {
          range.setEnd(range.endContainer, range.endOffset - i);
        }
      }
      if (!/(mailto:|.+:\/\/)/.test(text)) {
        text = (/@/.test(text) ? 'mailto:' : 'http://') + text;
      }
      a = $.el('a', {
        className: 'linkify',
        rel: 'nofollow noreferrer',
        target: '_blank',
        href: text
      });
      $.add(a, range.extractContents());
      range.insertNode(a);
      range.detach();
      return a;
    },
    services: function(link) {
      var href, match, type, _i, _len, _ref;
      href = link.href;
      _ref = Linkify.ordered_types;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        type = _ref[_i];
        if (!(match = type.regExp.exec(href))) {
          continue;
        }
        if (type.dummy) {
          return;
        }
        return [type.key, match[1], match[2], link];
      }
    },
    embed: function(data) {
      var embed, href, key, link, name, options, post, uid, value, _ref;
      key = data[0], uid = data[1], options = data[2], link = data[3], post = data[4];
      href = link.href;
      embed = $.el('a', {
        className: 'embedder',
        href: 'javascript:;',
        textContent: '(embed)'
      });
      _ref = {
        key: key,
        href: href,
        uid: uid,
        options: options
      };
      for (name in _ref) {
        value = _ref[name];
        embed.dataset[name] = value;
      }
      $.addClass(link, "" + embed.dataset.key);
      $.on(embed, 'click', Linkify.cb.toggle);
      $.after(link, [$.tn(' '), embed]);
      if (Conf['Auto-embed']) {
        return Linkify.cb.toggle.call(embed);
      }
    },
    title: function(data) {
      var err, key, link, options, post, service, title, titles, uid;
      key = data[0], uid = data[1], options = data[2], link = data[3], post = data[4];
      if (!(service = Linkify.types[key].title)) {
        return;
      }
      titles = Conf['CachedTitles'];
      if (title = titles[uid]) {
        return link.textContent = title[0];
      } else {
        try {
          return $.cache(service.api(uid), (function() {
            return Linkify.cb.title(this, data);
          }), {
            responseType: 'json'
          });
        } catch (_error) {
          err = _error;
          link.innerHTML = '<span class="warning">Title Link Blocked</span> (are you using NoScript?)</a>';
          $.prepend(link, $.tn("[" + key + "] "));
        }
      }
    },
    cb: {
      toggle: function() {
        if ($.hasClass(this, "embedded")) {
          $.rm(this.previousElementSibling);
          this.previousElementSibling.hidden = false;
          this.textContent = '(embed)';
        } else {
          this.previousElementSibling.hidden = true;
          $.before(this, Linkify.cb.embed(this));
          this.textContent = '(unembed)';
        }
        return $.toggleClass(this, 'embedded');
      },
      embed: function(a) {
        var el, type;
        el = (type = Linkify.types[a.dataset.key]).el(a);
        el.style.cssText = type.style != null ? type.style : "border: 0; width: 640px; height: 390px";
        return el;
      },
      title: function(req, data) {
        var key, link, link2, options, post, post2, service, status, text, uid, _i, _j, _len, _len1, _ref, _ref1;
        key = data[0], uid = data[1], options = data[2], link = data[3], post = data[4];
        status = req.status;
        service = Linkify.types[key].title;
        text = "[" + key + "] " + ((function() {
          switch (status) {
            case 200:
            case 304:
              return service.text(req.response);
            case 404:
              return "Not Found";
            case 403:
              return "Forbidden or Private";
            default:
              return "" + status + "'d";
          }
        })());
        link.textContent = text;
        _ref = post.clones;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          post2 = _ref[_i];
          _ref1 = $$('a', post2.nodes.comment);
          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
            link2 = _ref1[_j];
            if (link2.href === link.href) {
              link2.textContent = text;
            }
          }
        }
      }
    },
    ordered_types: [
      {
        key: 'audio',
        regExp: /(.*\.(mp3|ogg|wav))$/,
        style: '',
        el: function(a) {
          return $.el('audio', {
            controls: true,
            preload: 'auto',
            src: a.dataset.uid
          });
        }
      }, {
        key: 'gist',
        regExp: /.*(?:gist.github.com.*\/)([^\/][^\/]*)$/,
        el: function(a) {
          var div;
          return div = $.el('iframe', {
            src: "http://www.purplegene.com/script?url=https://gist.github.com/" + a.dataset.uid + ".js"
          });
        },
        title: {
          api: function(uid) {
            return "https://api.github.com/gists/" + uid;
          },
          text: function(_arg) {
            var file, files;
            files = _arg.files;
            for (file in files) {
              if (files.hasOwnProperty(file)) {
                return file;
              }
            }
          }
        }
      }, {
        key: 'image',
        regExp: /(http|www).*\.(gif|png|jpg|jpeg|bmp)$/,
        style: 'border: 0; width: auto; height: auto;',
        el: function(a) {
          var el;
          el = $.el('div');
          el.innerHTML = '<a target="_blank"><img></a>';
          el.firstChild.href = el.firstChild.firstChild.src = a.dataset.href;
          return el;
        }
      }, {
        key: 'InstallGentoo',
        regExp: /.*(?:paste.installgentoo.com\/view\/)([0-9a-z_]+)/,
        el: function(a) {
          return $.el('iframe', {
            src: "http://paste.installgentoo.com/view/embed/" + a.dataset.uid
          });
        }
      }, {
        key: 'Twitter',
        regExp: /.*twitter.com\/(.+\/status\/\d+)/,
        el: function(a) {
          return $.el('iframe', {
            src: "https://twitframe.com/show?url=https://twitter.com/" + a.dataset.uid
          });
        }
      }, {
        key: 'LiveLeak',
        regExp: /.*(?:liveleak.com\/view.+i=)([0-9a-z_]+)/,
        el: function(a) {
          var el;
          el = $.el('iframe', {
            width: "640",
            height: "360",
            src: "http://www.liveleak.com/ll_embed?i=" + a.dataset.uid,
            frameborder: "0"
          });
          el.setAttribute("allowfullscreen", "true");
          return el;
        }
      }, {
        key: 'MediaCrush',
        regExp: /.*(?:mediacru.sh\/)([0-9a-z_-]+)/i,
        style: 'border: 0;',
        el: function(a) {
          var el;
          el = $.el('div');
          $.cache("https://mediacru.sh/" + a.dataset.uid + ".json", function() {
            var embed, ext, file, files, i, status, type, _i, _j, _k, _l, _len, _len1, _len2, _len3, _ref, _ref1, _ref2, _results, _results1;
            status = this.status;
            if (status !== 200 && status !== 304) {
              return el.textContent = "ERROR " + status;
            }
            files = this.response.files;
            _ref = ['video/webm', 'video/mp4', 'video/ogv', 'image/svg+xml', 'image/png', 'image/gif', 'image/jpeg', 'audio/mpeg', 'audio/ogg'];
            for (_i = 0, _len = _ref.length; _i < _len; _i++) {
              type = _ref[_i];
              for (_j = 0, _len1 = files.length; _j < _len1; _j++) {
                file = files[_j];
                if (file.type === type) {
                  embed = file;
                  break;
                }
              }
              if (embed) {
                break;
              }
            }
            if (!embed) {
              return div.textContent = "ERROR: Not a valid filetype";
            }
            switch (embed.type) {
              case 'video/mp4':
              case 'video/webm':
              case 'video/ogv':
                el.innerHTML = '<video autoplay loop><source type="video/mp4"><source type="video/webm"><source type="video/ogg"></video>';
                _ref1 = ['mp4', 'webm', 'ogv'];
                _results = [];
                for (i = _k = 0, _len2 = _ref1.length; _k < _len2; i = ++_k) {
                  ext = _ref1[i];
                  _results.push(el.firstChild.children[i].src = "https://mediacru.sh/" + a.dataset.uid + "." + ext);
                }
                return _results;
                break;
              case 'image/svg+xml':
              case 'image/png':
              case 'image/gif':
              case 'image/jpeg':
                el.innerHTML = '<a target="_blank"><img></a>';
                el.firstChild.href = a.dataset.href;
                return el.firstChild.firstChild.src = "https://mediacru.sh/" + file.file;
              case 'audio/mpeg':
              case 'audio/ogg':
                el.innerHTML = '<audio controls><source type="audio/ogg"><source type="audio/mpeg"></audio>';
                _ref2 = ['ogg', 'mp3'];
                _results1 = [];
                for (i = _l = 0, _len3 = _ref2.length; _l < _len3; i = ++_l) {
                  ext = _ref2[i];
                  _results1.push(el.firstChild.children[i].src = "https://mediacru.sh/" + a.dataset.uid + "." + ext);
                }
                return _results1;
                break;
              default:
                return el.textContent = "ERROR: No valid filetype.";
            }
          });
          return el;
        }
      }, {
        key: 'pastebin',
        regExp: /.*(?:pastebin.com\/(?!u\/))([^#\&\?]*).*/,
        el: function(a) {
          var div;
          return div = $.el('iframe', {
            src: "http://pastebin.com/embed_iframe.php?i=" + a.dataset.uid
          });
        }
      }, {
        key: 'gfycat',
        regExp: /.*gfycat.com\/(?:iframe\/)?(\S*)/,
        el: function(a) {
          var div;
          return div = $.el('iframe', {
            src: "http://gfycat.com/iframe/" + a.dataset.uid
          });
        }
      }, {
        key: 'SoundCloud',
        regExp: /.*(?:soundcloud.com\/|snd.sc\/)([^#\&\?]*).*/,
        style: 'border: 0; width: 500px; height: 400px;',
        el: function(a) {
          return $.el('iframe', {
            src: "//w.soundcloud.com/player/?visual=true&show_comments=false&url=https%3A%2F%2Fsoundcloud.com%2F" + (encodeURIComponent(a.dataset.uid))
          });
        },
        title: {
          api: function(uid) {
            return "//soundcloud.com/oembed?format=json&url=https%3A%2F%2Fsoundcloud.com%2F" + (encodeURIComponent(uid));
          },
          text: function(_) {
            return _.title;
          }
        }
      }, {
        key: 'StrawPoll',
        regExp: /strawpoll\.me\/(?:embed_\d+\/)?(\d+)/,
        style: 'border: 0; width: 600px; height: 406px;',
        el: function(a) {
          return $.el('iframe', {
            src: "http://strawpoll.me/embed_1/" + a.dataset.uid
          });
        }
      }, {
        key: 'TwitchTV',
        regExp: /.*(?:twitch.tv\/)([^#\&\?]*).*/,
        style: "border: none; width: 640px; height: 360px;",
        el: function(a) {
          var channel, id, idparam, obj, result, type, _;
          if (result = /(\w+)\/([bc])\/(\d+)/i.exec(a.dataset.uid)) {
            _ = result[0], channel = result[1], type = result[2], id = result[3];
            idparam = {
              'b': 'archive_id',
              'c': 'chapter_id'
            };
            obj = $.el('object', {
              data: 'http://www.twitch.tv/widgets/archive_embed_player.swf'
            });
            obj.innerHTML = '<param name="allowFullScreen" value="true"><param name="flashvars">';
            obj.children[1].value = "channel=" + channel + "&start_volume=25&auto_play=false&" + idparam[type] + "=" + id;
            return obj;
          } else {
            channel = (/(\w+)/.exec(a.dataset.uid))[0];
            obj = $.el('object', {
              data: "http://www.twitch.tv/widgets/live_embed_player.swf?channel=" + channel
            });
            obj.innerHTML = '<param name="allowFullScreen" value="true"><param name="flashvars">';
            obj.children[1].value = "hostname=www.twitch.tv&channel=" + channel + "&auto_play=true&start_volume=25";
            return obj;
          }
        }
      }, {
        key: 'Vocaroo',
        regExp: /.*(?:vocaroo.com\/)([^#\&\?]*).*/,
        style: '',
        el: function(a) {
          return $.el('audio', {
            controls: true,
            preload: 'auto',
            src: "http://vocaroo.com/media_command.php?media=" + (a.dataset.uid.replace(/^i\//, '')) + "&command=download_ogg"
          });
        }
      }, {
        key: 'Vimeo',
        regExp: /.*(?:vimeo.com\/)([^#\&\?]*).*/,
        el: function(a) {
          return $.el('iframe', {
            src: "//player.vimeo.com/video/" + a.dataset.uid + "?wmode=opaque"
          });
        },
        title: {
          api: function(uid) {
            return "https://vimeo.com/api/oembed.json?url=http://vimeo.com/" + uid;
          },
          text: function(_) {
            return _.title;
          }
        }
      }, {
        key: 'Vine',
        regExp: /.*(?:vine.co\/)([^#\&\?]*).*/,
        style: 'border: none; width: 500px; height: 500px;',
        el: function(a) {
          return $.el('iframe', {
            src: "https://vine.co/" + a.dataset.uid + "/card"
          });
        }
      }, {
        key: 'YouTube',
        regExp: /.*(?:youtu.be\/|youtube.*v=|youtube.*\/embed\/|youtube.*\/v\/|youtube.*videos\/)([^#\&\?]*)\??(t\=.*)?/,
        el: function(a) {
          var el;
          el = $.el('iframe', {
            src: "//www.youtube.com/embed/" + a.dataset.uid + (a.dataset.option ? '#' + a.dataset.option : '') + "?wmode=opaque"
          });
          el.setAttribute("allowfullscreen", "true");
          return el;
        },
        title: {
          api: function(uid) {
            return "https://gdata.youtube.com/feeds/api/videos/" + uid + "?alt=json&fields=title/text(),yt:noembed,app:control/yt:state/@reasonCode";
          },
          text: function(data) {
            return data.entry.title.$t;
          }
        }
      }, {
        key: 'Loopvid',
        regExp: /.*loopvid.appspot.com\/.*/,
        dummy: true
      }, {
        key: 'MediaFire',
        regExp: /.*mediafire.com\/.*/,
        dummy: true
      }, {
        key: 'video',
        regExp: /(.*\.(ogv|webm|mp4))$/,
        style: 'border: 0; width: auto; height: auto;',
        el: function(a) {
          return $.el('video', {
            controls: 'controls',
            preload: 'auto',
            src: a.dataset.uid
          });
        }
      }
    ]
  };

  QR = {
    mimeTypes: ['image/jpeg', 'image/png', 'image/gif', 'application/pdf', 'application/vnd.adobe.flash.movie', 'application/x-shockwave-flash', 'video/webm'],
    init: function() {
      var con, sc;
      this.db = new DataBoard('yourPosts');
      this.posts = [];
      $.on(d, '4chanXInitFinished', this.initReady);
      Post.callbacks.push({
        name: 'Quick Reply',
        cb: this.node
      });
      if (!(Conf['Header Shortcut'] || Conf['Page Shortcut'])) {
        return;
      }
      sc = $.el('a', {
        className: "qr-shortcut fa " + (!Conf['Persistent QR'] ? 'disabled' : ''),
        textContent: '\uf075',
        title: 'Quick Reply',
        href: 'javascript:;'
      });
      $.on(sc, 'click', function() {
        if (!QR.nodes || QR.nodes.el.hidden) {
          $.event('CloseMenu');
          QR.open();
          QR.nodes.com.focus();
        } else {
          QR.close();
        }
        return $.toggleClass(this, 'disabled');
      });
      if (Conf['Header Shortcut']) {
        return Header.addShortcut(sc, true);
      }
      $.addClass(sc, 'on-page');
      $.rmClass(sc, 'fa');
      sc.textContent = g.VIEW === 'thread' ? 'Reply to Thread' : 'Start a Thread';
      con = $.el('div', {
        className: 'center'
      });
      $.add(con, sc);
      return $.asap((function() {
        return d.body;
      }), function() {
        return $.asap((function() {
          return $.id('postForm');
        }), function() {
          return $.before($.id('postForm'), con);
        });
      });
    },
    initReady: function() {
      $.off(d, '4chanXInitFinished', this.initReady);
      QR.postingIsEnabled = !!$.id('postForm');
      if (!QR.postingIsEnabled) {
        return;
      }
      $.on(d, 'dragover', QR.dragOver);
      $.on(d, 'drop', QR.dropFile);
      $.on(d, 'dragstart dragend', QR.drag);
      $.on(d, 'IndexRefresh', QR.generatePostableThreadsList);
      $.on(d, 'ThreadUpdate', QR.statusCheck);
      if (!Conf['Persistent QR']) {
        return;
      }
      QR.open();
      if (Conf['Auto-Hide QR']) {
        return QR.hide();
      }
    },
    statusCheck: function() {
      if (g.DEAD) {
        return QR.abort();
      } else {
        return QR.status();
      }
    },
    node: function() {
      if (QR.db.get({
        boardID: this.board.ID,
        threadID: this.thread.ID,
        postID: this.ID
      })) {
        $.addClass(this.nodes.root, 'your-post');
      }
      return $.on($('a[title="Reply to this post"]', this.nodes.info), 'click', QR.quote);
    },
    persist: function() {
      if (!QR.postingIsEnabled) {
        return;
      }
      QR.open();
      if (Conf['Auto Hide QR']) {
        return QR.hide();
      }
    },
    open: function() {
      var err;
      if (QR.nodes) {
        QR.nodes.el.hidden = false;
        QR.unhide();
        return;
      }
      try {
        return QR.dialog();
      } catch (_error) {
        err = _error;
        delete QR.nodes;
        return Main.handleErrors({
          message: 'Quick Reply dialog creation crashed.',
          error: err
        });
      }
    },
    close: function() {
      var post, _i, _len, _ref;
      if (QR.req) {
        QR.abort();
        return;
      }
      QR.nodes.el.hidden = true;
      QR.cleanNotifications();
      d.activeElement.blur();
      $.rmClass(QR.nodes.el, 'dump');
      if (!Conf['Captcha Warning Notifications']) {
        if (QR.captcha.isEnabled) {
          $.rmClass(QR.captcha.nodes.input, 'error');
        }
      }
      if (Conf['QR Shortcut']) {
        $.toggleClass($('.qr-shortcut'), 'disabled');
      }
      new QR.post(true);
      _ref = QR.posts.splice(0, QR.posts.length - 1);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        post = _ref[_i];
        post["delete"]();
      }
      QR.cooldown.auto = false;
      QR.status();
      if (QR.captcha.isEnabled && !Conf['Auto-load captcha']) {
        return QR.captcha.destroy();
      }
    },
    focusin: function() {
      return $.addClass(QR.nodes.el, 'focus');
    },
    focusout: function() {
      return $.rmClass(QR.nodes.el, 'focus');
    },
    hide: function() {
      d.activeElement.blur();
      $.addClass(QR.nodes.el, 'autohide');
      return QR.nodes.autohide.checked = true;
    },
    unhide: function() {
      $.rmClass(QR.nodes.el, 'autohide');
      return QR.nodes.autohide.checked = false;
    },
    toggleHide: function() {
      if (this.checked) {
        return QR.hide();
      } else {
        return QR.unhide();
      }
    },
    error: function(err) {
      var el;
      QR.open();
      if (typeof err === 'string') {
        el = $.tn(err);
      } else {
        el = err;
        el.removeAttribute('style');
      }
      if (QR.captcha.isEnabled && /captcha|verification/i.test(el.textContent)) {
        if (QR.captcha.captchas.length === 0) {
          QR.captcha.nodes.input.focus();
          QR.captcha.setup();
        }
        if (Conf['Captcha Warning Notifications'] && !d.hidden) {
          QR.notify(el);
        } else {
          $.addClass(QR.captcha.nodes.input, 'error');
          $.on(QR.captcha.nodes.input, 'keydown', function() {
            return $.rmClass(QR.captcha.nodes.input, 'error');
          });
        }
      } else {
        QR.notify(el);
      }
      if (d.hidden) {
        return alert(el.textContent);
      }
    },
    notify: function(el) {
      var notice, notif;
      notice = new Notice('warning', el);
      if (!(Header.areNotificationsEnabled && d.hidden)) {
        return QR.notifications.push(notice);
      } else {
        notif = new Notification(el.textContent, {
          body: el.textContent,
          icon: Favicon.logo
        });
        return notif.onclick = function() {
          return window.focus();
        };
      }
    },
    notifications: [],
    cleanNotifications: function() {
      var notification, _i, _len, _ref;
      _ref = QR.notifications;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        notification = _ref[_i];
        notification.close();
      }
      return QR.notifications = [];
    },
    status: function() {
      var disabled, status, thread, value;
      if (!QR.nodes) {
        return;
      }
      thread = QR.posts[0].thread;
      if (thread !== 'new' && g.threads["" + g.BOARD + "." + thread].isDead) {
        value = 404;
        disabled = true;
        QR.cooldown.auto = false;
      }
      value = QR.req ? QR.req.progress : QR.cooldown.seconds || value;
      status = QR.nodes.status;
      status.value = !value ? 'Submit' : QR.cooldown.auto ? "Auto " + value : value;
      return status.disabled = disabled || false;
    },
    quote: function(e) {
      var ancestor, caretPos, com, frag, index, node, post, range, sel, text, thread, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2, _ref3;
      if (e != null) {
        e.preventDefault();
      }
      if (!QR.postingIsEnabled) {
        return;
      }
      sel = d.getSelection();
      post = Get.postFromNode(this);
      text = ">>" + post + "\n";
      if (sel.toString().trim() && post === Get.postFromNode(sel.anchorNode)) {
        range = sel.getRangeAt(0);
        frag = range.cloneContents();
        ancestor = range.commonAncestorContainer;
        if (ancestor.nodeName === '#text') {
          if ($.x('ancestor::s', ancestor)) {
            $.prepend(frag, $.tn('[spoiler]'));
            $.add(frag, $.tn('[/spoiler]'));
          }
          if ($.x('ancestor::pre[contains(@class,"prettyprint")]', ancestor)) {
            $.prepend(frag, $.tn('[code]'));
            $.add(frag, $.tn('[/code]'));
          }
        }
        _ref = $$('br', frag);
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          node = _ref[_i];
          if (node !== frag.lastChild) {
            $.replace(node, $.tn('\n>'));
          }
        }
        _ref1 = $$('s', frag);
        for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
          node = _ref1[_j];
          $.replace(node, [$.tn('[spoiler]')].concat(__slice.call(node.childNodes), [$.tn('[/spoiler]')]));
        }
        _ref2 = $$('.prettyprint', frag);
        for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {
          node = _ref2[_k];
          $.replace(node, [$.tn('[code]')].concat(__slice.call(node.childNodes), [$.tn('[/code]')]));
        }
        text += ">" + (frag.textContent.trim()) + "\n";
      }
      QR.open();
      if (QR.selected.isLocked) {
        index = QR.posts.indexOf(QR.selected);
        (QR.posts[index + 1] || new QR.post()).select();
        $.addClass(QR.nodes.el, 'dump');
        QR.cooldown.auto = true;
      }
      _ref3 = QR.nodes, com = _ref3.com, thread = _ref3.thread;
      if (!com.value) {
        thread.value = Get.threadFromNode(this);
      }
      thread.nextElementSibling.firstElementChild.textContent = thread.options[thread.selectedIndex].textContent;
      caretPos = com.selectionStart;
      com.value = com.value.slice(0, caretPos) + text + com.value.slice(com.selectionEnd);
      range = caretPos + text.length;
      com.setSelectionRange(range, range);
      com.focus();
      QR.selected.save(com);
      QR.selected.save(thread);
      return $.rmClass($('.qr-shortcut'), 'disabled');
    },
    characterCount: function() {
      var count, counter;
      counter = QR.nodes.charCount;
      count = QR.nodes.com.textLength;
      counter.textContent = count;
      counter.hidden = count < 1000;
      return (count > 1500 ? $.addClass : $.rmClass)(counter, 'warning');
    },
    drag: function(e) {
      var toggle;
      toggle = e.type === 'dragstart' ? $.off : $.on;
      toggle(d, 'dragover', QR.dragOver);
      return toggle(d, 'drop', QR.dropFile);
    },
    dragOver: function(e) {
      e.preventDefault();
      return e.dataTransfer.dropEffect = 'copy';
    },
    dropFile: function(e) {
      if (!e.dataTransfer.files.length) {
        return;
      }
      e.preventDefault();
      QR.open();
      return QR.handleFiles(e.dataTransfer.files);
    },
    paste: function(e) {
      var blob, files, item, _i, _len, _ref;
      files = [];
      _ref = e.clipboardData.items;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        item = _ref[_i];
        if (!(item.kind === 'file')) {
          continue;
        }
        blob = item.getAsFile();
        blob.name = 'file';
        if (blob.type) {
          blob.name += '.' + blob.type.split('/')[1];
        }
        files.push(blob);
      }
      if (!files.length) {
        return;
      }
      QR.open();
      QR.handleFiles(files);
      return $.addClass(QR.nodes.el, 'dump');
    },
    handleBlob: function(urlBlob, contentType, contentDisposition, url) {
      var blob, match, mime, name, _ref, _ref1, _ref2;
      name = (_ref = url.match(/([^\/]+)\/*$/)) != null ? _ref[1] : void 0;
      mime = (contentType != null ? contentType.match(/[^;]*/)[0] : void 0) || 'application/octet-stream';
      match = (contentDisposition != null ? (_ref1 = contentDisposition.match(/\bfilename\s*=\s*"((\\"|[^"])+)"/i)) != null ? _ref1[1] : void 0 : void 0) || (contentType != null ? (_ref2 = contentType.match(/\bname\s*=\s*"((\\"|[^"])+)"/i)) != null ? _ref2[1] : void 0 : void 0);
      if (match) {
        name = match.replace(/\\"/g, '"');
      }
      blob = new Blob([urlBlob], {
        type: mime
      });
      blob.name = name;
      return QR.handleFiles([blob]);
    },
    handleUrl: function() {
      var url;
      url = prompt("Enter a URL:");
      if (url === null) {
        return;
      }
      return GM_xmlhttpRequest({
        method: "GET",
        url: url,
        overrideMimeType: "text/plain; charset=x-user-defined",
        onload: function(xhr) {
          var contentDisposition, contentType, data, h, i, r;
          r = xhr.responseText;
          h = xhr.responseHeaders;
          data = new Uint8Array(r.length);
          i = 0;
          while (i < r.length) {
            data[i] = r.charCodeAt(i);
            i++;
          }
          contentType = (h.match(/Content-Type:\s*(.*)/i) || [])[1];
          contentDisposition = (h.match(/Content-Disposition:\s*(.*)/i) || [])[1];
          return QR.handleBlob(data, contentType, contentDisposition, url);
        },
        onerror: function(xhr) {
          return QR.error("Can't load image.");
        }
      });
    },
    handleFiles: function(files) {
      var file, i, _i, _len;
      if (this !== QR) {
        files = __slice.call(this.files);
        this.value = null;
      }
      if (!files.length) {
        return;
      }
      QR.cleanNotifications();
      for (i = _i = 0, _len = files.length; _i < _len; i = ++_i) {
        file = files[i];
        QR.handleFile(file, i, files.length);
      }
      if (files.length !== 1) {
        return $.addClass(QR.nodes.el, 'dump');
      }
    },
    handleFile: function(file, index, nfiles) {
      var isSingle, max, post, _ref;
      isSingle = nfiles === 1;
      if (/^text\//.test(file.type)) {
        if (isSingle) {
          post = QR.selected;
        } else if ((post = QR.posts[QR.posts.length - 1]).com) {
          post = new QR.post();
        }
        post.pasteText(file);
        return;
      }
      if (_ref = file.type, __indexOf.call(QR.mimeTypes, _ref) < 0) {
        QR.error("" + file.name + ": Unsupported file type.");
        return;
      }
      max = QR.nodes.fileInput.max;
      if (/^video\//.test(file.type)) {
        max = Math.min(max, QR.max_size_video);
      }
      if (file.size > max) {
        QR.error("" + file.name + ": File too large (file: " + ($.bytesToString(file.size)) + ", max: " + ($.bytesToString(max)) + ").");
        return;
      }
      if (isSingle) {
        post = QR.selected;
      } else if ((post = QR.posts[QR.posts.length - 1]).file) {
        post = new QR.post();
      }
      return post.setFile(file);
    },
    openFileInput: function(e) {
      var _ref;
      e.stopPropagation();
      if (e.shiftKey && e.type === 'click') {
        return QR.selected.rmFile();
      }
      if (e.ctrlKey && e.type === 'click') {
        $.addClass(QR.nodes.filename, 'edit');
        QR.nodes.filename.focus();
        return;
      }
      if (e.target.nodeName === 'INPUT' || (e.keyCode && ((_ref = e.keyCode) !== 32 && _ref !== 13)) || e.ctrlKey) {
        return;
      }
      e.preventDefault();
      return QR.nodes.fileInput.click();
    },
    generatePostableThreadsList: function() {
      var list, options, thread, val, _i, _len, _ref;
      if (!QR.nodes) {
        return;
      }
      list = QR.nodes.thread;
      options = [list.firstChild];
      _ref = g.BOARD.threads.keys;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        thread = _ref[_i];
        options.push($.el('option', {
          value: thread,
          textContent: "No." + thread
        }));
      }
      val = list.value;
      $.rmAll(list);
      $.add(list, options);
      list.value = val;
      if (!list.value) {
        return;
      }
      list.value = g.VIEW === 'thread' ? g.THREADID : 'new';
      if ($.hasClass(list, 'riced')) {
        return list.nextElementSibling.firstChild.textContent = list.options[list.selectedIndex].textContent;
      }
    },
    dialog: function() {
      var dialog, elm, event, i, items, name, node, nodes, prop, rules, save, setNode, _, _i, _len, _ref, _ref1, _ref2;
      QR.nodes = nodes = {
        el: dialog = UI.dialog('qr', 'top:0;right:0;', "<div id=qrtab class=move><input type=checkbox id=autohide title=Auto-hide><div id=qr-thread-select><select data-name=thread title='Create a new thread / Reply'><option value=new>New thread</option></select></div><a href=javascript:; class='close fa' title=Close>\uf00d</a></div><form><div class=persona><input name=name  data-name=name  list=\"list-name\" placeholder=Name    class=field size=1 tabindex=10><input name=email data-name=email list=\"list-email\" placeholder=Options class=field size=1 tabindex=20><input name=sub   data-name=sub   list=\"list-sub\" placeholder=Subject class=field size=1 tabindex=30> </div><div class=textarea><textarea data-name=com placeholder=Comment class=field tabindex=40></textarea><span id=char-count></span></div><div id=dump-list-container><div id=dump-list></div><a id=add-post href=javascript:; title=\"Add a post\" tabindex=50>+</a></div><div id=file-n-submit><span id=qr-filename-container class=field tabindex=60><span id=qr-no-file>No selected file</span><input id=\"qr-filename\" data-name=\"filename\" spellcheck=\"false\"><span id=qr-extras-container><label id=qr-spoiler-label><input type=checkbox id=qr-file-spoiler title='Spoiler image' tabindex=70></label><span class=description>Spoiler</span><a id=url-button><i class=\"fa\">\uf0c1</i></a><span class=description>Post from URL</span><a id=dump-button title='Dump list'>+</a><span class=description>Dump</span><a id=qr-filerm href=javascript:; title='Remove file' class=fa>\uf00d</a><span class=description>Remove File</span></span></span><input type=submit tabindex=80></div><input type=file multiple></form><datalist id=\"list-name\"></datalist><datalist id=\"list-email\"></datalist><datalist id=\"list-sub\"></datalist>")
      };
      setNode = function(name, query) {
        return nodes[name] = $(query, dialog);
      };
      setNode('move', '.move');
      setNode('autohide', '#autohide');
      setNode('thread', 'select');
      setNode('threadPar', '#qr-thread-select');
      setNode('close', '.close');
      setNode('form', 'form');
      setNode('dumpButton', '#dump-button');
      setNode('urlButton', '#url-button');
      setNode('name', '[data-name=name]');
      setNode('email', '[data-name=email]');
      setNode('sub', '[data-name=sub]');
      setNode('com', '[data-name=com]');
      setNode('dumpList', '#dump-list');
      setNode('addPost', '#add-post');
      setNode('charCount', '#char-count');
      setNode('fileSubmit', '#file-n-submit');
      setNode('filename', '#qr-filename');
      setNode('fileContainer', '#qr-filename-container');
      setNode('fileRM', '#qr-filerm');
      setNode('fileExtras', '#qr-extras-container');
      setNode('spoiler', '#qr-file-spoiler');
      setNode('spoilerPar', '#qr-spoiler-label');
      setNode('status', '[type=submit]');
      setNode('fileInput', '[type=file]');
      rules = $('ul.rules').textContent.trim();
      QR.min_width = QR.min_height = 1;
      QR.max_width = QR.max_height = 10000;
      try {
        _ref = rules.match(/.+smaller than (\d+)x(\d+).+/), _ = _ref[0], QR.min_width = _ref[1], QR.min_height = _ref[2];
        _ref1 = rules.match(/.+greater than (\d+)x(\d+).+/), _ = _ref1[0], QR.max_width = _ref1[1], QR.max_height = _ref1[2];
        _ref2 = ['min_width', 'min_height', 'max_width', 'max_height'];
        for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
          prop = _ref2[_i];
          QR[prop] = parseInt(QR[prop], 10);
        }
      } catch (_error) {
        null;
      }
      nodes.fileInput.max = $('input[name=MAX_FILE_SIZE]').value;
      QR.max_size_video = 3145728;
      QR.max_width_video = QR.max_height_video = 2048;
      QR.max_duration_video = 120;
      QR.spoiler = !!$('.postForm input[name=spoiler]');
      if (QR.spoiler) {
        $.addClass(QR.nodes.el, 'has-spoiler');
      } else {
        nodes.spoiler.parentElement.hidden = true;
      }
      if (Conf['Dump List Before Comment']) {
        $.after(nodes.name.parentElement, nodes.dumpList.parentElement);
        nodes.addPost.tabIndex = 35;
      }
      if (g.BOARD.ID === 'f') {
        nodes.flashTag = $.el('select', {
          name: 'filetag',
          innerHTML: "<option value=0>Hentai</option>\n<option value=6>Porn</option>\n<option value=1>Japanese</option>\n<option value=2>Anime</option>\n<option value=3>Game</option>\n<option value=5>Loop</option>\n<option value=4 selected>Other</option>"
        });
        nodes.flashTag.dataset["default"] = '4';
        $.add(nodes.form, nodes.flashTag);
      }
      QR.flagsInput();
      $.on(nodes.filename.parentNode, 'click keydown', QR.openFileInput);
      items = $$('*', QR.nodes.el);
      i = 0;
      while (elm = items[i++]) {
        $.on(elm, 'blur', QR.focusout);
        $.on(elm, 'focus', QR.focusin);
      }
      $.on(nodes.autohide, 'change', QR.toggleHide);
      $.on(nodes.close, 'click', QR.close);
      $.on(nodes.dumpButton, 'click', function() {
        return nodes.el.classList.toggle('dump');
      });
      $.on(nodes.urlButton, 'click', QR.handleUrl);
      $.on(nodes.addPost, 'click', function() {
        return new QR.post(true);
      });
      $.on(nodes.form, 'submit', QR.submit);
      $.on(nodes.filename, 'blur', function() {
        return $.rmClass(this, 'edit');
      });
      $.on(nodes.fileRM, 'click', function() {
        return QR.selected.rmFile();
      });
      $.on(nodes.fileExtras, 'click', function(e) {
        return e.stopPropagation();
      });
      $.on(nodes.spoiler, 'change', function() {
        return QR.selected.nodes.spoiler.click();
      });
      $.on(nodes.fileInput, 'change', QR.handleFiles);
      items = ['spoilerPar', 'dumpButton', 'fileRM', 'urlButton'];
      i = 0;
      while (name = items[i++]) {
        $.on(nodes[name], 'mouseover', QR.mouseover);
      }
      items = ['name', 'email', 'sub', 'com', 'filename', 'flag'];
      i = 0;
      save = function() {
        return QR.selected.save(this);
      };
      while (name = items[i++]) {
        if (!(node = nodes[name])) {
          continue;
        }
        event = node.nodeName === 'SELECT' ? 'change' : 'input';
        $.on(nodes[name], event, save);
      }
      $.on(nodes['name'], 'blur', QR.tripcodeHider);
      $.on(nodes.thread, 'change', function() {
        return QR.selected.save(this);
      });
      if (Conf['Remember QR Size']) {
        $.get('QR Size', '', function(item) {
          return nodes.com.style.cssText = item['QR Size'];
        });
        $.on(nodes.com, 'mouseup', function(e) {
          if (e.button !== 0) {
            return;
          }
          return $.set('QR Size', this.style.cssText);
        });
      }
      QR.generatePostableThreadsList();
      QR.persona.init();
      new QR.post(true);
      QR.status();
      QR.cooldown.init();
      QR.captcha.init();
      Rice.nodes(dialog);
      $.add(d.body, dialog);
      if (Conf['Auto Hide QR']) {
        nodes.autohide.click();
      }
      return $.event('QRDialogCreation', null, dialog);
    },
    tripcodeHider: function() {
      var check;
      check = /^.*##?.+/.test(this.value);
      if (check && !this.className.match("\\btripped\\b")) {
        return $.addClass(this, 'tripped');
      } else if (!check && this.className.match("\\btripped\\b")) {
        return $.rmClass(this, 'tripped');
      }
    },
    flags: function() {
      var flag, fn, select, _i, _len, _ref;
      select = $.el('select', {
        name: 'flag',
        className: 'flagSelector'
      });
      fn = function(val) {
        return $.add(select, $.el('option', {
          value: val[0],
          textContent: val[1]
        }));
      };
      _ref = [['0', 'None'], ['US', 'American'], ['KP', 'Best Korean'], ['BL', 'Black Nationalist'], ['CM', 'Communist'], ['CF', 'Confederate'], ['RE', 'Conservative'], ['EU', 'European'], ['GY', 'Gay'], ['PC', 'Hippie'], ['IL', 'Israeli'], ['DM', 'Liberal'], ['RP', 'Libertarian'], ['MF', 'Muslim'], ['NZ', 'Nazi'], ['OB', 'Obama'], ['PR', 'Pirate'], ['RB', 'Rebel'], ['TP', 'Tea Partier'], ['TX', 'Texan'], ['TR', 'Tree Hugger'], ['WP', 'White Supremacist']];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        flag = _ref[_i];
        fn(flag);
      }
      return select;
    },
    flagsInput: function() {
      var flag, nodes;
      nodes = QR.nodes;
      if (!nodes) {
        return;
      }
      if (nodes.flag) {
        $.rm(nodes.flag);
        delete nodes.flag;
      }
      if (g.BOARD.ID === 'pol') {
        flag = QR.flags();
        flag.dataset.name = 'flag';
        flag.dataset["default"] = '0';
        nodes.flag = flag;
        return $.add(nodes.form, flag);
      }
    },
    submit: function(e) {
      var challenge, err, extra, filetag, formData, options, post, response, textOnly, thread, threadID, _ref;
      if (e != null) {
        e.preventDefault();
      }
      if (QR.req) {
        QR.abort();
        return;
      }
      if (QR.cooldown.seconds) {
        QR.cooldown.auto = !QR.cooldown.auto;
        QR.status();
        return;
      }
      post = QR.posts[0];
      post.forceSave();
      if (g.BOARD.ID === 'f') {
        filetag = QR.nodes.flashTag.value;
      }
      threadID = post.thread;
      thread = g.BOARD.threads[threadID];
      if (threadID === 'new') {
        threadID = null;
        if (g.BOARD.ID === 'vg' && !post.sub) {
          err = 'New threads require a subject.';
        } else if (!(post.file || (textOnly = !!$('input[name=textonly]', $.id('postForm'))))) {
          err = 'No file selected.';
        }
      } else if (g.BOARD.threads[threadID].isClosed) {
        err = 'You can\'t reply to this thread anymore.';
      } else if (!(post.com || post.file)) {
        err = 'No file selected.';
      } else if (post.file && thread.fileLimit) {
        err = 'Max limit of image replies has been reached.';
      }
      if (QR.captcha.isEnabled && !err) {
        _ref = QR.captcha.getOne(), challenge = _ref.challenge, response = _ref.response;
        if (!response) {
          err = 'No valid captcha.';
        }
      }
      QR.cleanNotifications();
      if (err) {
        QR.cooldown.auto = false;
        QR.status();
        QR.error(err);
        return;
      }
      QR.cooldown.auto = QR.posts.length > 1;
      if (Conf['Auto Hide QR'] && !QR.cooldown.auto) {
        QR.hide();
      }
      if (!QR.cooldown.auto && $.x('ancestor::div[@id="qr"]', d.activeElement)) {
        d.activeElement.blur();
      }
      post.lock();
      formData = {
        resto: threadID,
        name: post.name,
        email: post.email,
        sub: post.sub,
        com: post.com,
        upfile: post.file,
        filetag: filetag,
        spoiler: post.spoiler,
        flag: post.flag,
        textonly: textOnly,
        mode: 'regist',
        pwd: QR.persona.pwd,
        recaptcha_challenge_field: challenge,
        recaptcha_response_field: response
      };
      options = {
        responseType: 'document',
        withCredentials: true,
        onload: QR.response,
        onerror: function() {
          delete QR.req;
          post.unlock();
          QR.cooldown.auto = false;
          QR.status();
          return QR.error($.el('span', {
            innerHTML: "Connection error. You may have been <a href=//www.4chan.org/banned target=_blank>banned</a>.\n[<a href=\"https://github.com/MayhemYDG/4chan-x/wiki/FAQ#what-does-connection-error-you-may-have-been-banned-mean\" target=_blank>?</a>]"
          }));
        }
      };
      extra = {
        form: $.formData(formData),
        upCallbacks: {
          onload: function() {
            QR.req.isUploadFinished = true;
            QR.req.uploadEndTime = Date.now();
            QR.req.progress = '...';
            return QR.status();
          },
          onprogress: function(e) {
            QR.req.progress = "" + (Math.round(e.loaded / e.total * 100)) + "%";
            return QR.status();
          }
        }
      };
      QR.req = $.ajax("https://sys.4chan.org/" + g.BOARD + "/post", options, extra);
      QR.req.uploadStartTime = Date.now();
      QR.req.progress = '...';
      return QR.status();
    },
    response: function() {
      var URL, ban, board, captchasCount, err, h1, isReply, m, notif, post, postID, postsCount, req, resDoc, threadID, _, _ref, _ref1;
      req = QR.req;
      delete QR.req;
      post = QR.posts[0];
      post.unlock();
      resDoc = req.response;
      if (ban = $('.banType', resDoc)) {
        board = $('.board', resDoc).innerHTML;
        err = $.el('span', {
          innerHTML: ban.textContent.toLowerCase() === 'banned' ? "You are banned on " + board + "! ;_;<br>\nClick <a href=//www.4chan.org/banned target=_blank>here</a> to see the reason." : "You were issued a warning on " + board + " as " + ($('.nameBlock', resDoc).innerHTML) + ".<br>\nReason: " + ($('.reason', resDoc).innerHTML)
        });
      } else if (err = resDoc.getElementById('errmsg')) {
        if ((_ref = $('a', err)) != null) {
          _ref.target = '_blank';
        }
      } else if (resDoc.title !== 'Post successful!') {
        err = 'Connection error with sys.4chan.org.';
      } else if (req.status !== 200) {
        err = "Error " + req.statusText + " (" + req.status + ")";
      }
      if (err) {
        if (/captcha|verification/i.test(err.textContent) || err === 'Connection error with sys.4chan.org.') {
          if (/mistyped/i.test(err.textContent)) {
            err = 'You seem to have mistyped the CAPTCHA.';
          } else if (/expired/i.test(err.textContent)) {
            err = 'This CAPTCHA is no longer valid because it has expired.';
          }
          QR.cooldown.auto = QR.captcha.isEnabled ? !!QR.captcha.captchas.length : err === 'Connection error with sys.4chan.org.' ? true : false;
          QR.cooldown.set({
            delay: 2
          });
        } else if (err.textContent && (m = err.textContent.match(/wait\s+(\d+)\s+second/i))) {
          QR.cooldown.auto = QR.captcha.isEnabled ? !!QR.captcha.captchas.length : true;
          QR.cooldown.set({
            delay: m[1]
          });
        } else {
          QR.cooldown.auto = false;
        }
        QR.status();
        QR.error(err);
        if (QR.captcha.isEnabled) {
          QR.captcha.setup();
        }
        return;
      }
      h1 = $('h1', resDoc);
      QR.cleanNotifications();
      if (Conf['Posting Success Notifications']) {
        QR.notifications.push(new Notice('success', h1.textContent, 5));
      }
      QR.persona.set(post);
      _ref1 = h1.nextSibling.textContent.match(/thread:(\d+),no:(\d+)/), _ = _ref1[0], threadID = _ref1[1], postID = _ref1[2];
      postID = +postID;
      threadID = +threadID || postID;
      isReply = threadID !== postID;
      QR.db.set({
        boardID: g.BOARD.ID,
        threadID: threadID,
        postID: postID,
        val: true
      });
      ThreadUpdater.postID = postID;
      $.event('QRPostSuccessful', {
        boardID: g.BOARD.ID,
        threadID: threadID,
        postID: postID
      });
      $.event('QRPostSuccessful_', {
        boardID: g.BOARD.ID,
        threadID: threadID,
        postID: postID
      });
      postsCount = QR.posts.length - 1;
      QR.cooldown.auto = postsCount && isReply;
      if (QR.cooldown.auto && QR.captcha.isEnabled && (captchasCount = QR.captcha.captchas.length) < 3 && captchasCount < postsCount) {
        notif = new Notification('Quick reply warning', {
          body: "You are running low on cached captchas. Cache count: " + captchasCount + ".",
          icon: Favicon.logo
        });
        notif.onclick = function() {
          QR.open();
          QR.captcha.nodes.input.focus();
          return window.focus();
        };
        notif.onshow = function() {
          return setTimeout(function() {
            return notif.close();
          }, 7 * $.SECOND);
        };
      }
      if (!(Conf['Persistent QR'] || QR.cooldown.auto)) {
        QR.close();
      } else {
        if (QR.posts.length > 1 && QR.captcha.isEnabled && QR.captcha.captchas.length === 0) {
          QR.captcha.setup();
        }
        post.rm();
      }
      QR.cooldown.set({
        req: req,
        post: post,
        isReply: isReply,
        threadID: threadID
      });
      URL = threadID === postID ? Build.path(g.BOARD.ID, threadID) : g.VIEW === 'index' && !QR.cooldown.auto && Conf['Open Post in New Tab'] ? Build.path(g.BOARD.ID, threadID, postID) : void 0;
      if (URL) {
        if (Conf['Open Post in New Tab']) {
          $.open(URL);
        } else {
          window.location = URL;
        }
      }
      return QR.status();
    },
    abort: function() {
      if (QR.req && !QR.req.isUploadFinished) {
        QR.req.abort();
        delete QR.req;
        QR.posts[0].unlock();
        QR.cooldown.auto = false;
        QR.notifications.push(new Notice('info', 'QR upload aborted.', 5));
      }
      return QR.status();
    },
    mouseover: function(e) {
      var mouseover;
      mouseover = $.el('div', {
        id: 'mouseover',
        className: 'dialog'
      });
      $.add(Header.hover, mouseover);
      mouseover.innerHTML = this.nextElementSibling.innerHTML;
      UI.hover({
        root: this,
        el: mouseover,
        latestEvent: e,
        endEvents: 'mouseout',
        asapTest: function() {
          return true;
        },
        offsetX: 15,
        offsetY: -5
      });
    }
  };

  QR.captcha = {
    init: function() {
      var imgContainer, input;
      if (d.cookie.indexOf('pass_enabled=1') >= 0) {
        return;
      }
      if (!(this.isEnabled = !!$.id('captchaContainer'))) {
        return;
      }
      imgContainer = $.el('div', {
        className: 'captcha-img',
        title: 'Reload reCAPTCHA',
        innerHTML: '<div><img></div>'
      });
      input = $.el('input', {
        className: 'captcha-input field',
        title: 'Verification',
        autocomplete: 'off',
        spellcheck: false,
        tabIndex: 45
      });
      this.nodes = {
        img: imgContainer.firstChild.firstChild,
        input: input
      };
      $.on(input, 'blur', QR.focusout);
      $.on(input, 'focus', QR.focusin);
      $.on(input, 'keydown', QR.captcha.keydown.bind(QR.captcha));
      $.on(this.nodes.img.parentNode, 'click', QR.captcha.reload.bind(QR.captcha));
      $.addClass(QR.nodes.el, 'has-captcha');
      $.after(QR.nodes.com.parentNode, [imgContainer, input]);
      this.captchas = [];
      $.get('captchas', [], function(_arg) {
        var captchas;
        captchas = _arg.captchas;
        QR.captcha.sync(captchas);
        return QR.captcha.clear();
      });
      $.sync('captchas', this.sync);
      new MutationObserver(this.afterSetup).observe($.id('captchaContainer'), {
        childList: true
      });
      this.beforeSetup();
      return this.afterSetup();
    },
    beforeSetup: function() {
      var img, input, _ref;
      _ref = this.nodes, img = _ref.img, input = _ref.input;
      img.parentNode.parentNode.hidden = true;
      input.value = '';
      input.placeholder = 'Focus to load reCAPTCHA';
      this.count();
      return $.on(input, 'focus', this.setup);
    },
    setup: function() {
      return $.globalEval('loadRecaptcha()');
    },
    afterSetup: function() {
      var challenge, img, input, setLifetime, _ref;
      if (!(challenge = $.id('recaptcha_challenge_field_holder'))) {
        return;
      }
      if (challenge === QR.captcha.nodes.challenge) {
        return;
      }
      setLifetime = function(e) {
        return QR.captcha.lifetime = e.detail;
      };
      $.on(window, 'captcha:timeout', setLifetime);
      $.globalEval('window.dispatchEvent(new CustomEvent("captcha:timeout", {detail: RecaptchaState.timeout}))');
      $.off(window, 'captcha:timeout', setLifetime);
      _ref = QR.captcha.nodes, img = _ref.img, input = _ref.input;
      img.parentNode.parentNode.hidden = false;
      input.placeholder = 'Verification';
      QR.captcha.count();
      $.off(input, 'focus', QR.captcha.setup);
      QR.captcha.nodes.challenge = challenge;
      new MutationObserver(QR.captcha.load.bind(QR.captcha)).observe(challenge, {
        childList: true,
        subtree: true,
        attributes: true
      });
      return QR.captcha.load();
    },
    destroy: function() {
      $.globalEval('Recaptcha.destroy()');
      return this.beforeSetup();
    },
    sync: function(captchas) {
      QR.captcha.captchas = captchas;
      return QR.captcha.count();
    },
    getOne: function() {
      var captcha, challenge, response;
      this.clear();
      if (captcha = this.captchas.shift()) {
        challenge = captcha.challenge, response = captcha.response;
        this.count();
        $.set('captchas', this.captchas);
      } else {
        challenge = this.nodes.img.alt;
        if (response = this.nodes.input.value) {
          if (Conf['Auto-load captcha']) {
            this.reload();
          } else {
            this.destroy();
          }
        }
      }
      if (response) {
        response = response.trim();
        if (!/\s|^\d+$/.test(response)) {
          response = "" + response + " " + response;
        }
      }
      return {
        challenge: challenge,
        response: response
      };
    },
    save: function() {
      var response;
      if (!(response = this.nodes.input.value.trim())) {
        return;
      }
      this.nodes.input.value = '';
      this.captchas.push({
        challenge: this.nodes.img.alt,
        response: response,
        timeout: this.timeout
      });
      this.count();
      this.reload();
      return $.set('captchas', this.captchas);
    },
    clear: function() {
      var captcha, i, now, _i, _len, _ref;
      if (!this.captchas.length) {
        return;
      }
      now = Date.now();
      _ref = this.captchas;
      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
        captcha = _ref[i];
        if (captcha.timeout > now) {
          break;
        }
      }
      if (!i) {
        return;
      }
      this.captchas = this.captchas.slice(i);
      this.count();
      return $.set('captchas', this.captchas);
    },
    load: function() {
      var challenge, challenge_image;
      if (!this.nodes.challenge.firstChild) {
        return;
      }
      if (!(challenge_image = $.id('recaptcha_challenge_image'))) {
        return;
      }
      this.timeout = Date.now() + this.lifetime * $.SECOND - $.MINUTE;
      challenge = this.nodes.challenge.firstChild.value;
      this.nodes.img.alt = challenge;
      this.nodes.img.src = challenge_image.src;
      this.nodes.input.value = null;
      return this.clear();
    },
    count: function() {
      var count, placeholder;
      count = this.captchas ? this.captchas.length : 0;
      placeholder = this.nodes.input.placeholder.replace(/\ \(.*\)$/, '');
      placeholder += (function() {
        switch (count) {
          case 0:
            if (placeholder === 'Verification') {
              return ' (Shift + Enter to cache)';
            } else {
              return '';
            }
            break;
          case 1:
            return ' (1 cached captcha)';
          default:
            return " (" + count + " cached captchas)";
        }
      })();
      this.nodes.input.placeholder = placeholder;
      return this.nodes.input.alt = count;
    },
    reload: function(focus) {
      $.globalEval('Recaptcha.reload(); Recaptcha.should_focus = false;');
      if (focus) {
        return this.nodes.input.focus();
      }
    },
    keydown: function(e) {
      if (e.keyCode === 8 && !this.nodes.input.value) {
        this.reload();
      } else if (e.keyCode === 13 && e.shiftKey) {
        this.save();
      } else {
        return;
      }
      return e.preventDefault();
    }
  };

  QR.cooldown = {
    init: function() {
      var key, setTimers, type;
      if (!Conf['Cooldown']) {
        return;
      }
      setTimers = (function(_this) {
        return function(e) {
          return QR.cooldown.types = e.detail;
        };
      })(this);
      $.on(window, 'cooldown:timers', setTimers);
      $.globalEval('window.dispatchEvent(new CustomEvent("cooldown:timers", {detail: cooldowns}))');
      $.off(window, 'cooldown:timers', setTimers);
      for (type in QR.cooldown.types) {
        QR.cooldown.types[type] = +QR.cooldown.types[type];
      }
      key = "cooldown." + g.BOARD;
      $.get(key, {}, function(item) {
        QR.cooldown.cooldowns = item[key];
        return QR.cooldown.start();
      });
      return $.sync(key, QR.cooldown.sync);
    },
    start: function() {
      if (QR.cooldown.isCounting || !Object.keys(QR.cooldown.cooldowns).length) {
        return;
      }
      QR.cooldown.isCounting = true;
      return QR.cooldown.count();
    },
    sync: function(cooldowns) {
      var id;
      for (id in cooldowns) {
        QR.cooldown.cooldowns[id] = cooldowns[id];
      }
      return QR.cooldown.start();
    },
    set: function(data) {
      var cooldown, delay, isReply, post, req, start, threadID;
      if (!Conf['Cooldown']) {
        return;
      }
      req = data.req, post = data.post, isReply = data.isReply, threadID = data.threadID, delay = data.delay;
      start = req ? req.uploadEndTime : Date.now();
      if (delay) {
        cooldown = {
          delay: delay
        };
      } else {
        cooldown = {
          isReply: isReply,
          threadID: threadID
        };
      }
      QR.cooldown.cooldowns[start] = cooldown;
      $.set("cooldown." + g.BOARD, QR.cooldown.cooldowns);
      return QR.cooldown.start();
    },
    unset: function(id) {
      delete QR.cooldown.cooldowns[id];
      if (Object.keys(QR.cooldown.cooldowns).length) {
        return $.set("cooldown." + g.BOARD, QR.cooldown.cooldowns);
      } else {
        return $["delete"]("cooldown." + g.BOARD);
      }
    },
    count: function() {
      var cooldown, cooldowns, elapsed, hasFile, isReply, maxTimer, now, post, seconds, start, type, types, update, _ref;
      if (!Object.keys(QR.cooldown.cooldowns).length) {
        $["delete"]("cooldown." + g.BOARD);
        delete QR.cooldown.isCounting;
        delete QR.cooldown.seconds;
        QR.status();
        return;
      }
      clearTimeout(QR.cooldown.timeout);
      QR.cooldown.timeout = setTimeout(QR.cooldown.count, $.SECOND);
      now = Date.now();
      post = QR.posts[0];
      isReply = post.thread !== 'new';
      hasFile = !!post.file;
      seconds = null;
      _ref = QR.cooldown, types = _ref.types, cooldowns = _ref.cooldowns;
      for (start in cooldowns) {
        cooldown = cooldowns[start];
        start = +start;
        if ('delay' in cooldown) {
          if (cooldown.delay) {
            seconds = Math.max(seconds, cooldown.delay--);
          } else {
            seconds = Math.max(seconds, 0);
            QR.cooldown.unset(start);
          }
          continue;
        }
        if (isReply === cooldown.isReply) {
          elapsed = Math.floor((now - start) / $.SECOND);
          if (elapsed < 0) {
            QR.cooldown.unset(start);
            continue;
          }
          type = !isReply ? 'thread' : hasFile ? 'image' : 'reply';
          maxTimer = Math.max(types[type] || 0, types[type + '_intra'] || 0);
          if (!((start <= now && now <= start + maxTimer * $.SECOND))) {
            QR.cooldown.unset(start);
          }
          if (isReply && +post.thread === cooldown.threadID) {
            type += '_intra';
          }
          seconds = Math.max(seconds, types[type] - elapsed);
        }
      }
      update = seconds !== null || !!QR.cooldown.seconds;
      QR.cooldown.seconds = seconds;
      if (update) {
        QR.status();
      }
      if (seconds === 0 && QR.cooldown.auto && !QR.req) {
        return QR.submit();
      }
    }
  };

  QR.persona = {
    pwd: '',
    always: {},
    init: function() {
      QR.persona.getPassword();
      return $.get('QR.personas', Conf['QR.personas'], function(_arg) {
        var arr, item, personas, type, types, _i, _len, _ref;
        personas = _arg['QR.personas'];
        types = {
          name: [],
          email: [],
          sub: []
        };
        _ref = personas.split('\n');
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          item = _ref[_i];
          QR.persona.parseItem(item.trim(), types);
        }
        for (type in types) {
          arr = types[type];
          QR.persona.loadPersonas(type, arr);
        }
      });
    },
    parseItem: function(item, types) {
      var boards, match, type, val, _ref, _ref1, _ref2;
      if (item[0] === '#') {
        return;
      }
      if (!(match = item.match(/(name|options|email|subject|password):"(.*)"/i))) {
        return;
      }
      _ref = match, match = _ref[0], type = _ref[1], val = _ref[2];
      item = item.replace(match, '');
      boards = ((_ref1 = item.match(/boards:([^;]+)/i)) != null ? _ref1[1].toLowerCase() : void 0) || 'global';
      if (boards !== 'global' && (_ref2 = g.BOARD.ID, __indexOf.call(boards.split(','), _ref2) < 0)) {
        return;
      }
      if (type === 'password') {
        QR.persona.pwd = val;
        return;
      }
      if (type === 'options') {
        type = 'email';
      }
      if (type === 'subject') {
        type = 'sub';
      }
      if (/always/i.test(item)) {
        QR.persona.always[type] = val;
      }
      if (__indexOf.call(types[type], val) < 0) {
        return types[type].push(val);
      }
    },
    loadPersonas: function(type, arr) {
      var list, val, _i, _len;
      list = $("#list-" + type, QR.nodes.el);
      for (_i = 0, _len = arr.length; _i < _len; _i++) {
        val = arr[_i];
        if (val) {
          $.add(list, $.el('option', {
            textContent: val
          }));
        }
      }
    },
    getPassword: function() {
      var input, m;
      if (!QR.persona.pwd) {
        QR.persona.pwd = (m = d.cookie.match(/4chan_pass=([^;]+)/)) ? decodeURIComponent(m[1]) : (input = $.id('postPassword')) ? input.value : $.id('delPassword').value;
      }
      return QR.persona.pwd;
    },
    get: function(cb) {
      return $.get('QR.persona', {}, function(_arg) {
        var persona;
        persona = _arg['QR.persona'];
        return cb(persona);
      });
    },
    set: function(post) {
      return $.get('QR.persona', {}, function(_arg) {
        var persona;
        persona = _arg['QR.persona'];
        persona = {
          name: post.name,
          email: /^sage$/.test(post.email) ? persona.email : post.email,
          sub: Conf['Remember Subject'] ? post.sub : void 0,
          flag: post.flag
        };
        return $.set('QR.persona', persona);
      });
    }
  };

  QR.post = (function() {
    function _Class(select) {
      this.select = __bind(this.select, this);
      var el, elm, event, prev, _i, _j, _len, _len1, _ref, _ref1, _ref2;
      el = $.el('a', {
        className: 'qr-preview',
        draggable: true,
        href: 'javascript:;',
        innerHTML: '<a class="remove fa" title=Remove>\uf057</a><label hidden><input type=checkbox> Spoiler</label><span></span>'
      });
      this.nodes = {
        el: el,
        rm: el.firstChild,
        label: $('label', el),
        spoiler: $('input', el),
        span: el.lastChild
      };
      _ref = $$('*', el);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        elm = _ref[_i];
        $.on(elm, 'blur', QR.focusout);
        $.on(elm, 'focus', QR.focusin);
      }
      $.on(el, 'click', this.select);
      $.on(this.nodes.rm, 'click', (function(_this) {
        return function(e) {
          e.stopPropagation();
          return _this.rm();
        };
      })(this));
      $.on(this.nodes.label, 'click', (function(_this) {
        return function(e) {
          return e.stopPropagation();
        };
      })(this));
      $.on(this.nodes.spoiler, 'change', (function(_this) {
        return function(e) {
          _this.spoiler = e.target.checked;
          if (_this === QR.selected) {
            return QR.nodes.spoiler.checked = _this.spoiler;
          }
        };
      })(this));
      $.add(QR.nodes.dumpList, el);
      _ref1 = ['dragStart', 'dragEnter', 'dragLeave', 'dragOver', 'dragEnd', 'drop'];
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        event = _ref1[_j];
        $.on(el, event.toLowerCase(), this[event]);
      }
      this.thread = g.VIEW === 'thread' ? g.THREADID : 'new';
      _ref2 = QR.posts, prev = _ref2[_ref2.length - 1];
      QR.posts.push(this);
      this.nodes.spoiler.checked = this.spoiler = prev && Conf['Remember Spoiler'] ? prev.spoiler : false;
      QR.persona.get((function(_this) {
        return function(persona) {
          _this.name = 'name' in QR.persona.always ? QR.persona.always.name : prev ? prev.name : persona.name;
          _this.email = 'email' in QR.persona.always ? QR.persona.always.email : prev && !/^sage$/.test(prev.email) ? prev.email : persona.email;
          _this.sub = 'sub' in QR.persona.always ? QR.persona.always.sub : Conf['Remember Subject'] ? prev ? prev.sub : persona.sub : '';
          if (QR.nodes.flag) {
            _this.flag = prev ? prev.flag : persona.flag;
          }
          if (QR.selected === _this) {
            return _this.load();
          }
        };
      })(this));
      if (select) {
        this.select();
      }
      this.unlock();
    }

    _Class.prototype.rm = function() {
      var index;
      this["delete"]();
      index = QR.posts.indexOf(this);
      if (QR.posts.length === 1) {
        new QR.post(true);
        $.rmClass(QR.nodes.el, 'dump');
      } else if (this === QR.selected) {
        (QR.posts[index - 1] || QR.posts[index + 1]).select();
      }
      QR.posts.splice(index, 1);
      return QR.status();
    };

    _Class.prototype["delete"] = function() {
      $.rm(this.nodes.el);
      return URL.revokeObjectURL(this.URL);
    };

    _Class.prototype.lock = function(lock) {
      var name, node, _i, _len, _ref;
      if (lock == null) {
        lock = true;
      }
      this.isLocked = lock;
      if (this !== QR.selected) {
        return;
      }
      _ref = ['thread', 'name', 'email', 'sub', 'com', 'fileButton', 'filename', 'spoiler', 'flag'];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        name = _ref[_i];
        if (node = QR.nodes[name]) {
          node.disabled = lock;
        }
      }
      this.nodes.rm.style.visibility = lock ? 'hidden' : '';
      (lock ? $.off : $.on)(QR.nodes.filename.previousElementSibling, 'click', QR.openFileInput);
      this.nodes.spoiler.disabled = lock;
      return this.nodes.el.draggable = !lock;
    };

    _Class.prototype.unlock = function() {
      return this.lock(false);
    };

    _Class.prototype.select = function() {
      var rectEl, rectList;
      if (QR.selected) {
        QR.selected.nodes.el.id = null;
        QR.selected.forceSave();
      }
      QR.selected = this;
      this.lock(this.isLocked);
      this.nodes.el.id = 'selected';
      rectEl = this.nodes.el.getBoundingClientRect();
      rectList = this.nodes.el.parentNode.getBoundingClientRect();
      this.nodes.el.parentNode.scrollLeft += rectEl.left + rectEl.width / 2 - rectList.left - rectList.width / 2;
      return this.load();
    };

    _Class.prototype.load = function() {
      var name, node, _i, _len, _ref;
      _ref = ['thread', 'name', 'email', 'sub', 'com', 'filename', 'flag'];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        name = _ref[_i];
        if (!(node = QR.nodes[name])) {
          continue;
        }
        node.value = this[name] || node.dataset["default"] || null;
      }
      QR.tripcodeHider.call(QR.nodes['name']);
      this.showFileData();
      return QR.characterCount();
    };

    _Class.prototype.save = function(input) {
      var name, _ref;
      if (input.type === 'checkbox') {
        this.spoiler = input.checked;
        return;
      }
      name = input.dataset.name;
      this[name] = input.value || input.dataset["default"] || null;
      switch (name) {
        case 'thread':
          return QR.status();
        case 'com':
          this.nodes.span.textContent = this.com;
          QR.characterCount();
          if (QR.cooldown.auto && this === QR.posts[0] && (0 < (_ref = QR.cooldown.seconds) && _ref <= 5)) {
            return QR.cooldown.auto = false;
          }
          break;
        case 'filename':
          if (!this.file) {
            return;
          }
          this.file.newName = this.filename.replace(/[/\\]/g, '-');
          if (!/\.(jpe?g|png|gif|pdf|swf|webm)$/i.test(this.filename)) {
            this.file.newName += '.jpg';
          }
          return this.updateFilename();
      }
    };

    _Class.prototype.forceSave = function() {
      var name, node, _i, _len, _ref;
      if (this !== QR.selected) {
        return;
      }
      _ref = ['thread', 'name', 'email', 'sub', 'com', 'filename', 'spoiler', 'flag'];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        name = _ref[_i];
        if (!(node = QR.nodes[name])) {
          continue;
        }
        this.save(node);
      }
    };

    _Class.prototype.setFile = function(file) {
      this.file = file;
      this.filename = file.name;
      this.filesize = $.bytesToString(file.size);
      if (QR.spoiler) {
        this.nodes.label.hidden = false;
      }
      URL.revokeObjectURL(this.URL);
      if (this === QR.selected) {
        this.showFileData();
      } else {
        this.updateFilename();
      }
      if (!/^(image|video)\//.test(file.type)) {
        this.nodes.el.style.backgroundImage = null;
        return;
      }
      return this.setThumbnail();
    };

    _Class.prototype.setThumbnail = function() {
      var el, fileURL, isVideo;
      isVideo = /^video\//.test(this.file.type);
      el = $.el((isVideo ? 'video' : 'img'));
      $.on(el, (isVideo ? 'loadeddata' : 'load'), (function(_this) {
        return function() {
          var cv, error, errors, height, s, width, _i, _len;
          errors = _this.checkDimensions(el, isVideo);
          if (errors.length) {
            for (_i = 0, _len = errors.length; _i < _len; _i++) {
              error = errors[_i];
              QR.error(error);
            }
            _this.URL = fileURL;
            if ((QR.posts.length === 1) || (_this.com && _this.com.length)) {
              return _this.rmFile();
            } else {
              return _this.rm();
            }
          }
          s = 90 * 2 * window.devicePixelRatio;
          if (_this.file.type === 'image/gif') {
            s *= 3;
          }
          if (isVideo) {
            height = el.videoHeight;
            width = el.videoWidth;
          } else {
            height = el.height, width = el.width;
            if (height < s || width < s) {
              _this.URL = fileURL;
              _this.nodes.el.style.backgroundImage = "url(" + _this.URL + ")";
              return;
            }
          }
          if (height <= width) {
            width = s / height * width;
            height = s;
          } else {
            height = s / width * height;
            width = s;
          }
          cv = $.el('canvas');
          cv.height = el.height = height;
          cv.width = el.width = width;
          cv.getContext('2d').drawImage(el, 0, 0, width, height);
          URL.revokeObjectURL(fileURL);
          return cv.toBlob(function(blob) {
            _this.URL = URL.createObjectURL(blob);
            return _this.nodes.el.style.backgroundImage = "url(" + _this.URL + ")";
          });
        };
      })(this));
      fileURL = URL.createObjectURL(this.file);
      return el.src = fileURL;
    };

    _Class.prototype.checkDimensions = function(el, video) {
      var duration, err, height, max_height, max_width, videoHeight, videoWidth, width;
      err = [];
      if (video) {
        videoHeight = el.videoHeight, videoWidth = el.videoWidth, duration = el.duration;
        max_height = QR.max_height < QR.max_height_video ? QR.max_height : QR.max_height_video;
        max_width = QR.max_width < QR.max_width_video ? QR.max_width : QR.max_width_video;
        if (videoHeight > max_height || videoWidth > max_width) {
          err.push("" + this.file.name + ": Video too large (video: " + videoHeight + "x" + videoWidth + "px, max: " + max_height + "x" + max_width + "px)");
        }
        if (videoHeight < QR.min_height || videoWidth < QR.min_width) {
          err.push("" + this.file.name + ": Video too small (video: " + videoHeight + "x" + videoWidth + "px, min: " + QR.min_height + "x" + QR.min_width + "px)");
        }
        if (!isFinite(el.duration)) {
          err.push("" + file.name + ": Video lacks duration metadata (try remuxing)");
        }
        if (duration > QR.max_duration_video) {
          err.push("" + this.file.name + ": Video too long (video: " + duration + "s, max: " + QR.max_duration_video + "s)");
        }
        if (el.mozHasAudio) {
          err.push("" + file.name + ": Audio not allowed");
        }
      } else {
        height = el.height, width = el.width;
        if (height > QR.max_height || width > QR.max_width) {
          err.push("" + this.file.name + ": Image too large (image: " + height + "x" + width + "px, max: " + QR.max_height + "x" + QR.max_width + "px)");
        }
        if (height < QR.min_height || width < QR.min_width) {
          err.push("" + this.file.name + ": Image too small (image: " + height + "x" + width + "px, min: " + QR.min_height + "x" + QR.min_width + "px)");
        }
      }
      return err;
    };

    _Class.prototype.rmFile = function() {
      if (this.isLocked) {
        return;
      }
      delete this.file;
      delete this.filename;
      delete this.filesize;
      this.nodes.el.title = null;
      QR.nodes.fileContainer.title = '';
      this.nodes.el.style.backgroundImage = null;
      if (QR.spoiler) {
        this.nodes.label.hidden = true;
      }
      this.showFileData();
      return URL.revokeObjectURL(this.URL);
    };

    _Class.prototype.updateFilename = function() {
      var title;
      title = "" + this.filename + " (" + this.filesize + ")\nCtrl+click to edit filename. Shift+click to clear.";
      this.nodes.el.title = title;
      if (this !== QR.selected) {
        return;
      }
      return QR.nodes.fileContainer.title = title;
    };

    _Class.prototype.showFileData = function() {
      if (this.file) {
        this.updateFilename();
        QR.nodes.filename.value = this.filename;
        QR.nodes.spoiler.checked = this.spoiler;
        return $.addClass(QR.nodes.fileSubmit, 'has-file');
      } else {
        return $.rmClass(QR.nodes.fileSubmit, 'has-file');
      }
    };

    _Class.prototype.pasteText = function(file) {
      var reader;
      reader = new FileReader();
      reader.onload = (function(_this) {
        return function(e) {
          var text;
          text = e.target.result;
          if (_this.com) {
            _this.com += "\n" + text;
          } else {
            _this.com = text;
          }
          if (QR.selected === _this) {
            QR.nodes.com.value = _this.com;
          }
          return _this.nodes.span.textContent = _this.com;
        };
      })(this);
      return reader.readAsText(file);
    };

    _Class.prototype.dragStart = function(e) {
      e.dataTransfer.setDragImage(this, e.layerX, e.layerY);
      return $.addClass(this, 'drag');
    };

    _Class.prototype.dragEnd = function() {
      return $.rmClass(this, 'drag');
    };

    _Class.prototype.dragEnter = function() {
      return $.addClass(this, 'over');
    };

    _Class.prototype.dragLeave = function() {
      return $.rmClass(this, 'over');
    };

    _Class.prototype.dragOver = function(e) {
      e.preventDefault();
      return e.dataTransfer.dropEffect = 'move';
    };

    _Class.prototype.drop = function() {
      var el, index, newIndex, oldIndex, post;
      $.rmClass(this, 'over');
      if (!this.draggable) {
        return;
      }
      el = $('.drag', this.parentNode);
      index = function(el) {
        return __slice.call(el.parentNode.children).indexOf(el);
      };
      oldIndex = index(el);
      newIndex = index(this);
      (oldIndex < newIndex ? $.after : $.before)(this, el);
      post = QR.posts.splice(oldIndex, 1)[0];
      QR.posts.splice(newIndex, 0, post);
      return QR.status();
    };

    return _Class;

  })();

  FappeTyme = {
    init: function() {
      var el, lc, type, _i, _len, _ref;
      if (!(Conf['Fappe Tyme'] || Conf['Werk Tyme']) || g.BOARD.ID === 'f') {
        return;
      }
      _ref = ["Fappe", "Werk"];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        type = _ref[_i];
        if (!Conf["" + type + " Tyme"]) {
          continue;
        }
        lc = type.toLowerCase();
        FappeTyme[lc] = el = $.el('a', {
          href: 'javascript:;',
          id: "" + lc + "Tyme",
          title: "" + type + " Tyme",
          className: 'a-icon'
        });
        if (type === 'Werk') {
          el.textContent = '\uf0b1';
          el.className = 'fa';
        }
        $.on(el, 'click', FappeTyme.cb.toggle.bind({
          name: "" + lc
        }));
        Header.addShortcut(el, true);
        FappeTyme.cb.set(lc);
      }
      return Post.callbacks.push({
        name: 'Fappe Tyme',
        cb: this.node
      });
    },
    node: function() {
      if (this.file) {
        return;
      }
      return $.addClass(this.nodes.root, "noFile");
    },
    cb: {
      set: function(type) {
        return $["" + (Conf[type] ? 'add' : 'rm') + "Class"](doc, "" + type + "Tyme");
      },
      toggle: function() {
        Conf[this.name] = !Conf[this.name];
        FappeTyme.cb.set(this.name);
        return $.cb.checked.call({
          name: this.name,
          checked: Conf[this.name]
        });
      }
    }
  };

  Gallery = {
    init: function() {
      var el;
      if (g.BOARD === 'f' || !Conf['Gallery']) {
        return;
      }
      el = $.el('a', {
        href: 'javascript:;',
        id: 'appchan-gal',
        title: 'Gallery',
        className: 'fa',
        textContent: '\uf03e'
      });
      $.on(el, 'click', this.cb.toggle);
      Header.addShortcut(el, true);
      return Post.callbacks.push({
        name: 'Gallery',
        cb: this.node
      });
    },
    node: function() {
      if (!this.file) {
        return;
      }
      if (Gallery.nodes) {
        Gallery.generateThumb($('.file', this.nodes.root));
        Gallery.nodes.total.textContent = Gallery.images.length;
      }
      if (!Conf['Image Expansion']) {
        return $.on(this.file.thumb.parentNode, 'click', Gallery.cb.image);
      }
    },
    build: function(image) {
      var cb, createSubEntry, dialog, el, file, i, key, menuButton, name, nodes, value, _i, _len, _ref, _ref1;
      Gallery.images = [];
      nodes = Gallery.nodes = {};
      nodes.el = dialog = $.el('div', {
        id: 'a-gallery',
        innerHTML: "<div class=gal-viewport>\n  <span class=gal-buttons>\n    <a class=\"menu-button\" href=\"javascript:;\"><i></i></a>\n    <a href=javascript:; class=gal-close>×</a>\n  </span>\n  <a class=gal-name target=\"_blank\"></a>\n  <span class=gal-count>\n    <span class='count'></span> / <span class='total'></span>\n  </span>\n  <div class=gal-prev></div>\n  <div class=gal-image>\n    <a href=javascript:;><img></a>\n  </div>\n  <div class=gal-next></div>\n</div>\n<div class=gal-thumbnails></div>"
      });
      _ref = {
        frame: '.gal-image',
        name: '.gal-name',
        count: '.count',
        total: '.total',
        thumbs: '.gal-thumbnails',
        next: '.gal-image a',
        current: '.gal-image img'
      };
      for (key in _ref) {
        value = _ref[key];
        nodes[key] = $(value, dialog);
      }
      menuButton = $('.menu-button', dialog);
      nodes.menu = new UI.Menu();
      cb = Gallery.cb;
      $.on(nodes.frame, 'click', cb.blank);
      $.on(nodes.next, 'click', cb.advance);
      $.on($('.gal-prev', dialog), 'click', cb.prev);
      $.on($('.gal-next', dialog), 'click', cb.next);
      $.on($('.gal-close', dialog), 'click', cb.close);
      $.on(menuButton, 'click', function(e) {
        return nodes.menu.toggle(e, this, g);
      });
      createSubEntry = Gallery.menu.createSubEntry;
      for (name in Config.gallery) {
        el = createSubEntry(name).el;
        nodes.menu.addEntry({
          el: el,
          order: 0
        });
      }
      $.on(d, 'keydown', cb.keybinds);
      $.off(d, 'keydown', Keybinds.keydown);
      _ref1 = $$('.post .file');
      for (i = _i = 0, _len = _ref1.length; _i < _len; i = ++_i) {
        file = _ref1[i];
        if (!$('.fileDeletedRes, .fileDeleted', file)) {
          Gallery.generateThumb(file);
        }
      }
      $.add(d.body, dialog);
      nodes.thumbs.scrollTop = 0;
      nodes.current.parentElement.scrollTop = 0;
      Gallery.cb.open.call(image ? $("[href*='" + image.pathname + "']", nodes.thumbs) : Gallery.images[0]);
      d.body.style.overflow = 'hidden';
      return nodes.total.textContent = i;
    },
    generateThumb: function(file) {
      var post, thumb, thumbImg, title;
      post = Get.postFromNode(file);
      if (!(post.file && (post.file.isImage || post.file.isVideo || Conf['PDF in Gallery']))) {
        return;
      }
      title = ($('.fileText a', file)).textContent;
      thumb = $.el('a', {
        className: 'gal-thumb',
        href: post.file.URL,
        target: '_blank',
        title: title
      });
      thumb.dataset.id = Gallery.images.length;
      thumb.dataset.post = post.fullID;
      if (post.file.isVideo) {
        thumb.dataset.isVideo = true;
      }
      thumbImg = post.file.thumb.cloneNode(false);
      thumbImg.style.cssText = '';
      $.add(thumb, thumbImg);
      $.on(thumb, 'click', Gallery.cb.open);
      Gallery.images.push(thumb);
      return $.add(Gallery.nodes.thumbs, thumb);
    },
    cb: {
      keybinds: function(e) {
        var cb, key;
        if (!(key = Keybinds.keyCode(e))) {
          return;
        }
        cb = (function() {
          switch (key) {
            case 'Esc':
            case Conf['Open Gallery']:
              return Gallery.cb.close;
            case 'Right':
              return Gallery.cb.next;
            case 'Enter':
              return Gallery.cb.advance;
            case 'Left':
            case '':
              return Gallery.cb.prev;
          }
        })();
        if (!cb) {
          return;
        }
        e.stopPropagation();
        e.preventDefault();
        return cb();
      },
      open: function(e) {
        var el, elType, file, name, nodes, post, rect, top, _base, _ref;
        if (e) {
          e.preventDefault();
        }
        if (!this) {
          return;
        }
        nodes = Gallery.nodes;
        name = nodes.name;
        if (el = $('.gal-highlight', nodes.thumbs)) {
          $.rmClass(el, 'gal-highlight');
        }
        $.addClass(this, 'gal-highlight');
        elType = this.dataset.isVideo ? 'video' : /\.pdf$/.test(this.href) ? 'iframe' : 'img';
        $[elType === 'iframe' ? 'addClass' : 'rmClass'](nodes.el, 'gal-pdf');
        file = $.el(elType, {
          src: name.href = this.href,
          title: name.download = name.textContent = this.title
        });
        $.extend(file.dataset, this.dataset);
        if (typeof (_base = nodes.current).pause === "function") {
          _base.pause();
        }
        $.replace(nodes.current, file);
        if (this.dataset.isVideo) {
          Video.configure(file);
        }
        nodes.count.textContent = +this.dataset.id + 1;
        nodes.current = file;
        nodes.frame.scrollTop = 0;
        nodes.next.focus();
        if (Conf['Scroll to Post'] && (post = (_ref = (post = g.posts[file.dataset.post])) != null ? _ref.nodes.root : void 0)) {
          Header.scrollTo(post);
        }
        $.on(file, 'error', function() {
          return Gallery.cb.error(file, thumb);
        });
        rect = this.getBoundingClientRect();
        top = rect.top;
        if (top > 0) {
          top += rect.height - doc.clientHeight;
          if (top < 0) {
            return;
          }
        }
        return nodes.thumbs.scrollTop += top;
      },
      image: function(e) {
        e.preventDefault();
        e.stopPropagation();
        return Gallery.build(this);
      },
      error: function(img, thumb) {
        var URL, post, src;
        post = Get.postFromLink($.el('a', {
          href: img.dataset.post
        }));
        delete post.file.fullImage;
        src = this.src.split('/');
        if (src[2] === 'i.4cdn.org') {
          URL = Redirect.to('file', {
            boardID: src[3],
            filename: src[src.length - 1]
          });
          if (URL) {
            thumb.href = URL;
            if (Gallery.nodes.current !== img) {
              return;
            }
            img.src = URL;
            return;
          }
          if (g.DEAD || post.isDead || post.file.isDead) {
            return;
          }
        }
        return $.ajax("//a.4cdn.org/" + post.board + "/thread/" + post.thread + ".json", {
          onload: function() {
            var i, postObj, posts;
            if (this.status !== 200) {
              return;
            }
            i = 0;
            posts = this.response.posts;
            while (postObj = posts[i++]) {
              if (postObj.no === post.ID) {
                break;
              }
            }
            if (!postObj.no) {
              return post.kill();
            }
            if (postObj.filedeleted) {
              return post.kill(true);
            }
          }
        });
      },
      prev: function() {
        return Gallery.cb.open.call(Gallery.images[+Gallery.nodes.current.dataset.id - 1] || Gallery.images[Gallery.images.length - 1]);
      },
      next: function() {
        return Gallery.cb.open.call(Gallery.images[+Gallery.nodes.current.dataset.id + 1] || Gallery.images[0]);
      },
      toggle: function() {
        return (Gallery.nodes ? Gallery.cb.close : Gallery.build)();
      },
      blank: function(e) {
        if (e.target === this) {
          return Gallery.cb.close();
        }
      },
      advance: function() {
        if (Gallery.nodes.current.controls) {
          return;
        }
        if (Gallery.nodes.current.paused) {
          return Gallery.nodes.current.play();
        }
        return Gallery.cb.next();
      },
      pause: function() {
        var current;
        current = Gallery.nodes.current;
        if (current.nodeType === 'VIDEO') {
          return current[current.paused ? 'play' : 'pause']();
        }
      },
      close: function() {
        var _base;
        if (typeof (_base = Gallery.nodes.current).pause === "function") {
          _base.pause();
        }
        $.rm(Gallery.nodes.el);
        delete Gallery.nodes;
        d.body.style.overflow = '';
        $.off(d, 'keydown', Gallery.cb.keybinds);
        return $.on(d, 'keydown', Keybinds.keydown);
      },
      setFitness: function() {
        return (this.checked ? $.addClass : $.rmClass)(doc, "gal-" + (this.name.toLowerCase().replace(/\s+/g, '-')));
      }
    },
    menu: {
      init: function() {
        var createSubEntry, el, name, subEntries;
        if (!Conf['Gallery']) {
          return;
        }
        el = $.el('span', {
          textContent: 'Gallery',
          className: 'gallery-link'
        });
        createSubEntry = Gallery.menu.createSubEntry;
        subEntries = [];
        for (name in Config.gallery) {
          subEntries.push(createSubEntry(name));
        }
        return Header.menu.addEntry({
          el: el,
          order: 105,
          subEntries: subEntries
        });
      },
      createSubEntry: function(name) {
        var input, label;
        label = $.el('label', {
          innerHTML: "<input type=checkbox name='" + name + "'> " + name
        });
        input = label.firstElementChild;
        if (name === 'Fit Width' || name === 'Fit Height' || name === 'Hide Thumbnails') {
          $.on(input, 'change', Gallery.cb.setFitness);
        }
        input.checked = Conf[name];
        $.event('change', null, input);
        $.on(input, 'change', $.cb.checked);
        return {
          el: label
        };
      }
    }
  };

  ImageExpand = {
    init: function() {
      if (g.VIEW === 'catalog' || !Conf['Image Expansion']) {
        return;
      }
      this.EAI = $.el('a', {
        id: 'img-controls',
        className: 'expand-all-shortcut a-icon',
        title: 'Expand All Images',
        href: 'javascript:;'
      });
      $.on(this.EAI, 'click', ImageExpand.cb.toggleAll);
      Header.addShortcut(this.EAI, true);
      return Post.callbacks.push({
        name: 'Image Expansion',
        cb: this.node
      });
    },
    node: function() {
      var clone, thumb, _ref, _ref1;
      if (!(((_ref = this.file) != null ? _ref.isImage : void 0) || ((_ref1 = this.file) != null ? _ref1.isVideo : void 0))) {
        return;
      }
      thumb = this.file.thumb;
      $.on(thumb.parentNode, 'click', ImageExpand.cb.toggle);
      if (this.isClone) {
        if ($.hasClass(thumb, 'expanding')) {
          ImageExpand.contract(this);
          ImageExpand.expand(this);
        } else if (this.file.isExpanded && this.file.isVideo) {
          clone = this;
          ImageExpand.setupVideoControls(clone);
          if (!clone.origin.file.fullImage.paused) {
            $.queueTask(function() {
              return Video.start(clone.file.fullImage);
            });
          }
        }
      } else if (ImageExpand.on && !this.isHidden && (Conf['Expand spoilers'] || !this.file.isSpoiler) && (Conf['Expand videos'] || !this.file.isVideo)) {
        return ImageExpand.expand(this, null, true);
      }
    },
    cb: {
      toggle: function(e) {
        var post, _ref;
        if (e.shiftKey || e.altKey || e.ctrlKey || e.metaKey || e.button !== 0) {
          return;
        }
        post = Get.postFromNode(this);
        if (post.file.isExpanded && ((_ref = post.file.fullImage) != null ? _ref.controls : void 0)) {
          return;
        }
        e.preventDefault();
        return ImageExpand.toggle(post);
      },
      toggleAll: function() {
        var func, toggle;
        $.event('CloseMenu');
        toggle = function(post) {
          var file;
          file = post.file;
          if (!(file && (file.isImage || file.isVideo) && doc.contains(post.nodes.root))) {
            return;
          }
          if (ImageExpand.on && (!Conf['Expand spoilers'] && file.isSpoiler || !Conf['Expand videos'] && file.isVideo || Conf['Expand from here'] && Header.getTopOf(file.thumb) < 0)) {
            return;
          }
          return $.queueTask(func, post);
        };
        if (ImageExpand.on = $.hasClass(ImageExpand.EAI, 'expand-all-shortcut')) {
          ImageExpand.EAI.className = 'contract-all-shortcut a-icon';
          ImageExpand.EAI.title = 'Contract All Images';
          func = function(post) {
            return ImageExpand.expand(post, null, true);
          };
        } else {
          ImageExpand.EAI.className = 'expand-all-shortcut a-icon';
          ImageExpand.EAI.title = 'Expand All Images';
          func = ImageExpand.contract;
        }
        return g.posts.forEach(function(post) {
          var _i, _len, _ref;
          _ref = [post].concat(__slice.call(post.clones));
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            post = _ref[_i];
            toggle(post);
          }
        });
      },
      setFitness: function() {
        return (this.checked ? $.addClass : $.rmClass)(doc, this.name.toLowerCase().replace(/\s+/g, '-'));
      }
    },
    toggle: function(post) {
      var headRect, left, root, top, x, y, _ref;
      if (!(post.file.isExpanded || $.hasClass(post.file.thumb, 'expanding'))) {
        ImageExpand.expand(post);
        return;
      }
      root = post.nodes.root;
      _ref = (Conf['Advance on contract'] ? (function() {
        var next;
        next = root;
        while (next = $.x("following::div[contains(@class,'postContainer')][1]", next)) {
          if ($('.stub', next) || next.offsetHeight === 0) {
            continue;
          }
          return next;
        }
        return root;
      })() : root).getBoundingClientRect(), top = _ref.top, left = _ref.left;
      if (top < 0) {
        y = top;
        if (Conf['Fixed Header'] && !Conf['Bottom Header']) {
          headRect = Header.bar.getBoundingClientRect();
          y -= headRect.top + headRect.height;
        }
      }
      if (left < 0) {
        x = -window.scrollX;
      }
      if (x || y) {
        window.scrollBy(x, y);
      }
      return ImageExpand.contract(post);
    },
    contract: function(post) {
      var cb, eventName, thumb, video, _ref;
      thumb = post.file.thumb;
      if (post.file.isVideo && (video = post.file.fullImage)) {
        video.pause();
        TrashQueue.add(video, post);
        thumb.parentNode.href = video.src;
        thumb.parentNode.target = '_blank';
        _ref = ImageExpand.videoCB;
        for (eventName in _ref) {
          cb = _ref[eventName];
          $.off(video, eventName, cb);
        }
        $.rm(post.file.videoControls);
        delete post.file.videoControls;
      }
      $.rmClass(post.nodes.root, 'expanded-image');
      $.rmClass(post.file.thumb, 'expanding');
      delete post.file.isExpanding;
      delete post.file.isExpanded;
      if (post.file.isVideo && post.file.fullImage) {
        return post.file.fullImage.pause();
      }
    },
    expand: function(post, src, disableAutoplay) {
      var el, isVideo, thumb, _ref;
      _ref = post.file, thumb = _ref.thumb, isVideo = _ref.isVideo;
      if (post.isHidden || post.file.isExpanded || $.hasClass(thumb, 'expanding')) {
        return;
      }
      $.addClass(thumb, 'expanding');
      if (el = post.file.fullImage) {
        el.className = 'full-image';
        el.style.cssText = '';
        TrashQueue.remove(el);
      } else {
        el = post.file.fullImage = $.el((isVideo ? 'video' : 'img'), {
          className: 'full-image'
        });
        $.on(el, 'error', ImageExpand.error);
        el.src = src || post.file.URL;
        if (isVideo) {
          el.loop = true;
        }
      }
      if (el !== thumb.nextSibling) {
        $.after(thumb, el);
      }
      return $.asap((function() {
        return el.videoHeight || el.naturalHeight;
      }), function() {
        return ImageExpand.completeExpand(post, disableAutoplay);
      });
    },
    completeExpand: function(post, disableAutoplay) {
      var bottom;
      if (!$.hasClass(post.file.thumb, 'expanding')) {
        return;
      }
      if (!post.nodes.root.parentNode) {
        ImageExpand.completeExpand2(post);
        return;
      }
      bottom = post.nodes.root.getBoundingClientRect().bottom;
      return $.queueTask(function() {
        ImageExpand.completeExpand2(post, disableAutoplay);
        if (!(bottom <= 0)) {
          return;
        }
        return window.scrollBy(0, post.nodes.root.getBoundingClientRect().bottom - bottom);
      });
    },
    completeExpand2: function(post, disableAutoplay) {
      $.addClass(post.nodes.root, 'expanded-image');
      $.rmClass(post.file.thumb, 'expanding');
      post.file.isExpanded = true;
      if (post.file.isVideo) {
        ImageExpand.setupVideoControls(post);
        return Video.configure(post.file.fullImage, disableAutoplay);
      }
    },
    videoCB: (function() {
      var mousedown;
      mousedown = false;
      return {
        mouseover: function() {
          return mousedown = false;
        },
        mousedown: function(e) {
          if (e.button === 0) {
            return mousedown = true;
          }
        },
        mouseup: function(e) {
          if (e.button === 0) {
            return mousedown = false;
          }
        },
        mouseout: function(e) {
          if (mousedown && e.clientX <= this.getBoundingClientRect().left) {
            return ImageExpand.contract(Get.postFromNode(this));
          }
        },
        click: function(e) {
          if (this.paused && !this.controls) {
            this.play();
            return e.preventDefault();
          }
        }
      };
    })(),
    setupVideoControls: function(post) {
      var cb, contract, eventName, file, thumb, video, _ref;
      file = post.file;
      thumb = file.thumb;
      video = file.fullImage;
      file.thumb.parentNode.removeAttribute('href');
      file.thumb.parentNode.removeAttribute('target');
      _ref = ImageExpand.videoCB;
      for (eventName in _ref) {
        cb = _ref[eventName];
        $.on(video, eventName, cb);
      }
      file.videoControls = $.el('span', {
        className: 'video-controls'
      });
      if (Conf['Show Controls']) {
        contract = $.el('a', {
          textContent: 'contract',
          href: 'javascript:;',
          title: 'You can also contract the video by dragging it to the left.'
        });
        $.on(contract, 'click', function(e) {
          return ImageExpand.contract(post);
        });
        $.add(file.videoControls, [$.tn('\u00A0'), contract]);
      }
      return $.add(file.text, file.videoControls);
    },
    error: function() {
      var URL, error, post, src, timeoutID;
      post = Get.postFromNode(this);
      $.rm(this);
      delete post.file.isReady;
      delete post.file.fullImage;
      if (!($.hasClass(post.file.thumb, 'expanding') || $.hasClass(post.nodes.root, 'expanded-image'))) {
        return;
      }
      ImageExpand.contract(post);
      if (this.error && this.error.code !== this.error.MEDIA_ERR_NETWORK) {
        error = (function() {
          switch (this.error.code) {
            case 1:
              return 'MEDIA_ERR_ABORTED';
            case 3:
              return 'MEDIA_ERR_DECODE';
            case 4:
              return 'MEDIA_ERR_SRC_NOT_SUPPORTED';
            case 5:
              return 'MEDIA_ERR_ENCRYPTED';
          }
        }).call(this);
        post.file.error = $.el('div', {
          textContent: "Playback error: " + error,
          className: 'warning'
        });
        $.after(post.file.thumb, post.file.error);
        return;
      }
      src = this.src.split('/');
      if (src[2] === 'i.4cdn.org') {
        URL = Redirect.to('file', {
          boardID: src[3],
          filename: src[4].replace(/\?.+$/, '')
        });
        if (URL) {
          setTimeout(ImageExpand.expand, 10000, post, URL);
          return;
        }
        if (g.DEAD || post.isDead || post.file.isDead) {
          return;
        }
      }
      timeoutID = setTimeout(ImageExpand.expand, 10000, post);
      return $.ajax("//a.4cdn.org/" + post.board + "/thread/" + post.thread + ".json", {
        onload: function() {
          var postObj, _i, _len, _ref;
          if (this.status !== 200) {
            return;
          }
          _ref = this.response.posts;
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            postObj = _ref[_i];
            if (postObj.no === post.ID) {
              break;
            }
          }
          if (postObj.no !== post.ID) {
            clearTimeout(timeoutID);
            return post.kill();
          } else if (postObj.filedeleted) {
            clearTimeout(timeoutID);
            return post.kill(true);
          }
        }
      });
    },
    menu: {
      init: function() {
        var conf, createSubEntry, el, name, subEntries, _ref;
        if (g.VIEW === 'catalog' || !Conf['Image Expansion']) {
          return;
        }
        el = $.el('span', {
          textContent: 'Image Expansion',
          className: 'image-expansion-link'
        });
        createSubEntry = ImageExpand.menu.createSubEntry;
        subEntries = [];
        _ref = Config.imageExpansion;
        for (name in _ref) {
          conf = _ref[name];
          subEntries.push(createSubEntry(name, conf[1]));
        }
        return Header.menu.addEntry({
          el: el,
          order: 105,
          subEntries: subEntries
        });
      },
      createSubEntry: function(name, desc) {
        var input, label;
        label = $.el('label', {
          innerHTML: "<input type=checkbox name='" + name + "'> " + name,
          title: desc
        });
        input = label.firstElementChild;
        if (name === 'Fit width' || name === 'Fit height') {
          $.on(input, 'change', ImageExpand.cb.setFitness);
        }
        input.checked = Conf[name];
        $.event('change', null, input);
        $.on(input, 'change', $.cb.checked);
        return {
          el: label
        };
      }
    }
  };

  ImageHover = {
    init: function() {
      if (Conf['Image Hover']) {
        Post.callbacks.push({
          name: 'Image Hover',
          cb: this.node
        });
      }
      if (Conf['Image Hover in Catalog']) {
        return CatalogThread.callbacks.push({
          name: 'Image Hover',
          cb: this.catalogNode
        });
      }
    },
    node: function() {
      var _ref, _ref1;
      if (!(((_ref = this.file) != null ? _ref.isImage : void 0) || ((_ref1 = this.file) != null ? _ref1.isVideo : void 0))) {
        return;
      }
      return $.on(this.file.thumb, 'mouseover', ImageHover.mouseover);
    },
    catalogNode: function() {
      var file;
      if (!((file = this.thread.OP.file) && (file.isImage || file.isVideo))) {
        return;
      }
      return $.on(this.nodes.thumb, 'mouseover', ImageHover.mouseover);
    },
    mouseover: function(e) {
      var el, isVideo, post, thumb;
      post = $.hasClass(this, 'thumb') ? g.posts[this.parentNode.dataset.fullID] : Get.postFromNode(this);
      isVideo = post.file.isVideo;
      el = $.el((isVideo ? 'video' : 'img'), {
        src: post.file.URL
      });
      thumb = post.file.thumb;
      if (d.body.contains(thumb)) {
        if (el !== thumb.nextSibling) {
          $.after(thumb, el);
        }
      } else {
        if (el.parentNode !== Header.hover) {
          $.add(Header.hover, el);
        }
      }
      el.id = 'ihover';
      el.dataset.fullID = post.fullID;
      if (isVideo) {
        el.loop = true;
        el.controls = false;
        el.muted = !Conf['Allow Sound'];
        if (Conf['Autoplay']) {
          el.play();
        }
      }
      UI.hover({
        root: this,
        el: el,
        latestEvent: e,
        endEvents: 'mouseout click',
        asapTest: post.file.isImage ? function() {
          return el.naturalHeight;
        } : function() {
          return el.readyState >= el.HAVE_CURRENT_DATA;
        },
        cb: function() {
          if (isVideo) {
            el.pause();
            TrashQueue.add(el, post);
          }
          return el.removeAttribute('id');
        }
      });
      return $.on(el, 'error', ImageHover.error);
    },
    error: function() {
      var URL, post, src, timeoutID;
      if (!doc.contains(this)) {
        return;
      }
      post = g.posts[this.dataset.fullID];
      src = this.src.split('/');
      if (src[2] === 'i.4cdn.org') {
        URL = Redirect.to('file', {
          boardID: src[3],
          filename: src[4].replace(/\?.+$/, '')
        });
        if (URL) {
          this.src = URL;
          return;
        }
        if (g.DEAD || post.isDead || post.file.isDead) {
          return;
        }
      }
      timeoutID = setTimeout(((function(_this) {
        return function() {
          return _this.src = post.file.URL + '?' + Date.now();
        };
      })(this)), 3000);
      return $.ajax("//a.4cdn.org/" + post.board + "/thread/" + post.thread + ".json", {
        onload: function() {
          var postObj, _i, _len, _ref;
          if (this.status !== 200) {
            return;
          }
          _ref = this.response.posts;
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            postObj = _ref[_i];
            if (postObj.no === post.ID) {
              break;
            }
          }
          if (postObj.no !== post.ID) {
            clearTimeout(timeoutID);
            return post.kill();
          } else if (postObj.filedeleted) {
            clearTimeout(timeoutID);
            return post.kill(true);
          }
        }
      });
    }
  };

  ImageLoader = {
    init: function() {
      var prefetch;
      if (!(Conf["Image Prefetching"] || Conf["Replace JPG"] || Conf["Replace PNG"] || Conf["Replace GIF"] || Conf["Replace WEBM"])) {
        return;
      }
      Post.callbacks.push({
        name: 'Image Replace',
        cb: this.node
      });
      Thread.callbacks.push({
        name: 'Image Replace',
        cb: this.thread
      });
      prefetch = $.el('label', {
        innerHTML: '<input type=checkbox name="prefetch"> Prefetch Images'
      });
      this.el = prefetch.firstElementChild;
      $.on(this.el, 'change', this.toggle);
      return Header.menu.addEntry({
        el: prefetch,
        order: 104
      });
    },
    thread: function() {
      return ImageLoader.thread = this;
    },
    node: function() {
      var URL, cb, file, isImage, isVideo, match, replace, style, thumb, type, _ref, _ref1;
      if (!this.file) {
        return;
      }
      _ref = this.file, isImage = _ref.isImage, isVideo = _ref.isVideo;
      if (this.isClone || this.isHidden || this.thread.isHidden || !(isImage || isVideo)) {
        return;
      }
      _ref1 = this.file, thumb = _ref1.thumb, URL = _ref1.URL;
      style = thumb.style;
      type = (match = URL.match(/\.([^.]+)$/)[1].toUpperCase()) === 'JPEG' ? 'JPG' : match;
      replace = "Replace " + type;
      if (!((Conf[replace] && !/spoiler/.test(thumb.src)) || (Conf['prefetch'] && g.VIEW === 'thread'))) {
        return;
      }
      if (this.file.isSpoiler) {
        style.maxHeight = style.maxWidth = this.isReply ? '125px' : '250px';
      }
      file = $.el(isImage ? 'img' : 'video');
      if (Conf[replace]) {
        if (isVideo) {
          file.alt = thumb.alt;
          file.dataset.md5 = thumb.dataset.md5;
          file.style.height = style.height;
          file.style.width = style.width;
          file.style.maxHeight = style.maxHeight;
          file.style.maxWidth = style.maxWidth;
          file.loop = true;
          file.autoplay = Conf['Autoplay'];
          if (Conf['Image Hover']) {
            $.on(file, 'mouseover', ImageHover.mouseover);
          }
        }
        cb = (function(_this) {
          return function() {
            $.off(file, 'load loadedmetadata', cb);
            if (isVideo) {
              $.replace(thumb, file);
              _this.file.thumb = file;
              return;
            }
            return thumb.src = URL;
          };
        })(this);
        $.on(file, 'load loadedmetadata', cb);
      }
      return file.src = URL;
    },
    toggle: function() {
      var enabled;
      enabled = Conf['prefetch'] = this.checked;
      if (enabled) {
        g.BOARD.posts.forEach(function(post) {
          return ImageLoader.node.call(post);
        });
      }
    }
  };

  RevealSpoilers = {
    init: function() {
      if (!Conf['Reveal Spoiler Thumbnails']) {
        return;
      }
      return Post.callbacks.push({
        name: 'Reveal Spoiler Thumbnails',
        cb: this.node
      });
    },
    node: function() {
      var thumb, _ref;
      if (this.isClone || !((_ref = this.file) != null ? _ref.isSpoiler : void 0)) {
        return;
      }
      thumb = this.file.thumb;
      thumb.removeAttribute('style');
      return thumb.src = this.file.thumbURL;
    }
  };

  Sauce = {
    init: function() {
      var err, link, links, _i, _len, _ref;
      if (!Conf['Sauce']) {
        return;
      }
      links = [];
      _ref = Conf['sauces'].split('\n');
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        link = _ref[_i];
        try {
          if (link[0] !== '#') {
            links.push(link.trim());
          }
        } catch (_error) {
          err = _error;
        }
      }
      if (!links.length) {
        return;
      }
      this.links = links;
      this.link = $.el('a', {
        target: '_blank'
      });
      return Post.callbacks.push({
        name: 'Sauce',
        cb: this.node
      });
    },
    createSauceLink: function(link, post, a) {
      var m, text;
      link = link.replace(/%(T?URL|MD5|board|name)/g, function(parameter) {
        var type;
        if (type = {
          '%TURL': post.file.thumbURL,
          '%URL': post.file.URL,
          '%MD5': post.file.MD5,
          '%board': post.board,
          '%name': post.file.name
        }[parameter]) {
          return encodeURIComponent(type);
        } else {
          return parameter;
        }
      });
      text = (m = link.match(/;text:(.+)$/)) ? m[1] : link.match(/(\w+)\.\w+\//)[1];
      link = link.replace(/;text:.+$/, '');
      a.href = link;
      a.textContent = text;
      return a;
    },
    node: function() {
      var link, nodes, _i, _len, _ref;
      if (this.isClone || !this.file) {
        return;
      }
      nodes = [];
      _ref = Sauce.links;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        link = _ref[_i];
        nodes.push($.tn('\u00A0'), Sauce.createSauceLink(link, this, Sauce.link.cloneNode(true)));
      }
      return $.add(this.file.text, nodes);
    }
  };

  TrashQueue = {
    init: function() {},
    add: function(video, post) {
      var _ref, _ref1;
      if (this.killNext && video !== this.killNext) {
        if ((_ref = this.killNextPost) != null) {
          if ((_ref1 = _ref.file) != null) {
            delete _ref1.fullImage;
          }
        }
        $.rm(this.killNext);
      }
      this.killNext = video;
      return this.killNextPost = post;
    },
    remove: function(video) {
      if (video === this.killNext) {
        return delete this.killNext;
      }
    }
  };

  Video = {
    configure: function(video, disableAutoplay) {
      video.loop = true;
      video.muted = !Conf['Allow Sound'];
      video.controls = Conf['Show Controls'];
      video.autoplay = false;
      if (Conf['Autoplay'] && !disableAutoplay) {
        return Video.start(video);
      } else {
        return video.pause();
      }
    },
    start: function(video) {
      var controls;
      controls = video.controls;
      video.controls = false;
      video.play();
      if (controls) {
        return $.asap((function() {
          return (video.readyState >= 3 && video.currentTime <= Math.max(0.1, video.duration - 0.5)) || !d.contains(video);
        }), function() {
          return video.controls = true;
        }, 500);
      }
    }
  };

  ArchiveLink = {
    init: function() {
      var div, entry, type, _i, _len, _ref;
      if (!Conf['Menu'] || !Conf['Archive Link']) {
        return;
      }
      div = $.el('div', {
        textContent: 'Archive'
      });
      entry = {
        el: div,
        order: 90,
        open: function(_arg) {
          var ID, board, thread;
          ID = _arg.ID, thread = _arg.thread, board = _arg.board;
          return !!Redirect.to('thread', {
            postID: ID,
            threadID: thread.ID,
            boardID: board.ID
          });
        },
        subEntries: []
      };
      _ref = [['Post', 'post'], ['Name', 'name'], ['Tripcode', 'tripcode'], ['E-mail', 'email'], ['Subject', 'subject'], ['Filename', 'filename'], ['Image MD5', 'MD5']];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        type = _ref[_i];
        entry.subEntries.push(this.createSubEntry(type[0], type[1]));
      }
      return Menu.menu.addEntry(entry);
    },
    createSubEntry: function(text, type) {
      var el, open;
      el = $.el('a', {
        textContent: text,
        target: '_blank'
      });
      open = type === 'post' ? function(_arg) {
        var ID, board, thread;
        ID = _arg.ID, thread = _arg.thread, board = _arg.board;
        el.href = Redirect.to('thread', {
          postID: ID,
          threadID: thread.ID,
          boardID: board.ID
        });
        return true;
      } : function(post) {
        var value;
        value = Filter[type](post);
        if (!value) {
          return false;
        }
        el.href = Redirect.to('search', {
          boardID: post.board.ID,
          type: type,
          value: value,
          isSearch: true
        });
        return true;
      };
      return {
        el: el,
        open: open
      };
    }
  };

  DeleteLink = {
    init: function() {
      var div, fileEl, fileEntry, postEl, postEntry;
      if (!Conf['Menu'] || !Conf['Delete Link']) {
        return;
      }
      div = $.el('div', {
        className: 'delete-link',
        textContent: 'Delete'
      });
      postEl = $.el('a', {
        className: 'delete-post',
        href: 'javascript:;'
      });
      fileEl = $.el('a', {
        className: 'delete-file',
        href: 'javascript:;'
      });
      postEntry = {
        el: postEl,
        open: function() {
          postEl.textContent = 'Post';
          $.on(postEl, 'click', DeleteLink["delete"]);
          return true;
        }
      };
      fileEntry = {
        el: fileEl,
        open: function(_arg) {
          var file;
          file = _arg.file;
          if (!file || file.isDead) {
            return false;
          }
          fileEl.textContent = 'File';
          $.on(fileEl, 'click', DeleteLink["delete"]);
          return true;
        }
      };
      return Menu.menu.addEntry({
        el: div,
        order: 40,
        open: function(post) {
          var node;
          if (post.isDead) {
            return false;
          }
          DeleteLink.post = post;
          node = div.firstChild;
          node.textContent = 'Delete';
          DeleteLink.cooldown.start(post, node);
          return true;
        },
        subEntries: [postEntry, fileEntry]
      });
    },
    "delete": function() {
      var fileOnly, form, link, post;
      post = DeleteLink.post;
      if (DeleteLink.cooldown.counting === post) {
        return;
      }
      $.off(this, 'click', DeleteLink["delete"]);
      fileOnly = $.hasClass(this, 'delete-file');
      this.textContent = "Deleting " + (fileOnly ? 'file' : 'post') + "...";
      form = {
        mode: 'usrdel',
        onlyimgdel: fileOnly,
        pwd: QR.persona.getPassword()
      };
      form[post.ID] = 'delete';
      link = this;
      return $.ajax($.id('delform').action.replace("/" + g.BOARD + "/", "/" + post.board + "/"), {
        responseType: 'document',
        withCredentials: true,
        onload: function() {
          return DeleteLink.load(link, post, fileOnly, this.response);
        },
        onerror: function() {
          return DeleteLink.error(link);
        }
      }, {
        form: $.formData(form)
      });
    },
    load: function(link, post, fileOnly, resDoc) {
      var msg, s;
      if (resDoc.title === '4chan - Banned') {
        s = 'Banned!';
      } else if (msg = resDoc.getElementById('errmsg')) {
        s = msg.textContent;
        $.on(link, 'click', DeleteLink["delete"]);
      } else {
        if (resDoc.title === 'Updating index...') {
          (post.origin || post).kill(fileOnly);
        }
        s = 'Deleted';
      }
      return link.textContent = s;
    },
    error: function(link) {
      link.textContent = 'Connection error, please retry.';
      return $.on(link, 'click', DeleteLink["delete"]);
    },
    cooldown: {
      start: function(post, node) {
        var length, seconds;
        if (!QR.db.get({
          boardID: post.board.ID,
          threadID: post.thread.ID,
          postID: post.ID
        })) {
          delete DeleteLink.cooldown.counting;
          return;
        }
        DeleteLink.cooldown.counting = post;
        length = 60;
        seconds = Math.ceil((length * $.SECOND - (Date.now() - post.info.date)) / $.SECOND);
        return DeleteLink.cooldown.count(post, seconds, length, node);
      },
      count: function(post, seconds, length, node) {
        if (DeleteLink.cooldown.counting !== post) {
          return;
        }
        if (!((0 <= seconds && seconds <= length))) {
          if (DeleteLink.cooldown.counting === post) {
            node.textContent = 'Delete';
            delete DeleteLink.cooldown.counting;
          }
          return;
        }
        setTimeout(DeleteLink.cooldown.count, 1000, post, seconds - 1, length, node);
        return node.textContent = "Delete (" + seconds + ")";
      }
    }
  };

  DownloadLink = {
    init: function() {
      var a;
      if (!Conf['Menu'] || !Conf['Download Link']) {
        return;
      }
      a = $.el('a', {
        className: 'download-link',
        textContent: 'Download file'
      });
      return Menu.menu.addEntry({
        el: a,
        order: 100,
        open: function(_arg) {
          var file;
          file = _arg.file;
          if (!file) {
            return false;
          }
          a.href = file.URL;
          a.download = file.name;
          return true;
        }
      });
    }
  };

  Labels = {
    init: function() {
      if (!Conf['Menu']) {
        return;
      }
      return Menu.menu.addEntry({
        el: $.el('div', {
          textContent: 'Labels'
        }),
        order: 60,
        open: function(post, addSubEntry) {
          var label, labels, _i, _len;
          labels = (post.origin || post).labels;
          if (!labels.length) {
            return false;
          }
          this.subEntries.length = 0;
          for (_i = 0, _len = labels.length; _i < _len; _i++) {
            label = labels[_i];
            addSubEntry({
              el: $.el('div', {
                textContent: label
              })
            });
          }
          return true;
        },
        subEntries: []
      });
    }
  };

  Menu = {
    init: function() {
      var a;
      if (!Conf['Menu']) {
        return;
      }
      a = $.el('a', {
        className: 'menu-button',
        innerHTML: '<i class="fa fa-bars"></i>',
        href: 'javascript:;'
      });
      this.menu = new UI.Menu();
      Post.callbacks.push({
        name: 'Menu',
        cb: this.node
      });
      return CatalogThread.callbacks.push({
        name: 'Menu',
        cb: this.catalogNode
      });
    },
    node: function() {
      if (this.isClone) {
        $.on($('.menu-button', this.nodes.info), 'click', Menu.toggle);
        return;
      }
      return $.add(this.nodes.info, Menu.makeButton());
    },
    catalogNode: function() {
      return $.add(this.nodes.thumb, Menu.makeButton());
    },
    makeButton: (function() {
      var a;
      a = $.el('a', {
        className: 'menu-button',
        innerHTML: '<i class=fa>\uf107</i>',
        href: 'javascript:;'
      });
      return function() {
        var clone;
        clone = a.cloneNode(true);
        $.on(clone, 'click', Menu.toggle);
        return clone;
      };
    })(),
    toggle: function(e) {
      var fullID;
      fullID = $.x('ancestor::*[@data-full-i-d][1]', this).dataset.fullID;
      return Menu.menu.toggle(e, this, g.posts[fullID]);
    }
  };

  ReportLink = {
    init: function() {
      var a;
      if (!Conf['Menu'] || !Conf['Report Link']) {
        return;
      }
      a = $.el('a', {
        className: 'report-link',
        href: 'javascript:;',
        textContent: 'Report this post'
      });
      $.on(a, 'click', ReportLink.report);
      return Menu.menu.addEntry({
        el: a,
        order: 10,
        open: function(post) {
          ReportLink.post = post;
          return !post.isDead;
        }
      });
    },
    report: function() {
      var id, post, set, url;
      post = ReportLink.post;
      url = "//sys.4chan.org/" + post.board + "/imgboard.php?mode=report&no=" + post;
      id = Date.now();
      set = "toolbar=0,scrollbars=0,location=0,status=1,menubar=0,resizable=1,width=685,height=200";
      return window.open(url, id, set);
    }
  };

  Favicon = {
    init: function() {
      var f, funreadDeadY, i, items, t;
      items = {
        ferongr: ['iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAFVBMVEX///9zBQC/AADpDAP/gID/q6voCwJJTwpOAAAAAXRSTlMAQObYZgAAAGJJREFUeF5Fi7ENg0AQBCfa/AFdDh2gdwPIogMK2E2+/xLslwOvdqRJhv+GQQPUCtJM7svankLrq/I+TY5e6Ueh1jyBMX7AFJi9vwfyVO4CbbO6jNYpp9GyVPbdkFhVgAQ2H0NOE5jk9DT8AAAAAElFTkSuQmCC', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAxUlEQVR42q1TOwrCQBB9s0FRtJI0WoqFtSLYegoP4gVSeJsUHsHSI3iFeIqRXXgwrhlXwYHHhLwPTB7B36abBCV+0pA4DUBQUNZYQptGtW3jtoKyxgoe0yrBCoyZfL/5ioQ3URZOXW9I341l3oo+NXEZiW4CEuIzvPECopED4OaZ3RNmeAm4u+a8Jr5f17VyVoL8fr8qcltzwlyyj2iqcgPOQ9ExkHAITgD75bYBe0A5S4H/P9htuWMF3QXoQpwaKeT+lnsC6JE5I6aq6fEAAAAASUVORK5CYII=', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAFVBMVEX///8AcH4AtswA2PJ55fKi6fIA1/FtpPADAAAAAXRSTlMAQObYZgAAAGJJREFUeF5Fi7ENg0AQBCfa/AFdDh2gdwPIogMK2E2+/xLslwOvdqRJhv+GQQPUCtJM7svankLrq/I+TY5e6Ueh1jyBMX7AFJi9vwfyVO4CbbO6jNYpp9GyVPbdkFhVgAQ2H0NOE5jk9DT8AAAAAElFTkSuQmCC', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAxElEQVQ4y2NgoBq4/vE/HJOsBiRQUIfA2AzBqQYqUfn00/9FLz+BaQxDCKqBmX7jExijKEDSDJPHrnnbGQhGV4RmOFwdVkNwhQMheYwQxhaIi7b9Z9A3gWAQm2BUoQOgRhgA8o7j1ozLC4LCyAZcx6kZI5qg4kLKqggDFFWxJySsUQVzlb4pwgAJaTRvokcVNgOqOv8zcHBCsL07DgNg8YsczzA5MxtUL+DMD8g0slxI/H8GQ/P/DJKyeKIRpglXZsIiBwBhP5O+VbI/JgAAAABJRU5ErkJggg==', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAFVBMVEX///8oeQBJ3ABV/wHM/7Lu/+ZU/gAqUP3dAAAAAXRSTlMAQObYZgAAAGJJREFUeF5Fi7ENg0AQBCfa/AFdDh2gdwPIogMK2E2+/xLslwOvdqRJhv+GQQPUCtJM7svankLrq/I+TY5e6Ueh1jyBMX7AFJi9vwfyVO4CbbO6jNYpp9GyVPbdkFhVgAQ2H0NOE5jk9DT8AAAAAElFTkSuQmCC', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAx0lEQVQ4y2NgoBYI+cfwH4ZJVgMS0KhEYGyG4FQDkzjzf9P/d/+fgWl0QwiqgSkI/c8IxsgKkDXD5LFq9rwDweiK0A2HqcNqCK5wICSPEcLYAtH+AMN/IXMIBrEJRie6OEgjDAC5x3FqxuUFNiEUA67j1IweTTBxBQ1puAG86jgSEraogskJWSBcwCGF5k30qMJmgMFEhv/MXBAs5oLDAFj8IsczTE7UEeECbhU8+QGZRpaTi2b4L2zF8J9TGk80wjThykzY5AAW/2O1C2mIbgAAAABJRU5ErkJggg=='],
        'xat-': ['iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAPFBMVEX9AAD8AAD/AAD+AADAExKKXl2CfHqLkZFub2yfaF3bZ2PzZGL/zs//iYr/AAASAAAGAAAAAAAAAAAAAADpOCseAAAADHRSTlP9MAcAATVYeprJ5O/MbzqoAAAAXklEQVQY03VPQQ7AIAgz8QAG4dL//3VVcVk2Vw4tDVQp9YVyMACIEkIxDEQEGjHFnBjCbPU5EXBfnBns6WRG1Wbuvbtb0z9jr6Qh2KGQenp2/+xpsFQnrePAuulz7QUTuwm5NnwmIAAAAABJRU5ErkJggg==', 'iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAMAAACuAq9NAAAAY1BMVEUBAAACAQELCQkPDQwgFBMzKilOSEdva2iEgoCReHOadXClamDIaWbxcG7+hIX+mpv+m5z+oqP+tLX+zc7//f3+9PT97Oz23t750NDbra3zwL87LCwAAAAGAABHAADPAAD/AABkWeLDAAAAHHRSTlO5/fTv8Na2n42lsMvi8v3+/v749OaITDsDAQABSG2w8gAAAGdJREFUCNdNjtEKgDAIRYVGCmsyqCe7q/3/V2azQfpwPehVyQCIMIt4YYTeO7LHKMiGlDIkuh2qofR6obUqhtc4F637XreU1h+m41gcJX/DHyJWXYHzkCMm+hd3a4GezLNr8PQA4bQHEXEQFRJP5NAAAAAASUVORK5CYII=', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAPFBMVEUAAAAAAAAAAAAAAABFRUdsa2yRjop4dXVpZ2tdcI9dfKdBirUzlMBHpdxSquRisfOs2/99xv8umMMAAABljCUFAAAAEHRSTlN7FwUAQVt6kZ2/zej59vTv0aAplgAAAGNJREFUGNNtj1EOwCAIQ5eYIPCD0vvfdYi6LJvy0fICNVzl864DAECVuVKYAeDuEFVJkxPDmM1+TTh6n7oy0FvrWBmF1aIPYspnUGWvSE1A2KGgcvp2AtU3iGJOmcch6pHftTekXQrRd6slMAAAAABJRU5ErkJggg==', 'iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAMAAACuAq9NAAAAY1BMVEUAAAAAAAAAAAAAAAAREBAWFRY1NDROTE1iYGFzdXp4eoCAgYVlc4mHjZiYoa6zvcqy1/Pg8v+e1f+b1P6X0f2DyP5jsu49msgymcctkLomc5QbPU0SIiwNFxwumMMAAAAAAADALpU1AAAAHnRSTlPNLgcBAAABBxhdc4WznarD8P7+/v3+8/z9/vz2+PUOYDHSAAAAZElEQVQI102OsQ6AMAhEMWGDpTbUQUvu/79ShDYRhuMFDiAGIKIqEgUT3B0akQVxyhgp1XWYldLnhfXTkF5WHdZb69cz9YdPazNQdA0vRK2ahftQDGNjfHHXZjgSV5cRGQHCwS8j7A9loVSnzwAAAABJRU5ErkJggg==', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAPFBMVEUAAAAAAAAAAAAAAAAfJSBLUU1ydHR8fn6Ri5Frbm9dn19jvEFt30tv5VB082KR/33Z/9Gq/5tmzDMAAADw+5ntAAAAEHRSTlP++ywHAAE2Wnuayez19O/+EzXeOQAAAF9JREFUGNN1TzESwCAIc3AABxDy/78WFXu91oYhIYcRSn2hHAwAxAEKMQy4O1pgijkxhMjqc8KhujgzoGaKzKjcRK13U2n8Z+wnaRB2KKievt2bPY0o5knrOETd9Ln2AuDLCz1j8HTeAAAAAElFTkSuQmCC', 'iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAMAAACuAq9NAAAAY1BMVEUPGgsCBAIBAQEBAQAAAQAAAAABAQEFBQQQEw85SDdVa1GhzJm967TZ+NLP+sbM+8S6/a3k/9+s/pyr/puX/oSd15KIuoGBj39tfm1qj2RepFlu2VRkwzZlyTNatC5myzMAAAAOPREWAAAAHnRSTlP4/fz331IPBQIBAAECOly37/7+/v7XwpWktNDy+f7X56yoAAAAZElEQVQI102NwQ7AIAhDMdku3JwkIiaz//+VQ9FkcCgvpUAMoKpX9YEJYww0s7YG4iW9Lwl3QCSUZhZSHsHKslqXknPpRPpDypkmtr0cWBGntnseOeKgGd6UAr1Vj8vw9sKFmz+fERAp5vutHwAAAABJRU5ErkJggg=='],
        Mayhem: ['iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABFklEQVR4AZ2R4WqEMBCEFy1yiJQQ14gcIhIuFBFR+qPQ93+v66QMksrlTwMfkZ2ZZbMKTgVqYIDl3YAbeCM31lJP/Zul4MAEPJjBQGNDLGsz8PQ6aqLAP5PTdd1WlmU09mSKtdTDRgrkzspJPKq6RxMahfj9yhOzQEZwZAwfzrk1ox3MXibIN8hO4MAjeV72CemJGWblnRsOYOdoGw0jebB20BPAwKzUQPlrFhrXFw1Wagu9yuzZwINzVAZCURRL+gRr7Wd8Vtqg4Th/lsUmewyk9WQ/A7NiwJz5VV/GmO+MNjMrFvh/NPDMigHTaeJN09a27ZHRJmalBg54CgfvAGYSLpoHjlmpuAwFdzDy7oGS/qIpM9UPFGg1b1kUlssAAAAASUVORK5CYII=', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABR0lEQVR4AYWSQWq0QBCFCw0SRIK0PQ4hiIhEZBhEySLyewUPEMgqR/JIXiDhzz7kKKYePIZajEzDRxfV9dWU3SO6IiVWUsVxT5R75Y4gTmwNnUh4kCulUiuV8sjChDjmKtaUcHgmHsnNrMPh0IVhiMIjKZGzNXDoyhMzF7C89z2KtFGD+FoNXEUKZdgpaPM8P++cDXTtBDca7EyQK8+bXTufYBccuvLAG26UnqN1LCgI4g/lm7zTgSux4vk0J8rnKw3+m1//pBPbBrVyGZVNmiAITviEtm3t+D+2QcJx7GUxlN4594K4ZY75Xzh0JVWqnad6TdP0H+LRNBjHcYNDV5xS32qwaC4my7Lwn6guu5QoomgbdFmWDYhnM8E8zxscuhLzPWtKA/dGqUizrityX9M0YX+DQ1ciXobnP6vgfmTOM7Znnk70B58pPaEvx+epAAAAAElFTkSuQmCC', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/ElEQVR4AZ3RUWqEMBSF4ftQZAhSREQJIiIXpQwi+tSldkFdWPsLhyEE0ocKH2Fyzg1mNJ4KAQ1arTUeeJMH6qwTUJmCHjMcC6KKtbSIylzdXpl18J/k4fdTpUFmPLOOa9bGe+P4+n5RYYfLXuiMsAlXofBxK2QXpvwN/jqg+AY91vR+pStk+apZe0fEhhMXDhUmWXEoO9WNmrWAzvRPq7jnB2jvUGfWTEgPcJzZFTbZk/0Tnh5QI+af6lVGvq/Do2atwVL4VJ+3QrZo1lr4Pw5wzVqDWaV7SUvHrZDNmrWAHq7g0rphkS3LXDMBVqFGhxGT1gGdDFnWaab6BRmXRvbxDmYiAAAAAElFTkSuQmCC', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABQElEQVR4AY2SQUrEQBBFS9CMNFEkhAQdYmiCIUgcZlYGc4VsBcGVF/AuWXme4F7RtXiVWF9+Y9MYtOHRTdX/NZWaEj2RYpQTJeEdK4fKPuA7DjSGXiQkU0qlUqxySmFMEsYsNSU8zEmK4OwdEbmkKCclYoGmolfWCGyenh1O0EJE2gXNWpFC2S0IGrCQ29EbdPCPAmEHmXIxByf8hDAPD71yzAnXypatbSgoAN8Pyju5h4deMUrqJk1z+0uBN+/XX+gxfoFK2QafUJO2aRq//Q+/QIx2wr+Kwq0rusrP/QKf9MTCtbQLf9U1wNvYnz3qug45S68kSvVXgbPbx3nvYPXNOI7cRPWySukK+DcGCvA+urqZ3RmGAbmSXjFK5rpwW8nhWVJP04TYa9/3uO/goVciDiPlZhW8c8ZAHuRSeqIv32FK/GYGL8YAAAAASUVORK5CYII=', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/ElEQVR4AZ3RUWqEMBSF4ftQZAihDCKKiAQJShERQx+6o662e2p/4TCEQF468BEm95yLovFr4PBEq9PjgTd5wBcZp6559AiIWDAq6KXV3aJMUMfDOsTf7Mf/XaFBAvYiE9W16b74/vl8UeBAlKOSmWAzUiXwcavMkrrFE9QXVJ+gx5q9XvUVivmqrr1jxIYLCacCs6y6S8psGNU1hw4Bu4JHuUB3pzJBHZcviLiKV9jkyO4vxHyBx1h+qlcY5b2Wj+raE0vlU33dKrNFXWsR/7EgqmtPBIXuIw+dt8osqGsOPaIGSeeGRbZiFtVxsAYeHSbMOgd0MhSzTp3mD4RaQX4aW3NMAAAAAElFTkSuQmCC', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABP0lEQVR4AYWS0UqFQBCGhziImNRBRImDmUgiIaF0kWSP4AMEXXXTE/QiPpL3UdR19Crb/PAvLEtyFj5mmfn/cdxd0RUokbJXEsZYCZUd4D72NBG8wkKmlEqtVMoFhTFJmKuoKelBTVIkjbNE5IainJTIeZqaXjkg8fp+Z7GCjiLQbWgOihTKsCFowUZtoNef4HgDf4JMuTbe8n/Br8NDr5zxhBul52i3FBQE+xflmzzTA69ESmpPmubunwZfztc/6IncBrXSe7/QkK5tW3f8H7dBjHH8q6Kwt033V6Hb4JeeWPgsq42rugfYZ92psWscRwMPvZIo9bEGD2+F2YUnBizLwpeoXnYpbQM34kAB9peP58aueZ4NPPRKxPusaRoYG6UizbquyH1O04T4RA+8EvAwUr6sgjFnDuReLaUn+ANygUa7+9SCWgAAAABJRU5ErkJggg=='],
        '4chanJS': ['iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAD1BMVEUBAAAAAAD/AABnZ2f///8nFk05AAAAAXRSTlMAQObYZgAAAEFJREFUeNqNjgEKACAMAjvX/98cAkkxgmSgO8Bt/Ai4ApJ6KKhzF3OiEMDASrGB/QWgPEHsUpN+Ng9xAETMYhDrWmeHAMcmvycWAAAAAElFTkSuQmCC', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAD1BMVEUBAAAAAAD/AAD///9nZ2f77Y6hAAAAAXRSTlMAQObYZgAAAEBJREFUeF6NjQEKACAMAnfW/98cAxFiBIngOsTqR8B1IGkeG9p5i7XabgAGZNigXgA8aoCUxvzWAIcBItGiSEwdccYA3BuRAWkAAAAASUVORK5CYII=', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAD1BMVEUBAAAAAAAul8NnZ2f////82iC9AAAAAXRSTlMAQObYZgAAAEFJREFUeNqNjgEKACAMAjvX/98cAkkxgmSgO8Bt/Ai4ApJ6KKhzF3OiEMDASrGB/QWgPEHsUpN+Ng9xAETMYhDrWmeHAMcmvycWAAAAAElFTkSuQmCC', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAD1BMVEUBAAAAAAAul8P///9nZ2cgIeMlAAAAAXRSTlMAQObYZgAAAEBJREFUeF6NjQEKACAMAnfW/98cAxFiBIngOsTqR8B1IGkeG9p5i7XabgAGZNigXgA8aoCUxvzWAIcBItGiSEwdccYA3BuRAWkAAAAASUVORK5CYII=', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAElBMVEUBAAAAAABmzDNlyjJnZ2f///+6o7dfAAAAAXRSTlMAQObYZgAAAERJREFUeF6NjkEKADEIA51o///lJZfQxUsHITogWi8AvwZJuxmYa25xDooBLEwOWFTYAsYVhdorLZt9Ng9xCUTCUCQ2H3F4ANrZ2WNiAAAAAElFTkSuQmCC', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAElBMVEUBAAAAAABmzDP///9lyjJnZ2cIHys9AAAAAXRSTlMAQObYZgAAAENJREFUeF6NjUEKwEAMAjNm9/9fLkEslFwqgjoEUn8EfAqSdrkwzj6ieyyTkQEVGWRvANfO1iEX620AjgBEwqR4Y+sBeGAA6d+vQ4IAAAAASUVORK5CYII='],
        Original: ['iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAgMAAABinRfyAAAADFBMVEX/////AAD///8AAABBZmS3AAAAAXRSTlMAQObYZgAAAExJREFUeF4tyrENgDAMAMFXKuQswQLBG3mOlBnFS1gwDfIYLpEivvjq2MlqjmYvYg5jWEzCwtDSQlwcXKCVLrpFbvLvvSf9uZJ2HusDtJAY7Tkn1oYAAAAASUVORK5CYII=', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAhElEQVR42q1RwQnAMAjMu5M4guAKXa4j5dUROo5tipSDcrFChUONd0di2m/hEGVOHDyIPufgwAFASDkpoSzmBrkJ2UMyR9LsJ3rvrqo3Rt1YMIMhhNnOxLMnoMFBxHyJAr2IOBFzA8U+6pLBdmEJTA0aMVjpDd6Loks0s5HZNwYx8tfZCZ0kll7ORffZAAAAAElFTkSuQmCC', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAgMAAABinRfyAAAADFBMVEX///8ul8P///8AAACaqgkzAAAAAXRSTlMAQObYZgAAAExJREFUeF4tyrENgDAMAMFXKuQswQLBG3mOlBnFS1gwDfIYLpEivvjq2MlqjmYvYg5jWEzCwtDSQlwcXKCVLrpFbvLvvSf9uZJ2HusDtJAY7Tkn1oYAAAAASUVORK5CYII=', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAALVBMVEUAAAAAAAAAAAAAAAABBQcHFx4KISoNLToaVW4oKCgul8M4ODg7OzvBwcH///8uS/CdAAAAA3RSTlMAx9dmesIgAAAAV0lEQVR42m2NWw6AIBAD1eILZO5/XI0UAgm7H9tOsu0yGWAQSOoFijHOxOANGqm/LczpOaXs4gISrPZ+gc2+hO5w2xdwgOjBFUIF+sEJrhUl9JFr+badFwR+BfqlmGUJAAAAAElFTkSuQmCC', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAgMAAABinRfyAAAADFBMVEX///9mzDP///8AAACT0n1lAAAAAXRSTlMAQObYZgAAAExJREFUeF4tyrENgDAMAMFXKuQswQLBG3mOlBnFS1gwDfIYLpEivvjq2MlqjmYvYg5jWEzCwtDSQlwcXKCVLrpFbvLvvSf9uZJ2HusDtJAY7Tkn1oYAAAAASUVORK5CYII=', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAALVBMVEUAAAAAAAAAAAAAAAAECAIQIAgWLAsePA8oKCg4ODg6dB07OztmzDPBwcH///+rsf3XAAAAA3RSTlMAx9dmesIgAAAAV0lEQVR42m2NWw6AIBAD1eIDhbn/cTVSCCTsfmw7ybbLZIBBIKkXKKU0E4M3aKT+tjCn5xiziwuIsNr7BTb7ErrDZV/AAaIHdwgV6AcnuFaU0Eeu5dt2XiUyBjCQ2bIrAAAAAElFTkSuQmCC'],
        'Metro': ['iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAABlBMVEUAAAC/AABrZQDiAAAAAXRSTlMAQObYZgAAABJJREFUCB1jZGBgrMNAQEEc4gCSfAX5bRw/NQAAAABJRU5ErkJggg==', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAAAAAAAAAAHAAAdAAApAAAsAAA4AABsAACQAAC/AAD///9SVhtjAAAAA3RSTlMAPse+s4iwAAAAM0lEQVQIW2NggAGuVasWgDBpDDAQUoSaob0Jao73lgVojOitUEazBZRRvR3KmJa5AO4KAGBtLuMAuhIIAAAAAElFTkSuQmCC', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAABlBMVEUAAAAA1/GhpCidAAAAAXRSTlMAQObYZgAAABJJREFUCB1jZGBgrMNAQEEc4gCSfAX5bRw/NQAAAABJRU5ErkJggg==', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAAAAAAAAAAACAkAISUALzQAMTcAQEcAeokAorYA1/H///8BrzTFAAAAA3RSTlMAPse+s4iwAAAAM0lEQVQIW2NggAGuVasWgDBpDDAQUoSaob0Jao73lgVojOitUEazBZRRvR3KmJa5AO4KAGBtLuMAuhIIAAAAAElFTkSuQmCC', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAABlBMVEUAAABV/wErM5hwAAAAAXRSTlMAQObYZgAAABJJREFUCB1jZGBgrMNAQEEc4gCSfAX5bRw/NQAAAABJRU5ErkJggg==', 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAAAAAAAAAADCgANKAASOAATOwAZTAAwkQBAwQBV/wH////+Fmy4AAAAA3RSTlMAPse+s4iwAAAAM0lEQVQIW2NggAGuVasWgDBpDDAQUoSaob0Jao73lgVojOitUEazBZRRvR3KmJa5AO4KAGBtLuMAuhIIAAAAAElFTkSuQmCC']
      }[Conf['favicon']];
      f = Favicon;
      t = 'data:image/png;base64,';
      i = 0;
      while (items[i]) {
        items[i] = t + items[i++];
      }
      f.unreadDead = items[0], funreadDeadY = items[1], f.unreadSFW = items[2], f.unreadSFWY = items[3], f.unreadNSFW = items[4], f.unreadNSFWY = items[5];
      return f.update();
    },
    update: function() {
      if (this.SFW) {
        this.unread = this.unreadSFW;
        return this.unreadY = this.unreadSFWY;
      } else {
        this.unread = this.unreadNSFW;
        return this.unreadY = this.unreadNSFWY;
      }
    },
    dead: 'data:image/gif;base64,R0lGODlhEAAQAKECAAAAAP8AAP///////yH5BAEKAAIALAAAAAAQABAAAAIvlI+pq+D9DAgUoFkPDlbs7lFZKIJOJJ3MyraoB14jFpOcVMpzrnF3OKlZYsMWowAAOw==',
    logo: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACABAMAAAAxEHz4AAAAElBMVEX///8EZgR8ulSk0oT///8EAgQ1A88mAAAAAXRSTlMAQObYZgAAAJtJREFUeF7t17ENgDAMBdGswAqswAqskP1XgUhG37JQQv25a1I4eR1CbopoS3295wIASD1SBZnecwEApO9RRurjPdLcAQDQY9UnBSDEBQAIRA3gfGkA9cfiAwDUHqCnHqDl/AGA0v8AAL4FgO0uAxUcc2cAQEtFjwQoLSMuAMBqsVwtpp4AwNDngPIGAPI5mVsCAELSuZybAQBEF/bX4X+FReD/AAAAAElFTkSuQmCC'
  };

  ThreadExcerpt = {
    init: function() {
      if (g.VIEW !== 'thread' || !Conf['Thread Excerpt']) {
        return;
      }
      return Thread.callbacks.push({
        name: 'Thread Excerpt',
        cb: this.node
      });
    },
    node: function() {
      return d.title = Get.threadExcerpt(this);
    },
    disconnect: function() {
      if (g.VIEW !== 'thread' || !Conf['Thread Excerpt']) {
        return;
      }
      return Thread.callbacks.disconnect('Thread Excerpt');
    }
  };

  ThreadStats = {
    init: function() {
      var sc;
      if (g.VIEW !== 'thread' || !Conf['Thread Stats']) {
        return;
      }
      if (Conf['Updater and Stats in Header']) {
        this.dialog = sc = $.el('span', {
          innerHTML: "[<span id=post-count>0</span> / <span id=file-count>0</span>" + (Conf["Page Count in Stats"] ? " / <span id=page-count>0</span>" : "") + "]",
          id: 'thread-stats',
          title: 'Post Count / File Count' + (Conf["Page Count in Stats"] ? " / Page Count" : "")
        });
        $.ready(function() {
          return Header.addShortcut(sc);
        });
      } else {
        this.dialog = sc = UI.dialog('thread-stats', 'bottom: 0px; right: 0px;', "<div class=move title='Post Count / File Count" + (Conf["Page Count in Stats"] ? " / Page Count" : "") + "'><span id=post-count>0</span> / <span id=file-count>0</span>" + (Conf["Page Count in Stats"] ? " / <span id=page-count>0</span>" : "") + "</div>");
        $.ready((function(_this) {
          return function() {
            return $.add(d.body, sc);
          };
        })(this));
      }
      this.postCountEl = $('#post-count', sc);
      this.fileCountEl = $('#file-count', sc);
      this.pageCountEl = $('#page-count', sc);
      return Thread.callbacks.push({
        name: 'Thread Stats',
        cb: this.node
      });
    },
    node: function() {
      var fileCount, postCount;
      postCount = 0;
      fileCount = 0;
      this.posts.forEach(function(post) {
        postCount++;
        if (post.file) {
          return fileCount++;
        }
      });
      ThreadStats.thread = this;
      ThreadStats.fetchPage();
      ThreadStats.update(postCount, fileCount);
      return $.on(d, 'ThreadUpdate', ThreadStats.onUpdate);
    },
    disconnect: function() {
      if (g.VIEW !== 'thread' || !Conf['Thread Stats']) {
        return;
      }
      if (Conf['Updater and Stats in Header']) {
        Header.rmShortcut(this.dialog);
      } else {
        $.rm(this.dialog);
      }
      clearTimeout(this.timeout);
      delete this.timeout;
      delete this.thread;
      delete this.postCountEl;
      delete this.fileCountEl;
      delete this.pageCountEl;
      delete this.dialog;
      Thread.callbacks.disconnect('Thread Stats');
      return $.off(d, 'ThreadUpdate', ThreadStats.onUpdate);
    },
    onUpdate: function(e) {
      var fileCount, postCount, _ref;
      if (e.detail[404]) {
        return;
      }
      _ref = e.detail, postCount = _ref.postCount, fileCount = _ref.fileCount;
      return ThreadStats.update(postCount, fileCount);
    },
    update: function(postCount, fileCount) {
      var fileCountEl, postCountEl, thread;
      thread = ThreadStats.thread, postCountEl = ThreadStats.postCountEl, fileCountEl = ThreadStats.fileCountEl;
      postCountEl.textContent = postCount;
      fileCountEl.textContent = fileCount;
      (thread.postLimit && !thread.isSticky ? $.addClass : $.rmClass)(postCountEl, 'warning');
      return (thread.fileLimit && !thread.isSticky ? $.addClass : $.rmClass)(fileCountEl, 'warning');
    },
    fetchPage: function() {
      if (!Conf["Page Count in Stats"]) {
        return;
      }
      if (ThreadStats.thread.isDead) {
        ThreadStats.pageCountEl.textContent = 'Dead';
        $.addClass(ThreadStats.pageCountEl, 'warning');
        return;
      }
      ThreadStats.timeout = setTimeout(ThreadStats.fetchPage, 2 * $.MINUTE);
      return $.ajax("//a.4cdn.org/" + ThreadStats.thread.board + "/threads.json", {
        onload: ThreadStats.onThreadsLoad
      }, {
        whenModified: true
      });
    },
    onThreadsLoad: function() {
      var page, thread, _i, _j, _len, _len1, _ref, _ref1;
      if (!(Conf["Page Count in Stats"] && this.status === 200)) {
        return;
      }
      _ref = this.response;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        page = _ref[_i];
        _ref1 = page.threads;
        for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
          thread = _ref1[_j];
          if (!(thread.no === ThreadStats.thread.ID)) {
            continue;
          }
          ThreadStats.pageCountEl.textContent = page.page;
          (page.page === this.response.length ? $.addClass : $.rmClass)(ThreadStats.pageCountEl, 'warning');
          return;
        }
      }
    }
  };

  ThreadUpdater = {
    init: function() {
      var checked, conf, el, input, name, sc, subEntries, _ref;
      if (g.VIEW !== 'thread' || !Conf['Thread Updater']) {
        return;
      }
      if (Conf['Updater and Stats in Header']) {
        this.dialog = sc = $.el('span', {
          innerHTML: "[<span id=update-status></span><span id=update-timer title='Update now'></span>]\u00A0",
          id: 'updater'
        });
        $.ready(function() {
          return Header.addShortcut(sc);
        });
      } else {
        this.dialog = sc = UI.dialog('updater', 'bottom: 0px; left: 0px;', "<div class=move><span id=update-status></span><span id=update-timer title='Update now'></span></div>");
        $.addClass(doc, 'float');
        $.ready(function() {
          $.addClass(doc, 'float');
          return $.add(d.body, sc);
        });
      }
      this.checkPostCount = 0;
      this.timer = $('#update-timer', sc);
      this.status = $('#update-status', sc);
      this.isUpdating = Conf['Auto Update'];
      $.on(this.timer, 'click', this.update);
      $.on(this.status, 'click', this.update);
      subEntries = [];
      _ref = Config.updater.checkbox;
      for (name in _ref) {
        conf = _ref[name];
        checked = Conf[name] ? 'checked' : '';
        el = $.el('label', {
          title: "" + conf[1],
          innerHTML: "<input name='" + name + "' type=checkbox " + checked + "> " + name
        });
        input = el.firstElementChild;
        $.on(input, 'change', $.cb.checked);
        if (input.name === 'Scroll BG') {
          $.on(input, 'change', this.cb.scrollBG);
          this.cb.scrollBG();
        } else if (input.name === 'Auto Update') {
          $.on(input, 'change', this.cb.update);
        }
        subEntries.push({
          el: el
        });
      }
      this.settings = $.el('span', {
        innerHTML: '<a href=javascript:;>Interval</a>'
      });
      $.on(this.settings, 'click', this.intervalShortcut);
      subEntries.push({
        el: this.settings
      });
      Header.menu.addEntry(this.entry = {
        el: $.el('span', {
          textContent: 'Updater'
        }),
        order: 110,
        subEntries: subEntries
      });
      return Thread.callbacks.push({
        name: 'Thread Updater',
        cb: this.node
      });
    },
    disconnect: function() {
      var el, entry, input, name, _i, _j, _len, _len1, _ref, _ref1;
      if (g.VIEW !== 'thread' || !Conf['Thread Updater']) {
        return;
      }
      $.off(this.timer, 'click', this.update);
      $.off(this.status, 'click', this.update);
      if (this.timeoutID) {
        clearTimeout(this.timeoutID);
      }
      _ref = this.entry.subEntries;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        entry = _ref[_i];
        el = entry.el;
        input = el.firstElementChild;
        $.off(input, 'change', $.cb.checked);
        $.off(input, 'change', this.cb.scrollBG);
        $.off(input, 'change', this.cb.update);
      }
      $.off(this.settings, 'click', this.intervalShortcut);
      $.off(window, 'online offline', this.cb.online);
      $.off(d, 'QRPostSuccessful', this.cb.checkpost);
      $.off(d, 'visibilitychange', this.cb.visibility);
      this.set('timer', null);
      this.set('status', 'Offline');
      Header.menu.rmEntry(this.entry);
      if (Conf['Updater and Stats in Header']) {
        Header.rmShortcut(this.dialog);
      } else {
        $.rmClass(doc, 'float');
        $.rm(this.dialog);
      }
      _ref1 = ['checkPostCount', 'timer', 'status', 'isUpdating', 'entry', 'dialog', 'thread', 'root', 'lastPost', 'outdateCount', 'online', 'seconds', 'timeoutID'];
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        name = _ref1[_j];
        delete this[name];
      }
      return Thread.callbacks.disconnect('Thread Updater');
    },
    node: function() {
      ThreadUpdater.thread = this;
      ThreadUpdater.root = this.OP.nodes.root.parentNode;
      ThreadUpdater.lastPost = +this.posts.keys[this.posts.keys.length - 1];
      ThreadUpdater.cb.interval.call($.el('input', {
        value: Conf['Interval'],
        name: 'Interval'
      }));
      $.on(window, 'online offline', ThreadUpdater.cb.online);
      $.on(d, 'QRPostSuccessful', ThreadUpdater.cb.checkpost);
      $.on(d, 'visibilitychange', ThreadUpdater.cb.visibility);
      ThreadUpdater.cb.online();
      return Rice.nodes(ThreadUpdater.dialog);
    },

    /*
    http://freesound.org/people/pierrecartoons1979/sounds/90112/
    cc-by-nc-3.0
     */
    beep: 'data:audio/wav;base64,UklGRjQDAABXQVZFZm10IBAAAAABAAEAgD4AAIA+AAABAAgAc21wbDwAAABBAAADAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkYXRhzAIAAGMms8em0tleMV4zIpLVo8nhfSlcPR102Ki+5JspVEkdVtKzs+K1NEhUIT7DwKrcy0g6WygsrM2k1NpiLl0zIY/WpMrjgCdbPhxw2Kq+5Z4qUkkdU9K1s+K5NkVTITzBwqnczko3WikrqM+l1NxlLF0zIIvXpsnjgydZPhxs2ay95aIrUEkdUdC3suK8N0NUIjq+xKrcz002WioppdGm091pK1w0IIjYp8jkhydXPxxq2K295aUrTkoeTs65suK+OUFUIzi7xqrb0VA0WSoootKm0t5tKlo1H4TYqMfkiydWQBxm16+85actTEseS8y7seHAPD9TIza5yKra01QyWSson9On0d5wKVk2H4DYqcfkjidUQB1j1rG75KsvSkseScu8seDCPz1TJDW2yara1FYxWSwnm9Sn0N9zKVg2H33ZqsXkkihSQR1g1bK65K0wSEsfR8i+seDEQTxUJTOzy6rY1VowWC0mmNWoz993KVc3H3rYq8TklSlRQh1d1LS647AyR0wgRMbAsN/GRDpTJTKwzKrX1l4vVy4lldWpzt97KVY4IXbUr8LZljVPRCxhw7W3z6ZISkw1VK+4sMWvXEhSPk6buay9sm5JVkZNiLWqtrJ+TldNTnquqbCwilZXU1BwpKirrpNgWFhTaZmnpquZbFlbVmWOpaOonHZcXlljhaGhpZ1+YWBdYn2cn6GdhmdhYGN3lp2enIttY2Jjco+bnJuOdGZlZXCImJqakHpoZ2Zug5WYmZJ/bGlobX6RlpeSg3BqaW16jZSVkoZ0bGtteImSk5KIeG5tbnaFkJKRinxxbm91gY2QkIt/c3BwdH6Kj4+LgnZxcXR8iI2OjIR5c3J0e4WLjYuFe3VzdHmCioyLhn52dHR5gIiKioeAeHV1eH+GiYqHgXp2dnh9hIiJh4J8eHd4fIKHiIeDfXl4eHyBhoeHhH96eHmA',
    cb: {
      online: function() {
        if (ThreadUpdater.online = navigator.onLine) {
          ThreadUpdater.outdateCount = 0;
          ThreadUpdater.setInterval();
          ThreadUpdater.set('status', null, null);
          return;
        }
        ThreadUpdater.set('timer', null);
        return ThreadUpdater.set('status', 'Offline', 'warning');
      },
      post: function(e) {
        if (!(ThreadUpdater.isUpdating && e.detail.threadID === ThreadUpdater.thread.ID)) {
          return;
        }
        ThreadUpdater.outdateCount = 0;
        if (ThreadUpdater.seconds > 2) {
          return setTimeout(ThreadUpdater.update, 1000);
        }
      },
      checkpost: function(e) {
        if (!ThreadUpdater.checkPostCount) {
          if (e.detail.threadID !== ThreadUpdater.thread.ID) {
            return;
          }
          ThreadUpdater.seconds = 0;
          ThreadUpdater.outdateCount = 0;
          ThreadUpdater.set('timer', '...');
        }
        if (!(g.DEAD || ThreadUpdater.foundPost || ThreadUpdater.checkPostCount >= 5)) {
          return setTimeout(ThreadUpdater.update, ++ThreadUpdater.checkPostCount * $.SECOND);
        }
        ThreadUpdater.setInterval();
        ThreadUpdater.checkPostCount = 0;
        delete ThreadUpdater.foundPost;
        return delete ThreadUpdater.postID;
      },
      visibility: function() {
        if (d.hidden) {
          return;
        }
        ThreadUpdater.outdateCount = 0;
        if (ThreadUpdater.seconds > ThreadUpdater.interval) {
          return ThreadUpdater.setInterval();
        }
      },
      scrollBG: function() {
        return ThreadUpdater.scrollBG = Conf['Scroll BG'] ? function() {
          return true;
        } : function() {
          return !d.hidden;
        };
      },
      interval: function(e) {
        var val;
        val = parseInt(this.value, 10);
        if (val < 1) {
          val = 1;
        }
        ThreadUpdater.interval = this.value = val;
        if (e) {
          return $.cb.value.call(this);
        }
      },
      load: function(e) {
        var klass, req, text, _ref;
        req = ThreadUpdater.req;
        switch (req.status) {
          case 200:
            g.DEAD = false;
            ThreadUpdater.parse(req.response.posts);
            ThreadUpdater.setInterval();
            break;
          case 404:
            g.DEAD = true;
            ThreadUpdater.set('timer', null);
            ThreadUpdater.set('status', '404', 'warning');
            clearTimeout(ThreadUpdater.timeoutID);
            ThreadUpdater.thread.kill();
            $.event('ThreadUpdate', {
              404: true,
              threadID: ThreadUpdater.thread.fullID
            });
            break;
          default:
            ThreadUpdater.outdateCount++;
            ThreadUpdater.setInterval();
            _ref = req.status === 304 ? [null, null] : ["" + req.statusText + " (" + req.status + ")", 'warning'], text = _ref[0], klass = _ref[1];
            ThreadUpdater.set('status', text, klass);
        }
        if (ThreadUpdater.postID) {
          return ThreadUpdater.cb.checkpost();
        }
      }
    },
    setInterval: function() {
      var cur, i, j, limit;
      i = ThreadUpdater.interval + 1;
      if (Conf['Optional Increase']) {
        cur = ThreadUpdater.outdateCount || 1;
        limit = d.hidden ? 7 : 10;
        j = cur <= limit ? cur : limit;
        cur = (Math.floor(i * 0.1) || 1) * j * j;
        ThreadUpdater.seconds = cur > i ? cur <= 300 ? cur : 300 : i;
      } else {
        ThreadUpdater.seconds = i;
      }
      ThreadUpdater.set('timer', ThreadUpdater.seconds);
      return ThreadUpdater.count(true);
    },
    intervalShortcut: function() {
      var settings;
      Settings.open('Advanced');
      settings = $.id('fourchanx-settings');
      return $('input[name=Interval]', settings).focus();
    },
    set: function(name, text, klass) {
      var el, node;
      el = ThreadUpdater[name];
      if (node = el.firstChild) {
        node.data = text;
      } else {
        el.textContent = text;
      }
      if (klass !== void 0) {
        return el.className = klass;
      }
    },
    count: function(start) {
      clearTimeout(ThreadUpdater.timeoutID);
      if (start && ThreadUpdater.isUpdating && navigator.onLine) {
        return ThreadUpdater.timeout();
      }
    },
    timeout: function() {
      var n;
      ThreadUpdater.timeoutID = setTimeout(ThreadUpdater.timeout, 1000);
      if (!(n = --ThreadUpdater.seconds)) {
        return ThreadUpdater.update();
      } else if (n <= -60) {
        ThreadUpdater.set('status', 'Retrying', null);
        return ThreadUpdater.update();
      } else if (n > 0) {
        return ThreadUpdater.set('timer', n);
      }
    },
    update: function() {
      var url, _ref;
      if (!navigator.onLine) {
        return;
      }
      ThreadUpdater.count();
      if (Conf['Auto Update']) {
        ThreadUpdater.set('timer', '...');
      } else {
        ThreadUpdater.set('timer', 'Update');
      }
      if ((_ref = ThreadUpdater.req) != null) {
        _ref.abort();
      }
      url = "//a.4cdn.org/" + ThreadUpdater.thread.board + "/thread/" + ThreadUpdater.thread + ".json";
      return ThreadUpdater.req = $.ajax(url, {
        onabort: ThreadUpdater.cb.load,
        onloadend: ThreadUpdater.cb.load,
        ontimeout: ThreadUpdater.cb.load,
        timeout: $.MINUTE
      }, {
        whenModified: true
      });
    },
    updateThreadStatus: function(type, status) {
      var change, hasChanged;
      if (!(hasChanged = ThreadUpdater.thread["is" + type] !== status)) {
        return;
      }
      ThreadUpdater.thread.setStatus(type, status);
      change = type === 'Sticky' ? status ? 'now a sticky' : 'not a sticky anymore' : status ? 'now closed' : 'not closed anymore';
      return new Notice('info', "The thread is " + change + ".", 30);
    },
    parse: function(postObjects) {
      var OP, count, files, index, node, num, post, postObject, posts, root, scroll, sendEvent, _i, _j, _len, _len1;
      OP = postObjects[0];
      Build.spoilerRange[ThreadUpdater.thread.board] = OP.custom_spoiler;
      ThreadUpdater.updateThreadStatus('Sticky', !!OP.sticky);
      ThreadUpdater.updateThreadStatus('Closed', !!OP.closed);
      ThreadUpdater.thread.postLimit = !!OP.bumplimit;
      ThreadUpdater.thread.fileLimit = !!OP.imagelimit;
      posts = [];
      index = [];
      files = [];
      count = 0;
      for (_i = 0, _len = postObjects.length; _i < _len; _i++) {
        postObject = postObjects[_i];
        num = postObject.no;
        index.push(num);
        if (postObject.fsize) {
          files.push(num);
        }
        if (num <= ThreadUpdater.lastPost) {
          continue;
        }
        count++;
        node = Build.postFromObject(postObject, ThreadUpdater.thread.board.ID);
        posts.push(new Post(node, ThreadUpdater.thread, ThreadUpdater.thread.board));
      }
      ThreadUpdater.thread.posts.forEach(function(post) {
        var ID;
        ID = +post.ID;
        if (__indexOf.call(index, ID) < 0) {
          post.kill();
        } else if (post.isDead) {
          post.resurrect();
        } else if (post.file && !post.file.isDead && __indexOf.call(files, ID) < 0) {
          post.kill(true);
        }
        if (ThreadUpdater.postID && ThreadUpdater.postID === ID) {
          return ThreadUpdater.foundPost = true;
        }
      });
      sendEvent = function() {
        return $.event('ThreadUpdate', {
          404: false,
          threadID: ThreadUpdater.thread.fullID,
          newPosts: posts.map(function(post) {
            return post.fullID;
          }),
          postCount: OP.replies + 1,
          fileCount: OP.images + (!!ThreadUpdater.thread.OP.file && !ThreadUpdater.thread.OP.file.isDead)
        });
      };
      if (!count) {
        ThreadUpdater.set('status', null, null);
        ThreadUpdater.outdateCount++;
        sendEvent();
        return;
      }
      ThreadUpdater.set('status', "+" + count, 'new');
      ThreadUpdater.outdateCount = 0;
      if (Conf['Beep'] && d.hidden && Unread.posts && !Unread.posts.length) {
        if (!ThreadUpdater.audio) {
          ThreadUpdater.audio = $.el('audio', {
            src: ThreadUpdater.beep
          });
        }
        ThreadUpdater.audio.play();
      }
      ThreadUpdater.lastPost = posts[count - 1].ID;
      Post.callbacks.execute(posts);
      scroll = Conf['Auto Scroll'] && ThreadUpdater.scrollBG() && Header.getBottomOf(ThreadUpdater.root) > -75;
      for (_j = 0, _len1 = posts.length; _j < _len1; _j++) {
        post = posts[_j];
        root = post.nodes.root;
        if (post.cb) {
          if (!post.cb()) {
            $.add(ThreadUpdater.root, root);
          }
        } else {
          $.add(ThreadUpdater.root, root);
        }
      }
      sendEvent();
      if (scroll) {
        if (Conf['Bottom Scroll']) {
          return window.scrollTo(0, d.body.clientHeight);
        } else {
          return Header.scrollTo(posts[0].nodes.root);
        }
      }
    }
  };

  ThreadWatcher = {
    init: function() {
      var now;
      if (!Conf['Thread Watcher']) {
        return;
      }
      this.db = new DataBoard('watchedThreads', this.refresh, true);
      this.dialog = UI.dialog('thread-watcher', 'top: 50px; left: 0px;', "<div><span class=\"move\">Thread Watcher <span id=\"watcher-status\"></span></span><a class=\"menu-button\" href=\"javascript:;\"><i class=\"fa\">\uf107</i></a></div><div id=\"watched-threads\"></div>");
      this.status = $('#watcher-status', this.dialog);
      this.list = this.dialog.lastElementChild;
      $.on(d, 'QRPostSuccessful', this.cb.post);
      if (g.VIEW === 'thread') {
        $.on(d, 'ThreadUpdate', this.cb.threadUpdate);
      }
      $.on(d, '4chanXInitFinished', this.ready);
      switch (g.VIEW) {
        case 'index':
          $.on(d, 'IndexRefresh', this.cb.onIndexRefresh);
          break;
        case 'thread':
          $.on(d, 'ThreadUpdate', this.cb.onThreadRefresh);
      }
      now = Date.now();
      if ((this.db.data.lastChecked || 0) < now - 2 * $.HOUR) {
        this.db.data.lastChecked = now;
        ThreadWatcher.fetchAllStatus();
        this.db.save();
      }
      return Thread.callbacks.push({
        name: 'Thread Watcher',
        cb: this.node
      });
    },
    node: function() {
      var toggler;
      toggler = $.el('img', {
        className: 'watch-thread-link'
      });
      $.on(toggler, 'click', ThreadWatcher.cb.toggle);
      return $.before($('input', this.OP.nodes.post), toggler);
    },
    ready: function() {
      var el;
      $.off(d, '4chanXInitFinished', ThreadWatcher.ready);
      if (!Main.isThisPageLegit()) {
        return;
      }
      ThreadWatcher.refresh();
      if (Conf['Slideout Watcher']) {
        el = $.el('div', {
          id: 'so-watcher',
          innerHTML: '<i class=a-icon></a>'
        });
        Header.addShortcut(el, true);
      } else {
        el = d.body;
      }
      $.add(el, ThreadWatcher.dialog);
      if (!Conf['Auto Watch']) {
        return;
      }
      return $.get('AutoWatch', 0, function(_arg) {
        var AutoWatch, thread;
        AutoWatch = _arg.AutoWatch;
        if (!(thread = g.BOARD.threads[AutoWatch])) {
          return;
        }
        ThreadWatcher.add(thread);
        return $["delete"]('AutoWatch');
      });
    },
    cb: {
      openAll: function() {
        var a, _i, _len, _ref;
        if ($.hasClass(this, 'disabled')) {
          return;
        }
        _ref = $$('a[title]', ThreadWatcher.list);
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          a = _ref[_i];
          $.open(a.href);
        }
        return $.event('CloseMenu');
      },
      checkThreads: function() {
        if ($.hasClass(this, 'disabled')) {
          return;
        }
        return ThreadWatcher.fetchAllStatus();
      },
      pruneDeads: function() {
        var boardID, data, threadID, _i, _len, _ref, _ref1;
        if ($.hasClass(this, 'disabled')) {
          return;
        }
        _ref = ThreadWatcher.getAll();
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          _ref1 = _ref[_i], boardID = _ref1.boardID, threadID = _ref1.threadID, data = _ref1.data;
          if (!data.isDead) {
            continue;
          }
          delete ThreadWatcher.db.data.boards[boardID][threadID];
          ThreadWatcher.db.deleteIfEmpty({
            boardID: boardID
          });
        }
        ThreadWatcher.db.save();
        ThreadWatcher.refresh();
        return $.event('CloseMenu');
      },
      toggle: function() {
        return ThreadWatcher.toggle(Get.threadFromNode(this));
      },
      rm: function() {
        var boardID, threadID, _ref;
        _ref = this.parentNode.dataset.fullID.split('.'), boardID = _ref[0], threadID = _ref[1];
        return ThreadWatcher.rm(boardID, +threadID);
      },
      post: function(e) {
        var boardID, postID, threadID, _ref;
        _ref = e.detail, boardID = _ref.boardID, threadID = _ref.threadID, postID = _ref.postID;
        if (postID === threadID) {
          if (Conf['Auto Watch']) {
            return $.set('AutoWatch', threadID);
          }
        } else if (Conf['Auto Watch Reply']) {
          return ThreadWatcher.add(g.threads[boardID + '.' + threadID]);
        }
      },
      onIndexRefresh: function() {
        var boardID, data, threadID, _ref;
        boardID = g.BOARD.ID;
        _ref = ThreadWatcher.db.data.boards[boardID];
        for (threadID in _ref) {
          data = _ref[threadID];
          if (!data.isDead && !(threadID in g.BOARD.threads)) {
            if (Conf['Auto Prune']) {
              ThreadWatcher.db["delete"]({
                boardID: boardID,
                threadID: threadID
              });
            } else {
              data.isDead = true;
              ThreadWatcher.db.set({
                boardID: boardID,
                threadID: threadID,
                val: data
              });
            }
          }
        }
        return ThreadWatcher.refresh();
      },
      onThreadRefresh: function(e) {
        var thread;
        thread = g.threads[e.detail.threadID];
        if (!(e.detail[404] && ThreadWatcher.db.get({
          boardID: thread.board.ID,
          threadID: thread.ID
        }))) {
          return;
        }
        return ThreadWatcher.add(thread);
      }
    },
    fetchCount: {
      fetched: 0,
      fetching: 0
    },
    fetchAllStatus: function() {
      var thread, threads, _i, _len;
      if (!(threads = ThreadWatcher.getAll()).length) {
        return;
      }
      ThreadWatcher.status.textContent = '...';
      for (_i = 0, _len = threads.length; _i < _len; _i++) {
        thread = threads[_i];
        ThreadWatcher.fetchStatus(thread);
      }
    },
    fetchStatus: function(_arg) {
      var boardID, data, fetchCount, threadID;
      boardID = _arg.boardID, threadID = _arg.threadID, data = _arg.data;
      if (data.isDead) {
        return;
      }
      fetchCount = ThreadWatcher.fetchCount;
      fetchCount.fetching++;
      return $.ajax("//a.4cdn.org/" + boardID + "/thread/" + threadID + ".json", {
        onloadend: function() {
          var status;
          fetchCount.fetched++;
          if (fetchCount.fetched === fetchCount.fetching) {
            fetchCount.fetched = 0;
            fetchCount.fetching = 0;
            status = '';
          } else {
            status = "" + (Math.round(fetchCount.fetched / fetchCount.fetching * 100)) + "%";
          }
          ThreadWatcher.status.textContent = status;
          if (this.status !== 404) {
            return;
          }
          if (Conf['Auto Prune']) {
            ThreadWatcher.db["delete"]({
              boardID: boardID,
              threadID: threadID
            });
          } else {
            data.isDead = true;
            ThreadWatcher.db.set({
              boardID: boardID,
              threadID: threadID,
              val: data
            });
          }
          return ThreadWatcher.refresh();
        }
      }, {
        type: 'head'
      });
    },
    getAll: function() {
      var all, boardID, data, threadID, threads, _ref;
      all = [];
      _ref = ThreadWatcher.db.data.boards;
      for (boardID in _ref) {
        threads = _ref[boardID];
        if (Conf['Current Board'] && boardID !== g.BOARD.ID) {
          continue;
        }
        for (threadID in threads) {
          data = threads[threadID];
          all.push({
            boardID: boardID,
            threadID: threadID,
            data: data
          });
        }
      }
      return all;
    },
    makeLine: function(boardID, threadID, data) {
      var div, fullID, href, link, x;
      x = $.el('a', {
        className: 'fa',
        href: 'javascript:;',
        textContent: '\uf00d'
      });
      $.on(x, 'click', ThreadWatcher.cb.rm);
      if (data.isDead) {
        href = Redirect.to('thread', {
          boardID: boardID,
          threadID: threadID
        });
      }
      link = $.el('a', {
        href: href || ("/" + boardID + "/thread/" + threadID),
        textContent: data.excerpt,
        title: data.excerpt
      });
      div = $.el('div');
      fullID = "" + boardID + "." + threadID;
      div.dataset.fullID = fullID;
      if (g.VIEW === 'thread' && fullID === ("" + g.BOARD + "." + g.THREADID)) {
        $.addClass(div, 'current');
      }
      if (data.isDead) {
        $.addClass(div, 'dead-thread');
      }
      $.add(div, [x, $.tn(' '), link]);
      return div;
    },
    refresh: function() {
      var boardID, data, helper, list, nodes, refresher, thread, threadID, threads, toggler, watched, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2, _ref3;
      nodes = [];
      _ref = ThreadWatcher.getAll();
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        _ref1 = _ref[_i], boardID = _ref1.boardID, threadID = _ref1.threadID, data = _ref1.data;
        nodes.push(ThreadWatcher.makeLine(boardID, threadID, data));
      }
      list = ThreadWatcher.list;
      $.rmAll(list);
      $.add(list, nodes);
      threads = g.BOARD.threads;
      _ref2 = threads.keys;
      for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {
        threadID = _ref2[_j];
        thread = threads[threadID];
        toggler = $('.watch-thread-link', thread.OP.nodes.post);
        watched = ThreadWatcher.db.get({
          boardID: thread.board.ID,
          threadID: threadID
        });
        helper = watched ? ['addClass', 'Unwatch'] : ['rmClass', 'Watch'];
        $[helper[0]](toggler, 'watched');
        toggler.title = "" + helper[1] + " Thread";
      }
      _ref3 = ThreadWatcher.menu.refreshers;
      for (_k = 0, _len2 = _ref3.length; _k < _len2; _k++) {
        refresher = _ref3[_k];
        refresher();
      }
    },
    toggle: function(thread) {
      var boardID, threadID;
      boardID = thread.board.ID;
      threadID = thread.ID;
      if (ThreadWatcher.db.get({
        boardID: boardID,
        threadID: threadID
      })) {
        return ThreadWatcher.rm(boardID, threadID);
      } else {
        return ThreadWatcher.add(thread);
      }
    },
    add: function(thread) {
      var boardID, data, threadID;
      data = {};
      boardID = thread.board.ID;
      threadID = thread.ID;
      if (thread.isDead) {
        if (Conf['Auto Prune'] && ThreadWatcher.db.get({
          boardID: boardID,
          threadID: threadID
        })) {
          ThreadWatcher.rm(boardID, threadID);
          return;
        }
        data.isDead = true;
      }
      data.excerpt = Get.threadExcerpt(thread);
      ThreadWatcher.db.set({
        boardID: boardID,
        threadID: threadID,
        val: data
      });
      return ThreadWatcher.refresh();
    },
    rm: function(boardID, threadID) {
      ThreadWatcher.db["delete"]({
        boardID: boardID,
        threadID: threadID
      });
      return ThreadWatcher.refresh();
    },
    convert: function(oldFormat) {
      var boardID, data, newFormat, threadID, threads;
      newFormat = {};
      for (boardID in oldFormat) {
        threads = oldFormat[boardID];
        for (threadID in threads) {
          data = threads[threadID];
          (newFormat[boardID] || (newFormat[boardID] = {}))[threadID] = {
            excerpt: data.textContent
          };
        }
      }
      return newFormat;
    },
    menu: {
      refreshers: [],
      init: function() {
        var menu;
        if (!Conf['Thread Watcher']) {
          return;
        }
        menu = new UI.Menu();
        $.on($('.menu-button', ThreadWatcher.dialog), 'click', function(e) {
          return menu.toggle(e, this, ThreadWatcher);
        });
        this.addHeaderMenuEntry();
        return this.addMenuEntries(menu);
      },
      addHeaderMenuEntry: function() {
        var entryEl;
        if (g.VIEW !== 'thread') {
          return;
        }
        entryEl = $.el('a', {
          href: 'javascript:;'
        });
        Header.menu.addEntry({
          el: entryEl,
          order: 60
        });
        $.on(entryEl, 'click', function() {
          return ThreadWatcher.toggle(g.threads["" + g.BOARD + "." + g.THREADID]);
        });
        return this.refreshers.push(function() {
          var addClass, rmClass, text, _ref;
          _ref = $('.current', ThreadWatcher.list) ? ['unwatch-thread', 'watch-thread', 'Unwatch thread'] : ['watch-thread', 'unwatch-thread', 'Watch thread'], addClass = _ref[0], rmClass = _ref[1], text = _ref[2];
          $.addClass(entryEl, addClass);
          $.rmClass(entryEl, rmClass);
          return entryEl.textContent = text;
        });
      },
      addMenuEntries: function(menu) {
        var cb, conf, entries, entry, name, refresh, subEntries, _i, _len, _ref, _ref1;
        entries = [];
        entries.push({
          cb: ThreadWatcher.cb.openAll,
          entry: {
            el: $.el('a', {
              textContent: 'Open all threads'
            })
          },
          refresh: function() {
            return (ThreadWatcher.list.firstElementChild ? $.rmClass : $.addClass)(this.el, 'disabled');
          }
        });
        entries.push({
          cb: ThreadWatcher.cb.checkThreads,
          entry: {
            el: $.el('a', {
              textContent: 'Check 404\'d threads'
            })
          },
          refresh: function() {
            return ($('div:not(.dead-thread)', ThreadWatcher.list) ? $.rmClass : $.addClass)(this.el, 'disabled');
          }
        });
        entries.push({
          cb: ThreadWatcher.cb.pruneDeads,
          entry: {
            el: $.el('a', {
              textContent: 'Prune 404\'d threads'
            })
          },
          refresh: function() {
            return ($('.dead-thread', ThreadWatcher.list) ? $.rmClass : $.addClass)(this.el, 'disabled');
          }
        });
        subEntries = [];
        _ref = Config.threadWatcher;
        for (name in _ref) {
          conf = _ref[name];
          subEntries.push(this.createSubEntry(name, conf[1]));
        }
        entries.push({
          entry: {
            el: $.el('span', {
              textContent: 'Settings'
            }),
            subEntries: subEntries
          }
        });
        for (_i = 0, _len = entries.length; _i < _len; _i++) {
          _ref1 = entries[_i], entry = _ref1.entry, cb = _ref1.cb, refresh = _ref1.refresh;
          if (entry.el.nodeName === 'A') {
            entry.el.href = 'javascript:;';
          }
          if (cb) {
            $.on(entry.el, 'click', cb);
          }
          if (refresh) {
            this.refreshers.push(refresh.bind(entry));
          }
          menu.addEntry(entry);
        }
      },
      createSubEntry: function(name, desc) {
        var entry, input;
        entry = {
          type: 'thread watcher',
          el: $.el('label', {
            innerHTML: "<input type=checkbox name='" + name + "'> " + name,
            title: desc
          })
        };
        input = entry.el.firstElementChild;
        input.checked = Conf[name];
        $.on(input, 'change', $.cb.checked);
        if (name === 'Current Board') {
          $.on(input, 'change', ThreadWatcher.refresh);
        }
        return entry;
      }
    }
  };

  Unread = {
    init: function() {
      if (g.VIEW !== 'thread' || !Conf['Unread Count'] && !Conf['Unread Favicon'] && !Conf['Desktop Notifications']) {
        return;
      }
      this.db = new DataBoard('lastReadPosts', this.sync);
      this.hr = $.el('hr', {
        id: 'unread-line'
      });
      this.posts = new RandomAccessList;
      this.postsQuotingYou = [];
      return Thread.callbacks.push({
        name: 'Unread',
        cb: this.node
      });
    },
    disconnect: function() {
      var hr, name, _i, _len, _ref;
      if (g.VIEW !== 'thread' || !Conf['Unread Count'] && !Conf['Unread Favicon'] && !Conf['Desktop Notifications']) {
        return;
      }
      Unread.db.disconnect();
      hr = Unread.hr;
      if (hr) {
        $.rm(hr);
      }
      _ref = ['db', 'hr', 'posts', 'postsQuotingYou', 'thread', 'title'];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        name = _ref[_i];
        delete this[name];
      }
      this.lastReadPost = 0;
      $.off(d, '4chanXInitFinished', this.ready);
      $.off(d, 'ThreadUpdate', this.onUpdate);
      $.off(d, 'scroll visibilitychange', this.read);
      if (Conf['Unread Line']) {
        $.off(d, 'visibilitychange', this.setLine);
      }
      return Thread.callbacks.disconnect('Unread');
    },
    node: function() {
      Unread.thread = this;
      Unread.title = d.title;
      Unread.lastReadPost = Unread.db.get({
        boardID: this.board.ID,
        threadID: this.ID,
        defaultValue: 0
      });
      $.on(d, '4chanXInitFinished', Unread.ready);
      $.on(d, 'ThreadUpdate', Unread.onUpdate);
      $.on(d, 'scroll visibilitychange', Unread.read);
      if (Conf['Unread Line']) {
        return $.on(d, 'visibilitychange', Unread.setLine);
      }
    },
    ready: function() {
      var post, posts;
      $.off(d, '4chanXInitFinished', Unread.ready);
      posts = Unread.thread.posts;
      post = posts.first().nodes.root;
      return $.asap((function() {
        return post.getBoundingClientRect().bottom;
      }), function() {
        var arr;
        if (Conf['Quote Threading']) {
          QuoteThreading.force();
        } else {
          arr = [];
          posts.forEach(function(post) {
            if (post.isReply) {
              return arr.push(post);
            }
          });
          Unread.addPosts(arr);
        }
        if (Conf['Scroll to Last Read Post']) {
          return setTimeout(Unread.scroll, 200);
        }
      });
    },
    scroll: function() {
      var down, hash, keys, post, posts, root;
      if ((hash = location.hash.match(/\d+/)) && hash[0] in Unread.thread.posts) {
        return;
      }
      if (post = Unread.posts.first) {
        while (root = $.x('preceding-sibling::div[contains(@class,"replyContainer")][1]', post.data.nodes.root)) {
          if (!(post = Get.postFromRoot(root)).isHidden) {
            break;
          }
        }
        if (!root) {
          return;
        }
        down = true;
      } else {
        posts = Unread.thread.posts;
        keys = posts.keys;
        root = posts[keys[keys.length - 1]].nodes.root;
      }
      if (Header.getBottomOf(root) < 0) {
        return Header.scrollTo(root, down);
      }
    },
    sync: function() {
      var ID, lastReadPost, post;
      lastReadPost = Unread.db.get({
        boardID: Unread.thread.board.ID,
        threadID: Unread.thread.ID,
        defaultValue: 0
      });
      if (Unread.lastReadPost > lastReadPost) {
        return;
      }
      Unread.lastReadPost = lastReadPost;
      post = Unread.posts.first;
      while (post) {
        ID = post.ID;
        if (ID > lastReadPost) {
          break;
        }
        post = post.next;
        Unread.posts.rm(ID);
      }
      Unread.readArray(Unread.postsQuotingYou);
      if (Conf['Unread Line']) {
        Unread.setLine();
      }
      return Unread.update();
    },
    addPosts: function(posts) {
      var ID, post, _i, _len, _ref, _ref1;
      for (_i = 0, _len = posts.length; _i < _len; _i++) {
        post = posts[_i];
        ID = post.ID;
        if (ID <= Unread.lastReadPost || post.isHidden || QR.db.get({
          boardID: post.board.ID,
          threadID: post.thread.ID,
          postID: ID
        })) {
          continue;
        }
        Unread.posts.push(post);
        Unread.addPostQuotingYou(post);
      }
      if (Conf['Unread Line']) {
        Unread.setLine((_ref = (_ref1 = Unread.posts.first) != null ? _ref1.data : void 0, __indexOf.call(posts, _ref) >= 0));
      }
      Unread.read();
      return Unread.update();
    },
    addPostQuotingYou: function(post) {
      var quotelink, _i, _len, _ref;
      _ref = post.nodes.quotelinks;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        quotelink = _ref[_i];
        if (!(QR.db.get(Get.postDataFromLink(quotelink)))) {
          continue;
        }
        Unread.postsQuotingYou.push(post);
        Unread.openNotification(post);
        return;
      }
    },
    openNotification: function(post) {
      var notif;
      if (!Header.areNotificationsEnabled) {
        return;
      }
      notif = new Notification("" + (post.getNameBlock()) + " replied to you", {
        body: post.info.comment,
        icon: Favicon.logo
      });
      notif.onclick = function() {
        Header.scrollToIfNeeded(post.nodes.root, true);
        return window.focus();
      };
      return notif.onshow = function() {
        return setTimeout(function() {
          return notif.close();
        }, 7 * $.SECOND);
      };
    },
    onUpdate: function(e) {
      if (e.detail[404]) {
        return Unread.update();
      } else if (Conf['Quote Threading']) {
        Unread.read();
        return Unread.update();
      } else {
        return Unread.addPosts([].map.call(e.detail.newPosts, function(fullID) {
          return g.posts[fullID];
        }));
      }
    },
    readSinglePost: function(post) {
      var ID, i, posts;
      ID = post.ID;
      posts = Unread.posts;
      if (!posts[ID]) {
        return;
      }
      if (post === posts.first) {
        Unread.lastReadPost = ID;
        Unread.saveLastReadPost();
      }
      posts.rm(ID);
      if ((i = Unread.postsQuotingYou.indexOf(post)) !== -1) {
        Unread.postsQuotingYou.splice(i, 1);
      }
      return Unread.update();
    },
    readArray: function(arr) {
      var i, post, _i, _len;
      for (i = _i = 0, _len = arr.length; _i < _len; i = ++_i) {
        post = arr[i];
        if (post.ID > Unread.lastReadPost) {
          break;
        }
      }
      return arr.splice(0, i);
    },
    read: $.debounce(100, function(e) {
      var ID, data, post, posts;
      if (d.hidden || !Unread.posts.length) {
        return;
      }
      posts = Unread.posts;
      while (post = posts.first) {
        if (!(Header.getBottomOf(post.data.nodes.root) > -1)) {
          break;
        }
        ID = post.ID, data = post.data;
        posts.rm(ID);
        if (Conf['Mark Quotes of You'] && QR.db.get({
          boardID: data.board.ID,
          threadID: data.thread.ID,
          postID: ID
        })) {
          QuoteMarkers.lastRead = data.nodes.root;
        }
      }
      if (!ID) {
        return;
      }
      if (Unread.lastReadPost < ID) {
        Unread.lastReadPost = ID;
      }
      Unread.saveLastReadPost();
      Unread.readArray(Unread.postsQuotingYou);
      if (e) {
        return Unread.update();
      }
    }),
    saveLastReadPost: $.debounce(5 * $.SECOND, function() {
      if (Unread.thread.isDead) {
        return;
      }
      return Unread.db.set({
        boardID: Unread.thread.board.ID,
        threadID: Unread.thread.ID,
        val: Unread.lastReadPost
      });
    }),
    setLine: function(force) {
      var post;
      if (!(d.hidden || force === true)) {
        return;
      }
      if (!(post = Unread.posts.first)) {
        return $.rm(Unread.hr);
      }
      if ($.x('preceding-sibling::div[contains(@class,"replyContainer")]', post.data.nodes.root)) {
        return $.before(post.data.nodes.root, Unread.hr);
      }
    },
    update: function() {
      var count;
      count = Unread.posts.length;
      if (Conf['Unread Count']) {
        d.title = "" + (count || !Conf['Hide Unread Count at (0)'] ? "(" + count + ") " : '') + (g.DEAD ? Unread.title.replace('-', '- 404 -') : Unread.title);
      }
      if (!Conf['Unread Favicon']) {
        return;
      }
      Favicon.el.href = g.DEAD ? Unread.postsQuotingYou[0] ? Favicon.unreadDeadY : count ? Favicon.unreadDead : Favicon.dead : count ? Unread.postsQuotingYou[0] ? Favicon.unreadY : Favicon.unread : Favicon["default"];
      return $.add(d.head, Favicon.el);
    }
  };

  Redirect = {
    init: function() {
      var archive, archives, boardID, boards, data, files, id, name, o, record, software, type, withCredentials, _i, _j, _len, _len1, _ref, _ref1;
      o = {
        thread: {},
        post: {},
        file: {}
      };
      archives = {};
      _ref = Redirect.archives;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        data = _ref[_i];
        name = data.name, boards = data.boards, files = data.files, software = data.software, withCredentials = data.withCredentials;
        archives[name] = data;
        for (_j = 0, _len1 = boards.length; _j < _len1; _j++) {
          boardID = boards[_j];
          if (!(!withCredentials)) {
            continue;
          }
          if (!(boardID in o.thread)) {
            o.thread[boardID] = data;
          }
          if (!(boardID in o.post || software !== 'foolfuuka')) {
            o.post[boardID] = data;
          }
          if (!(boardID in o.file || __indexOf.call(files, boardID) < 0)) {
            o.file[boardID] = data;
          }
        }
      }
      _ref1 = Conf['selectedArchives'];
      for (boardID in _ref1) {
        record = _ref1[boardID];
        for (type in record) {
          id = record[type];
          if (!((archive = archives[id]))) {
            continue;
          }
          boards = type === 'file' ? archive.files : archive.boards;
          if (__indexOf.call(boards, boardID) < 0) {
            continue;
          }
          o[type][boardID] = archive;
        }
      }
      return Redirect.data = o;
    },
    archives: [{"uid":0,"name":"Moe","domain":"archive.moe","http":true,"https":true,"software":"foolfuuka","boards":["a","biz","c","co","diy","gd","int","jp","m","out","po","sci","sp","tg","tv","v","vg","vp","vr","wsg"],"files":["a","biz","c","co","diy","gd","jp","m","po","sci","tg","v","vg","vp","vr","wsg"]},{"uid":1,"name":"NSFW Moe","domain":"nsfw.archive.moe","http":true,"https":true,"software":"foolfuuka","boards":["h","u"],"files":["h","u"]},{"uid":3,"name":"4plebs Archive","domain":"archive.4plebs.org","http":true,"https":true,"software":"foolfuuka","boards":["adv","f","hr","o","pol","s4s","tg","trv","tv","x"],"files":["adv","f","hr","o","pol","s4s","tg","trv","tv","x"]},{"uid":5,"name":"Love is Over","domain":"archive.loveisover.me","http":true,"https":true,"software":"foolfuuka","boards":["c","d","e","i","lgbt","t","u","w","wg"],"files":["c","d","e","i","lgbt","t","u","w","wg"]},{"uid":8,"name":"Rebecca Black Tech","domain":"archive.rebeccablacktech.com","http":false,"https":true,"software":"fuuka","boards":["cgl","g","mu","w"],"files":["cgl","g","mu","w"]},{"uid":9,"name":"Heinessen","domain":"archive.heinessen.com","http":true,"https":false,"software":"fuuka","boards":["an","fit","k","mlp","r9k","toy"],"files":["an","fit","k","mlp","r9k","toy"]},{"uid":10,"name":"warosu","domain":"warosu.org","http":false,"https":true,"software":"fuuka","boards":["3","biz","cgl","ck","diy","fa","g","ic","jp","lit","sci","tg","vr"],"files":["3","biz","cgl","ck","diy","fa","ic","jp","lit","sci","tg","vr"]},{"uid":15,"name":"fgts","domain":"fgts.jp","http":true,"https":true,"software":"foolfuuka","boards":["asp","cm","h","hc","hm","n","p","r","s","soc","y"],"files":["asp","cm","h","hc","hm","n","p","r","s","soc","y"]},{"uid":16,"name":"maware","domain":"archive.mawa.re","http":true,"https":false,"software":"foolfuuka","boards":["t"],"files":["t"]},{"uid":17,"name":"imcute","domain":"imcute.yt","http":true,"https":false,"software":"foolfuuka","boards":["gif","jp","vg"],"files":["gif","jp","vg"]}],
    to: function(dest, data) {
      var archive;
      archive = (dest === 'search' || dest === 'board' ? Redirect.data.thread : Redirect.data[dest])[data.boardID];
      if (!archive) {
        return '';
      }
      return Redirect[dest](archive, data);
    },
    protocol: function(archive) {
      var protocol;
      protocol = location.protocol;
      if (!archive[protocol.slice(0, -1)]) {
        protocol = protocol === 'https:' ? 'http:' : 'https:';
      }
      return "" + protocol + "//";
    },
    thread: function(archive, _arg) {
      var boardID, path, postID, threadID;
      boardID = _arg.boardID, threadID = _arg.threadID, postID = _arg.postID;
      path = threadID ? "" + boardID + "/thread/" + threadID : "" + boardID + "/post/" + postID;
      if (archive.software === 'foolfuuka') {
        path += '/';
      }
      if (threadID && postID) {
        path += archive.software === 'foolfuuka' ? "#" + postID : "#p" + postID;
      }
      return "" + (Redirect.protocol(archive)) + archive.domain + "/" + path;
    },
    post: function(archive, _arg) {
      var URL, boardID, postID;
      boardID = _arg.boardID, postID = _arg.postID;
      URL = new String("" + (Redirect.protocol(archive)) + archive.domain + "/_/api/chan/post/?board=" + boardID + "&num=" + postID);
      URL.archive = archive;
      return URL;
    },
    file: function(archive, _arg) {
      var boardID, filename;
      boardID = _arg.boardID, filename = _arg.filename;
      return "" + (Redirect.protocol(archive)) + archive.domain + "/" + boardID + "/full_image/" + filename;
    },
    board: function(archive, _arg) {
      var boardID;
      boardID = _arg.boardID;
      return "" + (Redirect.protocol(archive)) + archive.domain + "/" + boardID + "/";
    },
    search: function(archive, _arg) {
      var boardID, path, type, value;
      boardID = _arg.boardID, type = _arg.type, value = _arg.value;
      type = type === 'name' ? 'username' : type === 'MD5' ? 'image' : type;
      value = encodeURIComponent(value);
      path = archive.software === 'foolfuuka' ? "" + boardID + "/search/" + type + "/" + value : "" + boardID + "/?task=search2&search_" + (type === 'image' ? 'media_hash' : type) + "=" + value;
      return "" + (Redirect.protocol(archive)) + archive.domain + "/" + path;
    }
  };

  [
    {
      "uid": 0,
      "name": "Moe",
      "domain": "archive.moe",
      "http": true,
      "https": true,
      "software": "foolfuuka",
      "boards": ["a", "biz", "c", "co", "diy", "gd", "int", "jp", "m", "out", "po", "sci", "sp", "tg", "tv", "v", "vg", "vp", "vr", "wsg"],
      "files": ["a", "biz", "c", "co", "diy", "gd", "jp", "m", "po", "sci", "tg", "v", "vg", "vp", "vr", "wsg"]
    }, {
      "uid": 1,
      "name": "NSFW Moe",
      "domain": "nsfw.archive.moe",
      "http": true,
      "https": true,
      "software": "foolfuuka",
      "boards": ["h", "u"],
      "files": ["h", "u"]
    }, {
      "uid": 3,
      "name": "4plebs Archive",
      "domain": "archive.4plebs.org",
      "http": true,
      "https": true,
      "software": "foolfuuka",
      "boards": ["adv", "f", "hr", "o", "pol", "s4s", "tg", "trv", "tv", "x"],
      "files": ["adv", "f", "hr", "o", "pol", "s4s", "tg", "trv", "tv", "x"]
    }, {
      "uid": 5,
      "name": "Love is Over",
      "domain": "archive.loveisover.me",
      "http": true,
      "https": true,
      "software": "foolfuuka",
      "boards": ["c", "d", "e", "i", "lgbt", "t", "u", "w", "wg"],
      "files": ["c", "d", "e", "i", "lgbt", "t", "u", "w", "wg"]
    }, {
      "uid": 8,
      "name": "Rebecca Black Tech",
      "domain": "archive.rebeccablacktech.com",
      "http": false,
      "https": true,
      "software": "fuuka",
      "boards": ["cgl", "g", "mu", "w"],
      "files": ["cgl", "g", "mu", "w"]
    }, {
      "uid": 9,
      "name": "Heinessen",
      "domain": "archive.heinessen.com",
      "http": true,
      "https": false,
      "software": "fuuka",
      "boards": ["an", "fit", "k", "mlp", "r9k", "toy"],
      "files": ["an", "fit", "k", "mlp", "r9k", "toy"]
    }, {
      "uid": 10,
      "name": "warosu",
      "domain": "warosu.org",
      "http": false,
      "https": true,
      "software": "fuuka",
      "boards": ["3", "biz", "cgl", "ck", "diy", "fa", "g", "ic", "jp", "lit", "sci", "tg", "vr"],
      "files": ["3", "biz", "cgl", "ck", "diy", "fa", "ic", "jp", "lit", "sci", "tg", "vr"]
    }, {
      "uid": 15,
      "name": "fgts",
      "domain": "fgts.jp",
      "http": true,
      "https": true,
      "software": "foolfuuka",
      "boards": ["asp", "cm", "h", "hc", "hm", "n", "p", "r", "s", "soc", "y"],
      "files": ["asp", "cm", "h", "hc", "hm", "n", "p", "r", "s", "soc", "y"]
    }, {
      "uid": 16,
      "name": "maware",
      "domain": "archive.mawa.re",
      "http": true,
      "https": false,
      "software": "foolfuuka",
      "boards": ["t"],
      "files": ["t"]
    }, {
      "uid": 17,
      "name": "imcute",
      "domain": "imcute.yt",
      "http": true,
      "https": false,
      "software": "foolfuuka",
      "boards": ["gif", "jp", "vg"],
      "files": ["gif", "jp", "vg"]
    }
  ];

  Banner = {
    init: function() {
      return $.asap((function() {
        return d.body;
      }), function() {
        return $.asap((function() {
          return $('hr');
        }), Banner.ready);
      });
    },
    ready: function() {
      var banner, child, children, i, img, nodes, title, _i, _len;
      banner = $(".boardBanner");
      title = $.el("div", {
        id: "boardTitle"
      });
      children = banner.children;
      nodes = [];
      for (i = _i = 0, _len = children.length; _i < _len; i = ++_i) {
        child = children[i];
        if (i === 0) {
          $.rm(child);
          img = $.el('img', {
            alt: '4chan',
            title: 'Click to change'
          });
          $.on(img, 'click error', Banner.cb.toggle);
          Banner.cb.toggle.call(img);
          $.prepend(banner, img);
          continue;
        }
        if (Conf['Custom Board Titles']) {
          Banner.custom(child).title = "Ctrl+click to edit board " + (i === 2 ? 'sub' : '') + "title";
        }
        nodes.push(child);
      }
      $.add(title, nodes);
      $.after(banner, title);
    },
    cb: {
      toggle: (function() {
        var types;
        types = {
          jpg: 227,
          png: 262,
          gif: 253
        };
        return function() {
          var num, type;
          type = Object.keys(types)[Math.floor(3 * Math.random())];
          num = Math.floor(types[type] * Math.random());
          return this.src = "//s.4cdn.org/image/title/" + num + "." + type;
        };
      })(),
      click: function(e) {
        if (e.ctrlKey) {
          this.contentEditable = true;
          return this.focus();
        }
      },
      keydown: function(e) {
        e.stopPropagation();
        if (!e.shiftKey && e.keyCode === 13) {
          return this.blur();
        }
      },
      focus: function() {
        var items, string, string2;
        this.textContent = this.innerHTML;
        string = "" + g.BOARD + "." + this.className;
        string2 = "" + string + ".orig";
        items = {
          title: this.innerHTML
        };
        items[string] = '';
        items[string2] = false;
        $.get(items, function(items) {
          if (!(items[string2] && items.title === items[string])) {
            return $.set(string2, items.title);
          }
        });
      },
      blur: function() {
        this.innerHTML = this.textContent;
        this.contentEditable = false;
        return $.set("" + g.BOARD + "." + this.className, this.textContent);
      }
    },
    custom: function(child) {
      var cachedTest, string;
      cachedTest = child.innerHTML;
      string = "" + g.BOARD + "." + child.className;
      $.on(child, 'click keydown focus blur', function(e) {
        return Banner.cb[e.type].apply(this, [e]);
      });
      $.get(string, cachedTest, function(item) {
        var string2, title;
        if (!(title = item[string])) {
          return;
        }
        if (Conf['Persistent Custom Board Titles']) {
          return child.innerHTML = title;
        }
        string2 = "" + string + ".orig";
        return $.get(string2, cachedTest, function(itemb) {
          if (cachedTest === itemb[string2]) {
            return child.innerHTML = title;
          } else {
            $.set(string, cachedTest);
            return $.set(string2, cachedTest);
          }
        });
      });
      return child;
    }
  };

  GlobalMessage = {
    init: function() {
      return $.asap((function() {
        return d.body;
      }), function() {
        return $.asap((function() {
          return $.id('delform');
        }), GlobalMessage.ready);
      });
    },
    ready: function() {
      var child, el, _i, _len, _ref;
      if (el = $("#globalMessage", d.body)) {
        _ref = el.children;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          child = _ref[_i];
          child.cssText = "";
        }
      }
    }
  };

  JSColor = {
    css: function() {
      return ".jscBox { width: 251px; height: 155px; } .jscBoxB, .jscPadB, .jscPadM, .jscSldB, .jscSldM, .jscBtn { position: absolute; clear: both; } .jscBoxB { left: 320px; bottom: 20px; z-index: 30; border: 1px solid; border-color: ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight; background: ThreeDFace; } .jscPad { width: 181px; height: 101px; background-image: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,1)), linear-gradient(to right, rgb(255,0,0), rgb(255,255,0), rgb(0,255,0), rgb(0,255,255), rgb(0,0,255), rgb(255,0,255), rgb(255,0,0)); background-repeat: no-repeat; background-position: 0 0; } .jscPadB { left: 10px; top: 10px; border: 1px solid; border-color: ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow; } .jscPadM { left: 0; top: 0; width: 200px; height: 121px; cursor: crosshair; background-image: url('data:image/gif;base64,R0lGODlhDwAPAKEBAAAAAP///////////yH5BAEKAAIALAAAAAAPAA8AAAIklB8Qx53b4otSUWcvyiz4/4AeQJbmKY4p1HHapBlwPL/uVRsFADs='); background-repeat: no-repeat; } .jscSld { width: 16px; height: 101px; background-image: linear-gradient(rgba(0,0,0,0), rgba(0,0,0,1)); } .jscSldB { right: 10px; top: 10px; border: 1px solid; border-color: ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow; } .jscSldM { right: 0; top: 0; width: 36px; height: 121px; cursor: pointer; background-image: url('data:image/gif;base64,R0lGODlhBwALAKECAAAAAP///6g8eKg8eCH5BAEKAAIALAAAAAAHAAsAAAITTIQYcLnsgGxvijrxqdQq6DRJAQA7'); background-repeat: no-repeat; } .jscBtn { right: 10px; bottom: 10px; padding: 0 15px; height: 18px; border: 1px solid; border-color: ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight; color: ButtonText; text-align: center; cursor: pointer; } .jscBtnS { line-height: 10px; }";
    },
    bind: function(el) {
      if (!el.color) {
        return el.color = new JSColor.color(el);
      }
    },
    fetchElement: function(mixed) {
      if (typeof mixed === "string") {
        return $.id(mixed);
      } else {
        return mixed;
      }
    },
    fireEvent: function(el, event) {
      if (!el) {
        return;
      }
      return $.event(event, null, el);
    },
    getRelMousePos: function(e) {
      var x, y;
      e || (e = window.event);
      x = 0;
      y = 0;
      if (typeof e.offsetX === 'number') {
        x = e.offsetX;
        y = e.offsetY;
      } else if (typeof e.layerX === 'number') {
        x = e.layerX;
        y = e.layerY;
      }
      return {
        x: x,
        y: y
      };
    },
    color: function(target) {
      var HSV_RGB, RGB_HSV, THIS, abortBlur, blurTarget, blurValue, drawPicker, holdPad, holdSld, isPickerOwner, leavePad, leaveSld, leaveStyle, leaveValue, redrawPad, redrawSld, removePicker, setPad, setSld, styleElement, valueElement;
      this.hsv = [0, 0, 1];
      this.rgb = [1, 1, 1];
      this.valueElement = this.styleElement = target;
      abortBlur = holdPad = holdSld = false;
      this.hidePicker = function() {
        if (isPickerOwner()) {
          return removePicker();
        }
      };
      this.showPicker = function() {
        if (!isPickerOwner()) {
          return drawPicker();
        }
      };
      this.importColor = function() {
        if (!valueElement) {
          return this.exportColor();
        } else {
          if (!this.fromString(valueElement.value, leaveValue)) {
            styleElement.style.backgroundColor = styleElement.jscStyle.backgroundColor;
            return this.exportColor(leaveValue | leaveStyle);
          }
        }
      };
      this.exportColor = function(flags) {
        var value;
        if (!(flags & leaveValue) && valueElement) {
          value = '#' + this.toString();
          valueElement.value = value;
          valueElement.previousSibling.value = value;
          editTheme[valueElement.previousSibling.name] = value;
          setTimeout(function() {
            return Style.setTheme(editTheme);
          });
        }
        if (!(flags & leaveStyle) && styleElement) {
          styleElement.style.backgroundColor = '#' + this.toString();
        }
        if (!(flags & leavePad) && isPickerOwner()) {
          redrawPad();
        }
        if (!(flags & leaveSld) && isPickerOwner()) {
          return redrawSld();
        }
      };
      this.fromHSV = function(h, s, v, flags) {
        this.hsv = [h = h ? $.minmax(h, 0.0, 6.0) : this.hsv[0], s = s ? $.minmax(s, 0.0, 1.0) : this.hsv[1], v = v ? $.minmax(v, 0.0, 1.0) : this.hsv[2]];
        this.rgb = HSV_RGB(h, s, v);
        return this.exportColor(flags);
      };
      this.fromRGB = function(r, g, b, flags) {
        var hsv;
        r = r != null ? $.minmax(r, 0.0, 1.0) : this.rgb[0];
        g = g != null ? $.minmax(g, 0.0, 1.0) : this.rgb[1];
        b = b != null ? $.minmax(b, 0.0, 1.0) : this.rgb[2];
        hsv = RGB_HSV(r, g, b);
        if (hsv[0] != null) {
          this.hsv[0] = $.minmax(hsv[0], 0.0, 6.0);
        }
        if (hsv[2] !== 0) {
          this.hsv[1] = hsv[1] == null ? null : $.minmax(hsv[1], 0.0, 1.0);
        }
        this.hsv[2] = hsv[2] == null ? null : $.minmax(hsv[2], 0.0, 1.0);
        this.rgb = HSV_RGB(this.hsv[0], this.hsv[1], this.hsv[2]);
        return this.exportColor(flags);
      };
      this.fromString = function(number, flags) {
        var m, val;
        m = number.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);
        if (!m) {
          return false;
        } else {
          if (m[1].length === 6) {
            this.fromRGB(parseInt(m[1].substr(0, 2), 16) / 255, parseInt(m[1].substr(2, 2), 16) / 255, parseInt(m[1].substr(4, 2), 16) / 255, flags);
          } else {
            this.fromRGB(parseInt((val = m[1].charAt(0)) + val, 16) / 255, parseInt((val = m[1].charAt(1)) + val, 16) / 255, parseInt((val = m[1].charAt(2)) + val, 16) / 255, flags);
          }
          return true;
        }
      };
      this.toString = function() {
        return (0x100 | Math.round(255 * this.rgb[0])).toString(16).substr(1) + (0x100 | Math.round(255 * this.rgb[1])).toString(16).substr(1) + (0x100 | Math.round(255 * this.rgb[2])).toString(16).substr(1);
      };
      RGB_HSV = function(r, g, b) {
        var h, m, n, v;
        n = (n = r < g ? r : g) < b ? n : b;
        v = (v = r > g ? r : g) > b ? v : b;
        m = v - n;
        if (m === 0) {
          return [null, 0, v];
        }
        h = r === n ? 3 + (b - g) / m : g === n ? 5 + (r - b) / m : 1 + (g - r) / m;
        return [h === 6 ? 0 : h, m / v, v];
      };
      HSV_RGB = function(h, s, v) {
        var f, i, m, n;
        if (h == null) {
          return [v, v, v];
        }
        i = Math.floor(h);
        f = i % 2 ? h - i : 1 - (h - i);
        m = v * (1 - s);
        n = v * (1 - s * f);
        switch (i) {
          case 6:
          case 0:
            return [v, n, m];
          case 1:
            return [n, v, m];
          case 2:
            return [m, v, n];
          case 3:
            return [m, n, v];
          case 4:
            return [n, m, v];
          case 5:
            return [v, m, n];
        }
      };
      removePicker = function() {
        delete JSColor.picker.owner;
        return $.rm(JSColor.picker.boxB);
      };
      drawPicker = function(x, y) {
        var box, boxB, btn, btnS, elements, item, p, pad, padB, padM, sld, sldB, sldM, _i, _len;
        if (!(p = JSColor.picker)) {
          elements = ['box', 'boxB', 'pad', 'padB', 'padM', 'sld', 'sldB', 'sldM', 'btn'];
          p = {};
          for (_i = 0, _len = elements.length; _i < _len; _i++) {
            item = elements[_i];
            p[item] = $.el('div', {
              className: "jsc" + (item.charAt(0).toUpperCase() + item.slice(1))
            });
          }
          p.btnS = $.el('span', {
            className: 'jscBtnS'
          });
          p.btnT = $.tn('Close');
          JSColor.picker = p;
          $.add(p.box, [p.sldB, p.sldM, p.padB, p.padM, p.btn]);
          $.add(p.sldB, p.sld);
          $.add(p.padB, p.pad);
          $.add(p.btnS, p.btnT);
          $.add(p.btn, p.btnS);
          $.add(p.boxB, p.box);
        }
        box = p.box, boxB = p.boxB, btn = p.btn, btnS = p.btnS, pad = p.pad, padB = p.padB, padM = p.padM, sld = p.sld, sldB = p.sldB, sldM = p.sldM;
        box.onmouseup = box.onmouseout = function() {
          return target.focus();
        };
        box.onmousedown = function() {
          return abortBlur = true;
        };
        box.onmousemove = function(e) {
          if (holdPad || holdSld) {
            holdPad && setPad(e);
            holdSld && setSld(e);
            if (d.selection) {
              return d.selection.empty();
            } else if (window.getSelection) {
              return window.getSelection().removeAllRanges();
            }
          }
        };
        padM.onmouseup = padM.onmouseout = function() {
          if (holdPad) {
            holdPad = false;
            return JSColor.fireEvent(valueElement, 'change');
          }
        };
        padM.onmousedown = function(e) {
          if (THIS.hsv[2] === 0) {
            THIS.fromHSV(null, null, 1.0);
          }
          holdPad = true;
          return setPad(e);
        };
        sldM.onmouseup = sldM.onmouseout = function() {
          if (holdSld) {
            holdSld = false;
            return JSColor.fireEvent(valueElement, 'change');
          }
        };
        sldM.onmousedown = function(e) {
          holdSld = true;
          return setSld(e);
        };
        btn.onmousedown = function() {
          return THIS.hidePicker();
        };
        redrawPad();
        redrawSld();
        JSColor.picker.owner = THIS;
        return $.add(ThemeTools.dialog, p.boxB);
      };
      redrawPad = function() {
        var rgb;
        JSColor.picker.padM.style.backgroundPosition = "" + (4 + Math.round((THIS.hsv[0] / 6) * 180)) + "px " + (4 + Math.round((1 - THIS.hsv[1]) * 100)) + "px";
        rgb = HSV_RGB(THIS.hsv[0], THIS.hsv[1], 1);
        JSColor.picker.sld.style.backgroundColor = "rgb(" + (rgb[0] * 100) + "%, " + (rgb[1] * 100) + "%, " + (rgb[2] * 100) + "%)";
      };
      redrawSld = function() {
        return JSColor.picker.sldM.style.backgroundPosition = "0 " + (6 + Math.round((1 - THIS.hsv[2]) * 100)) + "px";
      };
      isPickerOwner = function() {
        return JSColor.picker && JSColor.picker.owner === THIS;
      };
      blurTarget = function() {
        if (valueElement === target) {
          return THIS.importColor();
        }
      };
      blurValue = function() {
        if (valueElement !== target) {
          return THIS.importColor();
        }
      };
      setPad = function(e) {
        var mpos, x, y;
        mpos = JSColor.getRelMousePos(e);
        x = mpos.x - 11;
        y = mpos.y - 11;
        return THIS.fromHSV(x * (1 / 30), 1 - y / 100, null, leaveSld);
      };
      setSld = function(e) {
        var mpos, y;
        mpos = JSColor.getRelMousePos(e);
        y = mpos.y - 9;
        return THIS.fromHSV(null, null, 1 - y / 100, leavePad);
      };
      THIS = this;
      valueElement = JSColor.fetchElement(this.valueElement);
      styleElement = JSColor.fetchElement(this.styleElement);
      leaveValue = 1 << 0;
      leaveStyle = 1 << 1;
      leavePad = 1 << 2;
      leaveSld = 1 << 3;
      $.on(target, 'focus', function() {
        return THIS.showPicker();
      });
      $.on(target, 'blur', function() {
        if (!abortBlur) {
          return window.setTimeout(function() {
            abortBlur || blurTarget();
            return abortBlur = false;
          });
        } else {
          return abortBlur = false;
        }
      });
      if (valueElement) {
        $.on(valueElement, 'keyup input', function() {
          return THIS.fromString(valueElement.value, leaveValue);
        });
        $.on(valueElement, 'blur', blurValue);
        valueElement.setAttribute('autocomplete', 'off');
      }
      if (styleElement) {
        styleElement.jscStyle = {
          backgroundColor: styleElement.style.backgroundColor
        };
      }
      return this.importColor();
    }
  };

  MascotTools = {
    init: function() {
      if (!Conf['Mascots'] || (g.VIEW === 'catalog' && Conf['Hide Mascots on Catalog'])) {
        return;
      }
      if (Conf['Click to Toggle']) {
        $.on(this.el, 'mousedown', MascotTools.click);
      }
      $.on(doc, 'QRDialogCreation', MascotTools.position);
      $.asap((function() {
        return d.body;
      }), (function(_this) {
        return function() {
          return $.add(d.body, _this.el);
        };
      })(this));
      return MascotTools.toggle();
    },
    el: $.el('div', {
      id: "mascot",
      innerHTML: "<img>"
    }),
    change: function(mascot) {
      var el, img;
      if (Conf['Mascot Position'] === 'default') {
        $.rmClass(doc, 'mascot-position-above-post-form');
        $.rmClass(doc, 'mascot-position-bottom');
        $.rmClass(doc, 'mascot-position-default');
        $.addClass(doc, mascot.position === 'bottom' ? 'mascot-position-bottom' : 'mascot-position-above-post-form');
      }
      $[mascot.silhouette || Conf['Silhouettize Mascots'] ? 'addClass' : 'rmClass'](doc, 'silhouettize-mascots');
      el = $.el('img');
      img = this.el.firstElementChild;
      if (mascot.image !== '') {
        $.on(el, 'error', MascotTools.error);
        el.src = mascot.image;
      }
      $.off(img, 'error', MascotTools.error);
      $.replace(img, el);
      return MascotTools.position(mascot);
    },
    error: function() {
      var ctx, el;
      if (!this.src) {
        return;
      }
      if (MascotTools.imageError) {
        this.src = MascotTools.imageError;
      }
      el = $.el('canvas', {
        width: 248,
        height: 100
      });
      ctx = el.getContext('2d');
      ctx.font = "40px " + Conf['Font'];
      ctx.fillStyle = (new Color((Themes[Conf[g.THEMESTRING]] || Themes[g.TYPE === 'sfw' ? 'Yotsuba B' : 'Yotsuba'])['Text'])).hex();
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText("Mascot 404", 124, 50);
      return el.toBlob((function(_this) {
        return function(blob) {
          return _this.src = MascotTools.imageError = URL.createObjectURL(blob);
        };
      })(this));
    },
    toggle: function() {
      var el, enabled, i, len, mascot, name, string;
      string = g.MASCOTSTRING;
      enabled = Conf[string];
      if (!(len = enabled.length)) {
        return MascotTools.change({
          image: ''
        });
      }
      Conf['mascot'] = name = enabled[i = Math.floor(Math.random() * len)];
      if (!(mascot = Mascots[name])) {
        enabled.splice(i, 1);
        if (el = this.el.firstElementChild) {
          $.replace(el, $.el('img'));
        }
        $.set(string, Conf[string] = enabled);
        return MascotTools.toggle();
      }
      return MascotTools.change(mascot);
    },
    categories: ['Custom', 'Anime', 'Ponies', 'Questionable', 'Silhouette', 'Western'],
    dialog: function(key) {
      var container, dialog, div, fileInput, fileRice, imageFn, input, item, layout, name, nameFn, option, optionHTML, saveCheck, saveVal, setting, updateMascot, value, _i, _len, _ref;
      Conf['editMode'] = 'mascot';
      if (Mascots[key]) {
        editMascot = JSON.parse(JSON.stringify(Mascots[key]));
      } else {
        editMascot = {};
      }
      editMascot.name = key || '';
      layout = {
        name: ["Mascot Name", "", "text"],
        image: ["Image", "", "text"],
        category: ["Category", MascotTools.categories[0], "select", MascotTools.categories],
        position: ["Position", "default", "select", ["default", "top", "bottom"]],
        height: ["Height", "auto", "text"],
        width: ["Width", "auto", "text"],
        vOffset: ["Vertical Offset", "0", "number"],
        hOffset: ["Horizontal Offset", "0", "number"],
        center: ["Center Mascot", false, "checkbox"],
        silhouette: ["Silhouette", false, "checkbox"]
      };
      dialog = $.el("div", {
        id: "mascotConf",
        className: "reply dialog",
        innerHTML: "<div id=mascotcontent><center>\nPROTIP: Shift-Click the Mascot Image field to upload your own images!\n<br><a href='https://github.com/zixaphir/appchan-x/issues/126#issuecomment-14365049'>This may have some caveats.</a></center></div><div id=save><a href='javascript:;'>Save Mascot</a></div><div id=close><a href='javascript:;'>Close</a></div>"
      });
      container = $("#mascotcontent", dialog);
      fileRice = function(e) {
        if (e.shiftKey) {
          return this.nextSibling.click();
        }
      };
      updateMascot = function() {
        return MascotTools.change(editMascot);
      };
      saveVal = function() {
        editMascot[this.name] = this.value;
        return updateMascot();
      };
      imageFn = function() {
        if (MascotTools.URL === this.value) {
          return MascotTools.change(editMascot);
        } else if (MascotTools.URL) {
          URL.revokeObjectURL(MascotTools.URL);
          delete MascotTools.URL;
        }
        return saveVal.call(this);
      };
      nameFn = function() {
        this.value = this.value.replace(/[^a-z-_0-9]/ig, "_");
        if ((this.value !== "") && !/^[a-z]/i.test(this.value)) {
          return alert("Mascot names must start with a letter.");
        }
        return saveVal.call(this);
      };
      saveCheck = function() {
        editMascot[this.name] = this.checked ? true : false;
        return updateMascot();
      };
      for (name in layout) {
        item = layout[name];
        value = editMascot[name] || (editMascot[name] = item[1]);
        switch (item[2]) {
          case "text":
            div = this.input(item, name);
            input = $('input', div);
            switch (name) {
              case 'image':
                $.on(input, 'blur', imageFn);
                fileInput = $.el('input', {
                  type: "file",
                  accept: "image/*",
                  title: "imagefile",
                  hidden: "hidden"
                });
                $.on(input, 'click', fileRice);
                $.on(fileInput, 'change', MascotTools.uploadImage);
                $.after(input, fileInput);
                break;
              case 'name':
                $.on(input, 'blur', nameFn);
                break;
              default:
                $.on(input, 'blur', saveVal);
            }
            break;
          case "number":
            div = this.input(item, name);
            $.on($('input', div), 'blur', saveVal);
            break;
          case "select":
            optionHTML = "<div class=optionlabel>" + item[0] + "</div><div class=option><select name='" + name + "' value='" + value + "'><br>";
            _ref = item[3];
            for (_i = 0, _len = _ref.length; _i < _len; _i++) {
              option = _ref[_i];
              optionHTML += "<option value=\"" + option + "\">" + option + "</option>";
            }
            optionHTML += "</select></div>";
            div = $.el('div', {
              className: "mascotvar",
              innerHTML: optionHTML
            });
            setting = $("select", div);
            setting.value = value;
            $.on($('select', div), 'change', saveVal);
            break;
          case "checkbox":
            div = $.el("div", {
              className: "mascotvar",
              innerHTML: "<label><input type=" + item[2] + " class=field name='" + name + "' " + (value ? 'checked' : void 0) + ">" + item[0] + "</label>"
            });
            $.on($('input', div), 'click', saveCheck);
        }
        $.add(container, div);
      }
      MascotTools.change(editMascot);
      $.on($('#save > a', dialog), 'click', function() {
        return MascotTools.save(editMascot);
      });
      $.on($('#close > a', dialog), 'click', MascotTools.close);
      Rice.nodes(dialog);
      return $.add(d.body, dialog);
    },
    input: function(item, name) {
      var value;
      value = editMascot[name];
      editMascot[name] = value;
      return $.el("div", {
        className: "mascotvar",
        innerHTML: "<div class=optionlabel>" + item[0] + "</div><div class=option><input type=" + item[2] + " class=field name='" + name + "' placeholder='" + item[0] + "' value='" + value + "'></div>"
      });
    },
    uploadImage: function() {
      var file, fileURL, img;
      if (!(this.files && (file = this.files[0]))) {
        return;
      }
      if (MascotTools.URL) {
        URL.revokeObjectURL(MascotTools.URL);
      }
      img = $.el('img');
      img.onload = (function(_this) {
        return function() {
          var cv, height, s, width;
          s = 400;
          width = img.width, height = img.height;
          if (width <= s) {
            MascotTools.setImage(fileURL);
            _this.previousElementSibling.value = fileURL;
            return;
          }
          cv = $.el('canvas', {
            height: height = s / width * height,
            width: width = s
          });
          cv.getContext('2d').drawImage(img, 0, 0, width, height);
          URL.revokeObjectURL(fileURL);
          return cv.toBlob(function(blob) {
            var fileURL;
            MascotTools.URL = fileURL = URL.createObjectURL(MascotTools.file = blob);
            MascotTools.setImage(fileURL);
            return _this.previousElementSibling.value = fileURL;
          });
        };
      })(this);
      MascotTools.URL = fileURL = URL.createObjectURL(MascotTools.file = file);
      return img.src = fileURL;
    },
    setImage: function(fileURL) {
      var reader;
      reader = new FileReader();
      reader.onload = function() {
        return editMascot.image = reader.result;
      };
      return reader.readAsDataURL(MascotTools.file);
    },
    save: function(mascot) {
      var image, name;
      name = mascot.name, image = mascot.image;
      if ((name == null) || name === "") {
        alert("Please name your mascot.");
        return;
      }
      if ((image == null) || image === "") {
        alert("Your mascot must contain an image.");
        return;
      }
      if (!mascot.category) {
        mascot.category = MascotTools.categories[0];
      }
      if (Mascots[name]) {
        if ($.remove(Conf["Deleted Mascots"], name)) {
          $.set("Deleted Mascots", Conf["Deleted Mascots"]);
        } else {
          if (confirm("A mascot named \"" + name + "\" already exists. Would you like to over-write?")) {
            delete Mascots[name];
          } else {
            return alert("Creation of \"" + name + "\" aborted.");
          }
        }
      }
      Mascots[name] = JSON.parse(JSON.stringify(mascot));
      delete Mascots[name].name;
      return $.get("userMascots", {}, function(_arg) {
        var type, userMascots, _i, _len, _ref;
        userMascots = _arg.userMascots;
        userMascots[name] = Mascots[name];
        $.set('userMascots', userMascots);
        Conf["mascot"] = name;
        _ref = ["Enabled Mascots", "Enabled Mascots sfw", "Enabled Mascots nsfw"];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          type = _ref[_i];
          if (__indexOf.call(Conf[type], name) < 0) {
            Conf[type].push(name);
            $.set(type, Conf[type]);
          }
        }
        return alert("Mascot \"" + name + "\" saved.");
      });
    },
    click: function(e) {
      if (e.button !== 0) {
        return;
      }
      e.preventDefault();
      return MascotTools.toggle();
    },
    close: function() {
      Conf['editMode'] = false;
      editMascot = {};
      $.rm($.id('mascotConf'));
      return Settings.open("Mascots");
    },
    importMascot: function() {
      var file, reader;
      file = this.files[0];
      reader = new FileReader();
      reader.onload = function(e) {
        var err, mascots;
        try {
          mascots = JSON.parse(e.target.result);
        } catch (_error) {
          err = _error;
          alert(err);
          return;
        }
        return $.get("userMascots", {}, function(_arg) {
          var userMascots;
          userMascots = _arg.userMascots;
          return MascotTools.load(mascots, userMascots);
        });
      };
      return reader.readAsText(file);
    },
    load: function(mascots, userMascots) {
      var ilen, imported, len, mascot, message, name, type, _i, _len, _ref;
      len = Conf["Deleted Mascots"].length;
      imported = [];
      if (name = mascots["Mascot"]) {
        MascotTools.parse(mascots, userMascots, imported);
      } else if (mascots.length) {
        for (_i = 0, _len = mascots.length; _i < _len; _i++) {
          mascot = mascots[_i];
          MascotTools.parse(mascot, userMascots, imported);
        }
      } else {
        return new Notice('warning', "Failed to import mascot. Is file a properly formatted JSON file?", 5);
      }
      _ref = name ? ["" + name + " successfully imported!", 'info'] : (ilen = imported.length) ? ["" + ilen + " mascots successfully imported!", 'info'] : ["Failed to import any mascots. ;__;", 'info'], message = _ref[0], type = _ref[1];
      $.set('userMascots', userMascots);
      if (len !== Conf["Deleted Mascots"].length) {
        $.set('Deleted Mascots', Conf['Deleted Mascots']);
      }
      new Notice(type, message, 10);
      return Settings.openSection.call({
        open: Settings.mascots,
        hyphenatedTitle: 'mascots'
      });
    },
    parse: function(mascot, userMascots, imported) {
      var image, message, name;
      if (!((name = mascot["Mascot"]) && (image = mascot.image))) {
        message = "Failed to import a mascot. File file has no " + (name ? 'image' : image ? 'name' : 'name nor image') + ".";
        return new Notice('warning', message, 5);
      }
      delete mascot["Mascot"];
      if (Mascots[name] && !$.remove(Conf["Deleted Mascots"], name)) {
        if (!confirm("The mascot " + name + " already exists? Would you like to overwrite it?")) {
          return;
        }
      }
      mascot.name = name;
      return imported.push(userMascots[name] = Mascots[name] = mascot);
    },
    position: function(mascot) {
      if (!Style.sheets.mascots) {
        return;
      }
      (mascot.image != null) || (mascot = Mascots[Conf['mascot']] || {});
      return Style.sheets.mascots.textContent = "#mascot img {\nheight: " + (mascot.height && isNaN(parseFloat(mascot.height)) ? mascot.height : mascot.height ? parseInt(mascot.height, 10) + 'px' : 'auto') + ";\nwidth: " + (mascot.width && isNaN(parseFloat(mascot.width)) ? mascot.width : mascot.width ? parseInt(mascot.width, 10) + 'px' : 'auto') + ";\n}\n#mascot {\nmargin: " + (mascot.vOffset || 0) + "px " + (mascot.hOffset || 0) + "px;\n}\n.sidebar-large #mascot {\nleft: " + (mascot.center ? 25 : 0) + "px;\nright: " + (mascot.center ? 25 : 0) + "px;\n}\n.mascot-position-above-post-form.post-form-style-fixed #mascot {\ntransform: translateY(-" + (QR.nodes ? QR.nodes.el.getBoundingClientRect().height : 0) + "px);\n}";
    }
  };

  Rice = {
    ul: $.el('ul', {
      id: "selectrice"
    }),
    init: function() {
      $.ready(this.initReady);
      return Post.callbacks.push({
        name: 'Rice Checkboxes',
        cb: this.node
      });
    },
    initReady: function() {
      Rice.nodes(d.body);
      return $.add(d.body, Rice.ul);
    },
    node: function() {
      return Rice.checkbox($('.postInfo input', this.nodes.post));
    },
    nodes: function(root) {
      var process;
      root || (root = d.body);
      process = Rice.process;
      process($$('[type=checkbox]:not(.riced)', root), 'checkbox');
      return process($$('select:not(.riced)', root), 'select');
    },
    process: function(items, type) {
      var fn, item, _i, _len;
      fn = Rice[type];
      for (_i = 0, _len = items.length; _i < _len; _i++) {
        item = items[_i];
        fn(item);
      }
    },
    cleanup: function() {
      $.off(d, 'click scroll blur resize', Rice.cleanup);
      $.rmAll(Rice.ul);
    },
    checkbox: function(input) {
      var div;
      if ($.hasClass(input, 'riced')) {
        return;
      }
      $.addClass(input, 'riced');
      div = $.el('div', {
        className: 'rice'
      });
      div.check = input;
      $.after(input, div);
      return $.on(div, 'click', Rice.cb.check);
    },
    select: function(select) {
      var div, _ref;
      div = $.el('div', {
        className: 'selectrice',
        innerHTML: "<div>" + (((_ref = select.options[select.selectedIndex || '0']) != null ? _ref.textContent : void 0) || '') + "</div>"
      });
      $.on(div, 'click', Rice.cb.select);
      $.on(div, 'keydown', Rice.cb.keybind);
      $.after(select, div);
      return $.addClass(select, 'riced');
    },
    cb: {
      check: function(e) {
        e.preventDefault();
        e.stopPropagation();
        return this.check.click();
      },
      option: function(e) {
        var container, select;
        e.stopPropagation();
        e.preventDefault();
        if (this.dataset.disabled) {
          return;
        }
        select = Rice.input;
        container = select.nextElementSibling;
        container.firstChild.textContent = this.textContent;
        select.value = this.dataset.value;
        $.event('change', null, select);
        return Rice.cleanup();
      },
      select: function(e) {
        var bottom, clientHeight, left, li, nodes, option, select, style, top, ul, width, _i, _len, _ref, _ref1;
        e.stopPropagation();
        e.preventDefault();
        ul = Rice.ul;
        if (ul.children.length > 0) {
          return Rice.cleanup();
        }
        _ref = this.getBoundingClientRect(), width = _ref.width, left = _ref.left, bottom = _ref.bottom, top = _ref.top;
        clientHeight = d.documentElement.clientHeight;
        style = ul.style;
        style.cssText = ("width: " + width + "px; left: " + left + "px;") + (clientHeight - bottom < 200 ? "bottom: " + (clientHeight - top) + "px" : "top: " + bottom + "px");
        Rice.input = select = this.previousSibling;
        nodes = [];
        _ref1 = select.options;
        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
          option = _ref1[_i];
          li = $.el('li', {
            textContent: option.textContent
          });
          li.dataset.value = option.value;
          if (option.disabled) {
            li.dataset.disabled = true;
          }
          $.on(li, 'click', Rice.cb.option);
          nodes.push(li);
        }
        $.add(ul, nodes);
        $.on(ul, 'click scroll blur', function(e) {
          return e.stopPropagation();
        });
        return $.on(d, 'click scroll blur resize', Rice.cleanup);
      }
    }
  };

  Style = {
    sheets: {},
    init: function() {
      var i, item, items, theme;
      Style.svgs = {};
      theme = Themes[Conf[g.THEMESTRING]] || Themes['Yotsuba B'];
      items = [['layout', Style.layout], ['theme', Style.theme(theme)], ['dynamic', Style.dynamic()], ['padding', ""], ['mascots', ""]];
      i = 0;
      while (item = items[i++]) {
        Style.sheets[item[0]] = $.addStyle(item[1], item[0]);
      }
      $.addStyle(JSColor.css(), 'jsColor');
      $.asap((function() {
        return d.body;
      }), this.asapInit);
      $.asap((function() {
        return Header.bar.parentElement;
      }), Style.padding);
      $.on(window, "resize", Style.padding);
      return $.ready(this.readyInit);
    },
    asapInit: function() {
      var cat, hyphenated, name, setting, title, _ref;
      $.addClass(doc, 'gecko');
      $.addClass(doc, 'fourchan-x');
      $.addClass(doc, 'appchan-x');
      $.addClass(doc, g.VIEW);
      Style.remStyle();
      _ref = Config.style;
      for (title in _ref) {
        cat = _ref[title];
        for (name in cat) {
          setting = cat[name];
          if (!Conf[name] || setting[2] === 'text' || (name === 'NSFW/SFW Themes' || name === 'NSFW/SFW Mascots')) {
            continue;
          }
          hyphenated = ("" + name + (setting[2] ? " " + Conf[name] : "")).toLowerCase().replace(/^4/, 'four').replace(/\s+/g, '-');
          $.addClass(doc, hyphenated);
        }
      }
    },
    readyInit: function() {
      var exLink;
      Style.iconPositions();
      if (exLink = $("#navtopright .exlinksOptionsLink", d.body)) {
        return $.on(exLink, "click", function() {
          return setTimeout(Rice.nodes, 100);
        });
      }
    },
    remStyle: function() {
      var item, _i, _j, _len, _len1, _ref, _ref1;
      _ref = ['[title="switch"]', '[href="//s.4cdn.org/css/yotsubluemobile.540.css"]', '#base-css', '#mobile-css'];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        item = _ref[_i];
        if (item = $(item, d.head)) {
          item.disabled = true;
        }
      }
      if (g.VIEW === 'home') {
        _ref1 = $$('[rel="stylesheet"], style[type="text/css"]', d.head);
        for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
          item = _ref1[_j];
          item.disabled = true;
        }
      }
    },
    generateFilter: function(id, values) {
      return "<svg xmlns='http://www.w3.org/2000/svg' height='0' color-interpolation-filters='sRGB'><filter id='" + id + "'><feColorMatrix " + values + " /></filter></svg>";
    },
    matrix: function() {
      var arg, color, colors, hex, i, rgb, val, _i, _len;
      colors = [];
      rgb = ['r', 'g', 'b'];
      for (_i = 0, _len = arguments.length; _i < _len; _i++) {
        arg = arguments[_i];
        hex = (new Color(arg)).raw;
        color = {};
        i = 0;
        while (val = rgb[i]) {
          color[val] = parseInt(hex.substr(2 * i++, 2), 16) / 255;
        }
        colors.push(color);
      }
      return colors;
    },
    filter: function(_arg) {
      var bg, fg;
      fg = _arg[0], bg = _arg[1];
      return "" + bg.r + " " + (-fg.r) + " 0 0 " + fg.r + " " + bg.g + " " + (-fg.g) + " 0 0 " + fg.g + " " + bg.b + " " + (-fg.b) + " 0 0 " + fg.b;
    },
    silhouette: function(_arg) {
      var fg;
      fg = _arg[0];
      return "0 0 0 0 " + fg.r + " 0 0 0 0 " + fg.g + " 0 0 0 0 " + fg.b;
    },
    layout: "/* Cleanup */ #absbot, #boardNavDesktop, #delPassword, #delform > hr:last-of-type, #navbotright, #postForm, #search-label, #search-label-bottom, #styleSwitcher, #togglePostFormLink, .boardBanner > div, .next form, .next span, .postingMode, .prev form, .prev span, .riced, .sideArrows, .stylechanger, body > br, body > div[style^=\"text-align\"], body > hr { display: none; } /* Empties */ #qr .warning:empty, #qr-thread-select:empty { display: none; } /* File Name Trunctuate / /p/ exif */ .exif, .file-info:hover .fntrunc, .file-info:not(:hover) .fnfull { display: none; } /* Unnecessary */ #qp input, #qp .rice, .inline .rice, .mobile { display: none !important; } /* Hidden Content */ .forwarded, .hidden, .hidden_thread ~ div, .hidden_thread ~ a, .replyContainer .stub ~ div, .replyContainer .stub ~ a, .stub + div, .thread > .stub:first-child ~ .postContainer, .thread > .stub:first-child ~ .summary, [hidden] { display: none !important; } /* Hidden UI */ #navtopright, #svg_filters, .cataloglink { z-index: 7; position: fixed; top: 100%; left: 100%; } /* Hide last horizontal rule, keep clear functionality. */ .board > hr:last-of-type { visibility: hidden; } /* Fappe Tyme */ .fappeTyme .thread > .noFile, .fappeTyme .threadContainer > .noFile { display: none; } /* Werk Tyme */ .werkTyme .post .file { display: none; } /* Index Features */ #index-menu { display: flex; align-items: center } :root.thread #index-menu, :root.index-loading .navLinks, :root.index-loading .board, :root.index-loading .pagelist, :root.thread .pagelist { display: none; } :root:not(.catalog-mode) #index-size, :root:not(.catalog-mode) #index-size + .selectrice, .index:not(.catalog-mode) #returnIcon, .index.catalog-mode #catalogIcon { display: none; } #index-menu .selectrice { width: 110px; display: inline-block; } #index-search { padding-right: 1.5em; width: 100px; transition: color .25s, border-color .25s, width .25s; } #index-search:focus, #index-search[data-searching] { width: 200px; } #index-search-clear { margin-left: -1em; }  #index-search:not([data-searching]) + #index-search-clear { display: none; } .catalog-mode .board { text-align: center; } .catalog-thread { display: inline-flex; text-align: left; flex-direction: column; align-items: center; margin: 0 2px 5px; word-break: break-word; vertical-align: top; } .catalog-small .catalog-thread { width: 165px; max-height: 320px; } .catalog-large .catalog-thread { width: 270px; max-height: 410px; } .thumb { flex-shrink: 0; position: relative; background-size: 100% 100%; background-repeat: no-repeat; background-position: center; border-radius: 2px; box-shadow: 0 0 5px rgba(0, 0, 0, .25); } .thumb:not(.deleted-file):not(.no-file) { min-width: 30px; min-height: 30px; } .thumb.spoiler-file { background-size: 100px; width: 100px; height: 100px; } .thumb.deleted-file { background-size: 127px 13px; width: 127px; height: 13px; padding: 20px 11px; } .thumb.no-file { background-size: 77px 13px; width: 77px; height: 13px; padding: 20px 36px; } .thread-icons > img { width: 1em; height: 1em; margin: 0; vertical-align: text-top; } .thumb:not(:hover):not(:focus) > .menu-button:not(.open):not(:focus) > i { display: none; } .thumb > .menu-button { position: absolute; top: 0; right: 0; } .thumb > .menu-button > i { width: 1em; height: 1em; padding: 1px; border-radius: 0 2px 0 2px; font-size: 14px; text-align: center;  line-height: normal;  } .thread-stats { flex-shrink: 0; cursor: help !important; font-size: 10px; font-weight: 700; margin-top: 2px; } .catalog-thread > .subject { flex-shrink: 0; font-weight: 700; line-height: 1; text-align: center; } .catalog-thread > .comment { flex-shrink: 1; align-self: stretch; overflow: hidden; text-align: center; } .thread-info { position: fixed; padding: 2px; border-radius: 2px; box-shadow: 0 0 5px rgba(0, 0, 0, .25); } .thread-info .post { margin: 0; } /* Defaults */ a { text-decoration: none; outline: none; } .underline-links a { text-decoration: underline; } body, html { min-height: 100%; box-sizing: border-box; } body { outline: none; min-height: 100%; } .sidebar-hide body { margin: 0 2px; } .sidebar-minimal body { margin: 0 20px; } .sidebar-normal body { margin: 0 252px } .sidebar-large body { margin: 0 303px; } .sidebar-location-right body { margin-left: 2px; } .sidebar-location-left body { margin-right: 2px; } body.unscroll { overflow: hidden; } .fourchan-ss-sidebar body::before { content: ''; position: fixed; top: 0; bottom: 0; box-sizing: border-box; display: block; z-index: 0; } .fourchan-ss-sidebar.sidebar-large body::before { width: 306px; } .fourchan-ss-sidebar.sidebar-normal body::before { width: 255px; } .fourchan-ss-sidebar.sidebar-minimal body::before { width: 23px; } .sidebar-location-right body::before { right: 0; } .sidebar-location-left body::before { left: 0; } .fourchan-ss-sidebar.sidebar-location-right body { padding-right: 2px; } .fourchan-ss-sidebar.sidebar-location-left body { padding-left: 2px; } hr { clear: both; border: 0; padding: 0; margin: 0 0 1px; } .hide-horizontal-rules hr { visibility: hidden; } th { text-align: left; } .center { text-align: center; } .ad-plea { text-align: center; font-size: .8em; } .dead-thread, .disabled { opacity: 0.4; } nav a, .pointer { cursor: pointer; } /* Symbols */ .menu-button i { vertical-align: middle; display: inline-block; margin: 2px 2px 3px; } .brackets-wrap::before { content: \" [\"; } .brackets-wrap::after { content: \"] \"; } /* Thread / Reply Nav */ #navPrev, #navNext { display: inline-block; border-right: 6px solid transparent; border-left: 6px solid transparent; opacity: 0.5; margin: 2px 1px; width: 0; height: 0; } #navPrev { border-bottom: 11px solid rgb(130,130,130); } #navNext { border-top: 11px solid rgb(130,130,130); } /* Header */ #header-bar { z-index: 6; border-width: 1px; padding: 1px 2px; border-style: solid; } .pagination-sticky-top .pagelist, .pagination-sticky-bottom .pagelist, #header-bar { left: 2px; right: 2px; } .navigation-alignment-center #header-bar { text-align: center; } .navigation-alignment-right #header-bar { text-align: right; } .sidebar-location-left.sidebar-large:not(.pagination-on-side):not(.fourchan-ss-navigation) .pagelist, .sidebar-location-left.sidebar-large #header-bar { left: 303px; } .sidebar-location-left.sidebar-normal:not(.pagination-on-side):not(.fourchan-ss-navigation) .pagelist, .sidebar-location-left.sidebar-normal #header-bar { left: 252px; } .sidebar-location-left.sidebar-minimal:not(.pagination-on-side):not(.fourchan-ss-navigation) .pagelist, .sidebar-location-left.sidebar-minimal:not(.fourchan-ss-navigation) #header-bar { left: 20px; } .sidebar-location-right.sidebar-large:not(.pagination-on-side):not(.fourchan-ss-navigation) .pagelist, .sidebar-location-right.sidebar-large #header-bar { right: 303px; } .sidebar-location-right.sidebar-normal:not(.pagination-on-side):not(.fourchan-ss-navigation) .pagelist, .sidebar-location-right.sidebar-normal #header-bar { right: 252px; } .sidebar-location-right.sidebar-minimal:not(.pagination-on-side):not(.fourchan-ss-navigation) .pagelist, .sidebar-location-right.sidebar-minimal:not(.fourchan-ss-navigation) #header-bar { right: 20px; } .fourchan-ss-navigation .pagelist, .fourchan-ss-navigation #header-bar { left: 0; right: 0; border-left: 0; border-right: 0; border-radius: 0 !important; } .hide-navigation-decorations #board-list { font-size: 0; color: transparent; word-spacing: 2px; } .fixed #header-bar.autohide { z-index: 24; } .fixed #header-bar { position: fixed; } .top-header #header-bar { top: 0; border-top-width: 0; } .rounded-edges.top-header #header-bar { border-radius: 0 0 3px 3px; } .fixed.bottom-header #header-bar { bottom: 0; border-bottom-width: 0; } .rounded-edges.bottom-header #header-bar { border-radius: 3px 3px 0 0; } .hide #header-bar { position: fixed; top: 110%; bottom: auto; } /* Header Autohide */ .fixed #header-bar.autohide:not(:hover) { box-shadow: none; transition: all .8s .6s cubic-bezier(.55, .055, .675, .19); } .fixed.top-header #header-bar.autohide:not(:hover) { margin-bottom: -1em; transform: translateY(-100%); } .fixed.bottom-header #header-bar.autohide:not(:hover) { transform: translateY(100%); } #scroll-marker { left: 0; right: 0; height: 10px; position: absolute; } #header-bar #scroll-marker { display: none; } .fixed #header-bar #scroll-marker { display: block; } .fixed.top-header header-bar #scroll-marker { top: 100%; } .fixed.bottom-header #header-bar #scroll-marker { bottom: 100%; } /* Notifications */ #notifications { position: fixed; top: 0; text-align: center; right: 0; left: 0; transition: all .8s .6s cubic-bezier(.55, .055, .675, .19); } .fixed.top-header #header-bar #notifications { position: absolute; top: 100%; } .notification { font-weight: 700; text-shadow: 0 1px 2px rgba(0, 0, 0, .5); box-shadow: 0 1px 2px rgba(0, 0, 0, .15); border-radius: 2px; margin: 1px auto; width: 500px; max-width: 100%; position: relative; transition: all .25s ease-in-out; } .notification.error { background-color: hsla(0, 100%, 38%, .9); } .notification.warning { background-color: hsla(36, 100%, 38%, .9); } .notification.info { background-color: hsla(200, 100%, 38%, .9); } .notification.success { background-color: hsla(104, 100%, 38%, .9); } .notification, .notification a { color: #fff !important; } .notification > .close { top: 0; padding: 2px; right: 4px; position: absolute; color: #fff; } .message { box-sizing: border-box; padding: 6px 20px; max-height: 200px; width: 100%; overflow: auto; } /* Shortcuts */ #shortcuts { position: fixed; display: flex; top: 0; padding: 1px; z-index: 16; flex-direction: row; max-height: 1.1em; overflow: visible; } .shortcut { margin: 0 1px; } .icon-orientation-vertical #a-icons .shortcut { margin: 0; } #a-icons, #a-stats { order: 0; display: flex; text-align: center; } #a-icons { order: 10; } #a-stats { height: 1.1em; } .sidebar-location-right #shortcuts { right: 0; } .sidebar-location-left #shortcuts { left: 0; } .sidebar-location-right .shortcut { align-self: flex-end; } .icon-orientation-vertical #a-icons { flex-direction: column; height: 200px; } .icon-orientation-horizontal #a-stats { height: 1em; } .icon-orientation-horizontal #a-stats, .icon-orientation-horizontal #a-icons, .sidebar-location-left #shortcuts { flex-direction: row-reverse; } .icon-orientation-horizontal.sidebar-location-left #a-stats, .icon-orientation-horizontal.sidebar-location-left #a-icons { flex-direction: row; } #thread-stats { order: 0; } #updater { order: 10; } #main-menu { order: 0; } #qr-shortcut { order: 10; } #img-controls { order: 20; } #appchan-gal { order: 25; } #fappeTyme { order: 30; } #werkTyme { order: 35; } #so-nav { order: 40; } #so-watcher { order: 50; } #so-psa { order: 60; } #navPrev { order: 70; } #navNext { order: 80; } #catalogIcon { order: 90; } #returnIcon { order: 100; } .icon-orientation-horizontal #so-psa #globalMessage, .icon-orientation-horizontal #so-watcher #thread-watcher, .icon-orientation-horizontal #so-nav #boardNavDesktopFoot { top: 15px !important; } .icon-orientation-vertical #so-psa, .icon-orientation-vertical #so-watcher, .icon-orientation-vertical #so-nav { position: relative; } .icon-orientation-vertical #so-psa #globalMessage, .icon-orientation-vertical #so-watcher #thread-watcher, .icon-orientation-vertical #so-nav #boardNavDesktopFoot { top: 0 !important; position: absolute !important; z-index: -1; } .sidebar-location-right.icon-orientation-vertical #so-psa #globalMessage, .sidebar-location-right.icon-orientation-vertical #so-watcher #thread-watcher, .sidebar-location-right.icon-orientation-vertical #so-nav #boardNavDesktopFoot { padding-right: 17px; } .sidebar-location-left.icon-orientation-vertical #so-psa #globalMessage, .sidebar-location-left.icon-orientation-vertical #so-watcher #thread-watcher, .sidebar-location-left.icon-orientation-vertical #so-nav #boardNavDesktopFoot { padding-left: 17px; } .a-icon, #shortcuts .fa { display: inline-block; width: 15px; height: 15px; content: \"\"; opacity: 0.5; cursor: pointer; } .invisible-icons .a-icon, .invisible-icons #shortcuts .fa { opacity: 0; } #so-nav, #so-watcher, #so-psa { line-height: 0; } .shortcut > div { line-height: normal; } #main-menu { background-position: 0 0; } #returnIcon { background-position: 0 -15px; } #so-watcher .a-icon { background-position: 0 -30px; } #so-psa .a-icon { background-position: 0 -45px; } #so-nav .a-icon { background-position: 0 -60px; } #img-controls { background-position: 0 -90px; } #catalogIcon { background-position: 0 -120px; } #fappeTyme { background-position: 0 -135px; } #navPrev:hover, #navNext:hover, .a-icon:hover, #shortcuts .fa:hover { opacity: 1 !important; } /* Updater / Thread Stats */ .float #thread-stats, .float #updater { position: fixed; z-index: 25; } #update-status.new::after { content: ', '; } /* Pagination */ .pagelist { border-style: solid; border-width: 1px; z-index: 6; } .pagination-alignment-center .pagelist { text-align: center; } .pagination-alignment-right .pagelist { text-align: right; } .pagination-sticky-top .pagelist { position: fixed; top: 0; border-top-width: 0; } .pagination-sticky-bottom .pagelist { position: fixed; bottom: 0; border-bottom-width: 0; } .pagination-top .pagelist { position: static; border-top-width: 0; } .pagination-bottom .pagelist { position: static; } .pagination-top.rounded-edges .pagelist, .pagination-sticky-top.rounded-edges .pagelist { border-radius: 0 0 3px 3px; } .pagination-bottom.rounded-edges .pagelist, .pagination-sticky-bottom.rounded-edges .pagelist { border-radius: 3px 3px 0 0; } .thread .pagelist, .pagination-hide .pagelist { display: none; } .pagination-on-side .pagelist { position: fixed; padding: 0; top: auto; bottom: 0.5em; margin: 0; background: none transparent !important; border: 0 none !important; text-align: right; } .pagination-on-side.post-form-style-fixed.show-post-form-header .pagelist { bottom: 23.1em; } .pagination-on-side.post-form-style-fixed .pagelist { bottom: 21.6em; } .sidebar-location-left.pagination-on-side .pagelist { transform: rotate(-90deg); transform-origin: bottom left; } .sidebar-location-right.pagination-on-side .pagelist { transform: rotate(90deg); transform-origin: bottom right; } .sidebar-location-right.sidebar-large.pagination-on-side .pagelist { left: auto; right: 301px; } .sidebar-location-left.sidebar-large.pagination-on-side .pagelist { right: auto; left: 301px; } .sidebar-location-right.sidebar-normal.pagination-on-side .pagelist { left: auto; right: 246px; } .sidebar-location-left.sidebar-normal.pagination-on-side .pagelist { right: auto; left: 246px; } .sidebar-location-right.sidebar-minimal.pagination-on-side .pagelist { left: auto; right: 246px; } .sidebar-location-left.sidebar-minimal.pagination-on-side .pagelist { right: auto; left: 18px; } .hide-navigation-decorations .pagelist { font-size: 0; color: transparent; word-spacing: 0; } .pagelist input, .pagelist div { vertical-align: middle; } .hide-navigation-decorations .pages a { margin: 0 1px; } .next, .pages, .prev { display: inline-block; margin: 0 3px; } /* Icons */ .icons-4chan-ss .a-icon { background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAACWCAMAAAA2YSLzAAAAPFBMVEVkZGRlZWVjY2NmZmZnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dZxmG7AAAAE3RSTlMFFQ0AJD8eQFRqf5CgssDM4+73gHqZRAAAA0pJREFUSMetVlmy5CgMZDMGxK7737Ulgcu8ejMREzHtD7sShJRaKWV/Psq3iz7QGwTF2BZ01hp3N6yasctZJANiN5ZlItDLtNkQDGNeMLU7EqmCbUwhkhZbwsIuNbyWPX7dIyHOrDYOc8SOiEUJjojN0EsWlCXRrq2qvJCsIjic2OcFrwrOpdmTimqVyWG7ZkrWy97p7z/hACd2FUetBcQDpTN+nuKsGng881L5xOz/VQ88xL/eQkyZT3axp+4dUMwvH0Pnhn6wSyR+8IdR4f43/v8XX1BHjXpjwy5RdEcQ7DiuzlBUsFD+GeIFEy6W0pKXoSZOiUz5tf99nvTDD/1sP9VRPvb/un86lT57SVqwSk8KR+L6kgTOlcZslRQe5WmJRKovETW7Anb+HzxUW4Xgnv11fuuj82aKXHz1Tzztx9v4VA9+/6le26B+3VhTC9RMPIr0qx4zaWNsnFRO0s8FWgEIFIRiVUAIlJGciqMmCwpQWyI/OplXA1RrXG1YI2svTQ3ufhWjNlKFqtXFI7Yg+zAXRcBZ+HygJuVHd0ys35bVn6QojLL5cZeVvPht/mVu/r/8s7GMXsLjv2s71GZhgjnEwsEVXogiSl/pl7LWra0IQgO3poTsieoYd4dhWfJlGWqyQf6sLxWt3/MRa4Im04ixeSdAWnxvqCX6tObVmzpZOPOZvrBNJF8gmGciBChsV+YdRYwnAvNpS4AnYFBm0KA2a35Unh+efxjercaLfV7wW0rtUTNl2j715al/9VtfutF+NZ/+aZSa+py/GCpRyvr17EsVLbRhmN++BBY/ik5/+YPK6bKnf2T8fh7P+uEYn0D3E4L3i6QHmvc3+k+8PN6Mb1w52tje6LbAi+M0FT4YneqVbpVDPnL2Xqx7m3tf9ENXHba9H/a/+X3z/+XfCnOo+Zy/o4SgY5Z6iq0nb+9Mc4JxL5f1qYs+xhTP/uiX/cMe4+hDHAfGnmGe+Ev+G88vnG7Ie20wHiUt/S1Kv+6BCM/9fkEfz73/9HNufQ4ZKdzvnwtS/LXltRcJB/yJ23H/mo89nPFa85Li3XOYu435LwTXKVWwO+cnlWFTB47L/AdfR//KI2bvF8sAb0c/M+1+YE3/oS77B8N+UUVHraV6AAAAAElFTkSuQmCC\"); } .icons-oneechan .a-icon { background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAACWCAMAAAA2YSLzAAAAPFBMVEVoaGhqampeXl5sbGxsbGxra2tsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGzXmsRLAAAAE3RSTlMAEAYnHBg2QExbcYaWqM++2+z4BMdvAwAAAtVJREFUSMfFVgmu3CAMhYRPAmb3/e9aL5Bl2kptVbXWSOSBsY15NmOMMZs1KnNExC+ezgV4MBtNMIw58+qX2REtQwiifdC6hwlNQBGfUlBzc+KYkP3IxH5hNvicCPXrMfEVi3ts2WrzaiN6jie2OI2GXbBfXiA/XPyexPpEHrHdyDV8YAt6vEYCVpJ3S7rXAZKkkfbnuR8Uk/32xsac6Y01La2ZfyIh1VrX9Rnfu5ygd6/XeQAGFxACkopDb3mkeXug48x5FCKhNzW+1j2t8/5EEwHTIfPm6G3aP37o/w/ir3QZ2V/xY0spdSxWL7MrLU7slmnDSY0UrH6CBJ/wFI3TNGECCDY9G4xmrpDkZvQMJ4q31EzLQuhipr7ag8ueFa+hUQy2d43nnPGg7NopHTUVyYlWpE+lUT4qfhDCnLpzB8oXLLJb4leptD/JblswOaZd0gRkDV0cJi69NNOUaclRpG6S1NPdRVPLjI3VSjWV8+FmaARknTxqfipl0tGR1DXvd0h251Ww/ZlaNQoaX3bqUS+IK6ZX4hysvuQinS+6n9638/6BbK4RLi6R11O8rPS4OnO66KHtw6yK96BWrg5QxDGcVzcoB8cYb/dE1zPO6C+pHxN0Ttw/JtJrx55+oV9Jq+ScF22IfBWDD+sHfTnBmKlpS99hPGSC4SBsi+dP3p0PjVBVedMdO3WoG57cAEbYVNkRHFROIzjYuGjoM7LOaEQKbtQjkuo5hCSMmezaNq3Gl6TE5J3ZLMu26SjpPJZo4h/9FJhT4JQJzjFXD7x54fBgzO9RvDH9Vl5vHIetcGHct1apLh/6gU3c2PYy5rrYh7a1NP29/H/G9xn/d+f7FNVcw9/H/9sf8ymXPnqdDd7Wx3OpzWRJuP8+iMTFe7wZq48Tce7QciNetUzku+pT/t4UHK/iIq2yPR/8y/315M/rWl1A/sM83phVh6+aeZY39OLNN4Y0P2GdHOWPAAAAAElFTkSuQmCC\"); } /* Banner & Board Title */ .boardBanner { line-height: 0; } .faded-4chan-banner .boardBanner { opacity: 0.5; transition: opacity 0.3s ease-in-out .5s; } .faded-4chan-banner .boardBanner:hover { opacity: 1; transition: opacity 0.3s ease-in; } /* From 4chan SS / OneeChan */  .fourchan-banner-reflection .boardBanner::after { background-image: -moz-element(#bannerCnt); bottom: -100%; content: ''; left: 0; mask: url(\"data:image/svg+xml,<svg version='1.1' xmlns='http://www.w3.org/2000/svg'><defs><linearGradient gradientUnits='objectBoundingBox' id='gradient' x2='0' y2='1'><stop stop-offset='0'/><stop stop-color='white' offset='1'/></linearGradient><mask id='mask' maskUnits='objectBoundingBox' maskContentUnits='objectBoundingBox' x='0' y='0' width='100%' height='100%'> <rect fill='url(%23gradient)' width='1' height='1' /></mask></defs></svg>#mask\"); opacity: 0.3; position: absolute; right: 0; top: 100%; -moz-transform: scaleY(-1); z-index: -1; }  .fourchan-banner-at-sidebar-top .boardBanner, .fourchan-banner-at-sidebar-bottom .boardBanner, .fourchan-banner-at-sidebar-bottom .boardBanner { position: fixed; } .fourchan-banner-at-sidebar-top .boardBanner { top: 18px; } .fourchan-banner-at-sidebar-bottom .boardBanner { bottom: 270px; } .fourchan-banner-under-post-form .boardBanner { bottom: 130px; } .board-title-at-sidebar-top.sidebar-location-right #boardTitle, .board-title-at-sidebar-bottom.sidebar-location-right #boardTitle, .board-title-under-post-form.sidebar-location-right #boardTitle, .fourchan-banner-at-sidebar-top.sidebar-location-right .boardBanner, .fourchan-banner-at-sidebar-bottom.sidebar-location-right .boardBanner, .fourchan-banner-under-post-form.sidebar-location-right .boardBanner { right: 2px; } .board-title-at-sidebar-top.sidebar-location-left #boardTitle, .board-title-at-sidebar-bottom.sidebar-location-left #boardTitle, .board-title-under-post-form.sidebar-location-left #boardTitle, .fourchan-banner-at-sidebar-top.sidebar-location-left .boardBanner, .fourchan-banner-at-sidebar-bottom.sidebar-location-left .boardBanner, .fourchan-banner-under-post-form.sidebar-location-left .boardBanner { left: 2px; } .board-title-at-sidebar-top #boardTitle, .board-title-at-sidebar-bottom #boardTitle, .board-title-under-post-form #boardTitle, .fourchan-banner-at-sidebar-top .boardBanner img, .fourchan-banner-at-sidebar-bottom .boardBanner img, .fourchan-banner-under-post-form .boardBanner img { width: 248px; } .board-title-at-sidebar-top.sidebar-large #boardTitle, .board-title-at-sidebar-bottom.sidebar-large #boardTitle, .board-title-under-post-form.sidebar-large #boardTitle, .fourchan-banner-at-sidebar-top.sidebar-large .boardBanner img, .fourchan-banner-at-sidebar-bottom.sidebar-large .boardBanner img, .fourchan-banner-under-post-form.sidebar-large .boardBanner img { width: 299px; } .fourchan-banner-at-top .boardBanner { position: relative; display: table; margin: 12px auto; text-align: center; } :root:not(.board-subtitle) .boardSubtitle, .board-title-hide #boardTitle, .fourchan-banner-hide .boardBanner { display: none; } #boardTitle { text-align: center; z-index: 4; } .board-title-at-sidebar-top #boardTitle, .board-title-at-sidebar-bottom #boardTitle, .board-title-under-post-form #boardTitle { position: fixed; } .board-title-at-sidebar-top.fourchan-banner-at-sidebar-top.sidebar-large #boardTitle { top: 121px; } .board-title-at-sidebar-top.fourchan-banner-at-sidebar-top #boardTitle { top: 104px; } .board-title-at-sidebar-top #boardTitle { top: 40px; } .board-title-at-sidebar-bottom #boardTitle { bottom: 280px; } .board-title-under-post-form #boardTitle { bottom: 140px; } /* Hover UI */ .move { cursor: pointer; } #ihover { position: fixed; max-height: 94vh; max-width: 75vw; z-index: 22; } #qp { position: fixed; z-index: 22; } #qp .postMessage::after { clear: both; display: block; content: \"\"; } #qp .full-image { max-height: 300px; max-width: 500px; } #menu { position: fixed; outline: none; z-index: 27; } /* Image Expansion */ .fit-width .full-image { max-width: 100%; } .gecko.fit-width .full-image { width: 100%; } .fit-height .full-image { max-height: 95vh; } .images-overlap-post-form .full-image { position: relative; z-index: 21; } /* Delete Buttons */ .hide-delete-ui .deleteform, .hide-delete-ui .post:not(#exlinks-options) .rice { display: none; } .post-form-style-slideup .deleteform::before, .post-form-style-tabbed-slideup .deleteform::before, .post-form-style-slideup .deleteform:hover, .post-form-style-tabbed-slideup .deleteform:hover { bottom: 0px !important; } .post-form-style-slideup .deleteform, .post-form-style-tabbed-slideup .deleteform { bottom: -50px !important; } .post-form-style-slideup .deleteform::before, .post-form-style-tabbed-slideup .deleteform::before, .post-form-style-slideup .deleteform, .post-form-style-tabbed-slideup .deleteform { right: 255px !important; } .deleteform { position: fixed; z-index: 18; width: 0; bottom: 0; right: 0; border-width: 1px 0 0 1px; border-style: solid; font-size: 0; color: transparent; } .deleteform:hover { width: auto; } .deleteform::before { z-index: 18; border-width: 1px 0 0 1px; border-style: solid; content: '\uf00d'; font-family: FontAwesome; font-weight: normal; font-style: normal; text-decoration: inherit; -webkit-font-smoothing: antialiased; font-size:14px !important; display: block; position: fixed; bottom: 0; right: 0; box-sizing: border-box; height: 1.6em; width: 1.4em; text-align: center; } .deleteform:hover::before { display: none; } .deleteform input { margin: 0 1px 0 0; } /* Slideout Navigation */ #boardNavDesktopFoot { position: fixed; text-align: center; font-size: 0; color: transparent; overflow-x: hidden; overflow-y: auto; box-sizing: border-box; width: 248px; } .sidebar-large #boardNavDesktopFoot { width: 299px; } .sidebar-location-right #boardNavDesktopFoot { right: 2px; } .sidebar-location-left #boardNavDesktopFoot { left: 2px; } #so-nav:hover #boardNavDesktopFoot { display: block; } #boardNavDesktopFoot { display: none; padding: 2px; } .slideout-navigation-hide #so-nav { display: none; } .slideout-navigation-compact #boardNavDesktopFoot { word-spacing: 1px; } .slideout-navigation-list #boardNavDesktopFoot a { display: block; } .slideout-navigation-list #boardNavDesktopFoot { max-height: 400px; } .slideout-navigation-list #boardNavDesktopFoot a::after { content: ' - ' attr(title); } .slideout-navigation-list #boardNavDesktopFoot a[href*='//boards.4chan.org/']::after, .slideout-navigation-list #boardNavDesktopFoot a[href*='//rs.4chan.org/']::after { content: '/ - ' attr(title); } .slideout-navigation-list #boardNavDesktopFoot a[href*='//boards.4chan.org/']::before, .slideout-navigation-list #boardNavDesktopFoot a[href*='//rs.4chan.org/']::before { content: '/'; } .slideout-navigation-hide #boardNavDesktopFoot { display: none; } /* Watcher */ #thread-watcher { position: fixed; z-index: 14; padding: 2px; } #thread-watcher { width: 200px; } #thread-watcher:not(:hover) { max-height: 200px; overflow: hidden; } .rounded-edges #thread-watcher { border-radius: 3px; } #watched-threads > div { max-height: 1.3em; overflow: hidden; } .slideout-watcher #thread-watcher { box-sizing: border-box; width: 248px; } .slideout-watcher.sidebar-large #boardNavDesktopFoot { width: 299px; } .slideout-watcher.sidebar-location-right #thread-watcher { left: auto !important; right: 2px !important; } .slideout-watcher.sidebar-location-left #thread-watcher { right: auto !important; left: 2px !important; } .slideout-watcher #thread-watcher .move { cursor: default; } .slideout-watcher.underline-links #thread-watcher .move { text-decoration: underline; } .slideout-watcher #thread-watcher > div { overflow: hidden; } .slideout-watcher #so-watcher:hover #thread-watcher { display: block; } .slideout-watcher #thread-watcher { display: none; overflow-y: auto; } .watch-thread-link { padding-top: 18px; width: 18px; height: 0px; display: inline-block; background-repeat: no-repeat; opacity: 0.2; position: relative; top: 1px; } .watch-thread-link.watched { opacity: 1; } /* Announcements */ #globalMessage { text-align: center; } .rounded-edges #globalMessage { border-radius: 3px; } .announcements-slideout #globalMessage { position: fixed; padding: 2px; width: 248px; } .announcements-slideout.sidebar-location-right #globalMessage { left: auto; right: 2px; } .announcements-slideout.sidebar-location-left #globalMessage { right: auto; left: 2px; } .announcements-slideout.sidebar-large #globalMessage { width: 299px; } .announcements-slideout #globalMessage h3 { margin: 0; } .announcements-slideout #globalMessage { box-sizing: border-box; display: none; } .announcements-slideout #so-psa:hover #globalMessage { display: block; } .announcements-hide #globalMessage { display: none !important; } /* Threads */ #threads, .rounded-edges .board > .thread { border-radius: 4px; } /* Thread Clearfix */ .thread > .threadContainer:last-of-type::after { display: block; content: ' '; clear: both; } /* Posts */ .expanding { opacity: .5; } .expanded-image > .post > .file > .fileThumb > img[data-md5], .expanded-image > .post > .file > .fileThumb > video[data-md5], .post > .file > .fileThumb > .full-image, .post > .file > .full-image { display: none; } .expanded-image > .post > .file > .fileThumb > .full-image, .expanded-image > .post > .file > .full-image { display: block; } .thread > .replyContainer:last-of-type .post { margin-bottom: 0; } .menu-button { position: relative; } .post .menu-button, .hide-post-button, .show-post-button span { float: right; } .post .menu-button, .hide-post-button { margin: 0 3px; opacity: 0; transition: opacity .3s ease-out 0s; } .post:hover .hide-post-button, .post:hover .menu-button, .inline .hide-post-button, .inline .menu-button { opacity: 1; } .color-user-ids .posteruid .hand { padding: .1em .3em; border-radius: 1em; font-size: 80%; } div.post div.postInfo { padding: 1px 3px; display: block !important; } .postInfo > span { vertical-align: bottom; } .bolds .subject, .bolds .name { font-weight: 600; } .italics .postertrip { font-style: italic; } .underline-links .replylink { text-decoration: underline; } .reply .fileText { padding: 0 3px; } .compact-file-text .fileText { font-size: .9em; } .fileThumb { float: left; margin: 3px 20px; outline: none; } .reply.post { box-sizing: border-box; display: inline-block; } .replyContainer { display: flex; } .fit-width-replies .reply.post { flex: 1 0; } .fit-width-replies .expanded-image .reply.post, .fit-width-replies .hasInline .reply.post { width: 100%; } .indent-replies #unread-line, .indent-replies .thread > .replyContainer, .indent-replies .threadContainer > .replyContainer { margin-left: 2em; } .rounded-edges .post { border-radius: 3px; } .spoiler, s { text-decoration: none; } /* OP */ .watch-thread-link { vertical-align: bottom; } .op-background .op.post { box-sizing: border-box; }  /* Force Reply Break */ .op-background .op.post .postMessage::after, .force-reply-break .op.post .postMessage::after { display: block; content: ' '; clear: both; } /* Summary */ .force-reply-break .summary { clear: both; } /* Inlined */ .inline { margin: 2px 8px 2px 2px; } .post .inline { margin: 2px; } .inline .replyContainer { display: inline-block; } /* Quotes */ .inlined { opacity: .5; } .underline-links .quotelink { text-decoration: underline; } .filtered, .quotelink.filtered { text-decoration: line-through !important; } .inline + .hashlink { display: none; } .hashlink::before { content: '\\00a0'; } /* Quote Threading */ .threadContainer { padding-left: 2em; border-left: 1px solid; } .indent-replies .threadContainer { margin-left: 2em; padding-left: 0; } .threadOP { clear: both; } /* Backlinks */ .underline-links .forwardlink, .underline-links .backlink { text-decoration: underline; } .backlink.dead { text-decoration: none; } .filtered-backlinks .filtered.backlink { display: none; } .backlinks-position-lower-left .backlink-container, .backlinks-position-lower-right .backlink-container { max-width: 100%; padding: 0 5px; } .backlinks-position-lower-left .reply.quoted, .backlinks-position-lower-right .reply.quoted { position: relative; padding-bottom: 1.7em; } .backlinks-position-lower-left .inline .reply.quoted, .backlinks-position-lower-right .inline .reply.quoted, .backlinks-position-lower-right #qp .reply.quoted, .backlinks-position-lower-left #qp .reply.quoted { position: static; padding-bottom: 0; } .backlinks-position-lower-right .reply .backlink-container, .backlinks-position-lower-left .reply .backlink-container { position: absolute; bottom: 0; padding: 0 5px; } .backlinks-position-lower-left .reply .backlink-container { left: 0; } .backlinks-position-lower-right .reply .backlink-container { right: 0; } .backlinks-position-lower-right .backlink-container::before, .backlinks-position-lower-left .reply .backlink-container::before { content: 'REPLIES: '; } .backlink-container:empty { display: none; } .backlinks-position-lower-left #qp .backlink-container, .backlinks-position-lower-left .inline .backlink-container, .backlinks-position-lower-right .inline .backlink-container, .backlinks-position-lower-right #qp .backlink-container { position: static; max-width: 100%; } .backlinks-position-lower-left #qp .backlink-container::before, .backlinks-position-lower-left .inline .backlink-container::before, .backlinks-position-lower-right #qp .backlink-container::before, .backlinks-position-lower-right .inline .backlink-container::before { content: ''; } .backlinks-position-lower-right .inline .backlink-container { float: none; } /* Fixes text spoilers */ .remove-spoilers.reveal-spoilers .spoiler::before, .remove-spoilers.reveal-spoilers s::before { content: '[spoiler]'; } .remove-spoilers.reveal-spoilers .spoiler::after, .remove-spoilers.reveal-spoilers s::after { content: '[/spoiler]'; } :root:not(.remove-spoilers).reveal-spoilers .spoilers:not(:hover), :root:not(.remove-spoilers).reveal-spoilers s:not(:hover) { color: white !important; } :root:not(.remove-spoilers) .spoiler:not(:hover) *, :root:not(.remove-spoilers) s:not(:hover) * { color: rgb(0,0,0) !important; text-shadow: none !important; } :root:not(.remove-spoilers) spoiler:not(:hover), :root:not(.remove-spoilers) s:not(:hover) { background-color: rgb(0,0,0); color: rgb(0,0,0) !important; text-shadow: none !important; } /* Code */ .prettyprint { box-sizing: border-box; font-family: monospace; display: inline-block; margin: 0 auto .1em 0; vertical-align: middle; white-space: pre-wrap; border-radius: 2px; overflow-x: auto; padding: 3px; max-width: 100%; } /* Menu */ .entry { border-bottom: 1px solid rgba(0,0,0,.25); cursor: pointer; display: block; outline: none; padding: 3px 1em 3px 7px; position: relative; text-decoration: none; white-space: nowrap; } .entry:last-child { border-bottom: 0; } .has-submenu::after { content: \"\uf141\"; display: inline-block; margin: .3em; position: absolute; right: .2em; } .submenu { display: none; position: absolute; top: -1px; } .focused > .submenu { display: block; } /* Stubs */ .fit-width-replies .stub { display: block; text-align: right; clear: both; } /* Element Replacing: */ /* Checkboxes */ .rice { cursor: pointer; width: .7em; height: .7em; margin: 2px 3px; display: inline-block; vertical-align: bottom; } input[type=checkbox]:checked + .rice { position: relative; } input[type=checkbox]:checked + .rice::after { content: \"\"; display: block; width: 4px; height: 10px; border-width: 0 3px 3px 0; border-style: solid; transform: rotate(45deg); position: absolute; left: 2px; bottom: -1px; } .rounded-edges .rice { border-radius: 2px;} } .circle-checkboxes .rice { border-radius: 6px;} } input:checked + .rice { background-attachment: scroll; background-repeat: no-repeat; background-position: bottom right; } /* Selects */ .selectrice { position: relative; cursor: default; overflow: hidden; text-align: left; } #settings .selectrice { display: inline-block; } .selectrice::after { content: \"\"; border-right: .25em solid transparent; border-left: .25em solid transparent; position: absolute; right: .4em; top: .5em; } .selectrice::before { content: \"\"; height: 1.6em; position: absolute; right: 1.3em; top: 0; } /* Select Dropdown */ #selectrice { padding: 0; margin: 0; position: fixed; max-height: 120px; overflow-y: auto; overflow-x: hidden; z-index: 32; } #selectrice:empty { display: none; } /* Post Form Shortcut */ .qr-shortcut.on-page { font-size: 250%; } /* Post Form */ #qr { z-index: 20; position: fixed; background: none; border: none; padding: 1px; min-width: 248px; background: transparent; border: 1px solid transparent; } .sidebar-large #qr { min-width: 299px; } .rounded-edges #qr, .rounded-edges #qrtab { border-radius: 3px 3px 0 0; } .post-form-style-fixed #qr { top: auto !important; } .sidebar-location-left:not(.post-form-style-float) #qr { left: 0 !important; right: auto !important; } .sidebar-location-right:not(.post-form-style-float) #qr { right: 0 !important; left: auto !important; } :root:not(.post-form-style-float) #qr { bottom: 0 !important; } .fourchan-ss-navigation.fixed.bottom-header:not(.post-form-style-float):not(.post-form-style-slideup):not(.post-form-style-tabbed-slideup) #qr, .fourchan-ss-navigation.index.pagination-sticky-bottom:not(.post-form-style-float):not(.post-form-style-slideup):not(.post-form-style-tabbed-slideup) #qr { bottom: 1.5em !important; } .post-form-style-slideup #qr, .post-form-style-slideout #qr { top: auto !important; } .post-form-style-slideup #qr { transform: translateY(93%); } .post-form-style-slideout.sidebar-location-left #qr { transform: translateX(-93%); } .post-form-style-slideout.sidebar-location-right #qr { transform: translateX(93%); } .post-form-style-slideup #qr:hover, .post-form-style-slideup #qr.focus, .post-form-style-slideup #qr.dump { transform: translateY(0); } .post-form-style-slideout #qr:hover, .post-form-style-slideout #qr.focus, .post-form-style-slideout #qr.dump { transform: translate(0); } .post-form-style-tabbed-slideup #qr, .post-form-style-tabbed-slideout #qr { top: auto !important; } .post-form-style-tabbed-slideup #qr { transform: translateY(100%); } .post-form-style-tabbed-slideout.sidebar-location-left #qr { transform: translateX(-100%); } .post-form-style-tabbed-slideout.sidebar-location-right #qr { transform: translateX(100%); } .post-form-style-tabbed-slideup #qr:hover, .post-form-style-tabbed-slideup #qr.focus, .post-form-style-tabbed-slideup #qr.dump { transform: translateY(0); } .post-form-style-tabbed-slideout #qr:hover, .post-form-style-tabbed-slideout #qr.focus, .post-form-style-tabbed-slideout #qr.dump { transform: translateX(0); } .post-form-style-tabbed-slideup #qrtab, .post-form-style-tabbed-slideout #qrtab { position: absolute; top: 0; width: 120px; text-align: center; border-width: 1px 1px 0 1px; cursor: default; } .post-form-style-tabbed-slideup #qrtab { top: auto !important; bottom: 100% !important; right: 50%; transform: translateX(50%); } .post-form-style-tabbed-slideout.sidebar-location-left #qrtab { transform: rotate(90deg); transform-origin: bottom right; left: 100%; } .post-form-style-tabbed-slideout.sidebar-location-right #qrtab { transform: rotate(-90deg); transform-origin: bottom right; right: 100%; } .post-form-style-tabbed-slideup #qr:hover #qrtab, .post-form-style-tabbed-slideup #qr.focus #qrtab, .post-form-style-tabbed-slideup #qr.dump #qrtab, .post-form-style-tabbed-slideout #qr:hover #qrtab, .post-form-style-tabbed-slideout #qr.focus #qrtab, .post-form-style-tabbed-slideout #qr.dump #qrtab { opacity: 0 !important; } .post-form-style-slideup #qrtab input, .post-form-style-slideup #qrtab .rice, .post-form-style-tabbed-slideup #qrtab input, .post-form-style-tabbed-slideup #qrtab .close, .post-form-style-tabbed-slideup #qrtab .rice, .post-form-style-tabbed-slideup #qrtab span, .post-form-style-slideout #qrtab input, .post-form-style-slideout #qrtab .rice, .post-form-style-tabbed-slideout #qrtab input, .post-form-style-tabbed-slideout #qrtab .close, .post-form-style-tabbed-slideout #qrtab .rice, .post-form-style-tabbed-slideout #qrtab span { display: none; } .post-form-style-tabbed-slideup #qrtab .selectrice, .post-form-style-tabbed-slideout #qrtab .selectrice { text-align: center; } .transparent-post-form #qr { opacity: 0.2; transition: opacity .3s ease-in-out 1s; } .transparent-post-form #qr:hover, .transparent-post-form #qr.focus, .transparent-post-form #qr.dump { opacity: 1; transition: opacity .3s linear; } :root:not(.show-post-form-header):not(.post-form-style-float):not(.post-form-style-tabbed-slideout):not(.post-form-style-tabbed-slideup) #qrtab, .post-form-style-float .autohide:not(:hover):not(.focus) form, .show-post-form-header.post-form-style-fixed .autohide:not(:hover):not(.focus) form { display: none !important; } :root:not(.post-form-style-tabbed-slideout) #qrtab { margin-bottom: 1px; } #qr.autohide:not(:hover):not(.focus) #qrtab { margin-bottom: 0; } .post-form-slideout-transitions.post-form-style-slideup #qr, .post-form-slideout-transitions.post-form-style-tabbed-slideup #qr, .post-form-slideout-transitions.post-form-style-slideout #qr, .post-form-slideout-transitions.post-form-style-tabbed-slideout #qr { transition: transform .3s ease-in-out 1s; } .post-form-slideout-transitions.post-form-style-tabbed-slideup #qr.dump, .post-form-slideout-transitions.post-form-style-tabbed-slideup #qr:hover, .post-form-slideout-transitions.post-form-style-tabbed-slideup #qr.focus, .post-form-slideout-transitions.post-form-style-slideup #qr.dump, .post-form-slideout-transitions.post-form-style-slideup #qr:hover, .post-form-slideout-transitions.post-form-style-slideup #qr.focus, .post-form-slideout-transitions.post-form-style-tabbed-slideout #qr.dump, .post-form-slideout-transitions.post-form-style-tabbed-slideout #qr:hover, .post-form-slideout-transitions.post-form-style-tabbed-slideout #qr.focus, .post-form-slideout-transitions.post-form-style-slideout #qr.dump, .post-form-slideout-transitions.post-form-style-slideout #qr:hover, .post-form-slideout-transitions.post-form-style-slideout #qr.focus { transition: transform .3s linear; } .post-form-slideout-transitions #qrtab { transition: opacity .3s ease-in-out 1s; } .post-form-slideout-transitions #qr:hover #qrtab { transition: opacity .3s linear; } .post-form-slideout-transitions #qrtab { transition: opacity .3s ease-in-out 1s; } .post-form-slideout-transitions #qr:hover #qrtab { transition: opacity .3s linear; } #qr .close { float: right; padding: 0 3px; } #qr .warning { min-height: 1.6em; vertical-align: middle; padding: 0 1px; border-width: 1px; border-style: solid; } .persona { display: flex; flex-direction: column; align-items: stretch; } .compact-post-form-inputs .persona { flex-direction: row; } #qr textarea.field { height: 11.6em; min-height: 6em; } #qr.has-captcha textarea.field { height: 6em; } .compact-post-form-inputs .persona input.field { flex: 1 1; margin: 0 0 0 1px; } .compact-post-form-inputs .persona input:focus { flex: 3 1; } .compact-post-form-inputs .persona input.field:first-child { margin: 0; } .compact-post-form-inputs #qr textarea.field { height: 14.9em; min-height: 9em; } .compact-post-form-inputs #qr.has-captcha textarea.field { height: 9em; } .tripcode-hider .tripped:not(:hover):not(:focus) { color: transparent !important; } .textarea-resize-horizontal #qr textarea { resize: horizontal; } .textarea-resize-vertical #qr textarea { resize: vertical; } .textarea-resize-both #qr textarea { resize: both; } .textarea-resize-none #qr textarea { resize: none; } .captcha-img div { margin: 1px 0 0; text-align: center; line-height: 0; background-color: #fff; } .captcha-img img { width: 246px; } .captcha-img, .captcha-img img { height: 4em; } .captcha-input { width: 100%; margin: 1px 0 0; } .field, .selectrice, button, input:not([type=radio]) { box-sizing: border-box; height: 1.6em; margin: 1px 0 0; vertical-align: bottom; padding: 0 1px; outline: none; transition: color .25s, border-color .25s, flex .25s; } .selectrice { padding-right: 1.6em; } #qr textarea { min-width: 100%; } #file-n-submit { display: flex } #qr [type='submit'] { width: 60px; } [type='file'] { position: absolute; opacity: 0; z-index: -1; } /* Fake File Input */ #qr-filename, #qr-filerm, .has-file #qr-no-file { display: none; } #qr-no-file, .has-file #qr-filename { display: block; } #qr-filename { border: medium none; vertical-align: top; padding: 0; margin: 0; height: auto; background: transparent none; overflow: hidden; text-overflow: ellipsis; width: 88%; } #qr-filename:not(.edit) { pointer-events: none; } .has-file #qr-filerm { display: inline-block; } #qr-extras-container { position: absolute; right: 0; top: 0; z-index: 2; } #qr-extras-container > label, #qr-extras-container > a { cursor: pointer; margin-right: 3px; } #qr-filename-container { box-sizing: border-box; display: inline-block; position: relative; margin-right: 1px; flex: 1 1; overflow: hidden; padding: 2px 1px 0; } /* Thread Select */ #qr-thread-select, #qr-thread-select .selectrice div { display: inline; } #qr-thread-select .selectrice { cursor: pointer; display: inline-block; width: 120px; border: none; background: none transparent; padding: 0; margin: 0; height: auto; } #qr-thread-select .selectrice::before, #qr-thread-select .selectrice::after { display: none; } /* Dumping UI */ .dump #dump-list-container { display: block; } #dump-list-container { display: none; position: relative; overflow-y: hidden; margin-top: 1px; } #dump-list { overflow-x: auto; overflow-y: hidden; white-space: nowrap; width: 248px; max-width: 100%; min-width: 100%; } #dump-list:hover { overflow-x: auto; } .qr-preview { box-sizing: border-box; counter-increment: thumbnails; cursor: move; display: inline-block; height: 90px; width: 90px; padding: 2px; opacity: .5; overflow: hidden; position: relative; text-shadow: 0 1px 1px #000; transition: opacity .25s ease-in-out; vertical-align: top; } .qr-preview:hover, .qr-preview:focus { opacity: .9; } .qr-preview::before { content: counter(thumbnails); color: #fff; position: absolute; top: 3px; right: 3px; text-shadow: 0 0 3px #000, 0 0 8px #000; } .qr-preview#selected { opacity: 1; } .qr-preview.drag { box-shadow: 0 0 10px rgba(0,0,0,.5); } .qr-preview.over { border-color: #fff; } .qr-preview > span { color: #fff; } .remove { background: none; color: #e00; font-weight: 700; padding: 3px; } a:only-of-type > .remove { display: none; } .remove:hover::after { content: \" Remove\"; } .qr-preview > label { background: rgba(0,0,0,.5); color: #fff; right: 0; bottom: 0; left: 0; position: absolute; text-align: center; } .qr-preview > label > input { margin: 0; } #add-post { cursor: pointer; font-size: 2em; position: absolute; top: 50%; right: 10px; transform: translateY(-50%); } /* Ads */ .fade-ads .topad img, .fade-ads .middlead img, .fade-ads .bottomad img { opacity: 0.3; transition: opacity .3s linear; } .fade-ads .topad img:hover, .fade-ads .middlead img:hover, .fade-ads .bottomad img:hover { opacity: 1; } .hide-ads .bottomad + hr, .hide-ads .topad, .hide-ads .middlead, .hide-ads .bottomad, .hide-ads .ad-plea, .hide-ads .center { display: none; } .shrink-ads .topad a img, .shrink-ads .bottomad a img { width: 500px; height: auto; } /* Mascot Positions */ #mascot { display: none; position: fixed; z-index: -1; bottom: 0; left: 0; right: 0; line-height: 0; } .click-to-toggle #mascot { cursor: pointer; } .mascot-position-above-post-form.post-form-style-fixed:not(.post-form-decorations) #mascot img { margin-bottom: -2px; } .mascots #mascot { display: block; } .sidebar-location-right.mascot-location-sidebar #mascot, .sidebar-location-left.mascot-location-opposite #mascot { left: auto; } .sidebar-location-left.mascot-location-sidebar #mascot, .sidebar-location-right.mascot-location-opposite #mascot { right: auto; } .sidebar-location-left.mascot-location-sidebar #mascot img, .sidebar-location-right.mascot-location-opposite #mascot img { transform: scaleX(-1); } .fourchan-ss-navigation.bottom-header.fixed #mascot, .fourchan-ss-navigation.index.pagination-sticky-bottom #mascot { bottom: 1.5em } .mascots-overlap-posts #mascot { z-index: 3; } .mascot-position-middle #mascot { bottom: 50% !important; transform: translateY(50%); } .mascot-position-top #mascot { bottom: auto !important; top: 17px; } /* Options */ #overlay { position: fixed; z-index: 30; top: 0; right: 0; left: 0; bottom: 0; background: rgba(0,0,0,.5); } #appchanx-settings { width: auto; left: 15%; right: 15%; top: 15%; bottom: 15%; position: fixed; z-index: 31; padding: .3em; } .rounded-edges #appchanx-settings, .rounded-edges #appchanx-settings fieldset, .rounded-edges .mascots-container, .rounded-edges .section-container, .rounded-edges .sections-list > a { border-radius: 3px; } .description { display: none; } #appchanx-settings h3, .section-keybinds, .section-mascots, .section-script, .style { text-align: center; } .section-keybinds table, .section-script fieldset, .section-style fieldset { text-align: left; } .section-keybinds table { margin: auto; } #appchanx-settings fieldset { padding: 5px 0; vertical-align: top; border: 0; margin: 0 3px 6px; display: inline-block; } .single-column-mode #appchanx-settings fieldset { display: block; margin: 0 auto 6px; } #appchanx-settings .section-advanced fieldset { display: block; margin: 0 auto 6px; } .section-advanced .archive-cell { min-width: 200px; } .section-advanced .selectrice { display: inline-block; clear: both; } .section-container { overflow: auto; position: absolute; top: 1.7em; right: 5px; bottom: 5px; left: 5px; padding: 5px; } .sections-list { padding: 0 3px; float: left; } .sections-list > a { cursor: pointer; position: relative; padding: 0 4px; z-index: 1; height: 1.4em; display: inline-block; border-width: 1px 1px 0 1px; border-color: transparent; border-style: solid; } .sections-list > a.tab-selected { border-style: solid; } .credits { float: right; } #appchanx-settings h3 { margin: 0; } .section-script fieldset > div, .section-style fieldset > div, .section-advanced fieldset > div { overflow: visible; padding: 0 5px 0 7px; } #appchanx-settings tr:nth-of-type(2n+1), .section-script fieldset > div:nth-of-type(2n+1), .section-advanced fieldset > div:nth-of-type(2n+1), .section-style fieldset > div:nth-of-type(2n+1), .section-keybinds tr:nth-of-type(2n+1), #selectrice li:nth-of-type(2n+1) { background-color: rgba(0, 0, 0, 0.05); } article li { margin: 10px 0 10px 2em; } #appchanx-settings .option { width: 50%; display: inline-block; vertical-align: bottom; } .option input { width: 100%; } .optionlabel { padding-left: 18px; } .rice + .optionlabel { padding-left: 0; } .section-script fieldset, .styleoption { text-align: left; } .section-style fieldset { width: 370px; } .section-script fieldset { width: 200px; } #mascotcontent, #themecontent, .suboptions { overflow: auto; position: absolute; top: 0; right: 0; bottom: 1.7em; left: 0; } #mascotcontent, #themecontent { padding: 5px; } #themecontent { top: 1.8em; } .mAlign { height: 250px; vertical-align: bottom; display: table-cell; line-height: 0; } #save, .stylesettings { position: absolute; right: 10px; bottom: 0; } .section-style .suboptions { bottom: 0; } .section-container textarea { font-family: monospace; min-height: 150px; resize: vertical; width: 100%; } /* Hover Functionality */ #mouseover { z-index: 33; position: fixed; max-width: 70%; } #mouseover:empty { display: none; } /* Mascot Tab */ #mascot_hide { padding: 3px; position: absolute; top: 2px; right: 18px; } #mascot_hide .rice { float: left; } #mascot_hide > div { height: 0; text-align: right; overflow: hidden; } #mascot_hide:hover > div { height: auto; } #mascot_hide label { width: 100%; display: block; clear: both; text-decoration: none; } .mascots-container { padding: 0; text-align: center; } .mascot, .mascotcontainer { overflow: hidden; } .mascot { position: relative; border: none; margin: 5px; padding: 0; width: 200px; display: inline-block; background-color: transparent; } .mascotcontainer { height: 250px; border: 0; margin: 0; max-height: 250px; cursor: pointer; bottom: 0; border-width: 0 1px 1px; border-style: solid; border-color: transparent; overflow: hidden; } .mascot img { max-width: 200px; } .export-button, .mascotname, #mascot-options { box-sizing: border-box; padding: 0; width: 100%; } #mascot-options { opacity: 0; transition: opacity .3s linear; } .mascot:hover #mascot-options { opacity: 1; } #mascot-options { position: absolute; bottom: 0; right: 0; left: 0; } .export-button { position: absolute; bottom: 1.7em; right: 0; left: 0; text-align: center; } #mascot-options a { display: inline-block; width: 33%; } #upload { position: absolute; width: 100px; left: 50%; margin-left: -50px; text-align: center; bottom: 0; } #mascots_batch { position: absolute; left: 10px; bottom: 0; } /* Themes Tab */ #themes h1 { position: absolute; right: 300px; bottom: 10px; margin: 0; transition: all .2s ease-in-out; opacity: 0; } #themes .selectedtheme h1 { right: 11px; opacity: 1; } #addthemes { position: absolute; left: 10px; bottom: 0; } .theme { margin: 1em; } /* Theme Editor */ #themeConf { position: fixed; top: 0; bottom: 0; width: 296px; z-index: 10; } .sidebar-location-right #themeConf { right: 2px; left: auto; } .sidebar-location-right #themeConf { left: 2px; right: auto; } #themebar input { width: 30%; } .option .color { width: 10%; border-left: none !important; color: transparent !important; } .option .colorfield { width: 90%; } .themevar textarea { min-width: 100%; max-width: 100%; height: 20em; resize: vertical; } /* Mascot Editor */ #mascotConf { position: fixed; height: 17em; bottom: 0; left: 50%; width: 500px; margin-left: -250px; overflow: auto; z-index: 10; } #mascotConf .option, #mascotConf .optionlabel { box-sizing: border-box; width: 50%; display: inline-block; vertical-align: middle; } #mascotConf .option input { width: 100%; } #close { position: absolute; left: 10px; bottom: 0; } /* Gallery */ #a-gallery { position: fixed; top: 0; bottom: 0; left: 0; right: 0; z-index: 26; display: flex; flex-direction: row; background: rgba(0,0,0,0.7); } .gal-viewport { display: flex; align-items: stretch; flex-direction: row; flex: 1 1 auto; } .gal-thumbnails { flex: 0 0 150px; overflow-y: auto; display: flex; flex-direction: column; align-items: stretch; text-align: center; background: rgba(0,0,0,.5); border-left: 1px solid #222; } .gal-hide-thumbnails .gal-thumbnails { display: none; } .gal-thumb img { max-width: 125px; max-height: 125px; height: auto; width: auto; } .gal-thumb { flex: 0 0 auto; padding: 3px; line-height: 0; transition: background .2s linear; } .gal-highlight { background: rgba(0, 190, 255,.8); } .gal-prev { order: 0; border-right: 1px solid #222; } .gal-next { order: 2; border-left: 1px solid #222; } .gal-prev, .gal-next { flex: 0 0 20px; position: relative; cursor: pointer; opacity: 0.7; background-color: rgba(0, 0, 0, 0.3); } .gal-prev:hover, .gal-next:hover { opacity: 1; } .gal-prev::after, .gal-next::after { position: absolute; top: 48.6%; transform: translateY(-50%) display: inline-block; border-top: 11px solid transparent; border-bottom: 11px solid transparent; content: \"\"; } .gal-prev::after { border-right: 12px solid #fff; right: 5px; } .gal-next::after { border-left: 12px solid #fff; right: 3px; } .gal-image { order: 1; flex: 1 0 auto; display: flex; align-items: flex-start; justify-content: space-around; overflow: auto; /* Flex > Non-Flex child max-width and overflow fix (Firefox only?) */ width: 1%; } .gal-image a { margin: auto; line-height: 0; } .gal-fit-width .gal-image img { max-width: 100%; } .gal-fit-height .gal-image img { max-height: 95vh; max-height: calc(100vh - 25px); } .gal-buttons { font-size: 2em; margin-right: 10px; top: 5px; color: #ffffff; text-shadow: 0px 0px 1px #000; } .gal-buttons, .gal-name, .gal-count { position: fixed; right: 178px; } .hide-thumbnails .gal-buttons, .hide-thumbnails .gal-count, .hide-thumbnails .gal-name { right: 28px; } .gal-name { bottom: 5px; background: rgba(0,0,0,0.6) !important; border-radius: 3px; padding: 1px 5px 2px 5px; text-decoration: none !important; color: #fff !important; } .gal-name:hover, .gal-close:hover { color: rgb(95, 95, 101) !important; } .gal-count { bottom: 26px; background: rgba(0,0,0,0.6) !important; border-radius: 3px; padding: 1px 5px 2px 5px; color: #fff !important; } /* Catalog */ #content .navLinks, #info .navLinks, .btn-wrap { display: block; } .hide-navlinks body > .navLinks { display: none; } .navLinks > .btn-wrap:not(:first-of-type)::before { content: ' - '; } .button { cursor: pointer; } #content .btn-wrap, #info .btn-wrap { display: inline-block; } #post-preview, #quote-preview { position: absolute; z-index: 22; } .rounded-edges #post-preview { border-radius: 3px; } #settings, #threads, #info .navLinks, #content .navLinks { text-align: center; } #threads .thread { vertical-align: top; display: inline-block; word-wrap: break-word; overflow: hidden; margin: 1px; padding: 5px 0 3px; text-align: center; } .extended-small .thread, .small .thread { width: 165px; max-height: 320px; } .small .teaser, .large .teaser { display: none; } .extended-large .thread, .large .thread { width: 270px; max-height: 410px; } .extended-small .thumb, .small .thumb { max-width: 150px; max-height: 150px; } .panel { position: fixed; top: 50% !important; left: 50%; transform: translate(-50%, -50%); padding: 5px; } .icon::after { display: inline-block; float: right; width: 1em; cursor: pointer; } .helpIcon::after { content: '?'; } .closeIcon::after { content: '\uf00d'; font-family: FontAwesome; font-weight: normal; font-style: normal; text-decoration: inherit; -webkit-font-smoothing: antialiased; font-size:14px !important; } /* Front Page */ #logo { text-align: center; } #doc { box-sizing: border-box; margin: 10px auto; width: 1006px; padding: 2px; position: relative; } .rounded-edges #doc, .rounded-edges #doc div { border-radius: 3px; } #boards .boxcontent { vertical-align: top; text-align: center; } #filter-container, #options-container { top: 4px; right: 8px; position: absolute; } #filtermenu, #optionsmenu { top: 100% !important; left: auto !important; right: 0 !important; } #boards .column { box-sizing: border-box; display: inline-block; width: 180px; text-align: left; vertical-align: top; } .bd ul, .boxcontent ul { vertical-align: top; padding: 0; margin: 0; } .right-box .boxcontent ul { padding: 0 10px; } .yuimenuitem, .boxcontent ul > li { list-style-type: none; } .boxbar { position: relative; } #doc h3, .boxbar h2 { margin: 0; } #doc h3 { text-decoration: none !important; } .underline-links #doc h3 { text-decoration: underline !important; } #ft, .box-outer { margin: 2px 0 0; overflow: hidden; } #ft, .boxbar, .boxcontent { padding: 0 8px; } .yui-module { position: absolute; } .yuimenuitem::before { content: \" [ ] \"; font-family: monospace; } .yuimenuitem-checked::before { content: \" [x] \" } .yui-g { overflow: hidden; } .yui-u { display: inline-block; vertical-align: top; width: 499px; float: right; } .yui-u.first { float: left; } #recent-images .boxcontent { text-align: center; } #ft { text-align: center; } #ft ul { padding: 0; } #ft li { list-style-type: none; display: inline-block; width: 100px; } #preview-tooltip-nws, #preview-tooltip-ws, #ft .fill, .clear-bug { display: none; } /* ExLinks */ #exlinks-options-content { padding: 5px; } /* /f/ */ [action*='/f/'] .fileInfo { padding-left: 5px !important; } [action*='/f/'] .subject, .name-col { max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; word-wrap: break-word; } div.swfSauce { margin-top: 5px !important; } .mobile.center { display:none!important; } table.flashListing { border-spacing: 1px !important; margin: 5px auto !important; } .flashListing td { padding: 2px !important; font-size: 9pt !important; text-align: center !important; margin: 0px !important; } #delform[action='https://sys.4chan.org/f/up.php'], #delform[action='https://sys.4chan.org/f/up.php'] .postblock { background: none !important; border: none !important; box-shadow: none !important; } /*! * Font Awesome 4.0.3 * the iconic font designed for Bootstrap * ------------------------------------------------------------------------------ * The full suite of pictographic icons, examples, and documentation can be * found at http://fontawesome.io. Stay up to date on Twitter at * http://twitter.com/fontawesome. * * License * ------------------------------------------------------------------------------ * - The Font Awesome font is licensed under SIL OFL 1.1 - * http://scripts.sil.org/OFL * - Font Awesome CSS, LESS, and SASS files are licensed under MIT License - * http://opensource.org/licenses/mit-license.html * - Font Awesome documentation licensed under CC BY 3.0 - * http://creativecommons.org/licenses/by/3.0/ * - Attribution is no longer required in Font Awesome 3.0, but much appreciated: * \"Font Awesome by Dave Gandy - http://fontawesome.io\" * * Author - Dave Gandy * ------------------------------------------------------------------------------ * Email: dave@fontawesome.io * Twitter: http://twitter.com/davegandy * Work: Lead Product Designer @ Kyruus - http://kyruus.com */ @font-face{font-family: 'FontAwesome';src: url('data:application/font-woff;base64,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') format('woff');font-weight:normal;font-style:normal;}.fa,.pfa::after,.pfa::before{font-family:FontAwesome;font-weight:normal;font-style:normal;text-decoration:inherit;-webkit-font-smoothing:antialiased;speak:none;font-size:14px !important;}#shortcuts .fa {color:rgb(130,130,130) !important;}.fa-spin{-webkit-animation:spin 2s infinite linear;-moz-animation:spin 2s infinite linear;-o-animation:spin 2s infinite linear;animation:spin 2s infinite linear}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg)}100%{-moz-transform:rotate(359deg)}}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(359deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg)}100%{-o-transform:rotate(359deg)}}@-ms-keyframes spin{0%{-ms-transform:rotate(0deg)}100%{-ms-transform:rotate(359deg)}}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(359deg)}}",
    dynamic: function() {
      var editSpace, sidebarLocation;
      sidebarLocation = Conf["Sidebar Location"] === "left" ? ["left", "right"] : ["right", "left"];
      if (Conf['editMode'] === "theme") {
        editSpace = {};
        editSpace[sidebarLocation[1]] = 300;
        editSpace[sidebarLocation[0]] = 0;
      } else {
        editSpace = {
          left: 0,
          right: 0
        };
      }
      return "#boardNavDesktopFoot a, #header-bar a, #header-bar .shortcut > span, .deleteform::before, .field, .hide-navigation-decorations .pages a, .notification, .selectrice, body, button, input, textarea { font-size: " + (parseInt(Conf["Font Size"], 10)) + "px; } #boardTitle, .boardTitle a { font-size: " + (parseInt(Conf["Font Size"], 10) + 10) + "px; } .boardSubtitle, .boardSubtitle a { font-size: " + (parseInt(Conf["Font Size"], 10) - 1) + "px; } body, button, input, textarea { font-family: " + Conf["Font"] + "; } body { padding: 0 " + (parseInt(Conf["Right Thread Padding"], 10) + editSpace["right"]) + "px 0 " + (parseInt(Conf["Left Thread Padding"], 10) + editSpace["left"]) + "px; } .board > .thread { margin: " + (parseInt(Conf["Top Thread Padding"], 10)) + "px 0 " + (parseInt(Conf["Bottom Thread Padding"], 10)) + "px 0; } .post, .summary { margin-bottom: " + Conf["Post Spacing"] + "px; } .thread > .threadContainer:last-of-type { margin-bottom: -" + Conf["Post Spacing"] + "px; } .thread > .replyContainer > .reply.post { border-width: " + (Conf['Post Spacing'] === "0" ? "1px 1px 0 1px" : '1px') + "; } #post-preview, .postMessage { margin: " + Conf['Vertical Post Padding'] + "px " + Conf['Horizontal Post Padding'] + "px; } :root:not(fourchan-ss-navigation):not(.pagination-on-side) .pagelist, :root:not(fourchan-ss-navigation) #header-bar { margin-left: " + (parseInt(Conf["Left Thread Padding"], 10) + editSpace["right"]) + "px; margin-right: " + (parseInt(Conf["Right Thread Padding"], 10) + editSpace["left"]) + "px; } #mascot { opacity: " + Conf['Mascot Opacity'] + "; }";
    },
    setTheme: function(theme) {
      return Style.sheets.theme.textContent = Style.theme(theme);
    },
    theme: function(theme) {
      var bLink, background, backgroundC, bgColor, i, replyRGB, replybg, svg, svgs, _i, _len;
      bgColor = new Color(backgroundC = theme["Background Color"]);
      replybg = new Color(theme["Reply Background"]);
      bLink = new Color(theme["Backlinks"]);
      replyRGB = "rgb(" + (replybg.shiftRGB(parseInt(Conf['Silhouette Contrast'], 10), true)) + ")";
      Style.lightTheme = bgColor.isLight();
      svgs = [['captcha-filter', "values='" + (Style.filter(Style.matrix(theme["Text"], theme["Input Background"]))) + " 0 0 0 1 0'"], ['mascot-filter', "values='" + (Style.silhouette(Style.matrix(replyRGB))) + " 0 0 0 1 0'"], ['grayscale', 'id="color" type="saturate" values="0"'], ['icons-filter', "values='-.6 0 0 0 1 0 -.6 0 0 1 0 0 -.6 0 1 0 0 0 1 0'"]];
      for (i = _i = 0, _len = svgs.length; _i < _len; i = ++_i) {
        svg = svgs[i];
        Style.svgs[svg[0].replace(/\-/, "")] = Style.generateFilter(svg[0], svg[1]);
      }
      return (".hide_thread_button span > span, .hide_reply_button span > span { background-color: " + theme["Links"] + "; } #mascot_hide label { border-bottom: 1px solid " + theme["Reply Border"] + "; } #content .thumb { box-shadow: 0 0 5px " + theme["Reply Border"] + "; } .export-button, .mascotname, #mascot-options { background: " + theme["Dialog Background"] + "; border: 1px solid " + theme["Buttons Border"] + "; } .highlight-you .opContainer.quotesYou, .highlight-own .opContainer.your-post, .opContainer.filter-highlight { box-shadow: inset 5px 0 " + theme["Backlinked Reply Outline"] + "; } .highlight-you .quotesYou > .reply, .highlight-own .your-post > .reply, .filter-highlight > .reply { box-shadow: -5px 0 " + theme["Backlinked Reply Outline"] + "; } hr { border-bottom: 1px solid " + theme["Reply Border"] + "; } hr#unread-line { border-bottom: 1px solid " + theme["Reply Background"] + "; visibility: visible; } .threadContainer { border-color: " + theme["Reply Border"] + " !important; } html { background: " + (backgroundC || '') + "; background-image: " + (theme["Background Image"] || '') + "; background-repeat: " + (theme["Background Repeat"] || '') + "; background-attachment: " + (theme["Background Attachment"] || '') + "; background-position: " + (theme["Background Position"] || '') + "; } .panel, .section-container, #exlinks-options-content, #themecontent { background: " + backgroundC + "; border: 1px solid " + theme["Reply Border"] + "; } .sections-list > a.tab-selected { background: " + backgroundC + "; border-color: " + theme["Reply Border"] + "; } .captcha-filter .captcha-img div { filter: url('data:image/svg+xml," + (Style.svgs.captchafilter.replace(/(\'|\")/g, '%22')) + "#captcha-filter'); } .silhouettize-mascots #mascot img, .silhouette img { filter: url('data:image/svg+xml," + (Style.svgs.mascotfilter.replace(/(\'|\")/g, '%22')) + "#mascot-filter'); } .grayscale-mascots #mascot { filter: url('data:image/svg+xml," + (Style.svgs.grayscale.replace(/(\'|\")/g, '%22')) + "#grayscale'); } #boardTitle { text-shadow: 1px 1px " + backgroundC + ", -1px -1px " + backgroundC + ", 1px -1px " + backgroundC + ", -1px 1px " + backgroundC + "; } .sidebar-glow #boardTitle { text-shadow: 1px 1px 1px " + backgroundC + ", -1px -1px 1px " + backgroundC + ", 1px -1px 1px " + backgroundC + ", -1px 1px 1px " + backgroundC + ", 0 2px 4px rgba(0,0,0,.6), 0 0 10px rgba(0,0,0,.6); } #exlinks-options, #appchanx-settings, #qrtab, input[type=\"submit\"], input[value=\"Report\"], span[style=\"left: 5px; position: absolute;\"] a { background: " + theme["Buttons Background"] + "; border: 1px solid " + theme["Buttons Border"] + "; } .enabled .mascotcontainer { background: " + theme["Buttons Background"] + "; border-color: " + theme["Buttons Border"] + "; } #dump, #qr-filename-container, #appchanx-settings input, .captcha-img, .dump #dump, .qr-preview, .selectrice, button, input, textarea { background: " + theme["Input Background"] + "; border: 1px solid " + theme["Input Border"] + "; } .has-file #qr-extras-container { background: " + theme["Input Background"] + "; } #dump:hover, #qr-filename-container:hover, .selectrice:hover, #selectrice li:hover, #selectrice li:nth-of-type(2n+1):hover, input:hover, textarea:hover { background: " + theme["Hovered Input Background"] + "; border-color: " + theme["Hovered Input Border"] + "; } .has-file #qr-filename-container:hover #qr-extras-container { background: " + theme["Hovered Input Background"] + "; } #dump:active, #dump:focus, #selectrice li:focus, .selectrice:focus, #qr-filename-container:active, #qr-filename-container:focus, input:focus, textarea:focus, textarea.field:focus { background: " + theme["Focused Input Background"] + "; border-color: " + theme["Focused Input Border"] + "; color: " + theme["Inputs"] + "; } .has-file #qr-filename-container:active #qr-extras-container, .has-file #qr-filename-container:focus #qr-extras-container { background: " + theme["Focused Input Background"] + "; } #ft, #mouseover, #post-preview, #qp .post, #threads > .thread, #xupdater, .box-outer, .reply.post { border-width: 1px; border-style: solid; border-color: " + theme["Reply Border"] + "; background: " + theme["Reply Background"] + "; } .exblock.reply, .reply.post.highlight, .reply.post:target { background: " + theme["Highlighted Reply Background"] + "; border: 1px solid " + theme["Highlighted Reply Border"] + "; } #header-bar, .pagelist { background: " + theme["Navigation Background"] + "; border-color: " + theme["Navigation Border"] + "; } #doc, #threads, .board > .thread { background: " + theme["Thread Wrapper Background"] + "; border: 1px solid " + theme["Thread Wrapper Border"] + "; } #boardNavDesktopFoot, #mascot_hide, #menu, #selectrice, #themeConf, #thread-watcher, #thread-watcher:hover, .announcements-slideout #globalMessage, .dialog, .post-form-style-float #qr, .post-form-decorations #qr, .submenu { background: " + theme["Dialog Background"] + "; border: 1px solid " + theme["Dialog Border"] + "; } #qp.dialog { border: none; } .watch-thread-link { background-image: url(\"data:image/svg+xml,<svg viewBox='0 0 26 26' preserveAspectRatio='true' xmlns='http://www.w3.org/2000/svg'><path fill='" + (theme["Post Numbers"].replace('#', '%23')) + "' d='M24.132,7.971c-2.203-2.205-5.916-2.098-8.25,0.235L15.5,8.588l-0.382-0.382c-2.334-2.333-6.047-2.44-8.25-0.235c-2.204,2.203-2.098,5.916,0.235,8.249l8.396,8.396l8.396-8.396C26.229,13.887,26.336,10.174,24.132,7.971z'/></svg>\"); } .deleteform::before, .deleteform, #qr .warning { background: " + theme["Input Background"] + "; border-color: " + theme["Input Border"] + "; } .disabledwarning, .warning { color: " + theme["Warnings"] + "; } #charCount { color: " + (Style.lightTheme ? "rgba(0,0,0,0.7)" : "rgba(255,255,255,0.7)") + "; } .postNum a { color: " + theme["Post Numbers"] + "; } .subject { color: " + theme["Subjects"] + " !important; } .dateTime, .post-ago { color: " + theme["Timestamps"] + " !important; } #fs_status a, #header-bar .shortcut > span, #updater #update-status:not(.new)::after, #showQR, .abbr, .boxbar, .boxcontent, .deleteform::before, .pages strong, .pln, .reply, .reply.highlight, .summary, body, button, span[style=\"left: 5px; position: absolute;\"] a, input, textarea { color: " + theme["Text"] + "; } #exlinks-options-content > table, #appchanx-settings fieldset, #selectrice { border-bottom: 1px solid " + theme["Reply Border"] + "; box-shadow: inset " + theme["Shadow Color"] + " 0 0 5px; } .quote + .spoiler:hover, .quote { color: " + theme["Greentext"] + "; } .forwardlink { border-bottom: 1px dashed " + theme["Backlinks"] + "; } .container::before { color: " + theme["Timestamps"] + "; } .quote-shadows #menu, .quote-shadows #post-preview, .quote-shadows #qp .opContainer, .quote-shadows #qp .replyContainer, .quote-shadows .submenu { box-shadow: 5px 5px 5px " + theme['Shadow Color'] + "; } .rice { background: " + theme["Checkbox Background"] + "; border: 1px solid " + theme["Checkbox Border"] + "; } .selectrice::before { border-left: 1px solid " + theme["Input Border"] + "; } .selectrice::after { border-top: .45em solid " + theme["Inputs"] + "; } .bd { background: " + theme["Buttons Background"] + "; border: 1px solid " + theme["Buttons Border"] + "; } .pages a, #header-bar a { color: " + theme["Navigation Links"] + "; } input[type=checkbox]:checked + .rice::after { border-color: " + theme["Inputs"] + "; } #addReply, #dump, .button, .entry, .replylink, a { color: " + theme["Links"] + "; } .backlink { color: " + theme["Backlinks"] + "; } .backlink-icons .backlink { background-image: url(\"data:image/svg+xml,<svg viewBox='0 0 30 30' preserveAspectRatio='true' xmlns='http://www.w3.org/2000/svg'><path fill='rgb(" + (bLink.rgb()) + ")' d='M12.981,9.073V6.817l-12.106,6.99l12.106,6.99v-2.422c3.285-0.002,9.052,0.28,9.052,2.269c0,2.78-6.023,4.263-6.023,4.263v2.132c0,0,13.53,0.463,13.53-9.823C29.54,9.134,17.952,8.831,12.981,9.073z'/></svg>\"); font-size: 0px !important; padding: 12px 12px 1px 1px; opacity: 0.6; } .qiQuote, .quotelink { color: " + theme["Quotelinks"] + "; } #addReply:hover, #dump:hover, .entry:hover, .replylink:hover, .qiQuote:hover, .quotelink:hover, a .name:hover, a .postertrip:hover, a:hover { color: " + theme["Hovered Links"] + "; } #header-bar a:hover, #boardTitle a:hover { color: " + theme["Hovered Navigation Links"] + "; } #boardTitle { color: " + theme["Board Title"] + "; } .name, .post-author { color: " + theme["Names"] + " !important; } .post-tripcode, .postertrip, .trip { color: " + theme["Tripcodes"] + " !important; } a .postertrip, a .name { color: " + theme["Emails"] + "; } .post.reply.qphl, .post.op.qphl { border-color: " + theme["Backlinked Reply Outline"] + "; background: " + theme["Highlighted Reply Background"] + "; } .quote-shadows .inline .post { box-shadow: 5px 5px 5px " + theme['Shadow Color'] + "; } .placeholder, #qr input::placeholder, #qr textarea::placeholder { color: " + (Style.lightTheme ? "rgba(0,0,0,0.3)" : "rgba(255,255,255,0.2)") + " !important; } #qr input:placeholder, #qr textarea:placeholder, .placeholder { color: " + (Style.lightTheme ? "rgba(0,0,0,0.3)" : "rgba(255,255,255,0.2)") + " !important; } #appchanx-settings fieldset, .boxcontent dd, .selectrice ul { border-color: " + (Style.lightTheme ? "rgba(0,0,0,0.1)" : "rgba(255,255,255,0.1)") + "; } #appchanx-settings li, #selectrice li:not(:first-of-type) { border-top: 1px solid " + (Style.lightTheme ? "rgba(0,0,0,0.05)" : "rgba(255,255,255,0.025)") + "; } .a-icon, #shortcuts .fa { " + (!Style.lightTheme ? "filter: url('data:image/svg+xml," + (Style.svgs.iconsfilter.replace(/(\'|\")/g, '%22')) + "#icons-filter');" : "") + " } .alternate-post-colors #threads > .thread:nth-of-type(2n+1), .alternate-post-colors .replyContainer:nth-of-type(2n+1) .post { background-image: linear-gradient(" + (replybg ? "rgba(" + (replybg.shiftRGB(-4, false)) + ",0.8), rgba(" + (replybg.shiftRGB(-4, false)) + ",0.8)" : Style.lightTheme ? "rgba(0,0,0,0.05), rgba(0,0,0,0.05)" : "rgba(255,255,255,0.02), rgba(255,255,255,0.02)") + "); } .color-reply-headings .boxbar, .color-reply-headings .postInfo { background: " + (replybg ? "rgba(" + (replybg.shiftRGB(-12, false)) + ",0.8)" : "rgba(0,0,0,0.1)") + "; border-bottom: 1px solid " + theme["Reply Border"] + " } .color-file-info .file { background: " + (replybg ? "rgba(" + (replybg.shiftRGB(-8, false)) + ",0.8)" : "rgba(0,0,0,0.1)") + "; border-bottom: 1px solid " + theme["Reply Border"] + " border-top: 1px solid " + theme["Reply Border"] + " } .color-reply.headings.color-file-info { border-top: none; } .op-background .op.post { background: " + theme["Reply Background"] + "; border: 1px solid " + theme["Reply Border"] + "; } .op-background .op.post:target .op-background .op.post.highlight { background: " + theme["Highlighted Reply Background"] + "; border: 1px solid " + theme["Highlighted Reply Border"] + "; } .fourchan-banner-at-sidebar-top.icon-orientation-vertical body::after { background: " + backgroundC + "; } .fourchan-banner-at-sidebar-top.icon-orientation-vertical.fourchan-ss-sidebar body::after, .fourchan-banner-at-sidebar-top.fourchan-ss-sidebar body::before { background: rgba(" + ((background = new Color(theme["Reply Background"])) ? background.shiftRGB(-18) : void 0) + ", 0.8); } .fourchan-ss-sidebar.sidebar-location-right body::before { border-left: 2px solid " + backgroundC + "; box-shadow: inset 1px 0 0 " + theme["Reply Border"] + ", -1px 0 0 " + theme["Reply Border"] + "; } .fourchan-ss-sidebar.sidebar-location-left body::before { border-right: 2px solid " + backgroundC + "; box-shadow: 1px 0 0 " + theme["Reply Border"] + ", inset -1px 0 0 " + theme["Reply Border"] + "; } .sage-highlighting-text.sage-highlight-position-before a.useremail[href*=\"sage\"]:last-of-type::before, .sage-highlighting-text.sage-highlight-position-before a.useremail[href*=\"Sage\"]:last-of-type::before, .sage-highlighting-text.sage-highlight-position-before a.useremail[href*=\"SAGE\"]:last-of-type::before, .sage-highlighting-text.sage-highlight-position-after a.useremail[href*=\"sage\"]:last-of-type::after, .sage-highlighting-text.sage-highlight-position-after a.useremail[href*=\"Sage\"]:last-of-type::after, .sage-highlighting-text.sage-highlight-position-after a.useremail[href*=\"SAGE\"]:last-of-type::after { content: \" (sage) \"; color: " + theme["Sage"] + "; } .quote-shadows #qr { box-shadow: 5px 5px 5px " + theme['Shadow Color'] + "; } /* /f/ */ .postblock { color: " + theme["Text"] + "; font-weight: bold; font-size: 10pt; } tbody > tr:nth-of-type(2n+1){ background: " + theme["Reply Background"] + " !important; } table.flashListing .highlightPost::after { content: '●'; color: " + theme["Text"] + "; position: relative; left: 12px; margin-left: -10px; } .flashListing > tbody { background: url('/image/fade.png') repeat-x scroll center top " + backgroundC + " !important; padding-top: 200px; } " + (theme["Custom CSS"].replace(/\s+/g, ' ').trim())) + ("" + (Style.lightTheme ? " .prettyprint { background-color: #e7e7e7 !important; border: 1px solid #dcdcdc !important; } .com { color: #dd0000 !important; } .str, .atv { color: #7fa61b !important; } .pun { color: #61663a !important; } .tag { color: #117743 !important; } .kwd { color: #5a6F9e !important; } .typ, .atn { color: #9474bd !important; } .lit { color: #368c72 !important; } " : " .prettyprint { background-color: rgba(0,0,0,.1) !important; border: 1px solid rgba(0,0,0,0.5) !important; } .tag { color: #96562c !important; } .pun { color: #5b6f2a !important; } .com { color: #a34443 !important; } .str, .atv { color: #8ba446 !important; } .kwd { color: #987d3e !important; } .typ, .atn { color: #897399 !important; } .lit { color: #558773 !important; } "));
    },
    iconPositions: function() {
      var el, psa, psaIcon, slideNav;
      slideNav = $.el('span', {
        id: 'so-nav',
        innerHTML: '<i class=a-icon></a>'
      });
      $.add(slideNav, $.id('boardNavDesktopFoot'));
      Header.addShortcut(slideNav, true);
      if (Conf['Announcements'] === 'slideout') {
        if ((psa = $.id('globalMessage')) && !psa.hidden) {
          psaIcon = $.el('i', {
            id: 'so-psa',
            innerHTML: '<i class=a-icon></a>'
          });
          $.add(psaIcon, psa);
          Header.addShortcut(psaIcon, true);
        }
      }
      if (!Conf['JSON Navigation'] && g.VIEW === 'thread') {
        el = $('body > div.navLinks > a');
        el.textContent = '';
        el.id = 'returnIcon';
        el.className = 'a-icon';
        return Header.addShortcut(el, true);
      }
    },
    padding: function() {
      var navHeight, pageHeight, _ref;
      navHeight = Header.bar.offsetHeight;
      pageHeight = ((_ref = $('.pagelist', d.body)) != null ? _ref.offsetHeight : void 0) || 15;
      return Style.sheets.padding.textContent = ("body { padding-bottom: 15px; padding-top: 15px; } .fourchan-ss-navigation.fixed.top-header:not(.autohide) body::before { top: " + navHeight + "px; } .fourchan-ss-navigation.fixed.bottom-header:not(.autohide) body::before { bottom: " + navHeight + "px; } .top-header:not(.autohide) body { padding-top: " + (navHeight + 1) + "px; } .bottom-header:not(.autohide) body { padding-bottom: " + (navHeight + 15) + "px; } ") + (pageHeight ? ".fourchan-ss-navigation.index.pagination-sticky-top body::before, .fourchan-ss-navigation.index.pagination-top body::before { top: " + pageHeight + "px; } .fourchan-ss-navigation.index.pagination-sticky-bottom body::before, .fourchan-ss-navigation.index.pagination-bottom body::before { bottom: " + pageHeight + "px; } .index.pagination-sticky-top body, .index.pagination-top body { padding-top: " + (pageHeight + 1) + "px; } .index.pagination-sticky-bottom body, .index.pagination-bottom body { padding-bottom: " + (pageHeight + 15) + "px; }" : '');
    }
  };


  /*
    Color adapted from 4chan Style Script
   */

  ThemeTools = {
    init: function(key) {
      var colorInput, div, fileInput, header, input, item, layout, theme, themeContent, _i, _j, _len, _len1, _ref;
      Conf['editMode'] = "theme";
      theme = Themes[key];
      if (theme) {
        editTheme = JSON.parse(JSON.stringify(theme));
        editTheme["Theme"] = Conf['userThemes'][key] ? key : key += " [custom]";
      } else {
        editTheme = JSON.parse(JSON.stringify(Themes['Yotsuba B']));
        editTheme["Theme"] = "Untitled";
        editTheme["Author"] = "Author";
        editTheme["Author Tripcode"] = "Unknown";
      }
      layout = ["Background Image", "Background Attachment", "Background Position", "Background Repeat", "Background Color", "Thread Wrapper Background", "Thread Wrapper Border", "Dialog Background", "Dialog Border", "Reply Background", "Reply Border", "Highlighted Reply Background", "Highlighted Reply Border", "Backlinked Reply Outline", "Input Background", "Input Border", "Hovered Input Background", "Hovered Input Border", "Focused Input Background", "Focused Input Border", "Checkbox Background", "Checkbox Border", "Buttons Background", "Buttons Border", "Navigation Background", "Navigation Border", "Links", "Hovered Links", "Quotelinks", "Backlinks", "Navigation Links", "Hovered Navigation Links", "Names", "Tripcodes", "Emails", "Subjects", "Text", "Inputs", "Post Numbers", "Greentext", "Sage", "Board Title", "Timestamps", "Warnings", "Shadow Color"];
      ThemeTools.dialog = $.el("div", {
        id: "themeConf",
        className: "reply dialog",
        innerHTML: "<div id=themebar> </div> <hr> <div id=themecontent> </div> <div id=save> <a href='javascript:;'>Save</a> </div> <div id=upload> <a href='javascript:;'>Select Image</a> </div> <div id=close> <a href='javascript:;'>Close</a> </div>"
      });
      header = $.el("div", {
        innerHTML: "<input class='field subject' name='Theme' placeholder='Theme' value='" + key + "'> by\n<input class='field name' name='Author' placeholder='Author' value='" + editTheme['Author'] + "'>\n<input class='field postertrip' name='Author Tripcode' placeholder='Author Tripcode' value='" + editTheme['Author Tripcode'] + "'>"
      });
      _ref = $$("input", header);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        input = _ref[_i];
        $.on(input, 'blur', function() {
          return editTheme[this.name] = this.value;
        });
      }
      $.add($('#themebar', ThemeTools.dialog), header);
      themeContent = $('#themecontent', ThemeTools.dialog);
      for (_j = 0, _len1 = layout.length; _j < _len1; _j++) {
        item = layout[_j];
        if (!editTheme[item]) {
          editTheme[item] = '';
        }
        div = $.el("div", {
          className: "themevar",
          innerHTML: "<div class=optionname><b>" + item + "</b></div><div class=option><input name='" + item + "' placeholder='" + (item === "Background Image" ? "Shift+Click to upload image" : item) + "'>"
        });
        input = $('input', div);
        input.value = editTheme[item];
        switch (item) {
          case "Background Image":
            input.className = 'field';
            fileInput = $.el('input', {
              type: 'file',
              accept: "image/*",
              title: "BG Image",
              hidden: "hidden"
            });
            $.on(input, 'click', function(evt) {
              if (evt.shiftKey) {
                return this.nextSibling.click();
              }
            });
            $.on(fileInput, 'change', function(evt) {
              return ThemeTools.uploadImage(evt, this);
            });
            $.after(input, fileInput);
            break;
          case "Background Attachment":
          case "Background Position":
          case "Background Repeat":
            input.className = 'field';
            break;
          default:
            input.className = "colorfield";
            colorInput = $.el('input', {
              className: 'color',
              value: "#" + ((new Color(input.value)).hex())
            });
            JSColor.bind(colorInput);
            $.after(input, colorInput);
        }
        $.on(input, 'blur', ThemeTools.apply);
        $.add(themeContent, div);
      }
      if (!editTheme["Custom CSS"]) {
        editTheme["Custom CSS"] = "";
      }
      div = $.el("div", {
        className: "themevar",
        innerHTML: "<div class=optionname><b>Custom CSS</b></div><div class=option><textarea name='Custom CSS' placeholder='Custom CSS'>" + editTheme['Custom CSS'] + "</textarea>"
      });
      $.on($('textarea', div), 'blur', function() {
        editTheme["Custom CSS"] = this.value;
        return Style.sheets.theme.textContent = Style.theme(editTheme);
      });
      $.add(themeContent, div);
      $.on($('#save > a', ThemeTools.dialog), 'click', function() {
        return ThemeTools.save(editTheme);
      });
      $.on($('#close > a', ThemeTools.dialog), 'click', ThemeTools.close);
      $.add(d.body, ThemeTools.dialog);
      return Style.sheets.theme.textContent = Style.theme(editTheme);
    },
    apply: function() {
      var depth, i, len, toggle1, toggle2;
      depth = 0;
      toggle1 = false;
      toggle2 = false;
      len = this.value.length;
      if (len < 1000) {
        i = 0;
        while (i < len) {
          switch (this.value[i++]) {
            case '(':
              ++depth;
              break;
            case ')':
              --depth;
              break;
            case '"':
              toggle1 = !toggle1;
              break;
            case "'":
              toggle2 = !toggle2;
          }
        }
      }
      if ((depth !== 0) || toggle1 || toggle2) {
        return alert("Syntax error on " + this.name + ".");
      }
      if (this.className === "colorfield") {
        this.nextSibling.value = (new Color(this.value)).hex();
        this.nextSibling.color.importColor();
      }
      editTheme[this.name] = this.value;
      return Style.setTheme(editTheme);
    },
    uploadImage: function(evt, el) {
      var file, reader;
      file = evt.target.files[0];
      reader = new FileReader();
      reader.onload = function(evt) {
        var val;
        val = "url(\"" + evt.target.result + "\")";
        el.previousSibling.value = val;
        editTheme["Background Image"] = val;
        return Style.sheets.theme.textContent = Style.theme(editTheme);
      };
      return reader.readAsDataURL(file);
    },
    importtheme: function(evt) {
      var file, reader;
      file = evt.target.files[0];
      reader = new FileReader();
      reader.onload = function(e) {
        var bgColor, bgRPA, blinkColor, brderColor, err, imported, inputColor, inputbColor, jlinkColor, linkColor, linkHColor, mainColor, name, nameColor, quoteColor, sageColor, textColor, timeColor, titleColor, tripColor;
        try {
          imported = JSON.parse(e.target.result);
          if (!imported) {
            throw "Cannot parse file";
          }
        } catch (_error) {
          err = _error;
          alert(err);
          return;
        }
        name = imported.name || imported['Theme'];
        if (!name) {
          alert("Theme file is invalid.");
          return;
        }
        delete imported.name || imported['Theme'];
        if (Themes[name] && !Themes[name]["Deleted"]) {
          if (confirm('A theme with this name already exists. Would you like to over-write?')) {
            delete Themes[name];
          } else {
            return;
          }
        }
        if (imported.bgColor) {
          if (!imported.replyOp) {
            imported.replyOp = "0.9";
          }
          bgRPA = imported.bgRPA ? imported.bgRPA.split(' ') : ['no-repeat', 'bottom', 'left', 'fixed'];
          bgColor = new Color(imported.bgColor);
          mainColor = new Color(imported.mainColor);
          brderColor = new Color(imported.brderColor);
          inputColor = new Color(imported.inputColor);
          inputbColor = new Color(imported.inputbColor);
          blinkColor = new Color(imported.blinkColor);
          jlinkColor = new Color(imported.jlinkColor);
          linkColor = new Color(imported.linkColor);
          linkHColor = new Color(imported.linkHColor);
          nameColor = new Color(imported.nameColor);
          quoteColor = new Color(imported.quoteColor);
          sageColor = new Color(imported.sageColor);
          textColor = new Color(imported.textColor);
          titleColor = new Color(imported.titleColor);
          tripColor = new Color(imported.tripColor);
          timeColor = new Color(imported.timeColor || imported.textColor);
          Themes[name] = {
            'Author': "Anonymous",
            'Author Tripcode': "!POMF.9waa",
            'Background Image': "url('" + (imported.bgImg || '') + "')",
            'Background Attachment': "" + (bgRPA[3] || ''),
            'Background Position': "" + (bgRPA[1] || '') + " " + (bgRPA[2] || ''),
            'Background Repeat': "" + (bgRPA[0] || ''),
            'Background Color': "rgb(" + (bgColor.rgb()) + ")",
            'Dialog Background': "rgba(" + (mainColor.rgb()) + ",.98)",
            'Dialog Border': "rgb(" + (brderColor.rgb()) + ")",
            'Thread Wrapper Background': "rgba(0,0,0,0)",
            'Thread Wrapper Border': "rgba(0,0,0,0)",
            'Reply Background': "rgba(" + (mainColor.rgb()) + "," + imported.replyOp + ")",
            'Reply Border': "rgb(" + (brderColor.rgb()) + ")",
            'Highlighted Reply Background': "rgba(" + (mainColor.shiftRGB(4, true)) + "," + imported.replyOp + ")",
            'Highlighted Reply Border': "rgb(" + (linkColor.rgb()) + ")",
            'Backlinked Reply Outline': "rgb(" + (linkColor.rgb()) + ")",
            'Checkbox Background': "rgba(" + (inputColor.rgb()) + "," + imported.replyOp + ")",
            'Checkbox Border': "rgb(" + (inputbColor.rgb()) + ")",
            'Input Background': "rgba(" + (inputColor.rgb()) + "," + imported.replyOp + ")",
            'Input Border': "rgb(" + (inputbColor.rgb()) + ")",
            'Hovered Input Background': "rgba(" + (inputColor.hover()) + "," + imported.replyOp + ")",
            'Hovered Input Border': "rgb(" + (inputbColor.rgb()) + ")",
            'Focused Input Background': "rgba(" + (inputColor.hover()) + "," + imported.replyOp + ")",
            'Focused Input Border': "rgb(" + (inputbColor.rgb()) + ")",
            'Buttons Background': "rgba(" + (inputColor.rgb()) + "," + imported.replyOp + ")",
            'Buttons Border': "rgb(" + (inputbColor.rgb()) + ")",
            'Navigation Background': "rgba(" + (bgColor.rgb()) + ",0.8)",
            'Navigation Border': "rgb(" + (mainColor.rgb()) + ")",
            'Quotelinks': "rgb(" + (linkColor.rgb()) + ")",
            'Links': "rgb(" + (linkColor.rgb()) + ")",
            'Hovered Links': "rgb(" + (linkHColor.rgb()) + ")",
            'Navigation Links': "rgb(" + (textColor.rgb()) + ")",
            'Hovered Navigation Links': "rgb(" + (linkHColor.rgb()) + ")",
            'Subjects': "rgb(" + (titleColor.rgb()) + ")",
            'Names': "rgb(" + (nameColor.rgb()) + ")",
            'Sage': "rgb(" + (sageColor.rgb()) + ")",
            'Tripcodes': "rgb(" + (tripColor.rgb()) + ")",
            'Emails': "rgb(" + (linkColor.rgb()) + ")",
            'Post Numbers': "rgb(" + (linkColor.rgb()) + ")",
            'Text': "rgb(" + (textColor.rgb()) + ")",
            'Backlinks': "rgb(" + (linkColor.rgb()) + ")",
            'Greentext': "rgb(" + (quoteColor.rgb()) + ")",
            'Board Title': "rgb(" + (textColor.rgb()) + ")",
            'Timestamps': "rgb(" + (timeColor.rgb()) + ")",
            'Inputs': "rgb(" + (textColor.rgb()) + ")",
            'Warnings': "rgb(" + (sageColor.rgb()) + ")",
            'Shadow Color': "rbga(0,0,0,0.1)",
            'Custom CSS': ".board {\npadding: 1px 2px;\n}\n.rice {\nbox-shadow:rgba(" + mainColor.shiftRGB(32) + (",.3) 0 1px;\n}\ninput[type=password]:hover,\ninput[type=text]:not([disabled]):hover,\ninput#fs_search:hover,\ninput.field:hover,\ntextarea:hover,\n#options input:not([type=checkbox]):hover {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\ninput[type=password]:focus,\ninput[type=text]:focus,\ninput#fs_search:focus,\ninput.field:focus,\ntextarea:focus,\n#options input:focus {\n  box-shadow:inset rgba(0,0,0,.2) 0 1px 2px;\n}\nbutton,\ninput,\ntextarea,\n.rice {\n  transition:background .2s,box-shadow .2s;\n}\n " + (imported.customCSS || ''))
          };
        } else {
          Themes[name] = imported;
        }
        return $.get("userThemes", {}, function(_arg) {
          var userThemes;
          userThemes = _arg.userThemes;
          userThemes[name] = Themes[name];
          $.set('userThemes', userThemes);
          alert("Theme \"" + name + "\" imported!");
          return Settings.openSection.call({
            open: Settings.themes,
            hyphenatedTitle: 'themes'
          });
        });
      };
      return reader.readAsText(file);
    },
    save: function(theme) {
      var name;
      name = theme["Theme"];
      if (Themes[name] && !Themes[name]["Deleted"]) {
        if (confirm("A theme with this name already exists. Would you like to over-write?")) {
          delete Themes[name];
        } else {
          return;
        }
      }
      Themes[name] = JSON.parse(JSON.stringify(theme));
      delete Themes[name]["Theme"];
      return $.get("userThemes", {}, function(_arg) {
        var userThemes;
        userThemes = _arg.userThemes;
        userThemes[name] = Themes[name];
        $.set('userThemes', userThemes);
        $.set('theme', Conf['theme'] = name);
        return alert("Theme \"" + name + "\" saved.");
      });
    },
    close: function() {
      Conf['editMode'] = false;
      Style.setTheme(Themes[Conf['theme']]);
      $.rm($.id('themeConf'));
      return Settings.open('Themes');
    }
  };

  Color = (function() {
    var colorToHex, minmax, shortToLong;

    minmax = function(base) {
      if (base < 0) {
        return 0;
      } else if (base > 255) {
        return 255;
      } else {
        return base;
      }
    };

    shortToLong = function(hex) {
      var i, longHex;
      longHex = [];
      i = 0;
      while (i < 3) {
        longHex.push(hex.substr(i, 1));
        i = Math.floor(longHex.length / 2);
      }
      return longHex.join("");
    };

    colorToHex = function(color) {
      var digits, hex, len;
      if (color.substr(0, 1) === '#') {
        if (color.length !== 4) {
          return color.slice(1);
        } else {
          return shortToLong(color.substr(1, 3));
        }
      }
      len = color.length;
      if (len === 3 || len === 6) {
        if (/[0-9a-f]{3}/i.test(color)) {
          if (color.length === 6) {
            return color;
          } else {
            return shortToLong(color);
          }
        }
      }
      if (digits = color.match(/(.*?)rgba?\((\d+), ?(\d+), ?(\d+)(.*?)\)/)) {
        hex = ((parseInt(digits[2], 10) << 16) | (parseInt(digits[3], 10) << 8) | (parseInt(digits[4], 10))).toString(16);
        while (hex.length < 6) {
          hex = "0" + hex;
        }
        return hex;
      } else {
        return "000000";
      }
    };

    function Color(value) {
      this.raw = colorToHex(value);
    }

    Color.prototype.hex = function() {
      return "#" + this.raw;
    };

    Color.prototype.rgb = function() {
      return this.privateRGB().join(",");
    };

    Color.prototype.hover = function() {
      return this.shiftRGB(16, true);
    };

    Color.prototype.isLight = function() {
      var rgb;
      rgb = this.privateRGB();
      return (rgb[0] * 0.299 + rgb[1] * 0.587 + rgb[2] * 0.114) > 125;
    };

    Color.prototype.privateRGB = function() {
      var hex;
      hex = parseInt(this.raw, 16);
      return [(hex >> 16) & 0xFF, (hex >> 8) & 0xFF, hex & 0xFF];
    };

    Color.prototype.shiftRGB = function(shift, smart) {
      var color, rgb, _i, _len, _ref;
      if (smart) {
        shift = (this.isLight() ? -1 : 1) * Math.abs(shift);
      }
      rgb = [];
      _ref = this.privateRGB();
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        color = _ref[_i];
        rgb.push(minmax(color + shift));
      }
      return rgb.join(",");
    };

    return Color;

  })();

  PSAHiding = {
    init: function() {
      if (!Conf['Announcement Hiding']) {
        return;
      }
      $.addClass(doc, 'hide-announcement');
      return $.on(d, '4chanXInitFinished', this.setup);
    },
    setup: function() {
      var btn, entry, psa;
      $.off(d, '4chanXInitFinished', PSAHiding.setup);
      if (!(psa = $.id('globalMessage'))) {
        return;
      }
      entry = {
        el: $.el('a', {
          textContent: 'Show announcement',
          className: 'show-announcement',
          href: 'javascript:;'
        }),
        order: 50,
        open: function() {
          return psa.hidden;
        }
      };
      Header.menu.addEntry(entry);
      $.on(entry.el, 'click', PSAHiding.toggle);
      PSAHiding.btn = btn = $.el('span', {
        innerHTML: '[<a href=javascript:;>Dismiss</a>]',
        title: 'Mark announcement as read and hide.',
        className: 'hide-announcement',
        href: 'javascript:;',
        textContent: '[ - ]'
      });
      $.on(btn, 'click', PSAHiding.toggle);
      $.get('hiddenPSA', 0, function(_arg) {
        var hiddenPSA;
        hiddenPSA = _arg.hiddenPSA;
        PSAHiding.sync(hiddenPSA);
        $.add(psa, btn);
        return $.rmClass(doc, 'hide-announcement');
      });
      return $.sync('hiddenPSA', PSAHiding.sync);
    },
    toggle: function(e) {
      var UTC;
      if ($.hasClass(this, 'hide-announcement')) {
        UTC = +$.id('globalMessage').dataset.utc;
        $.set('hiddenPSA', UTC);
      } else {
        $.event('CloseMenu');
        $["delete"]('hiddenPSA');
      }
      return PSAHiding.sync(UTC);
    },
    sync: function(UTC) {
      var hr, psa;
      psa = $.id('globalMessage');
      psa.hidden = PSAHiding.btn.hidden = UTC && UTC >= +psa.dataset.utc ? true : false;
      if ((hr = psa.nextElementSibling) && hr.nodeName === 'HR') {
        return hr.hidden = psa.hidden;
      }
    }
  };

  CatalogLinks = {
    init: function() {
      var el, input;
      if (!Conf['Catalog Links']) {
        return;
      }
      CatalogLinks.el = el = $.el('label', {
        id: 'toggleCatalog',
        href: 'javascript:;',
        innerHTML: "<input type=checkbox " + (Conf['Header catalog links'] ? 'checked' : '') + "> Catalog Links"
      });
      input = $('input', el);
      $.on(input, 'change', this.toggle);
      $.sync('Header catalog links', CatalogLinks.set);
      Header.menu.addEntry({
        el: el,
        order: 95
      });
      return $.on(d, '4chanXInitFinished', function() {
        return CatalogLinks.set(Conf['Header catalog links']);
      });
    },
    toggle: function() {
      $.event('CloseMenu');
      $.set('Header catalog links', this.checked);
      return CatalogLinks.set(this.checked);
    },
    set: function(useCatalog) {
      var a, board, generateURL, path, _i, _len, _ref, _ref1;
      path = useCatalog ? 'catalog' : '';
      generateURL = useCatalog && Conf['External Catalog'] ? CatalogLinks.external : function(board) {
        return a.href = "/" + board + "/" + path;
      };
      _ref = $$("#board-list a:not(.catalog), #boardNavDesktopFoot a");
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        a = _ref[_i];
        if (((_ref1 = a.hostname) !== 'boards.4chan.org' && _ref1 !== 'catalog.neet.tv' && _ref1 !== '4index.gropes.us') || !(board = a.pathname.split('/')[1]) || (board === 'f' || board === 'status' || board === '4chan') || $.hasClass(a, 'external')) {
          continue;
        }
        a.href = generateURL(board);
      }
      return CatalogLinks.el.title = "Turn catalog links " + (useCatalog ? 'off' : 'on') + ".";
    },
    external: function(board) {
      if (board === 'a' || board === 'c' || board === 'g' || board === 'co' || board === 'k' || board === 'm' || board === 'o' || board === 'p' || board === 'v' || board === 'vg' || board === 'w' || board === 'cm' || board === '3' || board === 'adv' || board === 'an' || board === 'cgl' || board === 'ck' || board === 'diy' || board === 'fa' || board === 'fit' || board === 'int' || board === 'jp' || board === 'mlp' || board === 'lit' || board === 'mu' || board === 'n' || board === 'po' || board === 'sci' || board === 'toy' || board === 'trv' || board === 'tv' || board === 'vp' || board === 'x' || board === 'q') {
        return "http://catalog.neet.tv/" + board;
      } else {
        return "/" + board + "/catalog";
      }
    }
  };

  CustomCSS = {
    init: function() {
      if (!Conf['Custom CSS']) {
        return;
      }
      return this.addStyle();
    },
    addStyle: function() {
      return this.style = $.addStyle(Conf['usercss'], 'CustomCSS');
    },
    rmStyle: function() {
      if (this.style) {
        $.rm(this.style);
        return delete this.style;
      }
    },
    update: function() {
      if (!this.style) {
        return this.addStyle();
      }
      return this.style.textContent = Conf['usercss'];
    }
  };

  Dice = {
    init: function() {
      if (g.BOARD.ID !== 'tg' || !Conf['Show Dice Roll']) {
        return;
      }
      return Post.callbacks.push({
        name: 'Show Dice Roll',
        cb: this.node
      });
    },
    node: function() {
      var dicestats, roll, _ref;
      if (this.isClone || !(dicestats = (_ref = this.info.email) != null ? _ref.match(/dice[+\s](\d+)d(\d+)/) : void 0)) {
        return;
      }
      roll = $('b', this.nodes.comment).firstChild;
      return roll.data = "Rolled " + dicestats[1] + "d" + dicestats[2] + ": " + (roll.data.slice(7));
    }
  };

  ExpandComment = {
    init: function() {
      if (g.VIEW !== 'index' || !Conf['Comment Expansion'] || Conf['JSON Navigation']) {
        return;
      }
      if (g.BOARD.ID === 'g') {
        this.callbacks.push(Fourchan.code);
      }
      if (g.BOARD.ID === 'sci') {
        this.callbacks.push(Fourchan.math);
      }
      return Post.callbacks.push({
        name: 'Comment Expansion',
        cb: this.node
      });
    },
    node: function() {
      var a;
      if (a = $('.abbr > a:not([onclick])', this.nodes.comment)) {
        return $.on(a, 'click', ExpandComment.cb);
      }
    },
    callbacks: [],
    cb: function(e) {
      e.preventDefault();
      return ExpandComment.expand(Get.postFromNode(this));
    },
    expand: function(post) {
      var a;
      if (post.nodes.longComment && !post.nodes.longComment.parentNode) {
        $.replace(post.nodes.shortComment, post.nodes.longComment);
        post.nodes.comment = post.nodes.longComment;
        return;
      }
      if (!(a = $('.abbr > a', post.nodes.comment))) {
        return;
      }
      a.textContent = "Post No." + post + " Loading...";
      return $.cache("//a.4cdn.org" + (a.pathname.split('/').splice(0, 4).join('/')) + ".json", function() {
        return ExpandComment.parse(this, a, post);
      });
    },
    contract: function(post) {
      var a;
      if (!post.nodes.shortComment) {
        return;
      }
      a = $('.abbr > a', post.nodes.shortComment);
      a.textContent = 'here';
      $.replace(post.nodes.longComment, post.nodes.shortComment);
      return post.nodes.comment = post.nodes.shortComment;
    },
    parse: function(req, a, post) {
      var callback, clone, comment, href, postObj, posts, quote, spoilerRange, status, _i, _j, _k, _len, _len1, _len2, _ref, _ref1;
      status = req.status;
      if (status !== 200 && status !== 304) {
        a.textContent = "Error " + req.statusText + " (" + status + ")";
        return;
      }
      posts = req.response.posts;
      if (spoilerRange = posts[0].custom_spoiler) {
        Build.spoilerRange[g.BOARD] = spoilerRange;
      }
      for (_i = 0, _len = posts.length; _i < _len; _i++) {
        postObj = posts[_i];
        if (postObj.no === post.ID) {
          break;
        }
      }
      if (postObj.no !== post.ID) {
        a.textContent = "Post No." + post + " not found.";
        return;
      }
      comment = post.nodes.comment;
      clone = comment.cloneNode(false);
      clone.innerHTML = postObj.com;
      _ref = $$('.quotelink', clone);
      for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {
        quote = _ref[_j];
        href = quote.getAttribute('href');
        if (href[0] === '/') {
          continue;
        }
        if (href[0] === '#') {
          quote.href = "" + (a.pathname.split('/').splice(0, 4).join('/')) + href;
        } else {
          quote.href = "" + (a.pathname.split('/').splice(0, 3).join('/')) + "/" + href;
        }
      }
      post.nodes.shortComment = comment;
      $.replace(comment, clone);
      post.nodes.comment = post.nodes.longComment = clone;
      post.parseComment();
      post.parseQuotes();
      _ref1 = ExpandComment.callbacks;
      for (_k = 0, _len2 = _ref1.length; _k < _len2; _k++) {
        callback = _ref1[_k];
        callback.call(post);
      }
    }
  };

  ExpandThread = {
    statuses: {},
    init: function() {
      if (g.VIEW === 'thread' || !Conf['Thread Expansion']) {
        return;
      }
      return $.on(d, (Conf['JSON Navigation'] ? 'IndexRefresh' : '4chanXInitFinished'), this.onIndexRefresh);
    },
    setButton: function(thread) {
      var a, summary;
      if (!(summary = $.x('following-sibling::*[contains(@class,"summary")][1]', thread.OP.nodes.root))) {
        return;
      }
      a = $.el('a', {
        textContent: ExpandThread.text.apply(ExpandThread, ['+'].concat(__slice.call(summary.textContent.match(/\d+/g)))),
        href: "res/" + thread.ID,
        className: 'summary'
      });
      $.on(a, 'click', ExpandThread.cbToggle);
      return $.replace(summary, a);
    },
    disconnect: function() {
      this.refresh();
      return $.off(d, 'IndexRefresh', this.onIndexRefresh);
    },
    refresh: function(disconnect) {
      var status, threadID, _ref, _ref1;
      if (g.VIEW === 'thread' || !Conf['Thread Expansion']) {
        return;
      }
      _ref = ExpandThread.statuses;
      for (threadID in _ref) {
        status = _ref[threadID];
        if ((_ref1 = status.req) != null) {
          _ref1.abort();
        }
        delete ExpandThread.statuses[threadID];
      }
    },
    onIndexRefresh: function() {
      ExpandThread.refresh();
      return g.BOARD.threads.forEach(function(thread) {
        return ExpandThread.setButton(thread);
      });
    },
    text: function(status, posts, files) {
      return ("" + status + " " + posts + " post" + (posts > 1 ? 's' : '')) + (+files ? " and " + files + " image repl" + (files > 1 ? 'ies' : 'y') : "") + (" " + (status === '-' ? 'shown' : 'omitted') + ".");
    },
    cbToggle: function(e) {
      if (e.shiftKey || e.altKey || e.ctrlKey || e.metaKey || e.button !== 0) {
        return;
      }
      e.preventDefault();
      return ExpandThread.toggle(Get.threadFromNode(this));
    },
    toggle: function(thread) {
      var a, threadRoot;
      threadRoot = thread.OP.nodes.root.parentNode;
      if (!(a = $('.summary', threadRoot))) {
        return;
      }
      if (thread.ID in ExpandThread.statuses) {
        return ExpandThread.contract(thread, a, threadRoot);
      } else {
        return ExpandThread.expand(thread, a, threadRoot);
      }
    },
    expand: function(thread, a, threadRoot) {
      var status;
      ExpandThread.statuses[thread] = status = {};
      a.textContent = ExpandThread.text.apply(ExpandThread, ['...'].concat(__slice.call(a.textContent.match(/\d+/g))));
      return status.req = $.cache("//a.4cdn.org/" + thread.board + "/thread/" + thread + ".json", function() {
        delete status.req;
        return ExpandThread.parse(this, thread, a);
      });
    },
    contract: function(thread, a, threadRoot) {
      var filesCount, inlined, num, postsCount, replies, reply, status, _i, _len;
      status = ExpandThread.statuses[thread];
      delete ExpandThread.statuses[thread];
      if (status.req) {
        status.req.abort();
        if (a) {
          a.textContent = ExpandThread.text.apply(ExpandThread, ['+'].concat(__slice.call(a.textContent.match(/\d+/g))));
        }
        return;
      }
      replies = $$('.thread > .replyContainer', threadRoot);
      if (Conf['Show Replies']) {
        num = (function() {
          if (thread.isSticky) {
            return 1;
          } else {
            switch (g.BOARD.ID) {
              case 'b':
              case 'vg':
                return 3;
              case 't':
                return 1;
              default:
                return 5;
            }
          }
        })();
        replies = replies.slice(0, -num);
      }
      postsCount = 0;
      filesCount = 0;
      for (_i = 0, _len = replies.length; _i < _len; _i++) {
        reply = replies[_i];
        if (Conf['Quote Inlining']) {
          while (inlined = $('.inlined', reply)) {
            inlined.click();
          }
        }
        postsCount++;
        if ('file' in Get.postFromRoot(reply)) {
          filesCount++;
        }
        $.rm(reply);
      }
      return a.textContent = ExpandThread.text('+', postsCount, filesCount);
    },
    parse: function(req, thread, a) {
      var filesCount, post, postData, posts, postsCount, postsRoot, root, _i, _len, _ref, _ref1;
      if ((_ref = req.status) !== 200 && _ref !== 304) {
        a.textContent = "Error " + req.statusText + " (" + req.status + ")";
        return;
      }
      Build.spoilerRange[thread.board] = req.response.posts[0].custom_spoiler;
      posts = [];
      postsRoot = [];
      filesCount = 0;
      _ref1 = req.response.posts;
      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
        postData = _ref1[_i];
        if (postData.no === thread.ID) {
          continue;
        }
        if (post = thread.posts[postData.no]) {
          if ('file' in post) {
            filesCount++;
          }
          postsRoot.push(post.nodes.root);
          continue;
        }
        root = Build.postFromObject(postData, thread.board.ID);
        post = new Post(root, thread, thread.board);
        if ('file' in post) {
          filesCount++;
        }
        posts.push(post);
        postsRoot.push(root);
      }
      Post.callbacks.execute(posts);
      $.after(a, postsRoot);
      postsCount = postsRoot.length;
      return a.textContent = ExpandThread.text('-', postsRoot.length, filesCount);
    }
  };

  FileInfo = {
    init: function() {
      if (!Conf['File Info Formatting']) {
        return;
      }
      return Post.callbacks.push({
        name: 'File Info Formatting',
        cb: this.node
      });
    },
    node: function() {
      if (!this.file || this.isClone) {
        return;
      }
      return this.file.text.innerHTML = "<span class=file-info>" + (FileInfo.format(Conf['fileInfo'], this)) + "</span>";
    },
    format: function(formatString, post) {
      return formatString.replace(/%([A-Za-z])/g, function(s, c) {
        if (c in FileInfo.formatters) {
          return FileInfo.formatters[c].call(post);
        } else {
          return s;
        }
      });
    },
    convertUnit: function(size, unit) {
      var i;
      if (unit === 'B') {
        return "" + (size.toFixed()) + " Bytes";
      }
      i = 1 + ['KB', 'MB'].indexOf(unit);
      while (i--) {
        size /= 1024;
      }
      size = unit === 'MB' ? Math.round(size * 100) / 100 : size.toFixed();
      return "" + size + " " + unit;
    },
    escape: function(name) {
      return name.replace(/<|>/g, function(c) {
        return c === '<' && '&lt;' || '&gt;';
      });
    },
    formatters: {
      t: function() {
        return this.file.URL.match(/\d+\..+$/)[0];
      },
      T: function() {
        return "<a href=" + this.file.URL + " target=_blank>" + (FileInfo.formatters.t.call(this)) + "</a>";
      },
      l: function() {
        return "<a href=" + this.file.URL + " target=_blank>" + (FileInfo.formatters.n.call(this)) + "</a>";
      },
      L: function() {
        return "<a href=" + this.file.URL + " target=_blank>" + (FileInfo.formatters.N.call(this)) + "</a>";
      },
      n: function() {
        var fullname, shortname;
        fullname = this.file.name;
        shortname = Build.shortFilename(this.file.name, this.isReply);
        if (fullname === shortname) {
          return FileInfo.escape(fullname);
        } else {
          return "<span class=fntrunc>" + (FileInfo.escape(shortname)) + "</span><span class=fnfull>" + (FileInfo.escape(fullname)) + "</span>";
        }
      },
      N: function() {
        return FileInfo.escape(this.file.name);
      },
      p: function() {
        if (this.file.isSpoiler) {
          return 'Spoiler, ';
        } else {
          return '';
        }
      },
      s: function() {
        return this.file.size;
      },
      B: function() {
        return FileInfo.convertUnit(this.file.sizeInBytes, 'B');
      },
      K: function() {
        return FileInfo.convertUnit(this.file.sizeInBytes, 'KB');
      },
      M: function() {
        return FileInfo.convertUnit(this.file.sizeInBytes, 'MB');
      },
      r: function() {
        return this.file.dimensions || 'PDF';
      }
    }
  };

  Flash = {
    init: function() {
      if (g.BOARD.ID === 'f') {
        return $.ready(Flash.initReady);
      }
    },
    initReady: function() {
      var nav, sauceLink, swfName;
      $.globalEval('SWFEmbed.init()');
      if (g.VIEW !== 'thread') {
        return;
      }
      swfName = $('.fileText > a');
      nav = $('.navLinks.desktop');
      swfName = swfName.href.replace(/^(.*?)\/f\//g, "");
      sauceLink = $.el('a', {
        textContent: 'Check Sauce on SWFCHAN',
        href: "http://eye.swfchan.com/search/?q=" + swfName
      });
      $.addClass(nav, 'swfSauce');
      $.rmClass(nav, 'navLinks');
      $.rmAll(nav);
      return $.add(nav, [$.tn('['), sauceLink, $.tn(']')]);
    }
  };

  Fourchan = {
    init: function() {
      var board;
      board = g.BOARD.ID;
      if (board === 'g') {
        $.globalEval("window.addEventListener('prettyprint', function(e) {\n  window.dispatchEvent(new CustomEvent('prettyprint:cb', {\n    detail: prettyPrintOne(e.detail)\n  }));\n}, false);");
        Post.callbacks.push({
          name: 'Parse /g/ code',
          cb: this.code
        });
      }
      if (board === 'sci') {
        $.globalEval("window.addEventListener('jsmath', function(e) {\n  if (jsMath.loaded) {\n    // process one post\n    jsMath.ProcessBeforeShowing(document.getElementById(e.detail));\n  } else {\n    // load jsMath and process whole document\n    jsMath.Autoload.Script.Push('ProcessBeforeShowing', [null]);\n    jsMath.Autoload.LoadJsMath();\n  }\n}, false);");
        return Post.callbacks.push({
          name: 'Parse /sci/ math',
          cb: this.math
        });
      }
    },
    code: function() {
      var apply, pre, _i, _len, _ref;
      if (this.isClone) {
        return;
      }
      apply = function(e) {
        return pre.innerHTML = e.detail;
      };
      $.on(window, 'prettyprint:cb', apply);
      _ref = $$('.prettyprint:not(.prettyprinted)', this.nodes.comment);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        pre = _ref[_i];
        $.event('prettyprint', pre.innerHTML, window);
      }
      $.off(window, 'prettyprint:cb', apply);
    },
    math: function() {
      if (this.isClone || !$('.math', this.nodes.comment)) {
        return;
      }
      return $.event('jsmath', this.nodes.post.id, window);
    }
  };

  IDColor = {
    init: function() {
      if (!Conf['Color User IDs']) {
        return;
      }
      this.ids = {
        Heaven: [0, 0, 0, '#fff']
      };
      return Post.callbacks.push({
        name: 'Color User IDs',
        cb: this.node
      });
    },
    node: function() {
      var rgb, span, uid;
      if (this.isClone || !((uid = this.info.uniqueID) && (span = $('span.hand', this.nodes.uniqueID)))) {
        return;
      }
      rgb = IDColor.ids[uid] || IDColor.compute(uid);
      span.style.color = rgb[3];
      span.style.backgroundColor = "rgb(" + rgb[0] + "," + rgb[1] + "," + rgb[2] + ")";
      $.addClass(span, 'painted');
      return span.title = 'Highlight posts by this ID';
    },
    compute: function(uid) {
      var hash, i, rgb;
      i = 1;
      hash = uid.charCodeAt(0);
      while (i < 8) {
        hash = (hash << 5) - hash + uid.charCodeAt(i++);
      }
      rgb = [(hash >> 24) & 0xFF, (hash >> 16) & 0xFF, (hash >> 8) & 0xFF];
      rgb.push((rgb[0] * 0.299 + rgb[1] * 0.587 + rgb[2] * 0.114) > 125 ? '#000' : '#fff');
      return this.ids[uid] = rgb;
    }
  };

  Keybinds = {
    init: function() {
      var hotkey, init;
      if (!Conf['Keybinds']) {
        return;
      }
      for (hotkey in Conf.hotkeys) {
        $.sync(hotkey, Keybinds.sync);
      }
      init = function() {
        var node, _i, _len, _ref;
        $.off(d, '4chanXInitFinished', init);
        $.on(d, 'keydown', Keybinds.keydown);
        _ref = $$('[accesskey]');
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          node = _ref[_i];
          node.removeAttribute('accesskey');
        }
      };
      return $.on(d, '4chanXInitFinished', init);
    },
    sync: function(key, hotkey) {
      return Conf[hotkey] = key;
    },
    keydown: function(e) {
      var form, key, notification, notifications, op, searchInput, target, thread, threadRoot, _i, _len, _ref;
      if (!(key = Keybinds.keyCode(e))) {
        return;
      }
      target = e.target;
      if (target.nodeName === 'EMBED') {
        return;
      }
      if ((_ref = target.nodeName) === 'INPUT' || _ref === 'TEXTAREA') {
        if (!/(Esc|Alt|Ctrl|Meta|Shift\+\w{2,})/.test(key)) {
          return;
        }
      }
      if (g.VIEW !== 'catalog') {
        threadRoot = Nav.getThread();
        if (op = $('.op', threadRoot)) {
          thread = Get.postFromNode(op).thread;
        }
      }
      switch (key) {
        case Conf['Toggle board list']:
          if (Conf['Custom Board Navigation']) {
            Header.toggleBoardList();
          }
          break;
        case Conf['Toggle header']:
          Header.toggleBarVisibility();
          break;
        case Conf['Open empty QR']:
          Keybinds.qr();
          break;
        case Conf['Open QR']:
          if (g.VIEW === 'catalog') {
            return;
          }
          Keybinds.qr(threadRoot);
          break;
        case Conf['Open settings']:
          Settings.open();
          break;
        case Conf['Close']:
          if ($.id('fourchanx-settings')) {
            Settings.close();
          } else if ((notifications = $$('.notification')).length) {
            for (_i = 0, _len = notifications.length; _i < _len; _i++) {
              notification = notifications[_i];
              $('.close', notification).click();
            }
          } else if (QR.nodes) {
            if (Conf['Persistent QR']) {
              QR.hide();
            } else {
              QR.close();
            }
          }
          break;
        case Conf['Spoiler tags']:
          if (target.nodeName !== 'TEXTAREA') {
            return;
          }
          Keybinds.tags('spoiler', target);
          break;
        case Conf['Code tags']:
          if (target.nodeName !== 'TEXTAREA') {
            return;
          }
          Keybinds.tags('code', target);
          break;
        case Conf['Eqn tags']:
          if (target.nodeName !== 'TEXTAREA') {
            return;
          }
          Keybinds.tags('eqn', target);
          break;
        case Conf['Math tags']:
          if (target.nodeName !== 'TEXTAREA') {
            return;
          }
          Keybinds.tags('math', target);
          break;
        case Conf['Toggle sage']:
          if (QR.nodes) {
            Keybinds.sage();
          }
          break;
        case Conf['Submit QR']:
          if (QR.nodes && !QR.status()) {
            QR.submit();
          }
          break;
        case Conf['Post Without Name']:
          if (QR.nodes && !QR.status()) {
            Keybinds.name();
            QR.submit();
          }
          break;
        case Conf['Update']:
          switch (g.VIEW) {
            case 'thread':
              ThreadUpdater.update();
              break;
            case 'index':
              if (Conf['JSON Navigation']) {
                Index.update();
              }
          }
          break;
        case Conf['Watch']:
          if (g.VIEW === 'catalog') {
            return;
          }
          ThreadWatcher.toggle(thread);
          break;
        case Conf['Expand image']:
          if (g.VIEW === 'catalog') {
            return;
          }
          Keybinds.img(threadRoot);
          break;
        case Conf['Expand images']:
          if (g.VIEW === 'catalog') {
            return;
          }
          Keybinds.img(threadRoot, true);
          break;
        case Conf['Open Gallery']:
          if (g.VIEW === 'catalog') {
            return;
          }
          Gallery.cb.toggle();
          break;
        case Conf['fappeTyme']:
          if (g.VIEW === 'catalog') {
            return;
          }
          FappeTyme.cb.toggle.call({
            name: 'fappe'
          });
          break;
        case Conf['werkTyme']:
          if (g.VIEW === 'catalog') {
            return;
          }
          FappeTyme.cb.toggle.call({
            name: 'werk'
          });
          break;
        case Conf['Front page']:
          if (Conf['JSON Navigation'] && g.VIEW === 'index') {
            Index.userPageNav(1);
          } else {
            window.location = "/" + g.BOARD + "/";
          }
          break;
        case Conf['Open front page']:
          $.open("/" + g.BOARD + "/");
          break;
        case Conf['Next page']:
          if (g.VIEW !== 'index') {
            return;
          }
          if (Conf['JSON Navigation']) {
            if (Conf['Index Mode'] !== 'all pages') {
              $('.next button', Index.pagelist).click();
            }
          } else {
            if (form = $('.next form')) {
              window.location = form.action;
            }
          }
          break;
        case Conf['Previous page']:
          if (g.VIEW !== 'index') {
            return;
          }
          if (Conf['JSON Navigation']) {
            if (Conf['Index Mode'] !== 'all pages') {
              $('.prev button', Index.pagelist).click();
            }
          } else {
            if (form = $('.prev form')) {
              window.location = form.action;
            }
          }
          break;
        case Conf['Search form']:
          if (g.VIEW !== 'index') {
            return;
          }
          searchInput = Conf['JSON Navigation'] ? Index.searchInput : $.id('search-box');
          Header.scrollToIfNeeded(searchInput);
          searchInput.click();
          searchInput.focus();
          break;
        case Conf['Paged mode']:
          if (!(g.VIEW === 'index' && Conf['Index Mode'] !== 'paged')) {
            return;
          }
          Index.setIndexMode('paged');
          break;
        case Conf['All pages mode']:
          if (!(g.VIEW === 'index' && Conf['Index Mode'] !== 'all pages')) {
            return;
          }
          Index.setIndexMode('all pages');
          break;
        case Conf['Catalog mode']:
          if (!(g.VIEW === 'index' && Conf['Index Mode'] !== 'catalog')) {
            return;
          }
          Index.setIndexMode('catalog');
          break;
        case Conf['Cycle sort type']:
          if (g.VIEW !== 'index') {
            return;
          }
          Index.cycleSortType();
          break;
        case Conf['Open catalog']:
          if (Conf['External Catalog']) {
            window.location = CatalogLinks.external(g.BOARD.ID);
          } else {
            if (!Conf['JSON Navigation']) {
              return window.location = "/" + g.BOARD + "/catalog";
            }
            if (!(g.VIEW === 'index' && Conf['Index Mode'] !== 'catalog')) {
              return;
            }
            Index.setIndexMode('catalog');
          }
          break;
        case Conf['Next thread']:
          if (g.VIEW !== 'index' || Conf['Index Mode'] === 'catalog') {
            return;
          }
          Nav.scroll(+1);
          break;
        case Conf['Previous thread']:
          if (g.VIEW !== 'index' || Conf['Index Mode'] === 'catalog') {
            return;
          }
          Nav.scroll(-1);
          break;
        case Conf['Expand thread']:
          if (g.VIEW !== 'index' || Conf['Index Mode'] === 'catalog') {
            return;
          }
          ExpandThread.toggle(thread);
          break;
        case Conf['Open thread']:
          if (g.VIEW !== 'index' || Conf['Index Mode'] === 'catalog') {
            return;
          }
          Keybinds.open(thread);
          break;
        case Conf['Open thread tab']:
          if (g.VIEW !== 'index' || Conf['Index Mode'] === 'catalog') {
            return;
          }
          Keybinds.open(thread, true);
          break;
        case Conf['Next reply']:
          if (g.VIEW === 'catalog') {
            return;
          }
          Keybinds.hl(+1, threadRoot);
          break;
        case Conf['Previous reply']:
          if (g.VIEW === 'catalog') {
            return;
          }
          Keybinds.hl(-1, threadRoot);
          break;
        case Conf['Deselect reply']:
          if (g.VIEW === 'catalog') {
            return;
          }
          Keybinds.hl(0, threadRoot);
          break;
        case Conf['Hide']:
          PostHiding.toggle(thread.OP);
          break;
        case Conf['Previous Post Quoting You']:
          QuoteMarkers.cb.seek('preceding');
          break;
        case Conf['Next Post Quoting You']:
          QuoteMarkers.cb.seek('following');
          break;
        default:
          return;
      }
      e.preventDefault();
      return e.stopPropagation();
    },
    keyCode: function(e) {
      var kc, key;
      key = (function() {
        switch (kc = e.keyCode) {
          case 8:
            return '';
          case 13:
            return 'Enter';
          case 27:
            return 'Esc';
          case 37:
            return 'Left';
          case 38:
            return 'Up';
          case 39:
            return 'Right';
          case 40:
            return 'Down';
          default:
            if ((48 <= kc && kc <= 57) || (65 <= kc && kc <= 90)) {
              return String.fromCharCode(kc).toLowerCase();
            } else {
              return null;
            }
        }
      })();
      if (key) {
        if (e.altKey) {
          key = 'Alt+' + key;
        }
        if (e.ctrlKey) {
          key = 'Ctrl+' + key;
        }
        if (e.metaKey) {
          key = 'Meta+' + key;
        }
        if (e.shiftKey) {
          key = 'Shift+' + key;
        }
      }
      return key;
    },
    qr: function(thread) {
      if (!QR.postingIsEnabled) {
        return;
      }
      QR.open();
      if (thread != null) {
        QR.quote.call($('input', $('.post.highlight', thread) || thread));
      }
      QR.nodes.com.focus();
      if (Conf['QR Shortcut']) {
        return $.rmClass($('.qr-shortcut'), 'disabled');
      }
    },
    tags: function(tag, ta) {
      var range, selEnd, selStart, value;
      value = ta.value;
      selStart = ta.selectionStart;
      selEnd = ta.selectionEnd;
      ta.value = value.slice(0, selStart) + ("[" + tag + "]") + value.slice(selStart, selEnd) + ("[/" + tag + "]") + value.slice(selEnd);
      range = ("[" + tag + "]").length + selEnd;
      ta.setSelectionRange(range, range);
      return $.event('input', null, ta);
    },
    name: function() {
      return QR.nodes.name.value = '';
    },
    sage: function() {
      var isSage;
      isSage = /sage/i.test(QR.nodes.email.value);
      return QR.nodes.email.value = isSage ? "" : "sage";
    },
    img: function(thread, all) {
      var post;
      if (all) {
        return ImageExpand.cb.toggleAll();
      } else {
        post = Get.postFromNode($('.post.highlight', thread) || $('.op', thread));
        return ImageExpand.toggle(post);
      }
    },
    open: function(thread, tab) {
      var url;
      if (g.VIEW !== 'index') {
        return;
      }
      url = Build.path(thread.board.ID, thread.ID);
      if (tab) {
        return $.open(url);
      } else {
        return location.href = url;
      }
    },
    hl: function(delta, thread) {
      var axis, height, next, postEl, replies, reply, root, _i, _len;
      postEl = $('.reply.highlight', thread);
      if (!delta) {
        if (postEl) {
          $.rmClass(postEl, 'highlight');
        }
        return;
      }
      if (postEl) {
        height = postEl.getBoundingClientRect().height;
        if (Header.getTopOf(postEl) >= -height && Header.getBottomOf(postEl) >= -height) {
          root = postEl.parentNode;
          axis = delta === +1 ? 'following' : 'preceding';
          if (!(next = $.x("" + axis + "-sibling::div[contains(@class,'replyContainer') and not(@hidden) and not(child::div[@class='stub'])][1]/child::div[contains(@class,'reply')]", root))) {
            return;
          }
          Header.scrollToIfNeeded(next, delta === +1);
          this.focus(next);
          $.rmClass(postEl, 'highlight');
          return;
        }
        $.rmClass(postEl, 'highlight');
      }
      replies = $$('.reply', thread);
      if (delta === -1) {
        replies.reverse();
      }
      for (_i = 0, _len = replies.length; _i < _len; _i++) {
        reply = replies[_i];
        if (delta === +1 && Header.getTopOf(reply) > 0 || delta === -1 && Header.getBottomOf(reply) > 0) {
          this.focus(reply);
          return;
        }
      }
    },
    focus: function(post) {
      return $.addClass(post, 'highlight');
    }
  };

  Nav = {
    init: function() {
      var next, prev;
      switch (g.VIEW) {
        case 'index':
          if (!Conf['Index Navigation']) {
            return;
          }
          break;
        case 'thread':
          if (!Conf['Reply Navigation']) {
            return;
          }
      }
      prev = $.el('a', {
        href: 'javascript:;',
        id: 'navPrev'
      });
      next = $.el('a', {
        href: 'javascript:;',
        id: 'navNext'
      });
      Header.addShortcut(prev, true);
      Header.addShortcut(next, true);
      $.on(prev, 'click', this.prev);
      return $.on(next, 'click', this.next);
    },
    prev: function() {
      if (g.VIEW === 'thread') {
        return window.scrollTo(0, 0);
      } else {
        return Nav.scroll(-1);
      }
    },
    next: function() {
      if (g.VIEW === 'thread') {
        return window.scrollTo(0, d.body.scrollHeight);
      } else {
        return Nav.scroll(+1);
      }
    },
    getThread: function() {
      var threadRoot, _i, _len, _ref;
      _ref = $$('.thread');
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        threadRoot = _ref[_i];
        if (Header.getTopOf(threadRoot) >= -threadRoot.getBoundingClientRect().height) {
          return threadRoot;
        }
      }
      return $('.board');
    },
    scroll: function(delta) {
      var axis, next, thread, top;
      thread = Nav.getThread();
      axis = delta === +1 ? 'following' : 'preceding';
      if (next = $.x("" + axis + "-sibling::div[contains(@class,'thread') and not(@hidden)][1]", thread)) {
        top = Header.getTopOf(thread);
        if (delta === +1 && top < 5 || delta === -1 && top > -5) {
          thread = next;
        }
      }
      return Header.scrollTo(thread);
    }
  };

  RelativeDates = {
    INTERVAL: $.MINUTE / 2,
    init: function() {
      switch (g.VIEW) {
        case 'index':
          this.flush();
          $.on(d, 'visibilitychange', this.flush);
          if (!Conf['Relative Post Dates']) {
            return;
          }
          break;
        case 'thread':
          if (!Conf['Relative Post Dates']) {
            return;
          }
          this.flush();
          $.on(d, 'visibilitychange ThreadUpdate', this.flush);
          break;
        default:
          return;
      }
      return Post.callbacks.push({
        name: 'Relative Post Dates',
        cb: this.node
      });
    },
    node: function() {
      var dateEl;
      if (this.isClone) {
        return;
      }
      dateEl = this.nodes.date;
      dateEl.title = dateEl.textContent;
      return RelativeDates.update(this);
    },
    relative: function(diff, now, date) {
      var days, months, number, rounded, unit, years;
      unit = (number = diff / $.DAY) >= 1 ? (years = now.getYear() - date.getYear(), months = now.getMonth() - date.getMonth(), days = now.getDate() - date.getDate(), years > 1 ? (number = years - (months < 0 || months === 0 && days < 0), 'year') : years === 1 && (months > 0 || months === 0 && days >= 0) ? (number = years, 'year') : (months = (months + 12) % 12) > 1 ? (number = months - (days < 0), 'month') : months === 1 && days >= 0 ? (number = months, 'month') : 'day') : (number = diff / $.HOUR) >= 1 ? 'hour' : (number = diff / $.MINUTE) >= 1 ? 'minute' : (number = Math.max(0, diff) / $.SECOND, 'second');
      rounded = Math.round(number);
      if (rounded !== 1) {
        unit += 's';
      }
      return "" + rounded + " " + unit + " ago";
    },
    stale: [],
    flush: function() {
      var data, now, _i, _len, _ref;
      if (d.hidden) {
        return;
      }
      now = new Date();
      _ref = RelativeDates.stale;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        data = _ref[_i];
        RelativeDates.update(data, now);
      }
      RelativeDates.stale = [];
      clearTimeout(RelativeDates.timeout);
      return RelativeDates.timeout = setTimeout(RelativeDates.flush, RelativeDates.INTERVAL);
    },
    update: function(data, now) {
      var date, diff, isPost, relative, singlePost, _i, _len, _ref;
      isPost = data instanceof Post;
      date = isPost ? data.info.date : new Date(+data.dataset.utc);
      now || (now = new Date());
      diff = now - date;
      relative = RelativeDates.relative(diff, now, date);
      if (isPost) {
        _ref = [data].concat(data.clones);
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          singlePost = _ref[_i];
          singlePost.nodes.date.firstChild.textContent = relative;
        }
      } else {
        data.firstChild.textContent = relative;
      }
      return RelativeDates.setOwnTimeout(diff, data);
    },
    setOwnTimeout: function(diff, data) {
      var delay;
      delay = diff < $.MINUTE ? $.SECOND - (diff + $.SECOND / 2) % $.SECOND : diff < $.HOUR ? $.MINUTE - (diff + $.MINUTE / 2) % $.MINUTE : diff < $.DAY ? $.HOUR - (diff + $.HOUR / 2) % $.HOUR : $.DAY - (diff + $.DAY / 2) % $.DAY;
      return setTimeout(RelativeDates.markStale, delay, data);
    },
    markStale: function(data) {
      if (__indexOf.call(RelativeDates.stale, data) >= 0) {
        return;
      }
      if (data instanceof Post && !g.posts[data.fullID]) {
        return;
      }
      return RelativeDates.stale.push(data);
    }
  };

  RemoveSpoilers = {
    init: function() {
      if (Conf['Reveal Spoilers']) {
        $.addClass(doc, 'reveal-spoilers');
      }
      if (Conf['Remove Spoilers']) {
        return $.addClass(doc, 'remove-spoilers');
      }
    }
  };

  Report = {
    init: function() {
      if (!/report/.test(location.search)) {
        return;
      }
      return $.asap((function() {
        return $.id('recaptcha_response_field');
      }), Report.ready);
    },
    ready: function() {
      var field;
      field = $.id('recaptcha_response_field');
      $.on(field, 'keydown', function(e) {
        if (e.keyCode === 8 && !field.value) {
          return $.globalEval('Recaptcha.reload("t")');
        }
      });
      return $.on($('form'), 'submit', function(e) {
        var response;
        e.preventDefault();
        response = field.value.trim();
        if (!/\s|^\d+$/.test(response)) {
          field.value = "" + response + " " + response;
        }
        return this.submit();
      });
    }
  };

  Time = {
    init: function() {
      if (!Conf['Time Formatting']) {
        return;
      }
      return Post.callbacks.push({
        name: 'Time Formatting',
        cb: this.node
      });
    },
    node: function() {
      if (this.isClone) {
        return;
      }
      return this.nodes.date.textContent = Time.format(Conf['time'], this.info.date);
    },
    format: function(formatString, date) {
      return formatString.replace(/%([A-Za-z])/g, function(s, c) {
        if (c in Time.formatters) {
          return Time.formatters[c].call(date);
        } else {
          return s;
        }
      });
    },
    day: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
    month: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
    zeroPad: function(n) {
      if (n < 10) {
        return "0" + n;
      } else {
        return n;
      }
    },
    formatters: {
      a: function() {
        return Time.day[this.getDay()].slice(0, 3);
      },
      A: function() {
        return Time.day[this.getDay()];
      },
      b: function() {
        return Time.month[this.getMonth()].slice(0, 3);
      },
      B: function() {
        return Time.month[this.getMonth()];
      },
      d: function() {
        return Time.zeroPad(this.getDate());
      },
      e: function() {
        return this.getDate();
      },
      H: function() {
        return Time.zeroPad(this.getHours());
      },
      I: function() {
        return Time.zeroPad(this.getHours() % 12 || 12);
      },
      k: function() {
        return this.getHours();
      },
      l: function() {
        return this.getHours() % 12 || 12;
      },
      m: function() {
        return Time.zeroPad(this.getMonth() + 1);
      },
      M: function() {
        return Time.zeroPad(this.getMinutes());
      },
      p: function() {
        if (this.getHours() < 12) {
          return 'AM';
        } else {
          return 'PM';
        }
      },
      P: function() {
        if (this.getHours() < 12) {
          return 'am';
        } else {
          return 'pm';
        }
      },
      S: function() {
        return Time.zeroPad(this.getSeconds());
      },
      y: function() {
        return this.getFullYear().toString().slice(2);
      },
      Y: function() {
        return this.getFullYear();
      }
    }
  };

  Navigate = {
    path: window.location.pathname,
    init: function() {
      if (g.BOARD.ID === 'f' || !Conf['JSON Navigation']) {
        return;
      }
      $.on(window, 'popstate', Navigate.popstate);
      $.ready(function() {
        Navigate.makeBreadCrumb(window.location, g.VIEW, g.BOARD.ID, g.THREADID);
        return $.add(Index.navLinks, Navigate.el);
      });
      this.title = function() {};
      this.el = $.el('span', {
        id: 'breadCrumb'
      });
      Thread.callbacks.push({
        name: 'Navigate',
        cb: this.thread
      });
      return Post.callbacks.push({
        name: 'Navigate',
        cb: this.post
      });
    },
    thread: function() {
      var replyLink;
      if (g.VIEW === 'thread') {
        return;
      }
      replyLink = $('a.replylink', this.OP.nodes.info);
      return $.on(replyLink, 'click', Navigate.navigate);
    },
    post: function() {
      var linktype;
      if (!(g.VIEW === 'thread' && this.thread.ID === g.THREADID)) {
        $.on($('a[title="Link to this post"]', this.nodes.info), 'click', Navigate.navigate);
      }
      if (!(linktype = Conf['Quote Inlining'] && Conf['Quote Hash Navigation'] ? '.hashlink' : !Conf['Quote Inlining'] ? '.quotelink' : null)) {
        return;
      }
      return Navigate.quoteLink($$(linktype, this.nodes.comment));
    },
    quoteLink: function(links) {
      var link, _i, _len;
      for (_i = 0, _len = links.length; _i < _len; _i++) {
        link = links[_i];
        Navigate.singleQuoteLink(link);
      }
    },
    singleQuoteLink: function(link) {
      var boardID, threadID, _ref;
      _ref = Get.postDataFromLink(link), boardID = _ref.boardID, threadID = _ref.threadID;
      if (g.VIEW === 'index' || boardID !== g.BOARD.ID || threadID !== g.THREADID) {
        return $.on(link, 'click', Navigate.navigate);
      }
    },
    clean: function() {
      g.threads.forEach(function(thread) {
        return thread.collect();
      });
      if (Conf['Quote Backlinks']) {
        QuoteBacklink.map = {};
      }
      return $.rmAll($('.board'));
    },
    features: [['Thread Excerpt', ThreadExcerpt], ['Unread Count', Unread], ['Quote Threading', QuoteThreading], ['Thread Stats', ThreadStats], ['Thread Updater', ThreadUpdater], ['Thread Expansion', ExpandThread]],
    disconnect: function() {
      var err, errors, feature, name, _i, _len, _ref, _ref1;
      _ref = Navigate.features;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        _ref1 = _ref[_i], name = _ref1[0], feature = _ref1[1];
        try {
          feature.disconnect();
        } catch (_error) {
          err = _error;
          if (!errors) {
            errors = [];
          }
          errors.push({
            message: "Failed to disconnect feature " + name + ".",
            error: err
          });
        }
        if (errors) {
          Main.handleErrors(errors);
        }
      }
    },
    reconnect: function() {
      var err, errors, feature, name, _i, _len, _ref, _ref1;
      _ref = Navigate.features;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        _ref1 = _ref[_i], name = _ref1[0], feature = _ref1[1];
        try {
          feature.init();
        } catch (_error) {
          err = _error;
          if (!errors) {
            errors = [];
          }
          errors.push({
            message: "Failed to reconnect feature " + name + ".",
            error: err
          });
        }
      }
      if (errors) {
        Main.handleErrors(errors);
      }
    },
    updateContext: function(view) {
      g.DEAD = false;
      if (view === 'thread') {
        g.THREADID = +window.location.pathname.split('/')[3];
      }
      ({
        index: function() {
          var _ref;
          if (g.VIEW === view) {
            return;
          }
          delete g.THREADID;
          if (Conf['Index Mode'] === 'catalog') {
            Index.cb.toggleCatalogMode();
          }
          return (_ref = QR.posts[0]) != null ? _ref.thread = 'new' : void 0;
        },
        thread: function() {
          var _ref, _ref1;
          if (((_ref = QR.posts[0]) != null ? _ref.thread : void 0) === g.THREADID) {
            return;
          }
          if (Conf['Index Mode'] === 'catalog') {
            $.rmClass(doc, 'catalog-mode');
          }
          return (_ref1 = QR.posts[0]) != null ? _ref1.thread = g.THREADID : void 0;
        }
      })[view]();
      if (view !== g.VIEW) {
        $.rmClass(doc, g.VIEW);
        $.addClass(doc, view);
        g.VIEW = view;
      }
      return $.asap((function() {
        return g.threads.keys.length;
      }), QR.status);
    },
    updateBoard: function(boardID) {
      var current, fullBoardList;
      fullBoardList = $('#full-board-list', Header.boardList);
      if (current = $('.current', fullBoardList)) {
        $.rmClass(current, 'current');
      }
      if (current = $("a[href*='/" + boardID + "/']", fullBoardList)) {
        $.addClass(current, 'current');
      }
      Header.generateBoardList(Conf['boardnav'].replace(/(\r\n|\n|\r)/g, ' '));
      Index.catalogLink.href = "//boards.4chan.org/" + boardID + "/";
      QR.flagsInput();
      return $.cache('//a.4cdn.org/boards.json', function() {
        var aboard, board, err, _i, _len, _ref;
        try {
          if (this.status !== 200) {
            return;
          }
          _ref = this.response.boards;
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            aboard = _ref[_i];
            if (!(aboard.board === boardID)) {
              continue;
            }
            board = aboard;
            break;
          }
        } catch (_error) {
          err = _error;
          Main.handleErrors([
            {
              message: "Navigation failed to update board name.",
              error: err
            }
          ]);
        }
        if (!board) {
          return;
        }
        Navigate.updateTitle(board);
        return Navigate.updateSFW(!!board.ws_board);
      });
    },
    updateSFW: function(sfw) {
      var theme;
      Favicon.el.href = Favicon["default"] = "//s.4cdn.org/image/favicon" + (sfw ? '-ws' : '') + ".ico";
      $.add(d.head, Favicon.el);
      if (Favicon.SFW === sfw) {
        return;
      }
      Favicon.SFW = sfw;
      Favicon.update();
      g.TYPE = sfw ? 'sfw' : 'nsfw';
      if (Conf["NSFW/SFW Mascots"]) {
        Main.setMascotString();
        MascotTools.toggle();
      }
      if (Conf["NSFW/SFW Themes"]) {
        Main.setThemeString();
        theme = Themes[Conf[g.THEMESTRING] || (sfw ? 'Yotsuba B' : 'Yotsuba')];
        return Style.setTheme(theme);
      }
    },
    updateTitle: function(_arg) {
      var board, subtitle, title;
      board = _arg.board, title = _arg.title;
      if (subtitle = $('.boardSubtitle')) {
        $.rm(subtitle);
      }
      return $('.boardTitle').textContent = d.title = "/" + board + "/ - " + title;
    },
    setMode: function(a) {
      var indexMode, indexSort, result, _ref;
      _ref = a.dataset, indexMode = _ref.indexMode, indexSort = _ref.indexSort;
      result = false;
      if (indexMode && Conf['Index Mode'] !== indexMode) {
        $.set('Index Mode', Conf['Index Mode'] = Index.selectMode.value = indexMode);
        Index.cb.mode();
        result = true;
      }
      if (indexSort && Conf['Index Sort'] !== indexSort) {
        $.set('Index Sort', Conf['Index Sort'] = Index.selectSort.value = indexSort);
        Index.cb.sort();
        result = true;
      }
      return result;
    },
    navigate: function(e) {
      var boardID, load, pageNum, path, threadID, view, _, _ref;
      if (this.hostname !== 'boards.4chan.org' || window.location.hostname === 'rs.4chan.org') {
        return;
      }
      if (e) {
        if (e.shiftKey || e.ctrlKey || (e.type === 'click' && e.button !== 0)) {
          if (e.button !== 2) {
            Navigate.setMode(this);
          }
          return;
        }
      }
      if (this.pathname === Navigate.path) {
        if (g.VIEW === 'thread') {
          ThreadUpdater.update();
        } else {
          if (!Index.searchTest()) {
            if (Navigate.setMode(this)) {
              Index.buildIndex();
            } else {
              Index.update();
            }
          }
        }
        if (e != null) {
          e.preventDefault();
        }
        return;
      }
      $.addClass(Index.button, 'fa-spin');
      _ref = this.pathname.split('/'), _ = _ref[0], boardID = _ref[1], view = _ref[2], threadID = _ref[3];
      if ('f' === boardID || 'f' === g.BOARD.ID) {
        return;
      }
      if (e != null) {
        e.preventDefault();
      }
      if (Index.isSearching) {
        Index.clearSearch();
      }
      Navigate.title = function() {};
      delete Index.pageNum;
      $.rmAll(Header.hover);
      if (threadID) {
        view = 'thread';
      } else {
        pageNum = +view || 1;
        view = 'index';
      }
      path = this.pathname;
      if (this.hash && view === 'thread') {
        path += this.hash;
      }
      Navigate.makeBreadCrumb(this.href, view, boardID, threadID);
      if (this.id === 'popState') {
        Navigate.path = window.location;
      } else {
        Navigate.pushState(path);
      }
      Navigate.setMode(this);
      if (!(view === 'index' && 'index' === g.VIEW && boardID === g.BOARD.ID)) {
        Navigate.disconnect();
        Navigate.updateContext(view);
        Navigate.clean();
        Navigate.reconnect();
        if (view === 'index') {
          $.event('4chanXInitFinished');
        }
      }
      if (boardID === g.BOARD.ID) {
        Navigate.title = function() {
          if (view === 'index') {
            return d.title = $('.boardTitle').textContent;
          }
        };
      } else {
        g.BOARD = new Board(boardID);
        Navigate.title = function() {
          return Navigate.updateBoard(boardID);
        };
      }
      Navigate.updateSFW(Favicon.SFW);
      if (view === 'index') {
        return Index.update(pageNum);
      }
      load = Navigate.load;
      Navigate.req = $.ajax("//a.4cdn.org/" + boardID + "/thread/" + threadID + ".json", {
        onabort: load,
        onloadend: load
      });
      return setTimeout((function() {
        if (Navigate.req && !Navigate.notice) {
          return Navigate.notice = new Notice('info', 'Loading thread...');
        }
      }), 3 * $.SECOND);
    },
    load: function(e) {
      var err, notice, req;
      $.rmClass(Index.button, 'fa-spin');
      req = Navigate.req, notice = Navigate.notice;
      if (notice != null) {
        notice.close();
      }
      delete Navigate.req;
      delete Navigate.notice;
      if (e.type === 'abort' || req.status !== 200) {
        req.onloadend = null;
        new Notice('warning', "Failed to load thread." + (req.status ? " " + req.status : ''));
        return;
      }
      Navigate.title();
      try {
        return Navigate.parse(req.response.posts);
      } catch (_error) {
        err = _error;
        console.error('Navigate failure:');
        console.log(err);
        if (notice) {
          notice.setType('error');
          notice.el.lastElementChild.textContent = 'Navigation Failed.';
          setTimeout(notice.close, 2 * $.SECOND);
        } else {
          new Notice('error', 'Navigation Failed.', 2);
        }
      }
    },
    makeBreadCrumb: function(href, view, boardID, threadID) {
      var breadCrumb, el;
      breadCrumb = $.el('span', {
        className: 'crumb',
        innerHTML: "<a href=" + href + ">/" + boardID + "/ - " + (view.charAt(0).toUpperCase()) + (view.slice(1)) + (threadID ? " No." + threadID : '') + "</a> &gt; "
      });
      $.on(breadCrumb.firstElementChild, 'click', Navigate.navigate);
      el = Navigate.el;
      $.add(el, breadCrumb);
      if (el.children.length > 5) {
        return $.rm(el.firstChild);
      }
    },
    parse: function(data) {
      var board, errors, i, makePost, obj, post, posts, thread, threadRoot;
      posts = [];
      errors = null;
      board = g.BOARD;
      threadRoot = Build.thread(board, data[0], true);
      thread = new Thread(data[0].no, board);
      makePost = function(postNode) {
        var err;
        try {
          return posts.push(new Post(postNode, thread, board));
        } catch (_error) {
          err = _error;
          if (!errors) {
            errors = [];
          }
          return errors.push({
            message: "Parsing of Post No." + postNode.ID + " failed. Post will be skipped.",
            error: err
          });
        }
      };
      makePost($('.opContainer', threadRoot));
      i = 0;
      while (obj = data[++i]) {
        post = Build.postFromObject(obj, board);
        makePost(post);
        $.add(threadRoot, post);
      }
      Thread.callbacks.execute([thread]);
      Post.callbacks.execute(posts);
      if (Conf['Quote Threading'] && !Conf['Unread Count']) {
        QuoteThreading.force();
      }
      board = $('.board');
      $.rmAll(board);
      $.add(board, [threadRoot, $.el('hr')]);
      if (Conf['Unread Count']) {
        Unread.ready();
      }
      QR.generatePostableThreadsList();
      Header.hashScroll.call(window);
      if (errors) {
        Main.handleErrors(errors);
      }
      return $.event('4chanXInitFinished');
    },
    pushState: function(path) {
      history.pushState(null, '', path);
      return Navigate.path = window.location.pathname;
    },
    popstate: function() {
      var a;
      a = $.el('a', {
        href: window.location,
        id: 'popState'
      });
      return Navigate.navigate.call(a);
    }
  };

  Settings = {
    init: function() {
      var addSection, arr, check, el, settings, _i, _len, _ref;
      el = $.el('a', {
        className: 'settings-link',
        title: 'Appchan X Settings',
        href: 'javascript:;',
        textContent: 'Settings'
      });
      $.on(el, 'click', this.open);
      Header.menu.addEntry({
        el: el,
        order: 1
      });
      addSection = this.addSection;
      _ref = [['style', 'Style'], ['themes', 'Themes'], ['mascots', 'Mascots'], ['main', 'Script'], ['filter', 'Filter'], ['sauce', 'Sauce'], ['advanced', 'Advanced'], ['keybinds', 'Keybinds']];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        arr = _ref[_i];
        addSection(arr[1], Settings[arr[0]]);
      }
      $.on(d, 'OpenSettings', function(e) {
        return Settings.open(e.detail);
      });
      settings = JSON.parse(localStorage.getItem('4chan-settings')) || {};
      if (!settings.disableAll) {
        settings.disableAll = true;
        check = true;
      }
      if (settings.keyBinds) {
        settings.keyBinds = false;
        check = true;
      }
      if (check) {
        return localStorage.setItem('4chan-settings', JSON.stringify(settings));
      }
    },
    open: function(openSection) {
      var dialog, link, links, overlay, section, sectionToOpen, _i, _len, _ref;
      if (Conf['editMode'] === "theme") {
        if (confirm("Opening the options dialog will close and discard any theme changes made with the theme editor.")) {
          ThemeTools.close();
        }
        return;
      }
      if (Conf['editMode'] === "mascot") {
        if (confirm("Opening the options dialog will close and discard any mascot changes made with the mascot editor.")) {
          MascotTools.close();
        }
        return;
      }
      if (Settings.overlay) {
        return;
      }
      $.event('CloseMenu');
      Settings.dialog = dialog = $.el('div', {
        id: 'appchanx-settings',
        "class": 'dialog',
        innerHTML: "<nav><div class=sections-list></div><span class='imp-exp-result warning'></span><div class=credits><a class=export>Export</a>&nbsp|&nbsp<a class=import>Import</a>&nbsp|&nbsp<a class=reset>Reset Settings</a>&nbsp|&nbsp<input type=file hidden><a href='http://zixaphir.github.com/appchan-x/' target=_blank>appchan x</a>&nbsp|&nbsp<a href='https://github.com/zixaphir/appchan-x/blob/master/CHANGELOG.md' target=_blank>" + g.VERSION + "</a>&nbsp|&nbsp<a href='https://github.com/zixaphir/appchan-x/blob/master/README.md#reporting-bugs-and-suggestions' target=_blank>Issues</a>&nbsp|&nbsp<a href=javascript:; class='close fa' title=Close>\uf00d</a></div></nav><hr><div class=section-container><section></section></div>"
      });
      Settings.overlay = overlay = $.el('div', {
        id: 'overlay'
      });
      $.on($('.export', dialog), 'click', Settings["export"]);
      $.on($('.import', dialog), 'click', Settings["import"]);
      $.on($('.reset', dialog), 'click', Settings.reset);
      $.on($('input', dialog), 'change', Settings.onImport);
      links = [];
      _ref = Settings.sections;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        section = _ref[_i];
        link = $.el('a', {
          className: "tab-" + section.hyphenatedTitle,
          textContent: section.title,
          href: 'javascript:;'
        });
        $.on(link, 'click', Settings.openSection.bind(section));
        links.push(link);
        if (section.title === openSection) {
          sectionToOpen = link;
        }
      }
      $.add($('.sections-list', dialog), links);
      if (openSection !== 'none') {
        (sectionToOpen ? sectionToOpen : links[0]).click();
      }
      $.on($('.close', dialog), 'click', Settings.close);
      $.on(overlay, 'click', Settings.close);
      $.add(d.body, [overlay, dialog]);
      return $.event('OpenSettings', null, dialog);
    },
    close: function() {
      if (!Settings.dialog) {
        return;
      }
      $.rm(Settings.overlay);
      $.rm(Settings.dialog);
      delete Settings.overlay;
      return delete Settings.dialog;
    },
    sections: [],
    addSection: function(title, open) {
      var hyphenatedTitle;
      hyphenatedTitle = title.toLowerCase().replace(/\s+/g, '-');
      return Settings.sections.push({
        title: title,
        hyphenatedTitle: hyphenatedTitle,
        open: open
      });
    },
    openSection: function(mode) {
      var section, selected;
      if (selected = $('.tab-selected', Settings.dialog)) {
        $.rmClass(selected, 'tab-selected');
      }
      $.addClass($(".tab-" + this.hyphenatedTitle, Settings.dialog), 'tab-selected');
      section = $('section', Settings.dialog);
      $.rmAll(section);
      section.className = "section-" + this.hyphenatedTitle;
      this.open(section, mode);
      section.scrollTop = 0;
      return $.event('OpenSettings', null, section);
    },
    main: function(section) {
      var arr, button, description, div, fs, input, inputs, items, key, obj, _ref;
      items = {};
      inputs = {};
      _ref = Config.main;
      for (key in _ref) {
        obj = _ref[key];
        fs = $.el('fieldset', {
          innerHTML: "<legend>" + key + "</legend>"
        });
        for (key in obj) {
          arr = obj[key];
          description = arr[1];
          div = $.el('div', {
            innerHTML: "<label><input type=checkbox name='" + key + "'>" + key + "</label><span class=description>" + description + "</span>"
          });
          input = $('input', div);
          $.on($('label', div), 'mouseover', Settings.mouseover);
          $.on(input, 'change', $.cb.checked);
          items[key] = Conf[key];
          inputs[key] = input;
          $.add(fs, div);
        }
        Rice.nodes(fs);
        $.add(section, fs);
      }
      $.get(items, function(items) {
        var val;
        for (key in items) {
          val = items[key];
          inputs[key].checked = val;
        }
      });
      div = $.el('div', {
        innerHTML: "<button></button><span class=description>: Clear manually-hidden threads and posts on all boards. Reload the page to apply."
      });
      button = $('button', div);
      $.get('hiddenPosts', {}, function(_arg) {
        var ID, board, hiddenNum, hiddenPosts, thread, _ref1;
        hiddenPosts = _arg.hiddenPosts;
        hiddenNum = 0;
        _ref1 = hiddenPosts.boards;
        for (ID in _ref1) {
          board = _ref1[ID];
          for (ID in board) {
            thread = board[ID];
            hiddenNum += Object.keys(thread).length;
          }
        }
        return button.textContent = "Hidden: " + hiddenNum;
      });
      $.on(button, 'click', function() {
        this.textContent = 'Hidden: 0';
        return $["delete"]('hiddenPosts');
      });
      return $.after($('input[name="Recursive Hiding"]', section).parentNode.parentNode, div);
    },
    "export": function() {
      return $.get(Conf, function(Conf) {
        delete Conf['archives'];
        return Settings.downloadExport('Settings', {
          version: g.VERSION,
          date: Date.now(),
          Conf: Conf
        });
      });
    },
    downloadExport: function(title, data) {
      var a;
      a = $.el('a', {
        download: "appchan x v" + g.VERSION + " " + title + "." + data.date + ".json",
        href: "data:application/json;base64," + (btoa(unescape(encodeURIComponent(JSON.stringify(data, null, 2)))))
      });
      $.add(d.body, a);
      a.click();
      return $.rm(a);
    },
    "import": function() {
      return $('input[type=file]', this.parentNode).click();
    },
    onImport: function() {
      var file, reader;
      if (!(file = this.files[0])) {
        return;
      }
      if (!confirm('Your current settings will be entirely overwritten, are you sure?')) {
        return;
      }
      reader = new FileReader();
      reader.onload = function(e) {
        var err;
        try {
          Settings.loadSettings(JSON.parse(e.target.result));
        } catch (_error) {
          err = _error;
          alert('Import failed due to an error.');
          c.error(err.stack);
          return;
        }
        if (confirm('Import successful. Reload now?')) {
          return window.location.reload();
        }
      };
      return reader.readAsText(file);
    },
    loadSettings: function(data) {
      if (data.Conf['WatchedThreads']) {
        data.Conf['watchedThreads'] = {
          boards: ThreadWatcher.convert(data.Conf['WatchedThreads'])
        };
        delete data.Conf['WatchedThreads'];
      }
      return $.clear(function() {
        return $.set(data.Conf);
      });
    },
    reset: function() {
      if (confirm('Your current settings will be entirely wiped, are you sure?')) {
        return $.clear(function() {
          if (confirm('Reset successful. Reload now?')) {
            return window.location.reload();
          }
        });
      }
    },
    filter: function(section) {
      var select;
      section.innerHTML = "<select name=filter><option value=guide>Guide</option><option value=name>Name</option><option value=uniqueID>Unique ID</option><option value=tripcode>Tripcode</option><option value=capcode>Capcode</option><option value=email>E-mail</option><option value=subject>Subject</option><option value=comment>Comment</option><option value=flag>Flag</option><option value=filename>Filename</option><option value=dimensions>Image dimensions</option><option value=filesize>Filesize</option><option value=MD5>Image MD5</option></select><div></div>";
      select = $('select', section);
      $.on(select, 'change', Settings.selectFilter);
      return Settings.selectFilter.call(select);
    },
    selectFilter: function() {
      var div, name, ta;
      div = this.nextElementSibling;
      if ((name = this.value) !== 'guide') {
        $.rmAll(div);
        ta = $.el('textarea', {
          name: name,
          className: 'field',
          spellcheck: false
        });
        $.get(name, Conf[name], function(item) {
          return ta.value = item[name];
        });
        $.on(ta, 'change', $.cb.value);
        $.add(div, ta);
        return;
      }
      return div.innerHTML = "<div class=warning " + (Conf['Filter'] ? 'hidden' : '') + "><code>Filter</code> is disabled.</div><p>Use <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions\">regular expressions</a>, one per line.<br>Lines starting with a <code>#</code> will be ignored.<br>For example, <code>/weeaboo/i</code> will filter posts containing the string `<code>weeaboo</code>`, case-insensitive.<br>MD5 filtering uses exact string matching, not regular expressions.</p><ul>You can use these settings with each regular expression, separate them with semicolons:<li>Per boards, separate them with commas. It is global if not specified.<br>For example: <code>boards:a,jp;</code>.</li><li>Filter OPs only along with their threads (`only`), replies only (`no`), or both (`yes`, this is default).<br>For example: <code>op:only;</code>, <code>op:no;</code> or <code>op:yes;</code>.</li><li>Overrule the `Show Stubs` setting if specified: create a stub (`yes`) or not (`no`).<br>For example: <code>stub:yes;</code> or <code>stub:no;</code>.</li><li>Highlight instead of hiding. You can specify a class name to use with a userstyle.<br>For example: <code>highlight;</code> or <code>highlight:wallpaper;</code>.</li><li>Highlighted OPs will have their threads put on top of the board index by default.<br>For example: <code>top:yes;</code> or <code>top:no;</code>.</li></ul>";
    },
    sauce: function(section) {
      var ta;
      section.innerHTML = "<div class=warning " + (Conf['Sauce'] ? 'hidden' : '') + "><code>Sauce</code> is disabled.</div><div>Lines starting with a <code>#</code> will be ignored.</div><div>You can specify a display text by appending <code>;text:[text]</code> to the URL.</div><ul>These parameters will be replaced by their corresponding values:<li><code>%TURL</code>: Thumbnail URL.</li><li><code>%URL</code>: Full image URL.</li><li><code>%MD5</code>: MD5 hash.</li><li><code>%name</code>: Original file name.</li><li><code>%board</code>: Current board.</li></ul><textarea name=sauces class=field spellcheck=false></textarea>";
      ta = $('textarea', section);
      $.get('sauces', Conf['sauces'], function(item) {
        return ta.value = item['sauces'].replace(/\$\d/g, function(c) {
          switch (c) {
            case '$1':
              return '%TURL';
            case '$2':
              return '%URL';
            case '$3':
              return '%MD5';
            case '$4':
              return '%board';
            default:
              return c;
          }
        });
      });
      return $.on(ta, 'change', $.cb.value);
    },
    advanced: function(section) {
      var archBoards, boardID, boardOptions, boardSelect, boards, event, files, i, input, inputs, item, items, name, o, row, rows, software, ta, table, withCredentials, _i, _j, _k, _l, _len, _len1, _len2, _len3, _len4, _len5, _m, _n, _ref, _ref1, _ref2, _ref3, _ref4, _ref5;
      section.innerHTML = "<fieldset><legend>Archiver</legend><div class=\"warning\" " + (Conf['404 Redirect'] ? 'hidden' : '') + "><code>404 Redirect</code> is disabled.</div><div><select id='archive-board-select'></select></div><table id='archive-table'><thead><th>Thread redirection</th><th>Post fetching</th><th>File redirection</th></thead><tbody></tbody></table><span class=note>Disabled selections indicate that only one archive is available for that board and redirection type.</span></fieldset><fieldset><legend>Custom Board Navigation</legend><div><textarea name=boardnav class=field spellcheck=false></textarea></div><span class=note>New lines will be converted into spaces.</span><br><br><div class=note>In the following examples for /g/, <code>g</code> can be changed to a different board ID (<code>a</code>, <code>b</code>, etc...), the current board (<code>current</code>), or the Twitter link (<code>@</code>).</div><div>Board link: <code>g</code></div><div>Title link: <code>g-title</code></div><div>Board link (Replace with title when on that board): <code>g-replace</code></div><div>Full text link: <code>g-full</code></div><div>Custom text link: <code>g-text:\"Install Gentoo\"</code></div><div>External link: <code>external-text:\"Google\",\"http://www.google.com\"</code></div><div>Index mode: <code>g-mode:\"type\"</code> where type is <code>paged</code>, <code>all threads</code> or <code>catalog</code></div><div>Index sort: <code>g-sort:\"type\"</code> where type is <code>bump order</code>, <code>last reply</code>, <code>creation date</code>, <code>reply count</code> or <code>file count</code></div<div>Combinations are possible: <code>g-text:\"VIP Catalog\"-mode:\"catalog\"-sort:\"creation date\"</code></div><div>Full board list toggle: <code>toggle-all</code></div><br><div class=note><code>[ toggle-all ] [current-title] [g-title / a-title / jp-title] [x / wsg / h-mode:\"catalog\"-sort:\"file count\"] [t-text:\"Piracy\"]</code><br>will give you<br><code>[ + ] [Technology] [Technology / Anime & Manga / Otaku Culture] [x / wsg / h] [Piracy]</code><br>if you are on /g/.</div></fieldset><fieldset><legend>Time Formatting <span class=warning " + (Conf['Time Formatting'] ? 'hidden' : '') + ">is disabled.</span></legend><div><input name=time class=field spellcheck=false>: <span class=time-preview></span></div><div>Supported <a href=//en.wikipedia.org/wiki/Date_%28Unix%29#Formatting>format specifiers</a>:</div><div>Day: <code>%a</code>, <code>%A</code>, <code>%d</code>, <code>%e</code></div><div>Month: <code>%m</code>, <code>%b</code>, <code>%B</code></div><div>Year: <code>%y</code>, <code>%Y</code></div><div>Hour: <code>%k</code>, <code>%H</code>, <code>%l</code>, <code>%I</code>, <code>%p</code>, <code>%P</code></div><div>Minute: <code>%M</code></div><div>Second: <code>%S</code></div></fieldset><fieldset><legend>Quote Backlinks formatting <span class=warning " + (Conf['Quote Backlinks'] ? 'hidden' : '') + ">is disabled.</span></legend><div><input name=backlink class=field spellcheck=false>: <span class=backlink-preview></span></div></fieldset><fieldset><legend>File Info Formatting <span class=warning " + (Conf['File Info Formatting'] ? 'hidden' : '') + ">is disabled.</span></legend><div><input name=fileInfo class=field spellcheck=false>: <span class='fileText file-info-preview'></span></div><div>Link: <code>%l</code> (truncated), <code>%L</code> (untruncated), <code>%T</code> (Unix timestamp)</div><div>Original file name: <code>%n</code> (truncated), <code>%N</code> (untruncated), <code>%t</code> (Unix timestamp)</div><div>Spoiler indicator: <code>%p</code></div><div>Size: <code>%B</code> (Bytes), <code>%K</code> (KB), <code>%M</code> (MB), <code>%s</code> (4chan default)</div><div>Resolution: <code>%r</code> (Displays 'PDF' for PDF files)</div></fieldset><fieldset><legend>Quick Reply Personas</legend><textarea class=personafield name=\"QR.personas\" class=\"field\" spellcheck=\"false\"></textarea><p>One item per line.<br>Items will be added in the relevant input's auto-completion list.<br>Password items will always be used, since there is no password input.<br>Lines starting with a <code>#</code> will be ignored.</p><ul>You can use these settings with each item, separate them with semicolons:<li>Possible items are: <code>name</code>, <code>options</code> (or equivalently <code>email</code>), <code>subject</code> and <code>password</code>.</li><li>Wrap values of items with quotes, like this: <code>options:\"sage\"</code>.</li><li>Force values as defaults with the <code>always</code> keyword, for example: <code>options:\"sage\";always</code>.</li><li>Select specific boards for an item, separated with commas, for example: <code>options:\"sage\";boards:jp;always</code>.</li></ul></fieldset><fieldset><legend>Unread Favicon <span class=warning " + (Conf['Unread Favicon'] ? 'hidden' : '') + ">is disabled.</span></legend><select name=favicon><option value=ferongr>ferongr</option><option value=xat->xat-</option><option value=Mayhem>Mayhem</option><option value=4chanJS>4chanJS</option><option value=Original>Original</option><option value=Metro>Metro</option></select><span id=favicon-preview></span></fieldset><fieldset><legend>Thread Updater <span class=warning " + (Conf['Thread Updater'] ? 'hidden' : '') + ">is disabled.</span></legend><div>Interval: <input type=number name=Interval class=field min=1 value=" + Conf['Interval'] + "></div></fieldset><fieldset><legend><input type=checkbox name='Custom CSS' " + (Conf['Custom CSS'] ? 'checked' : '') + "> Custom CSS</legend><div><button id=apply-css>Apply CSS</button><textarea name=usercss class=field spellcheck=false " + (Conf['Custom CSS'] ? '' : 'disabled') + "></textarea></div></fieldset>";
      items = {};
      inputs = {};
      _ref = ['boardnav', 'time', 'backlink', 'fileInfo', 'favicon', 'usercss'];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        name = _ref[_i];
        input = $("[name='" + name + "']", section);
        items[name] = Conf[name];
        inputs[name] = input;
        event = name === 'favicon' || name === 'usercss' ? 'change' : 'input';
        $.on(input, event, $.cb.value);
      }
      ta = $('.personafield', section);
      $.get('QR.personas', Conf['QR.personas'], function(item) {
        return ta.value = item['QR.personas'];
      });
      $.on(ta, 'change', $.cb.value);
      $.get(items, function(items) {
        var key, val;
        for (key in items) {
          val = items[key];
          input = inputs[key];
          input.value = val;
          if (key === 'usercss') {
            continue;
          }
          $.on(input, event, Settings[key]);
          Settings[key].call(input);
        }
        return Rice.nodes(section);
      });
      $.on($('input[name=Interval]', section), 'change', ThreadUpdater.cb.interval);
      $.on($('input[name="Custom CSS"]', section), 'change', Settings.togglecss);
      $.on($.id('apply-css'), 'click', Settings.usercss);
      archBoards = {};
      _ref1 = Redirect.archives;
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        _ref2 = _ref1[_j], name = _ref2.name, boards = _ref2.boards, files = _ref2.files, software = _ref2.software, withCredentials = _ref2.withCredentials;
        for (_k = 0, _len2 = boards.length; _k < _len2; _k++) {
          boardID = boards[_k];
          o = archBoards[boardID] || (archBoards[boardID] = {
            thread: [[], []],
            post: [[], []],
            file: [[], []]
          });
          i = +(!!withCredentials);
          o.thread[i].push(name);
          if (software === 'foolfuuka') {
            o.post[i].push(name);
          }
          if (__indexOf.call(files, boardID) >= 0) {
            o.file[i].push(name);
          }
        }
      }
      for (boardID in archBoards) {
        o = archBoards[boardID];
        _ref3 = ['thread', 'post', 'file'];
        for (_l = 0, _len3 = _ref3.length; _l < _len3; _l++) {
          item = _ref3[_l];
          if (o[item][0].length === 0 && o[item][1].length !== 0) {
            o[item][0].push('disabled');
          }
          o[item] = o[item][0].concat(o[item][1]);
        }
      }
      rows = [];
      boardOptions = [];
      _ref4 = Object.keys(archBoards).sort();
      for (_m = 0, _len4 = _ref4.length; _m < _len4; _m++) {
        boardID = _ref4[_m];
        row = $.el('tr', {
          className: "board-" + boardID
        });
        row.hidden = boardID !== g.BOARD.ID;
        boardOptions.push($.el('option', {
          textContent: "/" + boardID + "/",
          value: "board-" + boardID,
          selected: boardID === g.BOARD.ID
        }));
        o = archBoards[boardID];
        _ref5 = ['thread', 'post', 'file'];
        for (_n = 0, _len5 = _ref5.length; _n < _len5; _n++) {
          item = _ref5[_n];
          $.add(row, Settings.addArchiveCell(boardID, o, item));
        }
        rows.push(row);
      }
      $.add($('tbody', section), rows);
      boardSelect = $('#archive-board-select', section);
      $.add(boardSelect, boardOptions);
      table = $.id('archive-table');
      $.on(boardSelect, 'change', function() {
        $('tbody > :not([hidden])', table).hidden = true;
        return $("tbody > ." + this.value, table).hidden = false;
      });
      $.get('selectedArchives', Conf['selectedArchives'], function(_arg) {
        var data, option, selectedArchives, type;
        selectedArchives = _arg.selectedArchives;
        for (boardID in selectedArchives) {
          data = selectedArchives[boardID];
          for (type in data) {
            name = data[type];
            if (option = $("select[data-boardid='" + boardID + "'][data-type='" + type + "'] > option[value='" + name + "']", section)) {
              option.selected = true;
            }
          }
        }
      });
    },
    addArchiveCell: function(boardID, data, type) {
      var archive, i, length, options, select, td;
      length = data[type].length;
      td = $.el('td', {
        className: 'archive-cell'
      });
      if (!length) {
        td.textContent = '--';
        return td;
      }
      options = [];
      i = 0;
      while (i < length) {
        archive = data[type][i++];
        options.push($.el('option', {
          textContent: archive,
          value: archive
        }));
      }
      td.innerHTML = '<select></select>';
      select = td.firstElementChild;
      if (!(select.disabled = length === 1)) {
        select.setAttribute('data-boardid', boardID);
        select.setAttribute('data-type', type);
        $.on(select, 'change', Settings.saveSelectedArchive);
      }
      $.add(select, options);
      return td;
    },
    saveSelectedArchive: function() {
      return $.get('selectedArchives', Conf['selectedArchives'], (function(_this) {
        return function(_arg) {
          var selectedArchives, _name;
          selectedArchives = _arg.selectedArchives;
          (selectedArchives[_name = _this.dataset.boardid] || (selectedArchives[_name] = {}))[_this.dataset.type] = _this.value;
          return $.set('selectedArchives', selectedArchives);
        };
      })(this));
    },
    boardnav: function() {
      return Header.generateBoardList(this.value);
    },
    time: function() {
      return this.nextElementSibling.textContent = Time.format(this.value, new Date());
    },
    backlink: function() {
      return this.nextElementSibling.textContent = this.value.replace(/%id/g, '123456789');
    },
    fileInfo: function() {
      var data;
      data = {
        isReply: true,
        file: {
          URL: '//i.4cdn.org/g/1334437723720.jpg',
          name: 'd9bb2efc98dd0df141a94399ff5880b7.jpg',
          size: '276 KB',
          sizeInBytes: 276 * 1024,
          dimensions: '1280x720',
          isImage: true,
          isVideo: false,
          isSpoiler: true
        }
      };
      return this.nextElementSibling.innerHTML = FileInfo.format(this.value, data);
    },
    favicon: function() {
      Favicon.init();
      if (g.VIEW === 'thread' && Conf['Unread Favicon']) {
        Unread.update();
      }
      return $.id('favicon-preview').innerHTML = "<img src=" + Favicon["default"] + ">\n<img src=" + Favicon.unreadSFW + ">\n<img src=" + Favicon.unreadNSFW + ">\n<img src=" + Favicon.unreadDead + ">";
    },
    togglecss: function() {
      if ($('textarea', this.parentNode.parentNode).disabled = !this.checked) {
        CustomCSS.rmStyle();
      } else {
        CustomCSS.addStyle();
      }
      return $.cb.checked.call(this);
    },
    usercss: function() {
      return CustomCSS.update();
    },
    keybinds: function(section) {
      var arr, input, inputs, items, key, tbody, tr, _ref;
      section.innerHTML = "<div class=warning " + (Conf['Keybinds'] ? 'hidden' : '') + "><code>Keybinds</code> are disabled.</div><div>Allowed keys: <kbd>a-z</kbd>, <kbd>0-9</kbd>, <kbd>Ctrl</kbd>, <kbd>Shift</kbd>, <kbd>Alt</kbd>, <kbd>Meta</kbd>, <kbd>Enter</kbd>, <kbd>Esc</kbd>, <kbd>Up</kbd>, <kbd>Down</kbd>, <kbd>Right</kbd>, <kbd>Left</kbd>.</div><div>Press <kbd>Backspace</kbd> to disable a keybind.</div><table><tbody><tr><th>Actions</th><th>Keybinds</th></tr></tbody></table>";
      tbody = $('tbody', section);
      items = {};
      inputs = {};
      _ref = Config.hotkeys;
      for (key in _ref) {
        arr = _ref[key];
        tr = $.el('tr', {
          innerHTML: "<td>" + arr[1] + "</td><td><input class=field></td>"
        });
        input = $('input', tr);
        input.name = key;
        input.spellcheck = false;
        items[key] = Conf[key];
        inputs[key] = input;
        $.on(input, 'keydown', Settings.keybind);
        Rice.nodes(tr);
        $.add(tbody, tr);
      }
      return $.get(items, function(items) {
        var val;
        for (key in items) {
          val = items[key];
          inputs[key].value = val;
        }
      });
    },
    keybind: function(e) {
      var key;
      if (e.keyCode === 9) {
        return;
      }
      e.preventDefault();
      e.stopPropagation();
      if ((key = Keybinds.keyCode(e)) == null) {
        return;
      }
      this.value = key;
      return $.cb.value.call(this);
    },
    style: function(section) {
      var arr, description, div, fs, html, input, inputs, items, key, name, nodes, obj, type, value, _i, _len, _ref;
      nodes = $.frag();
      items = {};
      inputs = {};
      _ref = Config.style;
      for (key in _ref) {
        obj = _ref[key];
        fs = $.el('fieldset', {
          innerHTML: "<legend>" + key + "</legend>"
        });
        for (key in obj) {
          arr = obj[key];
          value = arr[0], description = arr[1], type = arr[2];
          div = $.el('div', {
            className: 'styleoption'
          });
          if (type) {
            if (type === 'text') {
              div.innerHTML = "<div class=option><span class=optionlabel>" + key + "</span></div><div class=description>" + description + "</div><div class=option><input name='" + key + "' style=width: 100%></div>";
              input = $("input", div);
            } else {
              html = "<div class=option><span class=optionlabel>" + key + "</span></div><div class=description>" + description + "</div><div class=option><select name='" + key + "'>";
              for (_i = 0, _len = type.length; _i < _len; _i++) {
                name = type[_i];
                html += "<option value='" + name + "'>" + name + "</option>";
              }
              html += "</select></div>";
              div.innerHTML = html;
              input = $("select", div);
            }
          } else {
            div.innerHTML = "<div class=option><label><input type=checkbox name='" + key + "'>" + key + "</label></div><span style='display:none;'>" + description + "</span>";
            input = $('input', div);
          }
          items[key] = Conf[key];
          inputs[key] = input;
          $.on($('.option', div), 'mouseover', Settings.mouseover);
          $.add(fs, div);
        }
        $.add(nodes, fs);
      }
      return $.get(items, function(items) {
        var cb, val;
        cb = Settings.cb.style;
        for (key in items) {
          val = items[key];
          input = inputs[key];
          if (input.type === 'checkbox') {
            input.checked = val;
            $.on(input, 'change', cb.checked);
          } else if (input.nodeName === 'SELECT') {
            input.value = val;
            $.on(input, 'change', cb.select);
          } else {
            input.value = val;
            $.on(input, 'change', cb.value);
          }
        }
        Rice.nodes(nodes);
        return $.add(section, nodes);
      });
    },
    themes: function(section, mode) {
      var a, cb, div, keys, mouseout, mouseover, name, parentdiv, suboptions, theme, _i, _j, _k, _len, _len1, _len2, _ref;
      if (typeof mode !== 'string') {
        mode = 'default';
      }
      parentdiv = $.el('div', {
        id: "themeContainer"
      });
      suboptions = $.el('div', {
        className: "suboptions",
        id: "themes"
      });
      keys = Object.keys(Themes);
      keys.sort();
      cb = Settings.cb.theme;
      mouseover = function() {
        return this.style.color = "" + this.dataset.hover;
      };
      mouseout = function() {
        return this.style.color = "" + this.dataset.color;
      };
      if (mode === "default") {
        for (_i = 0, _len = keys.length; _i < _len; _i++) {
          name = keys[_i];
          theme = Themes[name];
          if (theme["Deleted"]) {
            continue;
          }
          div = $.el('div', {
            className: "theme " + (name === Conf[g.THEMESTRING] ? 'selectedtheme' : ''),
            id: name,
            innerHTML: "<div style='cursor: pointer; position: relative; margin-bottom: 2px; width: 100% ; box-shadow: none ; background:" + theme['Reply Background'] + ";border:1px solid " + theme['Reply Border'] + ";color:" + theme['Text'] + "'><div><div style='cursor: pointer; width: 9px; height: 9px; margin: 2px 3px; display: inline-block; vertical-align: bottom; background: " + theme['Checkbox Background'] + "; border: 1px solid " + theme['Checkbox Border'] + ";'></div><span style='color:" + theme['Subjects'] + "; font-weight: 600 '>\n    " + name + "\n  </span><span style='color:" + theme['Names'] + "; font-weight: 600 '>\n    " + theme['Author'] + "\n  </span><span style='color:" + theme['Sage'] + "'>\n    (SAGE)\n  </span><span style='color:" + theme['Tripcodes'] + "'>\n    " + theme['Author Tripcode'] + "\n  </span><time style='color:" + theme['Timestamps'] + "'>\n    20XX.01.01 12:00\n  </time><a data-color='" + theme['Post Numbers'] + "' data-hover='" + theme['Hovered Links'] + "'>\n    No.27583594\n  </a><a data-color='" + theme['Backlinks'] + "' data-hover='" + theme['Hovered Links'] + "' name='" + name + "' class=edit>\n    &gt;&gt;edit\n  </a><a data-color='" + theme['Backlinks'] + "' data-hover='" + theme['Hovered Links'] + "' name='" + name + "' class=export>\n    &gt;&gt;export\n  </a><a data-color='" + theme['Backlinks'] + "' data-hover='" + theme['Hovered Links'] + "' name='" + name + "' class=delete>\n    &gt;&gt;delete\n  </a></div><blockquote style='margin: 0; padding: 12px 40px 12px 38px'><a data-color='" + theme['Quotelinks'] + "' data-hover='" + theme['Hovered Links'] + "'  style='text-shadow: none;'>\n    &gt;&gt;27582902\n  </a><br>\n  Post content is right here.\n</blockquote><h1 style='color: " + theme['Text'] + "'>\n  Selected\n</h1></div>"
          });
          div.style.backgroundColor = theme['Background Color'];
          _ref = $$('a[data-color]', div);
          for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {
            a = _ref[_j];
            a.style.color = "" + a.dataset.color;
            $.on(a, 'mouseover', mouseover);
            $.on(a, 'mouseout', mouseout);
          }
          $.on($('a.edit', div), 'click', cb.edit);
          $.on($('a.export', div), 'click', cb["export"]);
          $.on($('a.delete', div), 'click', cb["delete"]);
          $.on(div, 'click', cb.select);
          $.add(suboptions, div);
        }
        div = $.el('div', {
          id: 'addthemes',
          innerHTML: "<a id=newtheme href='javascript:;'>New Theme</a>\n/\n<a id=import href='javascript:;' title='From Appchan X, Oneechan, or 4chan SS'>Import Theme</a><input id=importbutton type=file hidden>\n/\n<a id=tUndelete href='javascript:;'>Undelete Theme</a>"
        });
        $.on($("#newtheme", div), 'click', function() {
          ThemeTools.init("untitled");
          return Settings.close();
        });
        $.on($("#import", div), 'click', function() {
          return this.nextSibling.click();
        });
        $.on($("#importbutton", div), 'change', ThemeTools.importtheme);
        $.on($('#tUndelete', div), 'click', function() {
          var themes;
          $.rm($.id("themeContainer"));
          themes = {
            open: Settings.themes,
            hyphenatedTitle: 'themes'
          };
          return Settings.openSection.apply(themes, ['undelete']);
        });
      } else {
        for (_k = 0, _len2 = keys.length; _k < _len2; _k++) {
          name = keys[_k];
          theme = Themes[name];
          if (!theme["Deleted"]) {
            continue;
          }
          div = $.el('div', {
            id: name,
            className: theme,
            innerHTML: "<div style='cursor: pointer; position: relative; margin-bottom: 2px; width: 100% ; box-shadow: none ; background:" + theme['Reply Background'] + ";border:1px solid " + theme['Reply Border'] + ";color:" + theme['Text'] + "'><div style='padding: 3px 0px 0px 8px;'><span style='color:" + theme['Subjects'] + "; font-weight: 600 '>\n    " + name + "\n  </span><span style='color:" + theme['Names'] + "; font-weight: 600 '>\n    " + theme['Author'] + "\n  </span><span style='color:" + theme['Sage'] + "'>\n    (SAGE)\n  </span><span style='color:" + theme['Tripcodes'] + "'>\n    " + theme['Author Tripcode'] + "\n  </span><time style='color:" + theme['Timestamps'] + "'>\n    20XX.01.01 12:00\n  </time><a data-color='" + theme['Post Numbers'] + "' data-hover='" + theme['Hovered Links'] + "'>\n    No.27583594\n  </a></div><blockquote style='margin: 0; padding: 12px 40px 12px 38px'><a data-color='" + theme['Quotelinks'] + "' data-hover='" + theme['Hovered Links'] + "'  style='text-shadow: none;'>\n    &gt;&gt;27582902\n  </a><br>\n  I forgive you for using VLC to open me. ;__;\n</blockquote></div>"
          });
          $.on(div, 'click', cb.restore);
          $.add(suboptions, div);
        }
        div = $.el('div', {
          id: 'addthemes',
          innerHTML: "<a href='javascript:;'>Return</a>"
        });
        $.on($('a', div), 'click', function() {
          var themes;
          themes = {
            open: Settings.themes,
            hyphenatedTitle: 'themes'
          };
          $.rm($.id("themeContainer"));
          return Settings.openSection.call(themes);
        });
      }
      $.add(parentdiv, suboptions);
      $.add(parentdiv, div);
      return $.add(section, parentdiv);
    },
    mouseover: function(e) {
      var mouseover;
      mouseover = $.el('div', {
        id: 'mouseover',
        className: 'dialog'
      });
      $.add(Header.hover, mouseover);
      mouseover.innerHTML = this.nextElementSibling.innerHTML;
      UI.hover({
        root: this,
        el: mouseover,
        latestEvent: e,
        endEvents: 'mouseout',
        asapTest: function() {
          return true;
        },
        offsetX: 15,
        offsetY: -5
      });
    },
    mascots: function(section, mode) {
      var addoptions, batchmascots, categories, cb, container, div, keys, mascot, mascotEl, mascotHide, mascotoptions, menu, name, node, option, suboptions, _i, _j, _k, _l, _len, _len1, _len2, _len3, _ref, _ref1;
      categories = {};
      cb = Settings.cb.mascot;
      if (typeof mode !== 'string') {
        mode = 'default';
      }
      suboptions = $.el("div", {
        className: "suboptions"
      });
      mascotHide = $.el("div", {
        id: "mascot_hide",
        className: "reply",
        innerHTML: "Hide Categories <span class=drop-marker></span><div></div>"
      });
      keys = Object.keys(Mascots);
      keys.sort();
      if (mode === 'default') {
        mascotoptions = $.el('div', {
          id: 'mascot-options',
          innerHTML: "<a class=edit href='javascript:;'>Edit</a><a class=delete href='javascript:;'>Delete</a><a class=export href='javascript:;'>Export</a>"
        });
        $.on($('.edit', mascotoptions), 'click', cb.edit);
        $.on($('.delete', mascotoptions), 'click', cb["delete"]);
        $.on($('.export', mascotoptions), 'click', cb["export"]);
        addoptions = function() {
          if (mascotoptions.parentElement === this) {
            return;
          }
          return $.add(this, mascotoptions);
        };
        _ref = MascotTools.categories;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          name = _ref[_i];
          menu = $('div', mascotHide);
          categories[name] = div = $.el("div", {
            id: name,
            className: "mascots-container",
            innerHTML: "<h3 class=mascotHeader>" + name + "</h3>",
            hidden: __indexOf.call(Conf["Hidden Categories"], name) >= 0
          });
          option = $.el("label", {
            name: name,
            innerHTML: "<input name='" + name + "' type=checkbox " + (__indexOf.call(Conf["Hidden Categories"], name) >= 0 ? 'checked' : '') + ">" + name
          });
          $.on($('input', option), 'change', cb.category);
          $.add(suboptions, div);
          $.add(menu, option);
        }
        for (_j = 0, _len1 = keys.length; _j < _len1; _j++) {
          name = keys[_j];
          if (__indexOf.call(Conf["Deleted Mascots"], name) >= 0) {
            continue;
          }
          mascot = Mascots[name];
          mascotEl = $.el('div', {
            id: name,
            className: __indexOf.call(Conf[g.MASCOTSTRING], name) >= 0 ? 'mascot enabled' : 'mascot',
            innerHTML: "<div class='mascotname'>" + (name.replace(/_/g, " ")) + "</div> <div class='mascotcontainer " + (mascot.silhouette ? 'silhouette' : '') + "'><div class='mAlign " + mascot.category + "'><img class=mascotimg src='" + mascot.image + "'></div></div>"
          });
          $.on(mascotEl, 'click', cb.select);
          $.on(mascotEl, 'mouseover', addoptions);
          $.add(categories[mascot.category] || categories[MascotTools.categories[0]], mascotEl);
        }
        batchmascots = $.el('div', {
          id: "mascots_batch",
          innerHTML: " <a href=\"javascript:;\" id=clear>Clear All</a>\n/\n<a href=\"javascript:;\" id=selectAll>Select All</a>\n/\n<a href=\"javascript:;\" id=createNew>Add Mascot</a>\n/\n<a href=\"javascript:;\" id=importMascot>Import Mascot</a><input id=importMascotButton type=file hidden>\n/\n<a href=\"javascript:;\" id=undelete>Undelete Mascots</a>\n/\n<a href=\"http://appchan.booru.org/\" target=_blank>Get More Mascots!</a>"
        });
        $.on($('#clear', batchmascots), 'click', function() {
          var enabledMascots, _k, _len2;
          enabledMascots = JSON.parse(JSON.stringify(Conf[g.MASCOTSTRING]));
          for (_k = 0, _len2 = enabledMascots.length; _k < _len2; _k++) {
            name = enabledMascots[_k];
            $.rmClass($.id(name), 'enabled');
          }
          return $.set(g.MASCOTSTRING, Conf[g.MASCOTSTRING] = []);
        });
        $.on($('#selectAll', batchmascots), 'click', function() {
          var _ref1;
          for (name in Mascots) {
            mascot = Mascots[name];
            if (!((_ref1 = mascot.category, __indexOf.call(Conf["Hidden Categories"], _ref1) >= 0) || __indexOf.call(Conf[g.MASCOTSTRING], name) >= 0 || __indexOf.call(Conf["Deleted Mascots"], name) >= 0)) {
              $.addClass($.id(name), 'enabled');
              Conf[g.MASCOTSTRING].push(name);
            }
          }
          return $.set(g.MASCOTSTRING, Conf[g.MASCOTSTRING]);
        });
        $.on($('#createNew', batchmascots), 'click', function() {
          MascotTools.dialog();
          return Settings.close();
        });
        $.on($("#importMascot", batchmascots), 'click', function() {
          return this.nextSibling.click();
        });
        $.on($("#importMascotButton", batchmascots), 'change', MascotTools.importMascot);
        $.on($('#undelete', batchmascots), 'click', function() {
          var mascots;
          if (!(Conf["Deleted Mascots"].length > 0)) {
            alert("No mascots have been deleted.");
            return;
          }
          mascots = {
            open: Settings.mascots,
            hyphenatedTitle: 'mascots'
          };
          return Settings.openSection.apply(mascots, ['restore']);
        });
      } else {
        container = $.el("div", {
          className: "mascots"
        });
        for (_k = 0, _len2 = keys.length; _k < _len2; _k++) {
          name = keys[_k];
          if (!(__indexOf.call(Conf["Deleted Mascots"], name) >= 0)) {
            continue;
          }
          mascot = Mascots[name];
          mascotEl = $.el('div', {
            className: 'mascot',
            id: name,
            innerHTML: "<div class='mascotname'>" + (name.replace(/_/g, " ")) + "</span> <div class='mascotcontainer " + mascot.category + " " + (mascot.silhouette ? 'silhouette' : '') + "'><img class=mascotimg src='" + mascot.image + "'></div>"
          });
          $.on(mascotEl, 'click', cb.restore);
          $.add(container, mascotEl);
        }
        $.add(suboptions, container);
        batchmascots = $.el('div', {
          id: "mascots_batch",
          innerHTML: "<a href=\"javascript:;\" id=\"return\">Return</a>"
        });
        $.on($('#return', batchmascots), 'click', function() {
          var mascots;
          mascots = {
            open: Settings.mascots,
            hyphenatedTitle: 'mascots'
          };
          return Settings.openSection.apply(mascots);
        });
      }
      _ref1 = [suboptions, batchmascots, mascotHide];
      for (_l = 0, _len3 = _ref1.length; _l < _len3; _l++) {
        node = _ref1[_l];
        Rice.nodes(node);
      }
      return $.add(section, [suboptions, batchmascots, mascotHide]);
    },
    cb: {
      style: {
        checked: function() {
          var hyphenated, _ref;
          $.cb.checked.call(this);
          if ((_ref = this.name) === 'NSFW/SFW Themes' || _ref === 'NSFW/SFW Mascots') {
            return;
          }
          hyphenated = this.name.toLowerCase().replace(/^4/, 'four').replace(/\s+/g, '-');
          return (this.checked ? $.addClass : $.rmClass)(doc, hyphenated);
        },
        value: function() {
          $.cb.value.call(this);
          return Style.sheets.dynamic.textContent = Style.dynamic();
        },
        select: function() {
          var hyphenated, option, _i, _len, _ref;
          $.cb.value.call(this);
          _ref = this.options;
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            option = _ref[_i];
            hyphenated = ("" + this.name + " " + option.value).toLowerCase().replace(/^4/, 'four').replace(/\s+/g, '-');
            (option.value === this.value ? $.addClass : $.rmClass)(doc, hyphenated);
          }
        }
      },
      mascot: {
        category: function() {
          var cb, i, name, setting, type, _i, _len, _ref;
          if ($.id(this.name).hidden = this.checked) {
            Conf["Hidden Categories"].push(this.name);
            _ref = ["Enabled Mascots", "Enabled Mascots sfw", "Enabled Mascots nsfw"];
            for (_i = 0, _len = _ref.length; _i < _len; _i++) {
              type = _ref[_i];
              setting = Conf[type];
              i = setting.length;
              while (i--) {
                name = setting[i];
                if (Mascots[name].category !== this.name) {
                  continue;
                }
                setting.splice(i, 1);
                if (type !== g.MASCOTSTRING) {
                  continue;
                }
                $.rmClass($.id(name), 'enabled');
                if (Conf['mascot'] === name) {
                  cb = MascotTools.toggle;
                }
              }
              $.set(type, setting);
            }
          } else {
            $.remove(Conf["Hidden Categories"], this.name);
          }
          $.set("Hidden Categories", Conf["Hidden Categories"]);
          if (cb) {
            return cb();
          }
        },
        edit: function(e) {
          e.stopPropagation();
          MascotTools.dialog(this.parentElement.parentElement.id);
          return Settings.close();
        },
        "delete": function(e) {
          var name, type, _i, _len, _ref;
          e.stopPropagation();
          name = this.parentElement.parentElement.id;
          if (confirm("Are you sure you want to delete \"" + name + "\"?")) {
            if (Conf['mascot'] === name) {
              MascotTools.toggle();
            }
            _ref = ["Enabled Mascots", "Enabled Mascots sfw", "Enabled Mascots nsfw"];
            for (_i = 0, _len = _ref.length; _i < _len; _i++) {
              type = _ref[_i];
              $.remove(Conf[type], name);
              $.set(type, Conf[type]);
            }
            Conf["Deleted Mascots"].push(name);
            $.set("Deleted Mascots", Conf["Deleted Mascots"]);
            return $.rm($.id(name));
          }
        },
        "export": function(e) {
          var a, data, name;
          e.stopPropagation();
          name = this.parentElement.parentElement.id;
          data = Mascots[name];
          data['Mascot'] = name;
          a = $.el('a', {
            className: 'export-button',
            textContent: 'Save me!',
            download: "" + name + "-" + (Date.now()) + ".json",
            href: "data:application/json;base64," + (btoa(unescape(encodeURIComponent(JSON.stringify(data, null, 2))))),
            target: '_blank'
          });
          $.on(a, 'click', function(e) {
            return e.stopPropagation();
          });
          return $.add(this.parentElement.parentElement, a);
        },
        restore: function() {
          if (confirm("Are you sure you want to restore \"" + this.id + "\"?")) {
            $.remove(Conf["Deleted Mascots"], this.id);
            $.set("Deleted Mascots", Conf["Deleted Mascots"]);
            return $.rm(this);
          }
        },
        select: function() {
          var string;
          string = g.MASCOTSTRING;
          if ($.remove(Conf[string], this.id)) {
            if (Conf['mascot'] === this.id) {
              MascotTools.toggle();
            }
          } else {
            Conf['mascot'] = this.id;
            Conf[string].push(this.id);
            MascotTools.change(Mascots[this.id]);
          }
          $.toggleClass(this, 'enabled');
          $.set(string, Conf[string]);
          return $.set(string, Conf[string]);
        }
      },
      theme: {
        select: function() {
          var current;
          if (current = $.id(Conf[g.THEMESTRING])) {
            $.rmClass(current, 'selectedtheme');
          }
          $.set(g.THEMESTRING, Conf[g.THEMESTRING] = this.id);
          $.addClass(this, 'selectedtheme');
          return Style.setTheme(Themes[this.id]);
        },
        edit: function(e) {
          e.preventDefault();
          e.stopPropagation();
          ThemeTools.init(this.name);
          return Settings.close();
        },
        "export": function(e) {
          var a, data;
          e.preventDefault();
          e.stopPropagation();
          data = Themes[this.name];
          data['Theme'] = this.name;
          a = $.el('a', {
            textContent: '>>Save me!',
            download: "" + this.name + "-" + (Date.now()) + ".json",
            href: "data:application/json;base64," + (btoa(unescape(encodeURIComponent(JSON.stringify(data, null, 2))))),
            target: '_blank'
          });
          $.on(a, 'click', function(e) {
            return e.stopPropagation();
          });
          return $.replace(this, a);
        },
        "delete": function(e) {
          var container, settheme;
          e.preventDefault();
          e.stopPropagation();
          container = $.id(this.name);
          if (!(container.previousSibling || container.nextSibling)) {
            alert("Cannot delete theme (No other themes available).");
            return;
          }
          if (confirm("Are you sure you want to delete \"" + this.name + "\"?")) {
            if (this.name === Conf[g.THEMESTRING]) {
              if (settheme = container.previousSibling || container.nextSibling) {
                Conf[g.THEMESTRING] = settheme.id;
                $.addClass(settheme, 'selectedtheme');
                $.set(g.THEMESTRING, Conf[g.THEMESTRING]);
              }
            }
            Themes[this.name]["Deleted"] = true;
            return $.get("userThemes", {}, (function(_this) {
              return function(_arg) {
                var userThemes;
                userThemes = _arg.userThemes;
                userThemes[_this.name] = Themes[_this.name];
                $.set('userThemes', userThemes);
                return $.rm(container);
              };
            })(this));
          }
        },
        restore: function() {
          if (confirm("Are you sure you want to restore \"" + this.id + "\"?")) {
            Themes[this.id]["Deleted"] = false;
            return $.get("userThemes", {}, (function(_this) {
              return function(_arg) {
                var userThemes;
                userThemes = _arg.userThemes;
                userThemes[_this.id] = Themes[_this.id];
                $.set('userThemes', userThemes);
                return $.rm(_this);
              };
            })(this));
          }
        }
      }
    }
  };

  Main = {
    init: function() {
      var db, flatten, pathname, _i, _len, _ref, _ref1;
      g.threads = new SimpleDict;
      g.posts = new SimpleDict;
      pathname = location.pathname.split('/');
      g.BOARD = new Board(pathname[1]);
      if ((_ref = g.BOARD.ID) === 'z' || _ref === 'fk') {
        return;
      }
      g.VIEW = (function() {
        switch (pathname[2]) {
          case 'res':
          case 'thread':
            return 'thread';
          case 'catalog':
            return 'catalog';
          default:
            return 'index';
        }
      })();
      if (g.VIEW === 'catalog') {
        return Index.catalogSwitch();
      }
      if (g.VIEW === 'thread') {
        g.THREADID = +pathname[3];
        if (pathname[4] != null) {
          g.SLUG = pathname[4];
        }
        if (pathname[2] !== 'thread') {
          pathname[2] = 'thread';
          history.replaceState(null, '', pathname.slice(0, 4).join('/') + location.hash);
        }
      }
      flatten = function(parent, obj) {
        var key, val;
        if (obj instanceof Array) {
          Conf[parent] = obj[0];
        } else if (typeof obj === 'object') {
          for (key in obj) {
            val = obj[key];
            flatten(key, val);
          }
        } else {
          Conf[parent] = obj;
        }
      };
      flatten(null, Config);
      _ref1 = DataBoard.keys;
      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
        db = _ref1[_i];
        Conf[db] = {
          boards: {}
        };
      }
      $.extend(Conf, {
        'Enabled Mascots': [],
        'Enabled Mascots sfw': [],
        'Enabled Mascots nsfw': [],
        'Deleted Mascots': [],
        'Hidden Categories': ["Custom", "Questionable"],
        'userThemes': {},
        'userMascots': {},
        'selectedArchives': {},
        'CachedTitles': {}
      });
      return $.get(Conf, function(items) {
        $.extend(Conf, items);
        return $.asap((function() {
          return Favicon.el = $('link[rel="shortcut icon"]', d.head);
        }), Main.initFeatures);
      });
    },
    initFeatures: function() {
      var href, init, _ref;
      Favicon.el.type = 'image/x-icon';
      href = Favicon.el.href;
      Favicon.SFW = /ws\.ico$/.test(href);
      Favicon["default"] = href;
      g.TYPE = Favicon.SFW ? 'sfw' : 'nsfw';
      $.extend(Themes, Conf["userThemes"]);
      $.extend(Mascots, Conf["userMascots"]);
      if ((_ref = g.BOARD.ID) === 'z' || _ref === 'fk') {
        return Style.init();
      }
      Main.setThemeString();
      Main.setMascotString();
      switch (location.hostname) {
        case '4chan.org':
        case 'www.4chan.org':
          g.TYPE = 'sfw';
          g.VIEW = 'home';
          Main.setThemeString();
          Style.init();
          return;
        case 'sys.4chan.org':
          g.VIEW = 'report';
          Style.init();
          Report.init();
          return;
        case 'i.4cdn.org':
          $.ready(function() {
            var URL, pathname, video, _ref1;
            if (Conf['404 Redirect'] && ((_ref1 = d.title) === '4chan - Temporarily Offline' || _ref1 === '4chan - 404 Not Found')) {
              Redirect.init();
              pathname = location.pathname.split('/');
              URL = Redirect.to('file', {
                boardID: g.BOARD.ID,
                filename: pathname[pathname.length - 1]
              });
              if (URL) {
                return location.replace(URL);
              }
            } else if (Conf['Loop in New Tab'] && (video = $('video'))) {
              Video.configure(video);
              if (!video.controls) {
                return $.on(video, 'click', function() {
                  if (video.paused) {
                    return video.play();
                  } else {
                    return video.pause();
                  }
                });
              }
            }
          });
          return;
      }
      init = function(name, feature) {
        var err;
        try {
          return feature.init();
        } catch (_error) {
          err = _error;
          return Main.handleErrors({
            message: "\"" + name + "\" initialization crashed.",
            error: err
          });
        }
      };
      init('Style', Style);
      init('Mascots', MascotTools);
      init('Rice', Rice);
      init('Announcements', GlobalMessage);
      init('Polyfill', Polyfill);
      init('Redirect', Redirect);
      init('Header', Header);
      init('Catalog Links', CatalogLinks);
      init('Settings', Settings);
      init('Index Generator', Index);
      init('Announcement Hiding', PSAHiding);
      init('Fourchan thingies', Fourchan);
      init('Color User IDs', IDColor);
      init('Custom CSS', CustomCSS);
      init('Linkify', Linkify);
      init('Reveal Spoilers', RemoveSpoilers);
      init('Resurrect Quotes', Quotify);
      init('Filter', Filter);
      init('Reply Hiding Buttons', PostHiding);
      init('Recursive', Recursive);
      init('Strike-through Quotes', QuoteStrikeThrough);
      init('Quick Reply', QR);
      init('Menu', Menu);
      init('Report Link', ReportLink);
      init('Reply Hiding (Menu)', PostHiding.menu);
      init('Delete Link', DeleteLink);
      init('Filter (Menu)', Filter.menu);
      init('Download Link', DownloadLink);
      init('Archive Link', ArchiveLink);
      init('Quote Inlining', QuoteInline);
      init('Quote Previewing', QuotePreview);
      init('Quote Backlinks', QuoteBacklink);
      init('Quote Markers', QuoteMarkers);
      init('Anonymize', Anonymize);
      init('Time Formatting', Time);
      init('Relative Post Dates', RelativeDates);
      init('File Info Formatting', FileInfo);
      init('Fappe Tyme', FappeTyme);
      init('Gallery', Gallery);
      init('Gallery (menu)', Gallery.menu);
      init('Sauce', Sauce);
      init('Image Expansion', ImageExpand);
      init('Image Expansion (Menu)', ImageExpand.menu);
      init('Reveal Spoiler Thumbnails', RevealSpoilers);
      init('Image Loading', ImageLoader);
      init('Image Hover', ImageHover);
      init('Thread Expansion', ExpandThread);
      init('Comment Expansion', ExpandComment);
      init('Thread Excerpt', ThreadExcerpt);
      init('Favicon', Favicon);
      init('Unread', Unread);
      init('Quote Threading', QuoteThreading);
      init('Thread Stats', ThreadStats);
      init('Thread Updater', ThreadUpdater);
      init('Thread Watcher', ThreadWatcher);
      init('Thread Watcher (Menu)', ThreadWatcher.menu);
      init('Index Navigation', Nav);
      init('Keybinds', Keybinds);
      init('Show Dice Roll', Dice);
      init('Banner', Banner);
      init('Navigate', Navigate);
      init('Flash Features', Flash);
      return $.ready(Main.initReady);
    },
    initReady: function() {
      var GMver, err, href, i, passLink, styleSelector, test, v, _i, _len, _ref, _ref1;
      if ((_ref = d.title) === '4chan - Temporarily Offline' || _ref === '4chan - 404 Not Found') {
        if (Conf['404 Redirect'] && g.VIEW === 'thread') {
          href = Redirect.to('thread', {
            boardID: g.BOARD.ID,
            threadID: g.THREADID,
            postID: +location.hash.match(/\d+/)
          });
          location.replace(href || ("/" + g.BOARD + "/"));
        }
        return;
      }
      if (styleSelector = $.id('styleSelector')) {
        passLink = $.el('a', {
          textContent: '4chan Pass',
          href: 'javascript:;'
        });
        $.on(passLink, 'click', function() {
          return window.open('//sys.4chan.org/auth', 'This will steal your data.', 'left=0,top=0,width=500,height=255,toolbar=0,resizable=0');
        });
        $.before(styleSelector.previousSibling, [$.tn('['), passLink, $.tn(']\u00A0\u00A0')]);
        $('link[href*="mobile"]', d.head).disabled = true;
      }
      if (!Conf['JSON Navigation'] || g.VIEW === 'thread') {
        Main.initThread();
      }
      $.add(d.head, $.el('link', {
        href: "//s.4cdn.org/css/flags.556.css",
        rel: "stylesheet"
      }));
      $.event('4chanXInitFinished');
      test = $.el('span');
      test.classList.add('a', 'b');
      if (test.className !== 'a b' && Conf['Show Support Message']) {
        new Notice('warning', "Your version of Firefox is outdated (v26 minimum) and appchan x may not operate correctly.", 30);
      }
      GMver = GM_info.version.split('.');
      _ref1 = "1.14".split('.');
      for (i = _i = 0, _len = _ref1.length; _i < _len; i = ++_i) {
        v = _ref1[i];
        if (v === GMver[i]) {
          continue;
        }
        (v < GMver[i]) || new Notice('warning', "Your version of Greasemonkey is outdated (v" + GM_info.version + " instead of v1.14 minimum) and appchan x may not operate correctly.", 30);
        break;
      }
      try {
        return localStorage.getItem('4chan-settings');
      } catch (_error) {
        err = _error;
        return new Notice('warning', 'Cookies need to be enabled on 4chan for appchan x to operate properly.', 30);
      }
    },
    initThread: function() {
      var board, err, errors, postRoot, posts, thread, threadRoot, threads, _i, _j, _len, _len1, _ref, _ref1;
      if (board = $('.board')) {
        threads = [];
        posts = [];
        _ref = $$('.board > .thread', board);
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          threadRoot = _ref[_i];
          thread = new Thread(+threadRoot.id.slice(1), g.BOARD);
          threads.push(thread);
          _ref1 = $$('.thread > .postContainer', threadRoot);
          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
            postRoot = _ref1[_j];
            try {
              posts.push(new Post(postRoot, thread, g.BOARD));
            } catch (_error) {
              err = _error;
              if (!errors) {
                errors = [];
              }
              errors.push({
                message: "Parsing of Post No." + (postRoot.id.match(/\d+/)) + " failed. Post will be skipped.",
                error: err
              });
            }
          }
        }
        if (errors) {
          Main.handleErrors(errors);
        }
        Thread.callbacks.execute(threads);
        Post.callbacks.execute(posts);
      }
      return $.get('previousversion', null, function(_arg) {
        var changelog, el, previousversion;
        previousversion = _arg.previousversion;
        if (previousversion === g.VERSION) {
          return;
        }
        if (previousversion) {
          changelog = 'https://github.com/zixaphir/appchan-x/blob/master/CHANGELOG.md';
          el = $.el('span', {
            innerHTML: "appchan x has been updated to <a href='" + changelog + "' target=_blank>version " + g.VERSION + "</a>."
          });
          new Notice('info', el, 15);
        } else {
          Settings.open();
        }
        return $.set('previousversion', g.VERSION);
      });
    },
    handleErrors: function(errors) {
      var div, error, logs, _i, _len;
      if (!(errors instanceof Array)) {
        error = errors;
      } else if (errors.length === 1) {
        error = errors[0];
      }
      if (error) {
        new Notice('error', Main.parseError(error), 15);
        return;
      }
      div = $.el('div', {
        innerHTML: "" + errors.length + " errors occurred. [<a href=javascript:;>show</a>]"
      });
      $.on(div.lastElementChild, 'click', function() {
        var _ref;
        return _ref = this.textContent === 'show' ? ['hide', false] : ['show', true], this.textContent = _ref[0], logs.hidden = _ref[1], _ref;
      });
      logs = $.el('div', {
        hidden: true
      });
      for (_i = 0, _len = errors.length; _i < _len; _i++) {
        error = errors[_i];
        $.add(logs, Main.parseError(error));
      }
      return new Notice('error', [div, logs], 30);
    },
    parseError: function(data) {
      var error, message;
      c.error(data.message, data.error.stack);
      message = $.el('div', {
        textContent: data.message
      });
      error = $.el('div', {
        textContent: data.error
      });
      return [message, error];
    },
    isThisPageLegit: function() {
      var _ref;
      if (!('thisPageIsLegit' in Main)) {
        Main.thisPageIsLegit = location.hostname === 'boards.4chan.org' && !$('link[href*="favicon-status.ico"]', d.head) && ((_ref = d.title) !== '4chan - Temporarily Offline' && _ref !== '4chan - Error' && _ref !== '504 Gateway Time-out');
      }
      return Main.thisPageIsLegit;
    },
    setMascotString: function() {
      var type;
      type = "Enabled Mascots";
      if (Conf["NSFW/SFW Mascots"]) {
        type += " " + g.TYPE;
      }
      return g.MASCOTSTRING = type;
    },
    setThemeString: function() {
      var type;
      type = "theme";
      if (Conf["NSFW/SFW Themes"]) {
        type += "_" + g.TYPE;
      }
      return g.THEMESTRING = type;
    }
  };

  Main.init();

}).call(this);
